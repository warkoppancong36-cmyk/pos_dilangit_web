import{d as he,r as _,V as q,D as Ce,c as b,b as e,g as z,l as S,f as a,o as m,e as s,s as o,X as p,a0 as u,m as i,t as n,av as Ae,aw as we,F as ze,i as Se,v as Te,$ as D}from"./main-CXIqLbCW.js";import{u as $e}from"./useAssetsTest-Bm32Mg0X.js";import{V as v,b as T,c as G}from"./VCard-BhRwpvwJ.js";import{V as $,a as c}from"./VRow-dwXn6nJG.js";import{V as Pe}from"./VDialog-BTTkqOUy.js";import{V as g}from"./VCardText-_9OayIFn.js";import{V}from"./VChip-CssNH5Oa.js";import{V as J}from"./VAlert-BRYG67lA.js";import{V as w}from"./VAvatar-FS82Gn65.js";import{V as Ue}from"./VTextField-CaLUHH_k.js";import{V as L}from"./VSelect-eZTLj97C.js";import{a as F}from"./VList-D1Fo_w26.js";import{V as P}from"./VDivider-CNSSiFqS.js";import{V as Ie}from"./VCheckbox-BtB7zMO4.js";import{V as Me,a as Be}from"./VDataTable-BqCmKLc9.js";import{V as De}from"./VSpacer-n2QvdcM0.js";import{_ as Le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./auth-a9M5ekjn.js";import"./VImg-DqJ943ne.js";/* empty css              */import"./VOverlay-nrd9aKYp.js";import"./forwardRefs-B931MWyl.js";import"./VMenu-DxJRxPvP.js";import"./VCheckboxBtn-CYuBx3iM.js";import"./VTable-DcQB11Im.js";import"./filter-C7wo6B37.js";const Fe={class:"text-h4 font-weight-bold mb-2"},Ee={class:"d-flex gap-3"},He={class:"text-h4 font-weight-bold"},Ke={class:"text-h4 font-weight-bold"},je={class:"text-h4 font-weight-bold"},Ne={class:"text-h4 font-weight-bold"},Re={class:"d-flex gap-2"},Oe={class:"d-flex justify-space-between align-center"},Qe={class:"d-flex gap-2"},Xe={key:0,class:"text-center pa-12"},qe={key:1,class:"text-center pa-12"},Ge={class:"text-body-1 text-medium-emphasis mb-6"},Je={key:2},We={key:0,class:"pa-6"},Ye={class:"d-flex justify-space-between align-start mb-3"},Ze={class:"mb-3"},et={class:"text-subtitle-1 font-weight-bold mb-1"},tt={class:"text-body-2 text-medium-emphasis"},at={class:"text-body-2 space-y-1"},lt={class:"d-flex align-center mb-1"},st={class:"d-flex align-center mb-1"},ot={class:"d-flex align-center mb-1"},it={key:1},nt={class:"font-weight-bold"},rt={class:"text-caption text-medium-emphasis"},dt={class:"d-flex gap-1"},ut={key:2,class:"pa-6 border-t"},ct={class:"d-flex justify-space-between align-center"},mt={class:"text-body-2 text-medium-emphasis"},pt={class:"mb-4"},ft=he({__name:"assets-new",setup(vt){const{assets:C,loading:x,error:E,pagination:k,filters:y,hasAssets:H,isEmpty:W,activeAssets:Y,maintenanceAssets:Z,fetchAssets:U,searchAssets:ee,filterAssets:te,deleteAsset:ae,bulkDeleteAssets:le,resetFilters:se,getCategories:oe,getLocations:ie}=$e(),h=_(""),I=_("grid"),d=_([]),M=_(!1),ne=_(!1),A=_(!1),re=_(null),de=_(null),K=_([]),j=_([]),ue=[{title:"Asset",value:"name",sortable:!0},{title:"Kategori",value:"category",sortable:!0},{title:"Lokasi",value:"location",sortable:!0},{title:"Status",value:"status",sortable:!0},{title:"Kondisi",value:"condition",sortable:!0},{title:"Harga",value:"purchase_price",sortable:!0},{title:"Aksi",value:"actions",sortable:!1}],ce=q(()=>C.value.reduce((r,t)=>r+(t.purchase_price||0),0)),me=q(()=>"http://localhost:8000/api"),pe=async()=>{try{console.log("Testing API connection...");const t=await(await fetch("http://localhost:8000/api/test")).json();console.log("API test response:",t),alert("API connection successful! Check console for details.")}catch(r){console.error("API connection failed:",r),alert("API connection failed! Check console for details.")}},N=r=>{switch(r){case"active":return"success";case"inactive":return"secondary";case"maintenance":return"warning";case"disposed":return"error";default:return"primary"}},fe=r=>{switch(r){case"excellent":return"success";case"good":return"info";case"fair":return"warning";case"poor":return"orange";case"damaged":return"error";default:return"secondary"}};let R;const ve=()=>{clearTimeout(R),R=setTimeout(()=>{ee(h.value)},300)},B=()=>{te(y.value)},_e=()=>{h.value="",se()},ge=r=>{const t=d.value.indexOf(r);t>-1?d.value.splice(t,1):d.value.push(r)},be=()=>{d.value=[]},O=r=>{re.value=r,ne.value=!0},Q=r=>{de.value=r,M.value=!0},X=async r=>{if(confirm(`Apakah Anda yakin ingin menghapus ${r.name}?`))try{await ae(r.id),d.value=d.value.filter(t=>t!==r.id)}catch(t){console.error("Error deleting asset:",t)}},ye=async()=>{try{await le(d.value),d.value=[],A.value=!1}catch(r){console.error("Error bulk deleting assets:",r)}},Ve=()=>{console.log("Bulk update status for:",d.value)},xe=()=>{U()},ke=async()=>{try{const[r,t]=await Promise.all([oe(),ie()]);K.value=r||[],j.value=t||[]}catch(r){console.error("Error loading filter options:",r)}};return Ce(async()=>{await Promise.all([U(),ke()])}),(r,t)=>(m(),b("div",null,[e(v,{class:"mb-6"},{default:a(()=>[e(T,{class:"d-flex justify-space-between align-center pa-6"},{default:a(()=>[s("div",null,[s("h1",Fe,[e(p,{icon:"tabler-building-store",class:"me-3 text-primary"}),t[13]||(t[13]=o(" Asset Management "))]),t[14]||(t[14]=s("p",{class:"text-subtitle-1 text-medium-emphasis"}," Kelola aset fisik restoran, peralatan dapur, dan inventaris ",-1))]),s("div",Ee,[e(u,{color:"primary","prepend-icon":"tabler-plus",onClick:t[0]||(t[0]=l=>M.value=!0)},{default:a(()=>t[15]||(t[15]=[o(" Tambah Asset ")])),_:1,__:[15]}),e(u,{variant:"outlined",color:"secondary","prepend-icon":"tabler-refresh",loading:i(x),onClick:xe},{default:a(()=>t[16]||(t[16]=[o(" Refresh ")])),_:1,__:[16]},8,["loading"])])]),_:1})]),_:1}),e(v,{class:"mb-6",color:"orange-lighten-5"},{default:a(()=>[e(T,{class:"text-h6 text-orange-darken-2"},{default:a(()=>[e(p,{icon:"tabler-bug",class:"me-2"}),t[17]||(t[17]=o(" Debug Information "))]),_:1,__:[17]}),e(g,null,{default:a(()=>[e($,null,{default:a(()=>[e(c,{cols:"12",md:"3"},{default:a(()=>[e(V,{color:i(x)?"warning":"success",variant:"outlined"},{default:a(()=>[o(" Status: "+n(i(x)?"Loading...":"Ready"),1)]),_:1},8,["color"])]),_:1}),e(c,{cols:"12",md:"3"},{default:a(()=>[e(V,{color:"info",variant:"outlined"},{default:a(()=>[o(" Assets: "+n(i(C).length),1)]),_:1})]),_:1}),e(c,{cols:"12",md:"4"},{default:a(()=>[e(V,{color:"secondary",variant:"outlined"},{default:a(()=>[o(" API: "+n(me.value),1)]),_:1})]),_:1}),e(c,{cols:"12",md:"2"},{default:a(()=>[e(u,{size:"small",color:"orange",variant:"outlined",onClick:pe},{default:a(()=>t[18]||(t[18]=[o(" Test API ")])),_:1,__:[18]})]),_:1})]),_:1}),i(E)?(m(),z(J,{key:0,type:"error",class:"mt-3"},{default:a(()=>[o(n(i(E)),1)]),_:1})):S("",!0)]),_:1})]),_:1}),e($,{class:"mb-6"},{default:a(()=>[e(c,{cols:"12",md:"3"},{default:a(()=>[e(v,null,{default:a(()=>[e(g,{class:"text-center pa-6"},{default:a(()=>[e(w,{size:"56",color:"primary",class:"mb-4"},{default:a(()=>[e(p,{icon:"tabler-box",size:"28"})]),_:1}),s("div",He,n(i(C).length),1),t[19]||(t[19]=s("div",{class:"text-subtitle-2 text-medium-emphasis"},"Total Assets",-1))]),_:1,__:[19]})]),_:1})]),_:1}),e(c,{cols:"12",md:"3"},{default:a(()=>[e(v,null,{default:a(()=>[e(g,{class:"text-center pa-6"},{default:a(()=>[e(w,{size:"56",color:"success",class:"mb-4"},{default:a(()=>[e(p,{icon:"tabler-check-circle",size:"28"})]),_:1}),s("div",Ke,n(i(Y).length),1),t[20]||(t[20]=s("div",{class:"text-subtitle-2 text-medium-emphasis"},"Active Assets",-1))]),_:1,__:[20]})]),_:1})]),_:1}),e(c,{cols:"12",md:"3"},{default:a(()=>[e(v,null,{default:a(()=>[e(g,{class:"text-center pa-6"},{default:a(()=>[e(w,{size:"56",color:"warning",class:"mb-4"},{default:a(()=>[e(p,{icon:"tabler-tool",size:"28"})]),_:1}),s("div",je,n(i(Z).length),1),t[21]||(t[21]=s("div",{class:"text-subtitle-2 text-medium-emphasis"},"Maintenance",-1))]),_:1,__:[21]})]),_:1})]),_:1}),e(c,{cols:"12",md:"3"},{default:a(()=>[e(v,null,{default:a(()=>[e(g,{class:"text-center pa-6"},{default:a(()=>[e(w,{size:"56",color:"info",class:"mb-4"},{default:a(()=>[e(p,{icon:"tabler-currency-dollar",size:"28"})]),_:1}),s("div",Ne,"$"+n(ce.value.toLocaleString()),1),t[22]||(t[22]=s("div",{class:"text-subtitle-2 text-medium-emphasis"},"Total Value",-1))]),_:1,__:[22]})]),_:1})]),_:1})]),_:1}),e(v,{class:"mb-6"},{default:a(()=>[e(T,{class:"pa-6 pb-4"},{default:a(()=>[e(p,{icon:"tabler-filter",class:"me-2"}),t[23]||(t[23]=o(" Filter & Pencarian "))]),_:1,__:[23]}),e(g,{class:"pa-6 pt-0"},{default:a(()=>[e($,null,{default:a(()=>[e(c,{cols:"12",md:"4"},{default:a(()=>[e(Ue,{modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=l=>h.value=l),label:"Cari assets...","prepend-inner-icon":"tabler-search",variant:"outlined",density:"compact",clearable:"",onInput:ve},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"2"},{default:a(()=>[e(L,{modelValue:i(y).category,"onUpdate:modelValue":[t[2]||(t[2]=l=>i(y).category=l),B],label:"Kategori",items:K.value,variant:"outlined",density:"compact",clearable:""},{"prepend-item":a(()=>[e(F,{title:"Semua Kategori",value:""}),e(P)]),_:1},8,["modelValue","items"])]),_:1}),e(c,{cols:"12",md:"2"},{default:a(()=>[e(L,{modelValue:i(y).location,"onUpdate:modelValue":[t[3]||(t[3]=l=>i(y).location=l),B],label:"Lokasi",items:j.value,variant:"outlined",density:"compact",clearable:""},{"prepend-item":a(()=>[e(F,{title:"Semua Lokasi",value:""}),e(P)]),_:1},8,["modelValue","items"])]),_:1}),e(c,{cols:"12",md:"2"},{default:a(()=>[e(L,{modelValue:i(y).status,"onUpdate:modelValue":[t[4]||(t[4]=l=>i(y).status=l),B],label:"Status",items:[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"},{title:"Maintenance",value:"maintenance"},{title:"Disposed",value:"disposed"}],variant:"outlined",density:"compact",clearable:""},{"prepend-item":a(()=>[e(F,{title:"Semua Status",value:""}),e(P)]),_:1},8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"2"},{default:a(()=>[s("div",Re,[e(u,{size:"small",variant:"outlined",color:"secondary",onClick:_e},{default:a(()=>t[24]||(t[24]=[o(" Clear ")])),_:1,__:[24]}),e(Ae,{modelValue:I.value,"onUpdate:modelValue":t[5]||(t[5]=l=>I.value=l),variant:"outlined",color:"primary",density:"compact"},{default:a(()=>[e(u,{value:"grid",icon:"tabler-grid-dots"}),e(u,{value:"list",icon:"tabler-list"})]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1})]),_:1}),d.value.length>0?(m(),z(v,{key:0,class:"mb-6",color:"blue-lighten-5"},{default:a(()=>[e(g,{class:"pa-4"},{default:a(()=>[s("div",Oe,[s("div",null,[e(V,{color:"primary",variant:"outlined"},{default:a(()=>[o(n(d.value.length)+" asset"+n(d.value.length!==1?"s":"")+" dipilih ",1)]),_:1})]),s("div",Qe,[e(u,{color:"error",variant:"outlined","prepend-icon":"tabler-trash",onClick:t[6]||(t[6]=l=>A.value=!0)},{default:a(()=>t[25]||(t[25]=[o(" Hapus Terpilih ")])),_:1,__:[25]}),e(u,{color:"primary",variant:"outlined","prepend-icon":"tabler-edit",onClick:Ve},{default:a(()=>t[26]||(t[26]=[o(" Update Status ")])),_:1,__:[26]}),e(u,{variant:"text",onClick:be},{default:a(()=>t[27]||(t[27]=[o(" Clear Selection ")])),_:1,__:[27]})])])]),_:1})]),_:1})):S("",!0),e(v,null,{default:a(()=>[i(x)&&!i(H)?(m(),b("div",Xe,[e(we,{indeterminate:"",color:"primary",size:"64"}),t[28]||(t[28]=s("div",{class:"text-h6 mt-4"},"Memuat assets...",-1))])):i(W)?(m(),b("div",qe,[e(w,{size:"120",color:"grey-lighten-3",class:"mb-6"},{default:a(()=>[e(p,{icon:"tabler-box-off",size:"60",color:"grey-darken-1"})]),_:1}),t[30]||(t[30]=s("h3",{class:"text-h5 font-weight-bold mb-4"},"Tidak ada assets ditemukan",-1)),s("p",Ge,n(h.value?"Tidak ada assets yang sesuai dengan pencarian Anda":"Mulai dengan menambahkan asset fisik restoran pertama"),1),h.value?S("",!0):(m(),z(u,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:t[7]||(t[7]=l=>M.value=!0)},{default:a(()=>t[29]||(t[29]=[o(" Tambah Asset Pertama ")])),_:1,__:[29]}))])):(m(),b("div",Je,[I.value==="grid"?(m(),b("div",We,[e($,null,{default:a(()=>[(m(!0),b(ze,null,Se(i(C),l=>(m(),z(c,{key:l.id,cols:"12",sm:"6",md:"4",lg:"3"},{default:a(()=>[e(v,{class:Te(["asset-card",{selected:d.value.includes(l.id)}]),onClick:f=>O(l),hover:""},{default:a(()=>[e(g,{class:"pa-4"},{default:a(()=>{var f;return[s("div",Ye,[e(V,{color:N(l.status),size:"small",variant:"tonal"},{default:a(()=>[o(n(l.status),1)]),_:2},1032,["color"]),e(Ie,{"model-value":d.value.includes(l.id),onClick:t[8]||(t[8]=D(()=>{},["stop"])),"onUpdate:modelValue":_t=>ge(l.id),density:"compact","hide-details":""},null,8,["model-value","onUpdate:modelValue"])]),s("div",Ze,[s("h4",et,n(l.name),1),s("p",tt,n(l.asset_code),1)]),e(P,{class:"mb-3"}),s("div",at,[s("div",lt,[e(p,{icon:"tabler-category",size:"16",class:"me-2"}),o(" "+n(l.category),1)]),s("div",st,[e(p,{icon:"tabler-map-pin",size:"16",class:"me-2"}),o(" "+n(l.location),1)]),s("div",ot,[e(p,{icon:"tabler-currency-dollar",size:"16",class:"me-2"}),o(" $"+n(((f=l.purchase_price)==null?void 0:f.toLocaleString())||"0"),1)])])]}),_:2},1024),e(G,{class:"pa-4 pt-0"},{default:a(()=>[e(u,{size:"small",variant:"outlined",color:"primary",onClick:D(f=>Q(l),["stop"])},{default:a(()=>t[31]||(t[31]=[o(" Edit ")])),_:2,__:[31]},1032,["onClick"]),e(u,{size:"small",variant:"outlined",color:"error",onClick:D(f=>X(l),["stop"])},{default:a(()=>t[32]||(t[32]=[o(" Hapus ")])),_:2,__:[32]},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class","onClick"])]),_:2},1024))),128))]),_:1})])):(m(),b("div",it,[e(Me,{headers:ue,items:i(C),loading:i(x),"item-value":"id",class:"elevation-0","show-select":"",modelValue:d.value,"onUpdate:modelValue":t[9]||(t[9]=l=>d.value=l)},{"item.name":a(({item:l})=>[s("div",null,[s("div",nt,n(l.name),1),s("div",rt,n(l.asset_code),1)])]),"item.status":a(({item:l})=>[e(V,{color:N(l.status),size:"small",variant:"tonal"},{default:a(()=>[o(n(l.status),1)]),_:2},1032,["color"])]),"item.condition":a(({item:l})=>[e(V,{color:fe(l.condition),size:"small",variant:"outlined"},{default:a(()=>[o(n(l.condition),1)]),_:2},1032,["color"])]),"item.purchase_price":a(({item:l})=>{var f;return[o(" $"+n(((f=l.purchase_price)==null?void 0:f.toLocaleString())||"0"),1)]}),"item.actions":a(({item:l})=>[s("div",dt,[e(u,{size:"small",icon:"tabler-eye",variant:"text",onClick:f=>O(l)},null,8,["onClick"]),e(u,{size:"small",icon:"tabler-edit",variant:"text",color:"primary",onClick:f=>Q(l)},null,8,["onClick"]),e(u,{size:"small",icon:"tabler-trash",variant:"text",color:"error",onClick:f=>X(l)},null,8,["onClick"])])]),_:1},8,["items","loading","modelValue"])])),i(H)?(m(),b("div",ut,[s("div",ct,[s("div",mt," Menampilkan "+n(i(k).from)+" sampai "+n(i(k).to)+" dari "+n(i(k).total)+" hasil ",1),e(Be,{modelValue:i(k).current_page,"onUpdate:modelValue":[t[10]||(t[10]=l=>i(k).current_page=l),i(U)],length:i(k).last_page,"total-visible":5},null,8,["modelValue","length","onUpdate:modelValue"])])])):S("",!0)]))]),_:1}),e(Pe,{modelValue:A.value,"onUpdate:modelValue":t[12]||(t[12]=l=>A.value=l),"max-width":"500"},{default:a(()=>[e(v,null,{default:a(()=>[e(T,{class:"text-h5"},{default:a(()=>[e(p,{icon:"tabler-alert-triangle",class:"me-2 text-warning"}),t[33]||(t[33]=o(" Konfirmasi Hapus Massal "))]),_:1,__:[33]}),e(g,null,{default:a(()=>[s("p",pt,[t[34]||(t[34]=o(" Apakah Anda yakin ingin menghapus ")),s("strong",null,n(d.value.length),1),o(" asset"+n(d.value.length!==1?"s":"")+" yang dipilih? ",1)]),e(J,{type:"warning",variant:"tonal",class:"mb-0"},{default:a(()=>t[35]||(t[35]=[o(" Tindakan ini tidak dapat dibatalkan! ")])),_:1,__:[35]})]),_:1}),e(G,null,{default:a(()=>[e(De),e(u,{variant:"text",onClick:t[11]||(t[11]=l=>A.value=!1)},{default:a(()=>t[36]||(t[36]=[o(" Batal ")])),_:1,__:[36]}),e(u,{color:"error",loading:i(x),onClick:ye},{default:a(()=>t[37]||(t[37]=[o(" Hapus ")])),_:1,__:[37]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),Nt=Le(ft,[["__scopeId","data-v-e83a0034"]]);export{Nt as default};

import{d as Ke,r as w,D as qe,c as p,e as r,b as e,m as Ge,a1 as ne,f as a,ax as Ye,g as L,l as K,X as y,au as q,av as Qe,j as Xe,o as m,s as h,t as i,F as H,i as z,as as ie,a5 as We,_ as Ze}from"./main-C_SCc1yf.js";import{C as et}from"./auto-Cz6uSJnr.js";import{V as g,b as S}from"./VCard-Do7E5uqW.js";import{V as D,a as v}from"./VRow-Br2GaZuM.js";import{V as f}from"./VCardText-D0bWsETV.js";import{V as xe}from"./VSelect-96nYE05O.js";import{V as Z}from"./VTextField-BU2G8SkR.js";import{V as G}from"./VChip-C7K2t_fI.js";import{V as tt}from"./VDivider-DXznysjb.js";import{V as de}from"./VDataTable-D35vW6K3.js";import{b as be}from"./route-block-B_A1xBdJ.js";import"./VAvatar-BqWHonHK.js";import"./VImg-DvBqcioA.js";/* empty css              */import"./forwardRefs-B931MWyl.js";import"./VList-C16c7B3H.js";import"./VOverlay-4FgbmUGq.js";import"./VMenu-Dte3YiTu.js";import"./VCheckboxBtn-DPXg8ymT.js";import"./VTable-Cnwlzp2d.js";import"./filter-BJXqPKf8.js";const at={class:"sales-report-page"},st={class:"d-flex flex-column flex-md-row justify-space-between align-start align-md-center mb-6 ga-4"},ot={class:"d-flex align-center mb-2"},lt={key:0,class:"text-center py-8"},rt={key:1},nt={class:"text-h5 font-weight-bold text-purple"},it={class:"text-caption text-medium-emphasis mt-1"},dt={class:"text-h5 font-weight-bold text-indigo"},ut={class:"text-caption text-medium-emphasis mt-1"},ct={key:0},mt={class:"d-flex align-center"},_t={class:"text-body-2"},pt={class:"text-end"},vt={class:"text-body-2 font-weight-bold"},yt={class:"text-caption text-medium-emphasis"},ht={key:1,class:"text-center py-4"},gt={key:0},ft={class:"d-flex align-center"},xt={class:"text-body-2 text-capitalize"},bt={class:"text-end"},wt={class:"text-body-2 font-weight-bold"},kt={class:"text-caption text-medium-emphasis"},Tt={key:1,class:"text-center py-4"},At={class:"text-h5 font-weight-bold text-success"},St={key:0,class:"mt-1"},Dt={class:"text-h5 font-weight-bold text-primary"},Pt={class:"text-caption text-medium-emphasis mt-1"},Rt={class:"text-h5 font-weight-bold text-info"},Ct={class:"text-caption text-medium-emphasis mt-1"},It={class:"text-h5 font-weight-bold text-warning"},Ot={class:"text-caption text-medium-emphasis mt-1"},Vt={key:0},Et={key:1,class:"text-center py-8"},Nt={class:"top-products-container"},Mt={class:"d-flex justify-space-between align-center"},Ft={class:"d-flex align-center"},jt={class:"font-weight-medium"},Lt={class:"text-caption text-medium-emphasis"},$t={class:"text-end"},Ht={class:"font-weight-bold text-success"},zt={class:"font-weight-bold text-success"},Bt={class:"font-weight-bold text-success"},Jt={key:0},Ut={class:"d-flex justify-space-between align-center"},Kt={class:"d-flex align-center gap-2"},qt={class:"font-weight-medium"},Gt={class:"text-end"},Yt={class:"text-body-2 font-weight-bold"},Qt={class:"text-caption text-success"},Xt={key:1,class:"text-center py-4"},Wt={key:0},Zt={class:"d-flex justify-space-between align-center mb-1"},ea={class:"d-flex align-center gap-2"},ta={class:"font-weight-medium"},aa={class:"text-end"},sa={class:"d-flex justify-space-between align-center"},oa={class:"text-body-2"},la={class:"text-body-2 font-weight-bold text-success"},ra={key:1,class:"text-center py-4"},na={class:"text-center"},ia={class:"text-h6 font-weight-bold text-primary"},da={class:"text-caption text-medium-emphasis mb-1"},ua={class:"text-body-2 font-weight-medium text-success"},ca={class:"d-flex align-center gap-2"},ma={class:"font-weight-medium"},_a={class:"font-weight-bold"},pa={class:"font-weight-bold text-success"},va={class:"text-body-2"},ya={key:2,class:"text-center py-12"},we=Ke({__name:"sales",setup(ha){const ke=Xe(),V=w(!1),ee=w(!1),s=w(null),Y=w({total_sales:0,total_orders:0,avg_order_value:0}),B=w([]),J=w([]),C=w("month"),P=w(""),E=w(""),N=w(""),I=w(""),O=w(""),te=w();let ae=null;const Te=[{title:"Filter per Bulan",value:"month"},{title:"Custom Range",value:"custom"}],k=new Date().getFullYear(),Ae=[{title:"Januari",value:`${k}-01`},{title:"Februari",value:`${k}-02`},{title:"Maret",value:`${k}-03`},{title:"April",value:`${k}-04`},{title:"Mei",value:`${k}-05`},{title:"Juni",value:`${k}-06`},{title:"Juli",value:`${k}-07`},{title:"Agustus",value:`${k}-08`},{title:"September",value:`${k}-09`},{title:"Oktober",value:`${k}-10`},{title:"November",value:`${k}-11`},{title:"Desember",value:`${k}-12`}],Se=[{title:"Customer",key:"name",align:"start"},{title:"Total Order",key:"orders",align:"center"},{title:"Total Belanja",key:"revenue",align:"end"},{title:"AOV",key:"avg_order",align:"end"}],De=[{title:"Tanggal",key:"date",align:"start"},{title:"Pendapatan",key:"total",align:"end"}],Pe=[{title:"Kategori",key:"category",align:"start"},{title:"Order",key:"orders_count",align:"center"},{title:"Qty Terjual",key:"quantity_sold",align:"center"},{title:"Revenue",key:"revenue",align:"end"},{title:"Harga Rata2",key:"avg_price",align:"end"}],b=o=>typeof o=="string"?o.startsWith("Rp")?o:`Rp ${o}`:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(o),se=o=>new Date(o).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),Re=o=>["warning","success","info","secondary","primary"][o]||"primary",ue=o=>o.sort((t,l)=>l.order_count-t.order_count).slice(0,5),Ce=(o,t)=>{const l=Math.max(...t.map(u=>u.order_count));return l>0?o/l*100:0},Ie=(o,t)=>{const l=Math.max(...t.map(u=>u.order_count));return l>0?o/l*100:0},Oe=o=>o>=6&&o<12?"mdi-weather-sunny":o>=12&&o<18?"mdi-weather-partly-cloudy":(o>=18&&o<22,"mdi-weather-night"),ce=o=>{switch(o==null?void 0:o.toLowerCase()){case"cash":case"tunai":return"mdi-cash";case"card":case"kartu":return"mdi-credit-card";case"digital":case"e-wallet":return"mdi-cellphone";case"transfer":return"mdi-bank-transfer";default:return"mdi-credit-card-outline"}},Q=o=>{switch(o==null?void 0:o.toLowerCase()){case"cash":return"Tunai";case"card":return"Kartu";case"digital":return"Digital";case"transfer":return"Transfer";default:return o||"Lainnya"}},Ve=o=>{const t=["#1976D2","#388E3C","#F57C00","#7B1FA2","#D32F2F","#303F9F","#00796B","#F57F17","#5D4037","#616161"];return t[o%t.length]},Ee=o=>{const t=["#2E7D32","#1565C0","#E65100","#6A1B9A","#C62828","#283593","#00695C","#F9A825","#4E342E","#424242"];return t[o%t.length]},Ne=()=>{var l,u,F;if(((u=(l=s.value)==null?void 0:l.summary)==null?void 0:u.daily_average_sales)!==void 0)return s.value.summary.daily_average_sales;if(!((F=s.value)!=null&&F.daily_sales)||!Array.isArray(s.value.daily_sales))return 0;const o=s.value.daily_sales.filter($=>parseFloat($.revenue)>0);return o.length===0?0:o.reduce(($,X)=>$+(parseFloat(X.revenue)||0),0)/o.length},Me=()=>{var o,t,l;return((t=(o=s.value)==null?void 0:o.summary)==null?void 0:t.active_days_count)!==void 0?s.value.summary.active_days_count:!((l=s.value)!=null&&l.daily_sales)||!Array.isArray(s.value.daily_sales)?0:s.value.daily_sales.filter(u=>parseFloat(u.revenue)>0).length},Fe=()=>{if(C.value==="month"){const o=new Date().toISOString().slice(0,7);P.value=o}M()},me=()=>{(I.value&&O.value||!I.value&&!O.value)&&M()},M=async()=>{if(!V.value){V.value=!0;try{let o={};if(C.value==="custom")if(E.value&&N.value)o.start_date=E.value,o.end_date=N.value;else{V.value=!1;return}else if(P.value)o.month=P.value;else{V.value=!1;return}I.value&&O.value&&(o.hour_start=I.value,o.hour_end=O.value);const t=await q.get("/api/reports/sales",{params:o});t.data.success&&(s.value=t.data.data,await _e(),await je(),await Le(),await Qe(),setTimeout(()=>{$e()},100))}catch(o){console.error("Error loading sales report:",o)}finally{V.value=!1}}},_e=async()=>{try{const o=await q.get("/api/reports/today-sales");o.data.success&&(Y.value=o.data.data)}catch(o){console.error("Error loading today sales:",o),Y.value={total_sales:0,total_orders:0,avg_order_value:0}}},je=async()=>{try{const o=await q.get("/api/reports/payment-methods");console.log("Payment Methods Response:",o.data),o.data.success?B.value=o.data.data.data||[]:B.value=[]}catch(o){console.error("Error loading payment method analytics:",o),B.value=[]}},Le=async()=>{try{const o=await q.get("/api/reports/order-types");console.log("Order Types Response:",o.data),o.data.success?J.value=o.data.data.data||[]:J.value=[]}catch(o){console.error("Error loading order type analytics:",o),J.value=[]}},$e=()=>{if(!te.value||!s.value)return;ae&&ae.destroy();const o=te.value.getContext("2d");if(!o)return;const t=s.value.daily_sales.map(u=>se(u.date)),l=s.value.daily_sales.map(u=>{if(typeof u.total=="string"&&u.total.includes("Rp")){const F=u.total.replace(/\D/g,"");return parseInt(F,10)||0}return typeof u.total=="number"?u.total:0});ae=new et(o,{type:"line",data:{labels:t,datasets:[{label:"Pendapatan Harian",data:l,borderColor:"rgb(76, 175, 80)",backgroundColor:"rgba(76, 175, 80, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(u){return b(u)}}}}}})},He=async()=>{var t,l,u,F,$,X,pe,ve;if(!s.value){console.warn("No data to export");return}ee.value=!0;const o=c=>{if(!c&&c!==0)return"Rp 0";let x=0;try{if(typeof c=="string"&&c.includes("Rp")){const oe=c.replace(/\D/g,"");x=parseInt(oe,10)}else typeof c=="string"?x=parseFloat(c.replace(/[^\d]/g,"")):typeof c=="number"&&(x=c);return(isNaN(x)||!isFinite(x)||x<0)&&(x=0),`Rp ${x.toLocaleString("id-ID").replace(/,/g,".")}`}catch{return"Rp 0"}};try{const c=await We(()=>import("./xlsx-CfQreh1U.js"),[]);let x=[];try{let d={};C.value==="custom"?E.value&&N.value&&(d.start_date=E.value,d.end_date=N.value):P.value&&(d.month=P.value),I.value&&O.value&&(d.hour_start=I.value,d.hour_end=O.value),d.per_page=500,console.log("ðŸš€ Fetching transaction history (FAST MODE) with params:",d);const _=performance.now(),n=await q.get("/api/pos/orders/history/export",{params:d,timeout:15e3}),j=Math.round(performance.now()-_);console.log(`âš¡ Transaction data loaded in ${j}ms`),console.log("Transaction response:",n.data),n.data&&n.data.data&&(x=Array.isArray(n.data.data)?n.data.data:[]),console.log(`âœ… Fetched ${x.length} transactions for export`)}catch(d){console.error("âŒ Failed to fetch transaction history:",d),d.code==="ECONNABORTED"&&console.warn("â±ï¸ Request timeout"),x=[]}const T=C.value==="custom"?`${E.value} s/d ${N.value}`:`Bulan ${P.value}`,oe=[["LAPORAN PENJUALAN ENHANCED"],["Periode:",T],["Tanggal Export:",new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})],[],["RINGKASAN PENJUALAN"],["Total Order:",s.value.summary.total_orders],["Total Pendapatan:",o(s.value.summary.total_revenue)],["Rata-rata Order (AOV):",o(s.value.summary.average_order)],["Total Item Terjual:",s.value.summary.total_items],["Order Selesai:",s.value.summary.completed_orders],["Order Dibatalkan:",s.value.summary.cancelled_orders],s.value.summary.growth_percentage!==void 0?["Growth vs Periode Sebelumnya:",`${s.value.summary.growth_percentage}%`]:[],[],["ANALISIS CUSTOMER"],["Customer Baru:",((t=s.value.customer_behavior)==null?void 0:t.new_customers)||0],["Returning Customer:",((l=s.value.customer_behavior)==null?void 0:l.returning_customers)||0],["One-time Customer:",((u=s.value.customer_behavior)==null?void 0:u.one_time_customers)||0],["Retention Rate:",`${((F=s.value.customer_behavior)==null?void 0:F.retention_rate)||0}%`],[]],A=c.utils.book_new(),ye=c.utils.aoa_to_sheet(oe);if(ye["!cols"]=[{wch:20},{wch:25}],c.utils.book_append_sheet(A,ye,"Ringkasan"),s.value.daily_sales&&s.value.daily_sales.length>0){const d=[["PENJUALAN HARIAN"],["Periode:",T],[],["Tanggal","Total Penjualan"],...s.value.daily_sales.map(n=>[new Date(n.date).toLocaleDateString("id-ID"),o(n.total)])],_=c.utils.aoa_to_sheet(d);_["!cols"]=[{wch:15},{wch:20}],c.utils.book_append_sheet(A,_,"Penjualan Harian")}if(s.value.top_products&&s.value.top_products.length>0){const d=[["PRODUK TERLARIS"],["Periode:",T],[],["No","Nama Produk","Jumlah Terjual","Total Pendapatan"],...s.value.top_products.map((n,j)=>[j+1,n.name,n.quantity,o(n.revenue)])],_=c.utils.aoa_to_sheet(d);_["!cols"]=[{wch:5},{wch:30},{wch:15},{wch:20}],c.utils.book_append_sheet(A,_,"Produk Terlaris")}if(s.value.top_customers&&s.value.top_customers.length>0){const d=[["CUSTOMER TERBAIK - ANALISIS LENGKAP"],["Periode:",T],[],["No","Nama Customer","Jumlah Order","Total Belanja","AOV","Customer Lifetime (hari)"],...s.value.top_customers.map((n,j)=>[j+1,n.name,n.orders,o(n.revenue),o(n.avg_order),n.customer_lifetime||0])],_=c.utils.aoa_to_sheet(d);_["!cols"]=[{wch:5},{wch:25},{wch:15},{wch:20},{wch:15},{wch:20}],c.utils.book_append_sheet(A,_,"Customer Analytics")}if(s.value.peak_hours&&s.value.peak_hours.length>0){const d=[["ANALISIS JAM RAMAI"],["Periode:",T],[],["Jam","Jumlah Order","Total Revenue","AOV"],...s.value.peak_hours.map(n=>[n.hour_display,n.order_count,o(n.revenue),o(n.avg_order)])],_=c.utils.aoa_to_sheet(d);_["!cols"]=[{wch:10},{wch:15},{wch:20},{wch:15}],c.utils.book_append_sheet(A,_,"Peak Hours")}if(s.value.sales_by_day&&s.value.sales_by_day.length>0){const d=[["ANALISIS PENJUALAN PER HARI"],["Periode:",T],[],["Hari","Jumlah Order","Total Revenue","AOV"],...s.value.sales_by_day.map(n=>[n.day_name,n.order_count,o(n.revenue),o(n.avg_order)])],_=c.utils.aoa_to_sheet(d);_["!cols"]=[{wch:15},{wch:15},{wch:20},{wch:15}],c.utils.book_append_sheet(A,_,"Sales by Day")}if(s.value.payment_methods&&s.value.payment_methods.length>0){const d=[["ANALISIS METODE PEMBAYARAN"],["Periode:",T],[],["Metode","Jumlah Order","Total Revenue","AOV","Persentase"],...s.value.payment_methods.map(n=>[Q(n.method),n.order_count,o(n.revenue),o(n.avg_order),`${n.percentage}%`])],_=c.utils.aoa_to_sheet(d);_["!cols"]=[{wch:15},{wch:15},{wch:20},{wch:15},{wch:12}],c.utils.book_append_sheet(A,_,"Payment Methods")}if(s.value.category_performance&&s.value.category_performance.length>0){const d=[["PERFORMA KATEGORI PRODUK"],["Periode:",T],[],["Kategori","Order dengan Kategori","Qty Terjual","Total Revenue","Harga Rata-rata"],...s.value.category_performance.map(n=>[n.category,n.orders_count,n.quantity_sold,o(n.revenue),o(n.avg_price)])],_=c.utils.aoa_to_sheet(d);_["!cols"]=[{wch:20},{wch:18},{wch:15},{wch:20},{wch:18}],c.utils.book_append_sheet(A,_,"Category Performance")}console.log("ðŸ“Š Creating Transaction History Sheet with",x.length,"transactions");const le=[["RIWAYAT TRANSAKSI"],["Periode:",T],[],["No","Order ID","Tanggal","Jam","Customer","Tipe Order","Items","Total","Pembayaran","Status"]];x&&x.length>0?x.forEach((d,_)=>{try{const n=new Date(d.created_at),j=n.toLocaleDateString("id-ID"),Be=n.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),Je=d.customer_name||"Guest";let re="Dine In";d.order_type==="takeaway"?re="Takeaway":d.order_type==="delivery"&&(re="Delivery");const Ue=d.items_count||0;let U="Cash";if(d.payment_methods){const W=d.payment_methods.split(",")[0];W==="qris"?U="QRIS":W==="debit"?U="Debit Card":W==="credit"?U="Credit Card":W==="transfer"&&(U="Transfer Bank")}let R=d.status||"pending";R==="completed"?R="Selesai":R==="cancelled"?R="Dibatalkan":R==="pending"?R="Pending":R==="processing"&&(R="Diproses"),le.push([_+1,d.order_number||d.id_order||d.id,j,Be,Je,re,`${Ue} item`,o(d.total_amount||d.total),U,R])}catch(n){console.error("Error processing order:",d,n)}}):le.push(["","Tidak ada data transaksi untuk periode ini"]);const he=c.utils.aoa_to_sheet(le);he["!cols"]=[{wch:5},{wch:12},{wch:12},{wch:8},{wch:20},{wch:12},{wch:10},{wch:18},{wch:15},{wch:12}],c.utils.book_append_sheet(A,he,"Riwayat Transaksi"),console.log("âœ… Transaction History Sheet added to workbook");const ze=[["BUSINESS INSIGHTS & RECOMMENDATIONS"],["Periode:",T],[],["RINGKASAN PERFORMA"],["Growth Rate:",s.value.summary.growth_percentage!==void 0?`${s.value.summary.growth_percentage}%`:"N/A"],["Customer Retention:",`${(($=s.value.customer_behavior)==null?void 0:$.retention_rate)||0}%`],[],["TOP PERFORMERS"],["Jam Tersibuk:",s.value.peak_hours&&s.value.peak_hours.length>0?(X=ue(s.value.peak_hours)[0])==null?void 0:X.hour_display:"N/A"],["Hari Terbaik:",s.value.sales_by_day&&s.value.sales_by_day.length>0?(pe=s.value.sales_by_day.sort((d,_)=>_.order_count-d.order_count)[0])==null?void 0:pe.day_name:"N/A"],["Metode Bayar Favorit:",s.value.payment_methods&&s.value.payment_methods.length>0?Q((ve=s.value.payment_methods[0])==null?void 0:ve.method):"N/A"],[],["REKOMENDASI BISNIS"],["1. Optimasi Operasional:","Focus staff scheduling pada jam dan hari ramai"],["2. Customer Retention:","Implementasi loyalty program untuk meningkatkan retention"],["3. Product Strategy:","Push produk top-selling dan evaluasi slow-moving items"],["4. Payment Strategy:","Optimalkan metode pembayaran yang paling disukai customer"],["5. Marketing Time:","Jalankan promosi saat jam dan hari dengan traffic rendah"]],ge=c.utils.aoa_to_sheet(ze);ge["!cols"]=[{wch:25},{wch:50}],c.utils.book_append_sheet(A,ge,"Business Insights");const fe=`laporan-penjualan-enhanced-analytics-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.xlsx`;c.writeFile(A,fe),console.log("âœ… Enhanced Sales Analytics report exported successfully:",fe)}catch(c){console.error("Error exporting sales report:",c)}finally{ee.value=!1}};return qe(()=>{const o=new Date,t=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`;P.value=t,M(),_e()}),(o,t)=>(m(),p("div",at,[r("div",st,[r("div",null,[r("div",ot,[e(ne,{icon:"mdi-arrow-left",variant:"text",size:"small",onClick:t[0]||(t[0]=l=>Ge(ke).back()),class:"me-2"}),t[7]||(t[7]=r("h1",{class:"text-h4 font-weight-bold"},"Laporan Penjualan",-1))]),t[8]||(t[8]=r("p",{class:"text-body-1 text-medium-emphasis"}," Analisis lengkap penjualan dan performa produk ",-1))]),e(ne,{color:"success","prepend-icon":"mdi-file-excel",onClick:He,loading:ee.value},{default:a(()=>t[9]||(t[9]=[h(" Export Excel ")])),_:1,__:[9]},8,["loading"])]),e(g,{class:"mb-6"},{default:a(()=>[e(f,null,{default:a(()=>[e(D,null,{default:a(()=>[e(v,{cols:"12",md:"4"},{default:a(()=>[e(xe,{modelValue:C.value,"onUpdate:modelValue":[t[1]||(t[1]=l=>C.value=l),Fe],items:Te,label:"Pilih Periode",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),C.value==="custom"?(m(),L(v,{key:0,cols:"12",md:"3"},{default:a(()=>[e(Z,{modelValue:E.value,"onUpdate:modelValue":[t[2]||(t[2]=l=>E.value=l),M],type:"date",label:"Tanggal Mulai",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})):K("",!0),C.value==="custom"?(m(),L(v,{key:1,cols:"12",md:"3"},{default:a(()=>[e(Z,{modelValue:N.value,"onUpdate:modelValue":[t[3]||(t[3]=l=>N.value=l),M],type:"date",label:"Tanggal Akhir",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})):(m(),L(v,{key:2,cols:"12",md:"3"},{default:a(()=>[e(xe,{modelValue:P.value,"onUpdate:modelValue":[t[4]||(t[4]=l=>P.value=l),M],items:Ae,label:"Pilih Bulan",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})),e(v,{cols:"12",md:"2"},{default:a(()=>[e(Z,{modelValue:I.value,"onUpdate:modelValue":[t[5]||(t[5]=l=>I.value=l),me],type:"time",label:"Jam Mulai",variant:"outlined",density:"compact",clearable:""},{"prepend-inner":a(()=>[e(y,{icon:"mdi-clock-outline",size:"20"})]),_:1},8,["modelValue"])]),_:1}),e(v,{cols:"12",md:"2"},{default:a(()=>[e(Z,{modelValue:O.value,"onUpdate:modelValue":[t[6]||(t[6]=l=>O.value=l),me],type:"time",label:"Jam Akhir",variant:"outlined",density:"compact",clearable:""},{"prepend-inner":a(()=>[e(y,{icon:"mdi-clock-outline",size:"20"})]),_:1},8,["modelValue"])]),_:1}),e(v,{cols:"12",md:"2"},{default:a(()=>[e(ne,{color:"primary",block:"",onClick:M,loading:V.value},{default:a(()=>t[10]||(t[10]=[h(" Refresh ")])),_:1,__:[10]},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1}),V.value?(m(),p("div",lt,[e(Ye,{indeterminate:"",color:"primary",size:"64"}),t[11]||(t[11]=r("p",{class:"text-body-1 mt-4"},"Memuat data laporan...",-1))])):s.value?(m(),p("div",rt,[e(D,{class:"mb-6"},{default:a(()=>[e(v,{cols:"12",md:"6"},{default:a(()=>[e(g,null,{default:a(()=>[e(f,{class:"text-center"},{default:a(()=>[e(y,{icon:"mdi-calendar-today",size:"32",class:"text-purple mb-2"}),r("div",nt,i(b(Y.value.total_sales)),1),t[12]||(t[12]=r("div",{class:"text-body-2 text-medium-emphasis"},"Penjualan Hari Ini",-1)),r("div",it,i(Y.value.total_orders)+" order | "+i(se(new Date)),1)]),_:1,__:[12]})]),_:1})]),_:1}),e(v,{cols:"12",md:"6"},{default:a(()=>[e(g,null,{default:a(()=>[e(f,{class:"text-center"},{default:a(()=>[e(y,{icon:"mdi-chart-bar",size:"32",class:"text-indigo mb-2"}),r("div",dt,i(b(Ne())),1),t[13]||(t[13]=r("div",{class:"text-body-2 text-medium-emphasis"},"Rata-rata Penjualan Harian",-1)),r("div",ut," Per "+i(Me())+" hari aktif ",1)]),_:1,__:[13]})]),_:1})]),_:1})]),_:1}),e(D,{class:"mb-6"},{default:a(()=>[e(v,{cols:"12",md:"6"},{default:a(()=>[e(g,null,{default:a(()=>[e(S,{class:"pb-2"},{default:a(()=>[e(y,{icon:"mdi-credit-card",class:"me-2"}),t[14]||(t[14]=h(" Metode Pembayaran "))]),_:1,__:[14]}),e(f,null,{default:a(()=>[B.value.length>0?(m(),p("div",ct,[(m(!0),p(H,null,z(B.value,(l,u)=>(m(),p("div",{key:u,class:"d-flex justify-space-between align-center mb-3"},[r("div",mt,[e(y,{icon:ce(l.payment_method),color:Ve(u),class:"me-2"},null,8,["icon","color"]),r("span",_t,i(Q(l.payment_method)),1)]),r("div",pt,[r("div",vt,i(l.total_amount_formatted),1),r("div",yt,i(l.order_count)+" order",1)])]))),128))])):(m(),p("div",ht,[e(y,{icon:"mdi-cash-off",size:"48",class:"text-grey-lighten-1 mb-2"}),t[15]||(t[15]=r("div",{class:"text-body-2 text-medium-emphasis"},"Tidak ada pembayaran hari ini",-1)),t[16]||(t[16]=r("div",{class:"text-h6 font-weight-bold text-grey"},"Rp 0",-1))]))]),_:1})]),_:1})]),_:1}),e(v,{cols:"12",md:"6"},{default:a(()=>[e(g,null,{default:a(()=>[e(S,{class:"pb-2"},{default:a(()=>[e(y,{icon:"mdi-food",class:"me-2"}),t[17]||(t[17]=h(" Tipe Order "))]),_:1,__:[17]}),e(f,null,{default:a(()=>[J.value.length>0?(m(),p("div",gt,[(m(!0),p(H,null,z(J.value,(l,u)=>(m(),p("div",{key:u,class:"d-flex justify-space-between align-center mb-3"},[r("div",ft,[e(y,{icon:"mdi-food",color:Ee(u),class:"me-2"},null,8,["color"]),r("span",xt,i(l.order_type),1)]),r("div",bt,[r("div",wt,i(l.total_amount_formatted),1),r("div",kt,i(l.order_count)+" order",1)])]))),128))])):(m(),p("div",Tt,[e(y,{icon:"mdi-food-off",size:"48",class:"text-grey-lighten-1 mb-2"}),t[18]||(t[18]=r("div",{class:"text-body-2 text-medium-emphasis"},"Tidak ada pesanan hari ini",-1)),t[19]||(t[19]=r("div",{class:"text-h6 font-weight-bold text-grey"},"Rp 0",-1))]))]),_:1})]),_:1})]),_:1})]),_:1}),e(D,{class:"mb-6"},{default:a(()=>[e(v,{cols:"6",md:"3"},{default:a(()=>[e(g,null,{default:a(()=>[e(f,{class:"text-center"},{default:a(()=>[e(y,{icon:"mdi-currency-usd",size:"32",class:"text-success mb-2"}),r("div",At,i(b(s.value.summary.total_revenue)),1),t[20]||(t[20]=r("div",{class:"text-body-2 text-medium-emphasis"},"Total Pendapatan",-1)),s.value.summary.growth_percentage!==void 0?(m(),p("div",St,[e(G,{color:s.value.summary.growth_percentage>=0?"success":"error",size:"x-small",variant:"tonal"},{default:a(()=>[h(i(s.value.summary.growth_percentage>=0?"+":"")+i(s.value.summary.growth_percentage)+"% ",1)]),_:1},8,["color"])])):K("",!0)]),_:1,__:[20]})]),_:1})]),_:1}),e(v,{cols:"6",md:"3"},{default:a(()=>[e(g,null,{default:a(()=>[e(f,{class:"text-center"},{default:a(()=>[e(y,{icon:"mdi-cart",size:"32",class:"text-primary mb-2"}),r("div",Dt,i(s.value.summary.total_orders),1),t[21]||(t[21]=r("div",{class:"text-body-2 text-medium-emphasis"},"Total Order",-1)),r("div",Pt," AOV: "+i(b(s.value.summary.average_order)),1)]),_:1,__:[21]})]),_:1})]),_:1}),e(v,{cols:"6",md:"3"},{default:a(()=>[e(g,null,{default:a(()=>[e(f,{class:"text-center"},{default:a(()=>[e(y,{icon:"mdi-package",size:"32",class:"text-info mb-2"}),r("div",Rt,i(s.value.summary.total_items),1),t[22]||(t[22]=r("div",{class:"text-body-2 text-medium-emphasis"},"Total Item",-1)),r("div",Ct,i(s.value.summary.completed_orders)+" selesai ",1)]),_:1,__:[22]})]),_:1})]),_:1}),e(v,{cols:"6",md:"3"},{default:a(()=>[e(g,null,{default:a(()=>[e(f,{class:"text-center"},{default:a(()=>{var l,u;return[e(y,{icon:"mdi-account-group",size:"32",class:"text-warning mb-2"}),r("div",It,i(((l=s.value.customer_behavior)==null?void 0:l.new_customers)||0),1),t[23]||(t[23]=r("div",{class:"text-body-2 text-medium-emphasis"},"Customer Baru",-1)),r("div",Ot," Retention: "+i(((u=s.value.customer_behavior)==null?void 0:u.retention_rate)||0)+"% ",1)]}),_:1,__:[23]})]),_:1})]),_:1})]),_:1}),e(D,{class:"mb-6"},{default:a(()=>[e(v,{cols:"12"},{default:a(()=>[e(g,null,{default:a(()=>[e(S,null,{default:a(()=>t[24]||(t[24]=[h("Trend Penjualan Harian")])),_:1,__:[24]}),e(f,null,{default:a(()=>[s.value&&s.value.daily_sales&&s.value.daily_sales.length>0?(m(),p("div",Vt,[r("canvas",{ref_key:"dailySalesChart",ref:te,class:"w-100",style:{"max-height":"300px"}},null,512)])):(m(),p("div",Et,[e(y,{icon:"mdi-chart-line",size:"48",class:"text-medium-emphasis mb-2"}),t[25]||(t[25]=r("p",{class:"text-body-2 text-medium-emphasis"},"Tidak ada data penjualan harian",-1))]))]),_:1})]),_:1})]),_:1})]),_:1}),e(D,{class:"mb-6"},{default:a(()=>[e(v,{cols:"12",md:"4"},{default:a(()=>[e(g,null,{default:a(()=>[e(S,null,{default:a(()=>t[26]||(t[26]=[h("Top 5 Produk")])),_:1,__:[26]}),e(f,null,{default:a(()=>[r("div",Nt,[(m(!0),p(H,null,z(s.value.top_products,(l,u)=>(m(),p("div",{key:l.id,class:"mb-3"},[r("div",Mt,[r("div",Ft,[e(G,{color:Re(u),size:"small",class:"me-2"},{default:a(()=>[h(i(u+1),1)]),_:2},1032,["color"]),r("div",null,[r("div",jt,i(l.name),1),r("div",Lt,i(l.quantity)+" terjual ",1)])]),r("div",$t,[r("div",Ht,i(b(l.revenue)),1)])]),u<s.value.top_products.length-1?(m(),L(tt,{key:0,class:"mt-3"})):K("",!0)]))),128))])]),_:1})]),_:1})]),_:1}),e(v,{cols:"12",md:"4"},{default:a(()=>[e(g,null,{default:a(()=>[e(S,null,{default:a(()=>t[27]||(t[27]=[h("Top Customer")])),_:1,__:[27]}),e(f,null,{default:a(()=>[e(de,{headers:Se,items:s.value.top_customers,"items-per-page":5,class:"elevation-0","no-data-text":"Tidak ada data customer"},{"item.orders":a(({item:l})=>[e(G,{size:"small",color:"primary",variant:"tonal"},{default:a(()=>[h(i(l.orders),1)]),_:2},1024)]),"item.revenue":a(({item:l})=>[r("span",zt,i(b(l.revenue)),1)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1}),e(v,{cols:"12",md:"4"},{default:a(()=>[e(g,null,{default:a(()=>[e(S,null,{default:a(()=>t[28]||(t[28]=[h("Penjualan per Hari")])),_:1,__:[28]}),e(f,null,{default:a(()=>[e(de,{headers:De,items:s.value.daily_sales,"items-per-page":7,class:"elevation-0","no-data-text":"Tidak ada data penjualan"},{"item.date":a(({item:l})=>[h(i(se(l.date)),1)]),"item.total":a(({item:l})=>[r("span",Bt,i(b(l.total)),1)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1}),e(D,{class:"mb-6"},{default:a(()=>[e(v,{cols:"12",md:"6"},{default:a(()=>[e(g,null,{default:a(()=>[e(S,{class:"d-flex align-center gap-2"},{default:a(()=>[e(y,{icon:"mdi-clock-outline"}),t[29]||(t[29]=h(" Jam Ramai (Peak Hours) "))]),_:1,__:[29]}),e(f,null,{default:a(()=>[s.value.peak_hours&&s.value.peak_hours.length>0?(m(),p("div",Jt,[(m(!0),p(H,null,z(ue(s.value.peak_hours),l=>(m(),p("div",{key:l.hour,class:"mb-2"},[r("div",Ut,[r("div",Kt,[e(y,{icon:Oe(l.hour),size:"16"},null,8,["icon"]),r("span",qt,i(l.hour_display),1)]),r("div",Gt,[r("div",Yt,i(l.order_count)+" order",1),r("div",Qt,i(b(l.revenue)),1)])]),e(ie,{"model-value":Ce(l.order_count,s.value.peak_hours),color:"primary",height:"4",class:"mt-1"},null,8,["model-value"])]))),128))])):(m(),p("div",Xt,t[30]||(t[30]=[r("p",{class:"text-body-2 text-medium-emphasis"},"Tidak ada data jam ramai",-1)])))]),_:1})]),_:1})]),_:1}),e(v,{cols:"12",md:"6"},{default:a(()=>[e(g,null,{default:a(()=>[e(S,{class:"d-flex align-center gap-2"},{default:a(()=>[e(y,{icon:"mdi-credit-card-outline"}),t[31]||(t[31]=h(" Metode Pembayaran "))]),_:1,__:[31]}),e(f,null,{default:a(()=>[s.value.payment_methods&&s.value.payment_methods.length>0?(m(),p("div",Wt,[(m(!0),p(H,null,z(s.value.payment_methods,l=>(m(),p("div",{key:l.method,class:"mb-3"},[r("div",Zt,[r("div",ea,[e(y,{icon:ce(l.method),size:"16"},null,8,["icon"]),r("span",ta,i(Q(l.method)),1)]),r("div",aa,[e(G,{size:"small",color:"primary",variant:"tonal"},{default:a(()=>[h(i(l.percentage)+"% ",1)]),_:2},1024)])]),r("div",sa,[r("span",oa,i(l.order_count)+" transaksi",1),r("span",la,i(b(l.revenue)),1)]),e(ie,{"model-value":l.percentage,color:"success",height:"4",class:"mt-1"},null,8,["model-value"])]))),128))])):(m(),p("div",ra,t[32]||(t[32]=[r("p",{class:"text-body-2 text-medium-emphasis"},"Tidak ada data metode pembayaran",-1)])))]),_:1})]),_:1})]),_:1})]),_:1}),s.value.sales_by_day&&s.value.sales_by_day.length>0?(m(),L(D,{key:0,class:"mb-6"},{default:a(()=>[e(v,{cols:"12"},{default:a(()=>[e(g,null,{default:a(()=>[e(S,{class:"d-flex align-center gap-2"},{default:a(()=>[e(y,{icon:"mdi-calendar-week"}),t[33]||(t[33]=h(" Performa Penjualan per Hari "))]),_:1,__:[33]}),e(f,null,{default:a(()=>[e(D,null,{default:a(()=>[(m(!0),p(H,null,z(s.value.sales_by_day,l=>(m(),L(v,{key:l.day_name,cols:"6",md:"1.7"},{default:a(()=>[r("div",na,[r("div",ia,i(l.order_count),1),r("div",da,i(l.day_name),1),r("div",ua,i(b(l.revenue)),1),e(ie,{"model-value":Ie(l.order_count,s.value.sales_by_day),color:"primary",height:"3",class:"mt-1"},null,8,["model-value"])])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):K("",!0),s.value.category_performance&&s.value.category_performance.length>0?(m(),L(D,{key:1,class:"mb-6"},{default:a(()=>[e(v,{cols:"12"},{default:a(()=>[e(g,null,{default:a(()=>[e(S,{class:"d-flex align-center gap-2"},{default:a(()=>[e(y,{icon:"mdi-shape-outline"}),t[34]||(t[34]=h(" Performa Kategori Produk "))]),_:1,__:[34]}),e(f,null,{default:a(()=>[e(de,{headers:Pe,items:s.value.category_performance,"items-per-page":10,class:"elevation-0","no-data-text":"Tidak ada data kategori"},{"item.category":a(({item:l})=>[r("div",ca,[e(y,{icon:"mdi-tag",size:"16",color:"primary"}),r("span",ma,i(l.category),1)])]),"item.orders_count":a(({item:l})=>[e(G,{size:"small",color:"info",variant:"tonal"},{default:a(()=>[h(i(l.orders_count),1)]),_:2},1024)]),"item.quantity_sold":a(({item:l})=>[r("span",_a,i(l.quantity_sold),1)]),"item.revenue":a(({item:l})=>[r("span",pa,i(b(l.revenue)),1)]),"item.avg_price":a(({item:l})=>[r("span",va,i(b(l.avg_price)),1)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1})):K("",!0)])):(m(),p("div",ya,[e(y,{icon:"mdi-chart-line-variant",size:"64",class:"text-medium-emphasis mb-4"}),t[35]||(t[35]=r("h3",{class:"text-h6 mb-2"},"Tidak ada data laporan",-1)),t[36]||(t[36]=r("p",{class:"text-body-2 text-medium-emphasis"}," Silakan pilih periode yang berbeda atau periksa kembali filter Anda ",-1))]))]))}});typeof be=="function"&&be(we);const Ha=Ze(we,[["__scopeId","data-v-ed33516c"]]);export{Ha as default};

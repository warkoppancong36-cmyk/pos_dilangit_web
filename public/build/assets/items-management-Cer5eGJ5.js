import{D as Oe}from"./DeleteConfirmationDialog-CrO9qJIC.js";import{d as Y,r as x,V as j,g as I,f as a,a2 as se,m as n,b as e,e as s,X as y,t as g,a0 as w,$ as Ke,s as c,c as M,l as D,i as Ge,F as He,o as V,w as qe,v as Je,au as be,D as Xe}from"./main-CGfvAKQg.js";import{V as Ye}from"./VDialog-BNhzttoX.js";import{b as ue,c as Qe,V as U}from"./VCard-DPTdVKQy.js";import{V as oe}from"./VDivider-kAeew0DL.js";import{V as E}from"./VCardText-LfMMDWFN.js";import{V as We}from"./VForm-DcijFXT1.js";import{V as H,a as m}from"./VRow-fMhDyJ01.js";import{V as F,a as K}from"./VTextField-CpuXUQuF.js";import{V as W}from"./VSelect-DWLCrn0F.js";import{V as Ze}from"./VTextarea-DbvkXr1z.js";import{V as G}from"./VSwitch-DQE-lyJP.js";import{V as ea}from"./VSpacer-DRji1aXT.js";import{V as aa}from"./VSnackbar-BZM5PDbO.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as ta,a as la,b as sa,c as oa}from"./VExpansionPanels-DwdjG1Il.js";import{V as le}from"./VCheckbox-DP8e99cG.js";import{f as ye}from"./helpers-B-vn2Qqf.js";import{V as L}from"./VAvatar-D7krNhPI.js";import{V as T}from"./VChip-BJ2TWNvc.js";import{V as ia}from"./VDataTableServer-C3bX3i5U.js";import{I as q}from"./ItemsApi-DHCcuuCh.js";import{V as ke}from"./VAlert-DQZPppqd.js";import"./VOverlay-CMrwG-K2.js";import"./forwardRefs-B931MWyl.js";import"./VImg-YVIz-GZl.js";/* empty css              */import"./VList-DZ7UBRvs.js";import"./VMenu-KQzYgo3r.js";import"./VCheckboxBtn-oRXb6TcP.js";import"./VDataTable-BW1MnP5_.js";import"./VTable-BKiQjh92.js";import"./filter-BHttNOyp.js";const na={class:"d-flex align-center gap-2"},ra={class:"text-white"},da={class:"text-h6 mb-4 d-flex align-center gap-2"},ua={class:"text-h6 mb-4 d-flex align-center gap-2"},ma={class:"d-flex align-center"},ca={class:"text-h6 mb-4 d-flex align-center gap-2"},pa={class:"d-flex align-center"},fa={class:"d-flex align-center"},va={class:"text-h6 mb-4 d-flex align-center gap-2"},_a={class:"d-flex align-center"},ga={class:"d-flex align-center"},ka={class:"text-h6 mb-4 d-flex align-center gap-2"},ba={class:"d-flex align-center"},ya={class:"text-subtitle-1"},Va=Y({__name:"ItemDialog",props:{modelValue:{type:Boolean},editMode:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},formData:{},errorMessage:{default:""}},emits:["update:modelValue","save","close","clear-error"],setup(t,{emit:k}){const r=t,p=k,u=x(),v=j({get:()=>r.modelValue,set:i=>{i||p("close"),p("update:modelValue",i)}}),f=["kg","gram","liter","ml","butir","pcs","pack","dus","meter","lembar"],o=["Gudang A - Rak 1","Gudang A - Rak 2","Gudang A - Rak 3","Gudang B - Rak 1","Gudang B - Rak 2","Gudang B - Rak 3","Kulkas - Rak 1","Kulkas - Rak 2","Freezer - Rak 1","Freezer - Rak 2"],h=async()=>{var i,l;if(console.log("handleSave called"),console.log("formData:",r.formData),!((i=r.formData.name)!=null&&i.trim())){console.log("Name is required");return}if(!((l=r.formData.unit)!=null&&l.trim())){console.log("Unit is required");return}if(u.value){const{valid:d}=await u.value.validate();if(!d){console.log("Form validation failed");return}}p("clear-error"),p("save")},z=()=>{r.formData.properties||(r.formData.properties={});const i=`property_${Date.now()}`;r.formData.properties[i]=""},C=i=>{r.formData.properties&&delete r.formData.properties[i]},_=(i,l)=>{if(r.formData.properties&&i!==l){const d=r.formData.properties[i];delete r.formData.properties[i],r.formData.properties[l]=d}};return(i,l)=>(V(),I(Ye,{modelValue:n(v),"onUpdate:modelValue":l[14]||(l[14]=d=>se(v)?v.value=d:null),"max-width":"900px",persistent:"",scrollable:""},{default:a(()=>[e(U,{class:"item-dialog coffee-dialog"},{default:a(()=>[e(ue,{class:"d-flex align-center justify-space-between coffee-header"},{default:a(()=>[s("div",na,[e(y,{icon:i.editMode?"tabler-edit":"tabler-plus",class:"text-white"},null,8,["icon"]),s("span",ra,g(i.editMode?"Edit Item":"Tambah Item Baru"),1)]),e(w,{icon:"tabler-x",variant:"text",color:"white",onClick:l[0]||(l[0]=d=>v.value=!1)})]),_:1}),e(oe),e(E,{class:"pa-6"},{default:a(()=>[e(We,{ref_key:"formRef",ref:u,onSubmit:Ke(h,["prevent"])},{default:a(()=>[e(H,null,{default:a(()=>[e(m,{cols:"12"},{default:a(()=>[s("h6",da,[e(y,{icon:"tabler-info-circle",size:"20",class:"coffee-icon"}),l[15]||(l[15]=c(" Informasi Dasar "))])]),_:1}),e(m,{cols:"12",md:"8"},{default:a(()=>[e(F,{modelValue:i.formData.name,"onUpdate:modelValue":l[1]||(l[1]=d=>i.formData.name=d),label:"Nama Item",placeholder:"Masukkan nama item",variant:"outlined",required:"",rules:[d=>!!d||"Nama item harus diisi"]},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12",md:"4"},{default:a(()=>[e(W,{modelValue:i.formData.unit,"onUpdate:modelValue":l[2]||(l[2]=d=>i.formData.unit=d),items:f,label:"Satuan",placeholder:"Pilih satuan",variant:"outlined",required:"",rules:[d=>!!d||"Satuan harus dipilih"]},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12"},{default:a(()=>[e(Ze,{modelValue:i.formData.description,"onUpdate:modelValue":l[3]||(l[3]=d=>i.formData.description=d),label:"Deskripsi",placeholder:"Masukkan deskripsi item",rows:"3",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:a(()=>[s("h6",ua,[e(y,{icon:"tabler-building-warehouse",size:"20",class:"coffee-icon"}),l[16]||(l[16]=c(" Lokasi & Tanggal "))])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[e(W,{modelValue:i.formData.storage_location,"onUpdate:modelValue":l[4]||(l[4]=d=>i.formData.storage_location=d),items:o,label:"Lokasi Penyimpanan",placeholder:"Pilih lokasi",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[e(F,{modelValue:i.formData.expiry_date,"onUpdate:modelValue":l[5]||(l[5]=d=>i.formData.expiry_date=d),label:"Tanggal Kadaluwarsa",type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[s("div",ma,[e(G,{modelValue:i.formData.active,"onUpdate:modelValue":l[6]||(l[6]=d=>i.formData.active=d),color:"success",class:"me-3"},null,8,["modelValue"]),e(K,{class:"text-body-1"},{default:a(()=>l[17]||(l[17]=[c("Item Aktif")])),_:1,__:[17]})])]),_:1}),e(m,{cols:"12"},{default:a(()=>[s("h6",ca,[e(y,{icon:"tabler-truck-delivery",size:"20",class:"coffee-icon"}),l[18]||(l[18]=c(" Jenis Layanan "))])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[s("div",pa,[e(G,{modelValue:i.formData.is_delivery,"onUpdate:modelValue":l[7]||(l[7]=d=>i.formData.is_delivery=d),color:"primary",class:"me-3"},null,8,["modelValue"]),e(K,{class:"text-body-1"},{default:a(()=>[e(y,{icon:"tabler-truck-delivery",class:"me-2",size:"18"}),l[19]||(l[19]=c(" Tersedia untuk Delivery "))]),_:1,__:[19]})])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[s("div",fa,[e(G,{modelValue:i.formData.is_takeaway,"onUpdate:modelValue":l[8]||(l[8]=d=>i.formData.is_takeaway=d),color:"secondary",class:"me-3"},null,8,["modelValue"]),e(K,{class:"text-body-1"},{default:a(()=>[e(y,{icon:"tabler-package",class:"me-2",size:"18"}),l[20]||(l[20]=c(" Tersedia untuk Take Away "))]),_:1,__:[20]})])]),_:1}),e(m,{cols:"12"},{default:a(()=>[s("h6",va,[e(y,{icon:"tabler-tools-kitchen-2",size:"20",class:"coffee-icon"}),l[21]||(l[21]=c(" Ketersediaan Station "))])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[s("div",_a,[e(G,{modelValue:i.formData.available_in_kitchen,"onUpdate:modelValue":l[9]||(l[9]=d=>i.formData.available_in_kitchen=d),color:"warning",class:"me-3"},null,8,["modelValue"]),e(K,{class:"text-body-1"},{default:a(()=>[e(y,{icon:"tabler-chef-hat",class:"me-2",size:"18"}),l[22]||(l[22]=c(" Tersedia di Kitchen "))]),_:1,__:[22]})])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[s("div",ga,[e(G,{modelValue:i.formData.available_in_bar,"onUpdate:modelValue":l[10]||(l[10]=d=>i.formData.available_in_bar=d),color:"info",class:"me-3"},null,8,["modelValue"]),e(K,{class:"text-body-1"},{default:a(()=>[e(y,{icon:"tabler-glass-cocktail",class:"me-2",size:"18"}),l[23]||(l[23]=c(" Tersedia di Bar "))]),_:1,__:[23]})])]),_:1}),e(m,{cols:"12"},{default:a(()=>[s("h6",ka,[e(y,{icon:"tabler-settings",size:"20",class:"coffee-icon"}),l[24]||(l[24]=c(" Properti Tambahan "))])]),_:1}),e(m,{cols:"12"},{default:a(()=>[l[26]||(l[26]=s("div",{class:"text-caption text-medium-emphasis mb-3"}," Tambahkan informasi tambahan seperti kandungan, spesifikasi, dll. ",-1)),e(w,{variant:"outlined","prepend-icon":"tabler-plus",class:"coffee-secondary mb-3",onClick:z},{default:a(()=>l[25]||(l[25]=[c(" Tambah Properti ")])),_:1,__:[25]}),i.formData.properties?(V(!0),M(He,{key:0},Ge(i.formData.properties,(d,$)=>(V(),M("div",{key:$,class:"mb-3"},[e(H,{"no-gutters":""},{default:a(()=>[e(m,{cols:"4"},{default:a(()=>[e(F,{"model-value":$,"onUpdate:modelValue":A=>_($,A),label:"Nama Properti",variant:"outlined",density:"compact"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),e(m,{cols:"7",class:"ps-2"},{default:a(()=>[e(F,{modelValue:i.formData.properties[$],"onUpdate:modelValue":A=>i.formData.properties[$]=A,label:"Nilai",variant:"outlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(m,{cols:"1",class:"ps-2 d-flex align-center"},{default:a(()=>[e(w,{icon:"tabler-trash",color:"error",variant:"text",size:"small",onClick:A=>C($)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)):D("",!0)]),_:1,__:[26]})]),_:1})]),_:1},512)]),_:1}),e(oe),e(Qe,{class:"pa-6"},{default:a(()=>[e(ea),e(w,{variant:"outlined",class:"coffee-secondary",onClick:l[11]||(l[11]=d=>v.value=!1)},{default:a(()=>l[27]||(l[27]=[c(" Batal ")])),_:1,__:[27]}),e(w,{color:"primary",class:"coffee-primary",loading:i.loading,onClick:h},{default:a(()=>[c(g(i.editMode?"Perbarui":"Simpan")+" Item ",1)]),_:1},8,["loading"])]),_:1})]),_:1}),e(aa,{"model-value":!!i.errorMessage,"onUpdate:modelValue":l[13]||(l[13]=d=>!d&&p("clear-error")),color:"error",location:"top right",timeout:6e3,vertical:"","multi-line":"","min-width":"320","max-width":"500"},{actions:a(()=>[e(w,{icon:"tabler-x",size:"small",variant:"text",onClick:l[12]||(l[12]=d=>p("clear-error"))})]),default:a(()=>[s("div",ba,[e(y,{icon:"tabler-alert-circle",class:"me-3",size:"28"}),s("div",null,[l[28]||(l[28]=s("div",{class:"text-h6 font-weight-bold"},"Error!",-1)),s("div",ya,g(i.errorMessage),1)])])]),_:1},8,["model-value"])]),_:1},8,["modelValue"]))}}),xa=Q(Va,[["__scopeId","data-v-7fe991d2"]]),ha=Y({__name:"ItemSearchFilters",props:{filters:{}},emits:["update:filters"],setup(t,{emit:k}){const r=t,p=k,u=x({...r.filters});qe(()=>r.filters,C=>{u.value={...C}},{deep:!0});const v=[{title:"all",value:"all"},{title:"active",value:"active"},{title:"inactive",value:"inactive"}],f=[{title:"all",value:"all"},{title:"in-stock",value:"in-stock"},{title:"low-stock",value:"low-stock"},{title:"out-of-stock",value:"out-of-stock"}],o=()=>{console.log("ItemSearchFilters - onFilterChange called with:",u.value),p("update:filters",{...u.value})},h=()=>{u.value={search:"",active:"all",supplier_id:void 0,unit:"",stock_status:"all",expiring_days:void 0,show_expired:!1},o()},z=j(()=>u.value.search||u.value.active!=="all"||u.value.supplier_id||u.value.unit||u.value.stock_status!=="all"||u.value.expiring_days||u.value.show_expired);return(C,_)=>(V(),I(U,{class:"mb-6"},{default:a(()=>[e(ue,{class:"d-flex align-center gap-2"},{default:a(()=>[e(y,{icon:"tabler-filter",class:"coffee-icon"}),_[8]||(_[8]=c(" Filter & Pencarian Item "))]),_:1,__:[8]}),e(E,null,{default:a(()=>[e(H,null,{default:a(()=>[e(m,{cols:"12",md:"4"},{default:a(()=>[e(F,{modelValue:n(u).search,"onUpdate:modelValue":[_[0]||(_[0]=i=>n(u).search=i),o],label:"Cari item...",placeholder:"Nama, kode, atau deskripsi","prepend-inner-icon":"tabler-search",clearable:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"2"},{default:a(()=>[e(W,{modelValue:n(u).active,"onUpdate:modelValue":[_[1]||(_[1]=i=>n(u).active=i),o],items:v,label:"Status","prepend-inner-icon":"tabler-toggle-left",clearable:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"2"},{default:a(()=>[e(W,{modelValue:n(u).stock_status,"onUpdate:modelValue":[_[2]||(_[2]=i=>n(u).stock_status=i),o],items:f,label:"Stok","prepend-inner-icon":"tabler-package",clearable:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"4",class:"d-flex align-center gap-3"},{default:a(()=>[e(w,{color:"primary",variant:"tonal","prepend-icon":"tabler-search",onClick:o},{default:a(()=>_[9]||(_[9]=[c(" Cari ")])),_:1,__:[9]}),n(z)?(V(),I(w,{key:0,color:"secondary",variant:"outlined","prepend-icon":"tabler-x",onClick:h},{default:a(()=>_[10]||(_[10]=[c(" Reset ")])),_:1,__:[10]})):D("",!0)]),_:1})]),_:1}),e(ta,{class:"mt-4"},{default:a(()=>[e(la,null,{default:a(()=>[e(sa,{class:"text-sm"},{default:a(()=>[e(y,{icon:"tabler-adjustments-horizontal",class:"me-2"}),_[11]||(_[11]=c(" Filter Lanjutan "))]),_:1,__:[11]}),e(oa,null,{default:a(()=>[e(H,null,{default:a(()=>[e(m,{cols:"12",md:"3"},{default:a(()=>[e(F,{modelValue:n(u).unit,"onUpdate:modelValue":[_[3]||(_[3]=i=>n(u).unit=i),o],label:"Satuan",placeholder:"kg, pcs, liter...","prepend-inner-icon":"tabler-ruler",clearable:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"3"},{default:a(()=>[e(F,{modelValue:n(u).expiring_days,"onUpdate:modelValue":[_[4]||(_[4]=i=>n(u).expiring_days=i),o],type:"number",label:"Akan kadaluarsa (hari)",placeholder:"30","prepend-inner-icon":"tabler-calendar-time",clearable:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"3",class:"d-flex align-center"},{default:a(()=>[e(le,{modelValue:n(u).show_expired,"onUpdate:modelValue":[_[5]||(_[5]=i=>n(u).show_expired=i),o],label:"Tampilkan yang kadaluarsa",color:"warning"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"3",class:"d-flex align-center"},{default:a(()=>[e(le,{modelValue:n(u).available_in_kitchen,"onUpdate:modelValue":[_[6]||(_[6]=i=>n(u).available_in_kitchen=i),o],label:"Tersedia di Kitchen",color:"primary"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"3",class:"d-flex align-center"},{default:a(()=>[e(le,{modelValue:n(u).available_in_bar,"onUpdate:modelValue":[_[7]||(_[7]=i=>n(u).available_in_bar=i),o],label:"Tersedia di Bar",color:"secondary"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),Da=Q(ha,[["__scopeId","data-v-482149d4"]]),Ia={class:"d-flex align-center gap-2"},wa={class:"text-h6"},Sa={class:"d-flex align-center gap-2"},Ca={class:"text-h6"},$a={class:"d-flex align-center gap-2"},Ta={class:"text-h6"},Ua={class:"d-flex align-center gap-2"},Pa={class:"text-h6"},za={class:"d-flex align-center gap-2"},Aa={class:"text-h6"},Ea={class:"d-flex align-center gap-2"},Fa={class:"text-h6"},Ma=Y({__name:"ItemStatsCards",props:{stats:{},loading:{type:Boolean,default:!1}},setup(t){return(k,r)=>(V(),I(H,{class:"mb-6"},{default:a(()=>[e(m,{cols:"12",sm:"6",lg:"3"},{default:a(()=>[e(U,{class:"stats-card"},{default:a(()=>[e(E,{class:"d-flex align-center"},{default:a(()=>{var p;return[e(L,{size:"44",rounded:"",color:"primary",variant:"tonal",class:"me-3"},{default:a(()=>[e(y,{icon:"tabler-package"})]),_:1}),s("div",null,[r[0]||(r[0]=s("span",{class:"text-sm text-medium-emphasis"},"Total Item",-1)),s("div",Ia,[s("h6",wa,g(((p=k.stats)==null?void 0:p.total_items)||0),1)])])]}),_:1})]),_:1})]),_:1}),e(m,{cols:"12",sm:"6",lg:"3"},{default:a(()=>[e(U,{class:"stats-card"},{default:a(()=>[e(E,{class:"d-flex align-center"},{default:a(()=>{var p;return[e(L,{size:"44",rounded:"",color:"success",variant:"tonal",class:"me-3"},{default:a(()=>[e(y,{icon:"tabler-check"})]),_:1}),s("div",null,[r[1]||(r[1]=s("span",{class:"text-sm text-medium-emphasis"},"Item Aktif",-1)),s("div",Sa,[s("h6",Ca,g(((p=k.stats)==null?void 0:p.active_items)||0),1)])])]}),_:1})]),_:1})]),_:1}),e(m,{cols:"12",sm:"6",lg:"3"},{default:a(()=>[e(U,{class:"stats-card"},{default:a(()=>[e(E,{class:"d-flex align-center"},{default:a(()=>{var p;return[e(L,{size:"44",rounded:"",color:"warning",variant:"tonal",class:"me-3"},{default:a(()=>[e(y,{icon:"tabler-alert-triangle"})]),_:1}),s("div",null,[r[2]||(r[2]=s("span",{class:"text-sm text-medium-emphasis"},"Stok Rendah",-1)),s("div",$a,[s("h6",Ta,g(((p=k.stats)==null?void 0:p.low_stock_items)||0),1)])])]}),_:1})]),_:1})]),_:1}),e(m,{cols:"12",sm:"6",lg:"3"},{default:a(()=>[e(U,{class:"stats-card"},{default:a(()=>[e(E,{class:"d-flex align-center"},{default:a(()=>{var p;return[e(L,{size:"44",rounded:"",color:"error",variant:"tonal",class:"me-3"},{default:a(()=>[e(y,{icon:"tabler-x"})]),_:1}),s("div",null,[r[3]||(r[3]=s("span",{class:"text-sm text-medium-emphasis"},"Stok Habis",-1)),s("div",Ua,[s("h6",Pa,g(((p=k.stats)==null?void 0:p.out_of_stock_items)||0),1)])])]}),_:1})]),_:1})]),_:1}),e(m,{cols:"12",sm:"6",lg:"3"},{default:a(()=>[e(U,{class:"stats-card"},{default:a(()=>[e(E,{class:"d-flex align-center"},{default:a(()=>{var p;return[e(L,{size:"44",rounded:"",color:"info",variant:"tonal",class:"me-3"},{default:a(()=>[e(y,{icon:"tabler-currency-dollar"})]),_:1}),s("div",null,[r[4]||(r[4]=s("span",{class:"text-sm text-medium-emphasis"},"Nilai Stok",-1)),s("div",za,[s("h6",Aa,g(n(ye)(((p=k.stats)==null?void 0:p.total_value)||0)),1)])])]}),_:1})]),_:1})]),_:1}),e(m,{cols:"12",sm:"6",lg:"3"},{default:a(()=>[e(U,{class:"stats-card"},{default:a(()=>[e(E,{class:"d-flex align-center"},{default:a(()=>{var p;return[e(L,{size:"44",rounded:"",color:"secondary",variant:"tonal",class:"me-3"},{default:a(()=>[e(y,{icon:"tabler-pause"})]),_:1}),s("div",null,[r[5]||(r[5]=s("span",{class:"text-sm text-medium-emphasis"},"Item Nonaktif",-1)),s("div",Ea,[s("h6",Fa,g(((p=k.stats)==null?void 0:p.inactive_items)||0),1)])])]}),_:1})]),_:1})]),_:1})]),_:1}))}}),Na=Q(Ma,[["__scopeId","data-v-1e00df2a"]]),Ra={class:"d-flex align-center gap-2"},Ba={class:"d-flex align-center gap-2"},La={class:"d-flex flex-column"},ja={class:"font-weight-medium text-high-emphasis"},Oa={key:0,class:"text-caption text-medium-emphasis mt-1"},Ka={class:"text-end"},Ga={class:"font-weight-medium"},Ha={class:"text-center"},qa={class:"d-flex align-center justify-center gap-1"},Ja={class:"text-medium-emphasis"},Xa={class:"text-center"},Ya={class:"font-weight-medium"},Qa={class:"text-medium-emphasis"},Wa={class:"d-flex align-center justify-center gap-1"},Za={class:"text-sm"},et={class:"d-flex flex-column gap-1"},at={key:2,class:"text-caption text-medium-emphasis"},tt={class:"d-flex flex-column gap-1"},lt={key:2,class:"text-caption text-medium-emphasis"},st={class:"d-flex gap-1 justify-center"},ot=Y({__name:"ItemTable",props:{items:{},loading:{type:Boolean,default:!1},selectedItems:{default:()=>[]},currentPage:{default:1},itemsPerPage:{default:15},totalItems:{default:0}},emits:["update:selected-items","add-item","edit-item","delete-item","update:page","update:items-per-page"],setup(t,{emit:k}){const r=[{title:"ITEM",key:"item_info",align:"start"},{title:"SATUAN",key:"unit",align:"center"},{title:"HARGA/UNIT",key:"cost_per_unit",align:"end"},{title:"STOK",key:"current_stock",align:"center"},{title:"MIN. STOK",key:"minimum_stock",align:"center"},{title:"STATUS STOK",key:"stock_status",align:"center"},{title:"LOKASI",key:"storage_location",align:"center"},{title:"STATUS",key:"active",align:"center"},{title:"STATION",key:"station_availability",align:"center"},{title:"JENIS LAYANAN",key:"service_type",align:"center"},{title:"AKSI",key:"actions",align:"center",sortable:!1}],p=v=>{switch(v){case"in_stock":return"success";case"low_stock":return"warning";case"out_of_stock":return"error";default:return"success"}},u=v=>{switch(v){case"in_stock":return"Tersedia";case"low_stock":return"Stok Rendah";case"out_of_stock":return"Stok Habis";default:return"Tersedia"}};return(v,f)=>(V(),I(U,null,{default:a(()=>[e(ue,{class:"d-flex align-center justify-space-between"},{default:a(()=>[s("div",Ra,[e(y,{icon:"tabler-list",class:"coffee-icon"}),f[4]||(f[4]=c(" Data Item ")),v.totalItems?(V(),I(T,{key:0,size:"small",color:"primary",variant:"tonal"},{default:a(()=>[c(g(v.totalItems)+" item ",1)]),_:1})):D("",!0)]),s("div",Ba,[e(w,{"prepend-icon":"tabler-plus",color:"primary",onClick:f[0]||(f[0]=o=>v.$emit("add-item"))},{default:a(()=>f[5]||(f[5]=[c(" Tambah Item ")])),_:1,__:[5]})])]),_:1}),e(oe),e(ia,{"model-value":v.selectedItems,"onUpdate:modelValue":f[1]||(f[1]=o=>v.$emit("update:selected-items",o)),headers:r,items:v.items,loading:v.loading,"items-length":v.totalItems,"items-per-page":v.itemsPerPage,page:v.currentPage,"item-value":"id_item","show-select":"","onUpdate:page":f[2]||(f[2]=o=>v.$emit("update:page",o)),"onUpdate:itemsPerPage":f[3]||(f[3]=o=>v.$emit("update:items-per-page",o)),class:"text-no-wrap"},{"item.item_info":a(({item:o})=>[s("div",La,[s("div",ja,g(o.name),1),e(T,{color:"primary",variant:"outlined",size:"small",class:"font-mono mt-1 align-self-start"},{default:a(()=>[c(g(o.item_code),1)]),_:2},1024),o.description?(V(),M("div",Oa,g(o.description),1)):D("",!0)])]),"item.unit":a(({item:o})=>[e(T,{color:"info",variant:"tonal",size:"small"},{default:a(()=>[c(g(o.unit),1)]),_:2},1024)]),"item.cost_per_unit":a(({item:o})=>[s("div",Ka,[s("div",Ga,g(n(ye)(o.cost_per_unit)),1)])]),"item.current_stock":a(({item:o})=>{var h,z,C;return[s("div",Ha,[s("div",qa,[s("span",{class:Je(["font-weight-bold",(((h=o.inventory)==null?void 0:h.current_stock)||0)<=(((z=o.inventory)==null?void 0:z.reorder_level)||0)?"text-error":"text-success"])},g(((C=o.inventory)==null?void 0:C.current_stock)||0),3),s("small",Ja,g(o.unit),1)])])]}),"item.minimum_stock":a(({item:o})=>{var h;return[s("div",Xa,[s("span",Ya,g(((h=o.inventory)==null?void 0:h.reorder_level)||0),1),s("small",Qa,g(o.unit),1)])]}),"item.stock_status":a(({item:o})=>[e(T,{color:p(o.stock_status||"in_stock"),variant:"tonal",size:"small"},{default:a(()=>[c(g(u(o.stock_status||"in_stock")),1)]),_:2},1032,["color"])]),"item.storage_location":a(({item:o})=>[s("div",Wa,[e(y,{icon:"tabler-map-pin",size:"16",class:"text-medium-emphasis"}),s("span",Za,g(o.storage_location||"Gudang A-Rak 1"),1)])]),"item.active":a(({item:o})=>[e(T,{color:o.active?"success":"error",variant:"tonal",size:"small"},{default:a(()=>[c(g(o.active?"Aktif":"Nonaktif"),1)]),_:2},1032,["color"])]),"item.station_availability":a(({item:o})=>[s("div",et,[o.available_in_kitchen?(V(),I(T,{key:0,color:"warning",variant:"tonal",size:"x-small","prepend-icon":"tabler-chef-hat"},{default:a(()=>f[6]||(f[6]=[c(" Kitchen ")])),_:1,__:[6]})):D("",!0),o.available_in_bar?(V(),I(T,{key:1,color:"info",variant:"tonal",size:"x-small","prepend-icon":"tabler-glass-cocktail"},{default:a(()=>f[7]||(f[7]=[c(" Bar ")])),_:1,__:[7]})):D("",!0),!o.available_in_kitchen&&!o.available_in_bar?(V(),M("span",at," Tidak tersedia ")):D("",!0)])]),"item.service_type":a(({item:o})=>[s("div",tt,[o.is_delivery?(V(),I(T,{key:0,color:"primary",variant:"tonal",size:"x-small","prepend-icon":"tabler-truck-delivery"},{default:a(()=>f[8]||(f[8]=[c(" Delivery ")])),_:1,__:[8]})):D("",!0),o.is_takeaway?(V(),I(T,{key:1,color:"secondary",variant:"tonal",size:"x-small","prepend-icon":"tabler-package"},{default:a(()=>f[9]||(f[9]=[c(" Take Away ")])),_:1,__:[9]})):D("",!0),!o.is_delivery&&!o.is_takeaway?(V(),M("span",lt," Tidak tersedia ")):D("",!0)])]),"item.actions":a(({item:o})=>[s("div",st,[e(w,{icon:"tabler-edit",size:"small",variant:"text",color:"primary",onClick:h=>v.$emit("edit-item",o)},null,8,["onClick"]),e(w,{icon:"tabler-trash",size:"small",variant:"text",color:"error",onClick:h=>v.$emit("delete-item",o)},null,8,["onClick"])])]),_:1},8,["model-value","items","loading","items-length","items-per-page","page"])]),_:1}))}}),it=Q(ot,[["__scopeId","data-v-aedd264a"]]),Z=x([]),ie=x(!1),ne=x(!1),re=x(!1),Ve=x({total_items:0,active_items:0,inactive_items:0,low_stock_items:0,out_of_stock_items:0,total_value:0}),ae=x(!1),me=x(!1),J=x(!1),P=x(null),xe=x([]),R=x(1),de=x(0),ee=x(15),te=be({search:"",active:"all",unit:"",stock_status:"all",expiring_days:void 0,show_expired:!1}),X=x(""),ce=x(""),N=x(""),B=be({name:"",description:"",unit:"",cost_per_unit:0,current_stock:0,minimum_stock:0,storage_location:"",expiry_date:void 0,active:!0,is_delivery:!1,is_takeaway:!1,available_in_kitchen:!0,available_in_bar:!0,properties:{}}),nt=j(()=>!0),rt=j(()=>xe.value.length>0),dt=j(()=>[{title:"Semua Status",value:"all"},{title:"Stok Tersedia",value:"in_stock"},{title:"Stok Rendah",value:"low_stock"},{title:"Stok Habis",value:"out_of_stock"}]),ut=j(()=>{const t=new Set(Z.value.map(k=>k.unit));return Array.from(t).map(k=>({title:k,value:k}))}),O=async()=>{ie.value=!0,X.value="";try{const t={page:R.value,per_page:ee.value,...te};Object.keys(t).forEach(r=>{(t[r]===void 0||t[r]===""||t[r]==="all")&&delete t[r]});const k=await q.getAll(t);if(k.success&&k.data){const r=k.data;Z.value=r.data||[],de.value=r.total||0,R.value=r.current_page||1}}catch(t){console.error("Error fetching items:",t),X.value=t.message||"Failed to fetch items",Z.value=[],de.value=0}finally{ie.value=!1}},pe=async()=>{try{const t=await q.getStats();t.success&&t.data&&(Ve.value=t.data)}catch(t){console.error("Error fetching stats:",t)}},mt=async()=>{if(pt()){ne.value=!0,N.value="";try{let t;J.value&&P.value?t=await q.update(P.value.id_item,B):t=await q.create(B),t.success?(ce.value=J.value?"Item berhasil diperbarui!":"Item berhasil ditambahkan!",he(),await O(),await pe()):N.value=t.message||"Terjadi kesalahan saat menyimpan item"}catch(t){console.error("Error saving item:",t),N.value=t.message||"Terjadi kesalahan saat menyimpan item"}finally{ne.value=!1}}},ct=async()=>{if(P.value){re.value=!0;try{const t=await q.delete(P.value.id_item);t.success?(ce.value="Item berhasil dihapus!",De(),await O(),await pe()):X.value=t.message||"Gagal menghapus item"}catch(t){console.error("Error deleting item:",t),X.value=t.message||"Terjadi kesalahan saat menghapus item"}finally{re.value=!1}}},pt=()=>B.name.trim()?B.unit.trim()?!0:(N.value="Satuan harus diisi",!1):(N.value="Nama item harus diisi",!1),ft=()=>{J.value=!1,P.value=null,Ie(),ae.value=!0},vt=t=>{J.value=!0,P.value=t,gt(t),ae.value=!0},_t=t=>{P.value=t,me.value=!0},he=()=>{ae.value=!1,we(),Ie()},De=()=>{me.value=!1,P.value=null},Ie=()=>{Object.assign(B,{name:"",description:"",unit:"",cost_per_unit:0,current_stock:0,minimum_stock:0,storage_location:"",expiry_date:void 0,active:!0,is_delivery:!1,is_takeaway:!1,properties:{}})},gt=t=>{Object.assign(B,{name:t.name,description:t.description||"",unit:t.unit,cost_per_unit:t.cost_per_unit||0,current_stock:t.current_stock||0,minimum_stock:t.minimum_stock||0,storage_location:t.storage_location||"",expiry_date:t.expiry_date,active:t.active,is_delivery:t.is_delivery||!1,is_takeaway:t.is_takeaway||!1,available_in_kitchen:t.available_in_kitchen??!0,available_in_bar:t.available_in_bar??!0,properties:t.properties||{}})},we=()=>{N.value=""},kt=t=>{t!==R.value&&(R.value=t,O())},bt=t=>{t!==ee.value&&(ee.value=t,R.value=1,O())},Se=t=>{t&&Object.assign(te,t),R.value=1,O()},yt=()=>{Object.assign(te,{search:"",active:"all",supplier_id:void 0,unit:"",stock_status:"all",expiring_days:void 0,show_expired:!1}),Se()},Vt=()=>({itemsList:Z,loading:ie,saveLoading:ne,deleteLoading:re,stats:Ve,dialog:ae,deleteDialog:me,editMode:J,selectedItem:P,selectedItems:xe,currentPage:R,totalItems:de,itemsPerPage:ee,filters:te,errorMessage:X,successMessage:ce,modalErrorMessage:N,formData:B,canCreateEdit:nt,hasSelectedItems:rt,stockStatusOptions:dt,unitOptions:ut,fetchItemsList:O,fetchStats:pe,saveItem:mt,deleteItem:ct,openCreateDialog:ft,openEditDialog:vt,openDeleteDialog:_t,closeDialog:he,closeDeleteDialog:De,clearModalError:we,onPageChange:kt,onItemsPerPageChange:bt,handleFiltersUpdate:Se,clearFilters:yt}),xt={class:"item-management"},ht={class:"d-flex justify-space-between align-center mb-6"},Dt={class:"d-flex gap-3 align-center"},It={key:0,class:"d-flex gap-2"},wt=Y({__name:"items-management",setup(t){const{itemsList:k,loading:r,saveLoading:p,deleteLoading:u,stats:v,dialog:f,deleteDialog:o,editMode:h,selectedItem:z,selectedItems:C,currentPage:_,totalItems:i,itemsPerPage:l,filters:d,errorMessage:$,successMessage:A,modalErrorMessage:Ce,formData:fe,canCreateEdit:$e,hasSelectedItems:Te,fetchItemsList:Ue,fetchStats:Pe,saveItem:ze,deleteItem:Ae,openCreateDialog:ve,openEditDialog:Ee,openDeleteDialog:_e,closeDialog:Fe,clearModalError:Me,onPageChange:Ne,onItemsPerPageChange:Re,handleFiltersUpdate:Be}=Vt(),Le=async()=>{await Ae()};return Xe(()=>{Ue(),Pe()}),(St,b)=>{var ge;return V(),M("div",xt,[s("div",ht,[b[10]||(b[10]=s("div",null,[s("h1",{class:"text-h4 font-weight-bold coffee-title"},"Kelola Item"),s("p",{class:"text-body-1 text-medium-emphasis coffee-subtitle"},"Kelola bahan baku dan item untuk operasional coffee shop Anda")],-1)),s("div",Dt,[n(Te)?(V(),M("div",It,[e(T,{color:"primary",size:"small"},{default:a(()=>[c(g(n(C).length)+" dipilih ",1)]),_:1}),e(w,{color:"error",variant:"outlined",size:"small","prepend-icon":"mdi-delete",onClick:n(_e)},{default:a(()=>b[8]||(b[8]=[c(" Hapus Terpilih ")])),_:1,__:[8]},8,["onClick"])])):D("",!0),n($e)?(V(),I(w,{key:1,color:"primary","prepend-icon":"mdi-plus",class:"coffee-btn",onClick:n(ve)},{default:a(()=>b[9]||(b[9]=[c(" Tambah Item ")])),_:1,__:[9]},8,["onClick"])):D("",!0)])]),n($)?(V(),I(ke,{key:0,type:"error",variant:"outlined",class:"mb-4",text:n($),closable:"","onClick:close":b[0]||(b[0]=S=>$.value="")},null,8,["text"])):D("",!0),n(A)?(V(),I(ke,{key:1,type:"success",variant:"outlined",class:"mb-4",text:n(A),closable:"","onClick:close":b[1]||(b[1]=S=>A.value="")},null,8,["text"])):D("",!0),e(Na,{stats:n(v)},null,8,["stats"]),e(Da,{filters:n(d),"onUpdate:filters":n(Be)},null,8,["filters","onUpdate:filters"]),e(it,{items:n(k),loading:n(r),"current-page":n(_),"total-items":n(i),"items-per-page":n(l),"selected-items":n(C),"onUpdate:page":n(Ne),"onUpdate:itemsPerPage":n(Re),onAddItem:n(ve),onEditItem:n(Ee),onDeleteItem:n(_e),"onUpdate:selectedItems":b[2]||(b[2]=S=>C.value=S)},null,8,["items","loading","current-page","total-items","items-per-page","selected-items","onUpdate:page","onUpdate:itemsPerPage","onAddItem","onEditItem","onDeleteItem"]),e(xa,{modelValue:n(f),"onUpdate:modelValue":[b[3]||(b[3]=S=>se(f)?f.value=S:null),b[4]||(b[4]=S=>f.value=S)],"edit-mode":n(h),"form-data":n(fe),loading:n(p),"error-message":n(Ce),onClose:n(Fe),onSave:n(ze),onClearError:n(Me),onUpdateForm:b[5]||(b[5]=(S,je)=>n(fe)[S]=je)},null,8,["modelValue","edit-mode","form-data","loading","error-message","onClose","onSave","onClearError"]),e(Oe,{modelValue:n(o),"onUpdate:modelValue":b[6]||(b[6]=S=>se(o)?o.value=S:null),title:"Konfirmasi Hapus Item","item-name":(ge=n(z))==null?void 0:ge.name,loading:n(u),"confirm-text":"Hapus Item",onConfirm:Le,onCancel:b[7]||(b[7]=S=>o.value=!1)},null,8,["modelValue","item-name","loading"])])}}}),nl=Q(wt,[["__scopeId","data-v-88f2c338"]]);export{nl as default};

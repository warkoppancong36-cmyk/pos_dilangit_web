import{ay as le,d as lt,r as v,V as K,w as rt,g as D,f as s,b as e,s as p,X as U,t as c,l as C,c as G,e as l,aw as nt,a0 as S,o as y,ax as st,aW as ut,D as ct,m as t,a5 as Ce,F as dt,i as mt,p as ze,$ as Fe,a7 as pt}from"./main-CEdDHaBP.js";import{V as De}from"./VDialog-BwBmrRdG.js";import{b as pe,c as qe,V as L}from"./VCard-D0qU2pyL.js";import{V as te}from"./VDivider-__oD30Ho.js";import{V as N}from"./VCardText-CpJ4_XPv.js";import{V as ne}from"./VAlert-OTpr7hc8.js";import{V as vt}from"./VDataTable-GUdTBE99.js";import{V as ae}from"./VChip-8IEsPNpL.js";import{V as Pe}from"./VSpacer-RnxZE5Fq.js";import{_ as it}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as _t}from"./ItemsApi-BXQjgVmb.js";import{V as re,a as E}from"./VRow-BnPui3Gq.js";import{V as Z}from"./VTextField-SECKjXQ7.js";import{V as ot}from"./VSelect-BtLJelrg.js";import{V as ft}from"./VDataTableServer--tvv9gMP.js";import{V as Oe}from"./VTooltip-Do8gY9Rc.js";import{V as Ne}from"./VForm-DlLJypXg.js";import{V as Je}from"./VTextarea-CZMgDLPj.js";import{V as kt}from"./VAvatar-ilH9Vx6e.js";import"./VOverlay-BucaTrB2.js";import"./forwardRefs-B931MWyl.js";import"./VImg-2rEuQgrS.js";import"./VCheckboxBtn-Do7TbMRw.js";import"./VTable-DZazuC97.js";import"./filter-B_qp2GbA.js";/* empty css              */import"./VList-CI7kntfD.js";import"./VMenu-BG2gk3Sp.js";const ee="/api/inventory";class H{static async getAll(i){var u;try{return(await le.get(ee,{params:i})).data}catch(d){throw((u=d.response)==null?void 0:u.data)||this.handleError(d)}}static async getById(i){var u;try{return(await le.get(`${ee}/${i}`)).data}catch(d){throw((u=d.response)==null?void 0:u.data)||this.handleError(d)}}static async getStats(){var i;try{return(await le.get(`${ee}/stats`)).data}catch(u){throw((i=u.response)==null?void 0:i.data)||this.handleError(u)}}static async getLowStockAlerts(){var i;try{return(await le.get(`${ee}/low-stock-alerts`)).data}catch(u){throw((i=u.response)==null?void 0:i.data)||this.handleError(u)}}static async updateStock(i,u){var d;try{return(await le.post(`${ee}/${i}/update-stock`,u)).data}catch(h){throw((d=h.response)==null?void 0:d.data)||this.handleError(h)}}static async bulkUpdateStock(i){var u;try{return(await le.post(`${ee}/bulk-update-stock`,i)).data}catch(d){throw((u=d.response)==null?void 0:u.data)||this.handleError(d)}}static async setReorderLevel(i,u){var d;try{return(await le.post(`${ee}/${i}/reorder-level`,u)).data}catch(h){throw((d=h.response)==null?void 0:d.data)||this.handleError(h)}}static async getMovements(i){var u;try{const d=i!=null&&i.id_inventory?`${ee}/${i.id_inventory}/movements`:`${ee}/movements`;return(await le.get(d,{params:i})).data}catch(d){throw((u=d.response)==null?void 0:u.data)||this.handleError(d)}}static async recordMovement(i){var u;try{return(await le.post(`${ee}/movement`,i)).data}catch(d){throw((u=d.response)==null?void 0:u.data)||this.handleError(d)}}static handleError(i){var u,d;return i.response?{message:((u=i.response.data)==null?void 0:u.message)||"Terjadi kesalahan pada server",success:!1,errors:(d=i.response.data)==null?void 0:d.errors}:i.request?{message:"Tidak dapat terhubung ke server",success:!1}:{message:i.message||"Terjadi kesalahan yang tidak diketahui",success:!1}}static formatError(i){return i.errors?Object.values(i.errors).flat().join(", "):i.message||"Terjadi kesalahan yang tidak diketahui"}static isValidationError(i){return i.errors&&typeof i.errors=="object"}static getFieldError(i,u){return i.errors&&i.errors[u]?Array.isArray(i.errors[u])?i.errors[u][0]:i.errors[u]:null}static getMovementTypes(){return[{value:"stock_in",label:"Stock Masuk",color:"success"},{value:"stock_out",label:"Stock Keluar",color:"warning"},{value:"adjustment",label:"Penyesuaian",color:"info"},{value:"transfer",label:"Transfer",color:"primary"},{value:"return",label:"Retur",color:"success"},{value:"damaged",label:"Rusak",color:"error"},{value:"expired",label:"Kadaluarsa",color:"error"}]}static getStockStatusOptions(){return[{value:"all",label:"Semua Status"},{value:"in_stock",label:"Tersedia"},{value:"low_stock",label:"Stok Menipis"},{value:"out_of_stock",label:"Habis"},{value:"overstock",label:"Stok Berlebih"}]}}const gt={key:1,class:"text-center py-8"},yt={class:"font-weight-medium"},bt={class:"text-medium-emphasis"},ht={class:"text-center"},xt={class:"text-center font-weight-medium"},wt={class:"text-center font-weight-bold text-primary"},St={class:"text-end"},Vt={class:"text-end font-weight-medium text-success"},Mt={class:"max-width-200"},Ct={class:"font-weight-medium"},Dt={key:0,class:"text-medium-emphasis"},Pt={key:1,class:"d-block text-caption"},It={key:2,class:"text-info d-block"},Tt={class:"text-center py-8"},Et=lt({__name:"InventoryMovementsDialog",props:{modelValue:{type:Boolean},inventoryId:{},inventoryName:{}},emits:["update:modelValue"],setup(X,{emit:i}){const u=X,d=i,h=v([]),A=v(!1),R=v(""),P=K({get:()=>u.modelValue,set:_=>d("update:modelValue",_)}),q=async()=>{var _,f,n,V;if(u.inventoryId)try{A.value=!0,R.value="";const x=await H.getMovements({id_inventory:parseInt(u.inventoryId),page:1,per_page:50});x.data&&Array.isArray(x.data)?h.value=x.data:x.data&&((_=x==null?void 0:x.data)!=null&&_.data)&&Array.isArray((f=x==null?void 0:x.data)==null?void 0:f.data)?h.value=x.data.data:h.value=[]}catch(x){console.error("Error fetching movements:",x),R.value=((V=(n=x.response)==null?void 0:n.data)==null?void 0:V.message)||"Gagal memuat riwayat pergerakan"}finally{A.value=!1}},J=_=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(_),z=_=>({in:"success",out:"error",stock_in:"success",stock_out:"error",adjustment:"warning",transfer:"info",return:"secondary"})[_]||"primary",F=_=>({in:"Stock Masuk",out:"Stock Keluar",stock_in:"Stock Masuk",stock_out:"Stock Keluar",adjustment:"Penyesuaian",transfer:"Transfer",return:"Retur"})[_]||_,M=_=>({in:"tabler-plus",out:"tabler-minus",stock_in:"tabler-plus",stock_out:"tabler-minus",adjustment:"tabler-edit",transfer:"tabler-arrows-exchange",return:"tabler-arrow-back"})[_]||"tabler-package";return rt(P,_=>{_&&u.inventoryId?q():(h.value=[],R.value="")}),(_,f)=>(y(),D(De,{modelValue:P.value,"onUpdate:modelValue":f[1]||(f[1]=n=>P.value=n),"max-width":"900px",scrollable:""},{default:s(()=>[e(L,null,{default:s(()=>[e(pe,{class:"d-flex align-center"},{default:s(()=>[e(U,{icon:"tabler-history",class:"me-2"}),p(" Riwayat Pergerakan - "+c(_.inventoryName),1)]),_:1}),e(te),e(N,{class:"pa-0"},{default:s(()=>[R.value?(y(),D(ne,{key:0,type:"error",variant:"tonal",class:"ma-4"},{default:s(()=>[p(c(R.value),1)]),_:1})):C("",!0),A.value?(y(),G("div",gt,[e(nt,{indeterminate:"",color:"primary",size:"40"}),f[2]||(f[2]=l("div",{class:"mt-4 text-medium-emphasis"}," Memuat riwayat pergerakan... ",-1))])):(y(),D(vt,{key:2,headers:[{title:"Tanggal",key:"created_at",sortable:!1},{title:"Jenis",key:"movement_type",sortable:!1},{title:"Kuantitas",key:"quantity",sortable:!1},{title:"Stok Sebelum",key:"stock_before",sortable:!1},{title:"Stok Sesudah",key:"stock_after",sortable:!1},{title:"Harga/Unit",key:"unit_cost",sortable:!1},{title:"Total Nilai",key:"total_cost",sortable:!1},{title:"Catatan",key:"notes",sortable:!1}],items:h.value,loading:A.value,class:"text-no-wrap","items-per-page":"15",height:"500","fixed-header":""},{"item.created_at":s(({item:n})=>[l("div",null,[l("div",yt,c(new Date(n.created_at).toLocaleDateString("id-ID")),1),l("small",bt,c(new Date(n.created_at).toLocaleTimeString("id-ID")),1)])]),"item.movement_type":s(({item:n})=>[e(ae,{color:z(n.movement_type),variant:"tonal",size:"small","prepend-icon":M(n.movement_type)},{default:s(()=>[p(c(F(n.movement_type)),1)]),_:2},1032,["color","prepend-icon"])]),"item.quantity":s(({item:n})=>[l("div",ht,[e(ae,{color:n.movement_type==="in"||n.movement_type==="stock_in"?"success":"error",variant:"outlined",size:"small"},{default:s(()=>[p(c(n.movement_type==="in"||n.movement_type==="stock_in"?"+":"-")+c(Math.abs(n.quantity)),1)]),_:2},1032,["color"])])]),"item.stock_before":s(({item:n})=>[l("div",xt,c(n.stock_before),1)]),"item.stock_after":s(({item:n})=>[l("div",wt,c(n.stock_after),1)]),"item.unit_cost":s(({item:n})=>[l("div",St,c(n.unit_cost?J(n.unit_cost):"-"),1)]),"item.total_cost":s(({item:n})=>[l("div",Vt,c(n.total_cost?J(n.total_cost):"-"),1)]),"item.notes":s(({item:n})=>[l("div",Mt,[l("div",Ct,c(n.notes||"-"),1),n.reference_type&&n.reference_id?(y(),G("small",Dt," Ref: "+c(n.reference_type)+"-"+c(n.reference_id),1)):C("",!0),n.batch_number?(y(),G("small",Pt," Batch: "+c(n.batch_number),1)):C("",!0),n.user?(y(),G("small",It," oleh: "+c(n.user.name),1)):C("",!0)])]),"no-data":s(()=>[l("div",Tt,[e(U,{icon:"tabler-history-off",size:"48",class:"text-medium-emphasis mb-4"}),f[3]||(f[3]=l("div",{class:"text-h6 text-medium-emphasis mb-2"}," Belum ada riwayat pergerakan ",-1)),f[4]||(f[4]=l("div",{class:"text-body-2 text-medium-emphasis"}," Riwayat akan muncul setelah ada pergerakan stok ",-1))])]),_:1},8,["items","loading"]))]),_:1}),e(te),e(qe,{class:"pa-4"},{default:s(()=>[e(Pe),e(S,{variant:"outlined",onClick:f[0]||(f[0]=n=>P.value=!1)},{default:s(()=>f[5]||(f[5]=[p(" Tutup ")])),_:1,__:[5]}),e(S,{color:"primary","prepend-icon":"tabler-refresh",onClick:q},{default:s(()=>f[6]||(f[6]=[p(" Refresh ")])),_:1,__:[6]})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Ut=it(Et,[["__scopeId","data-v-ca0277a4"]]),jt=()=>{const X=v([]),i=v(!1),u=v(!1),d=v({total_items:0,low_stock_items:0,out_of_stock_items:0,overstock_items:0,total_stock_value:0,total_stock_quantity:0,total_reserved_stock:0,items_need_restock:0}),h=v([]),A=v(!1),R=v([]),P=v(!1),q=v(!1),J=v(!1),z=v(!1),F=v(!1),M=v(null),_=v([]),f=v(1),n=v(0),V=v(15),x=v({search:"",stock_status:"all",category_id:void 0,supplier_id:void 0,sort_by:"current_stock",sort_order:"asc"}),W=v(""),I=v(""),j=v(""),ie=v({movement_type:"stock_in",quantity:0,reason:"",reference_number:"",cost_per_unit:void 0,notes:""}),ue=v({reorder_level:0,max_stock_level:0}),Y=K(()=>_.value.length>0),ve=K(()=>d.value.total_stock_value),se=K(()=>d.value.low_stock_items),ce=K(()=>d.value.out_of_stock_items),Q=K(()=>Math.ceil(n.value/V.value)),_e=K(()=>f.value<Q.value),fe=K(()=>f.value>1),ke=K(()=>({currentPage:f.value,totalPages:Q.value,totalItems:n.value,itemsPerPage:V.value,hasNext:_e.value,hasPrev:fe.value})),Ie=[r=>r>0||"Kuantitas harus lebih dari 0",r=>Number.isInteger(r)||"Kuantitas harus berupa bilangan bulat"],Te=[r=>!!r||"Alasan wajib diisi",r=>r&&r.length>=3||"Alasan minimal 3 karakter"],Ee=[r=>!r||r>=0||"Harga harus lebih dari atau sama dengan 0"],m=[{title:"Stock Masuk",value:"stock_in",color:"success"},{title:"Stock Keluar",value:"stock_out",color:"warning"},{title:"Penyesuaian",value:"adjustment",color:"info"},{title:"Transfer",value:"transfer",color:"primary"},{title:"Retur",value:"return",color:"success"}],$=[{title:"Semua Status",value:"all"},{title:"Tersedia",value:"in_stock"},{title:"Stok Menipis",value:"low_stock"},{title:"Habis",value:"out_of_stock"},{title:"Stok Berlebih",value:"overstock"}],w=async()=>{i.value=!0,W.value="";try{const r={...x.value,page:f.value,per_page:V.value};Object.keys(r).forEach(k=>{const a=r[k];(a===""||a===void 0||a===null||a==="all")&&delete r[k]});const O=await H.getAll(r);if(O.success)X.value=O.data.data||[],n.value=O.data.total||0,O.data.current_page&&(f.value=O.data.current_page);else throw new Error(O.message||"Gagal mengambil data inventory")}catch(r){console.error("Error fetching inventory:",r),W.value=H.formatError(r)||"Gagal mengambil data inventory",X.value=[],n.value=0}finally{i.value=!1}},Ue=async()=>{try{const r=await H.getStats();r.success&&(d.value=r.data)}catch(r){console.error("Error fetching inventory stats:",r)}},de=async()=>{P.value=!0;try{const r=await H.getLowStockAlerts();r.success&&(R.value=r.data.data||[])}catch(r){console.error("Error fetching low stock alerts:",r),R.value=[]}finally{P.value=!1}},oe=async r=>{A.value=!0;try{const O=await H.getMovements({id_inventory:r,page:1,per_page:20});O.success&&(h.value=O.data)}catch(O){console.error("Error fetching movements:",O)}finally{A.value=!1}},Be=async()=>{if(M.value){u.value=!0,j.value="";try{const r=await H.updateStock(M.value.id_inventory,ie.value);if(r.success)I.value="Stock berhasil diperbarui",ge(),await w(),await Ue(),await de();else throw new Error(r.message||"Gagal memperbarui stock")}catch(r){console.error("Error updating stock:",r),j.value=H.formatError(r)||"Gagal memperbarui stock"}finally{u.value=!1}}},je=async()=>{if(M.value){u.value=!0,j.value="";try{const r=await H.setReorderLevel(M.value.id_inventory,ue.value);if(r.success)I.value="Reorder level berhasil diperbarui",B(),await w();else throw new Error(r.message||"Gagal memperbarui reorder level")}catch(r){console.error("Error setting reorder level:",r),j.value=H.formatError(r)||"Gagal memperbarui reorder level"}finally{u.value=!1}}},ye=r=>{M.value=r,ie.value={movement_type:"stock_in",quantity:0,reason:"",reference_number:"",cost_per_unit:r.average_cost||void 0,notes:""},j.value="",q.value=!0},Ke=r=>{M.value=r,ue.value={reorder_level:r.reorder_level||0,max_stock_level:r.max_stock_level||0},j.value="",F.value=!0},be=r=>{M.value=r,oe(r.id_inventory),z.value=!0},ge=()=>{q.value=!1,setTimeout(()=>{M.value=null,j.value=""},300)},B=()=>{F.value=!1,setTimeout(()=>{M.value=null,j.value=""},300)};return{inventoryList:X,loading:i,saveLoading:u,stats:d,movementsList:h,movementsLoading:A,lowStockItems:R,alertsLoading:P,stockUpdateDialog:q,bulkUpdateDialog:J,movementsDialog:z,reorderDialog:F,selectedInventory:M,selectedItems:_,currentPage:f,totalItems:n,itemsPerPage:V,filters:x,errorMessage:W,successMessage:I,modalErrorMessage:j,stockUpdateForm:ie,reorderForm:ue,hasSelectedItems:Y,totalStockValue:ve,lowStockCount:se,outOfStockCount:ce,quantityRules:Ie,reasonRules:Te,costRules:Ee,movementTypeOptions:m,stockStatusOptions:$,fetchInventoryList:w,fetchStats:Ue,fetchLowStockAlerts:de,fetchMovements:oe,updateStock:Be,setReorderLevel:je,openStockUpdateDialog:ye,openReorderDialog:Ke,openMovementsDialog:be,closeStockUpdateDialog:ge,closeReorderDialog:B,closeMovementsDialog:()=>{z.value=!1,setTimeout(()=>{M.value=null,h.value=[]},300)},clearModalError:()=>{j.value=""},onPageChange:r=>{r!==f.value&&(f.value=r,w())},onItemsPerPageChange:r=>{r!==V.value&&(V.value=r,f.value=1,w())},handleFiltersUpdate:r=>{x.value={...x.value,...r},f.value=1,w()},formatCurrency:r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),getStockStatusColor:r=>r.current_stock===0?"error":r.is_low_stock?"warning":"success",getStockStatusText:r=>r.current_stock===0?"Habis":r.reorder_level>0&&r.current_stock<=r.reorder_level?"Menipis":r.max_stock_level&&r.current_stock>r.max_stock_level?"Berlebih":"Tersedia",getMovementTypeColor:r=>({stock_in:"success",stock_out:"warning",adjustment:"info",transfer:"primary",return:"success",damaged:"error",expired:"error"})[r]||"grey",totalPages:Q,hasNextPage:_e,hasPrevPage:fe,paginationInfo:ke}};function $t(X){const i=v([]),u=v([]),d=v(!1),h=v(!1),A=v({total_items:0,total_value:0,low_stock_items:0,out_of_stock_items:0,movements_today:0,movements_this_month:0,top_consumed_items:[],recent_movements:[]}),R=v(1),P=v(0),q=v(10),J=st({search:"",stock_status:"all",movement_type:"",date_from:"",date_to:"",item_id:void 0}),z=v(!1),F=v(!1),M=v(null),_=st({item_id:0,type:"in",quantity:0,notes:"",cost_per_unit:0}),f=v(""),n=v(""),V=v(""),x=K(()=>!0),W=[{title:"Semua Status",value:"all"},{title:"Tersedia",value:"in_stock"},{title:"Stok Rendah",value:"low_stock"},{title:"Habis",value:"out_of_stock"}],I=[{title:"Masuk",value:"in",color:"success",icon:"tabler-plus"},{title:"Keluar",value:"out",color:"error",icon:"tabler-minus"},{title:"Penyesuaian",value:"adjustment",color:"warning",icon:"tabler-adjustments"}],j=[{title:"Pembelian",value:"purchase"},{title:"Penjualan",value:"sale"},{title:"Produksi",value:"production"},{title:"Penyesuaian",value:"adjustment"},{title:"Kerusakan",value:"waste"}],ie=m=>m.current_stock<=0?{status:"out_of_stock",color:"error",text:"Habis",icon:"tabler-x"}:m.current_stock<=m.minimum_stock?{status:"low_stock",color:"warning",text:"Rendah",icon:"tabler-alert-triangle"}:{status:"in_stock",color:"success",text:"Tersedia",icon:"tabler-check"},ue=m=>!m.maximum_stock||m.maximum_stock<=0?100:Math.round(m.current_stock/m.maximum_stock*100),Y=async()=>{d.value=!0;try{await new Promise(m=>setTimeout(m,1e3)),i.value=await _t.getAll(),P.value=i.value.length,n.value=""}catch{f.value="Gagal memuat data items"}finally{d.value=!1}},ve=async m=>{d.value=!0;try{const $=await H.getMovements({id_inventory:m,page:R.value,per_page:q.value});u.value=$.data.map(w=>({id:w.id_movement,item_id:w.id_inventory,type:w.movement_type,quantity:w.quantity,unit:"pcs",reference_id:w.reference_number?parseInt(w.reference_number):void 0,reference_type:w.reason,notes:w.notes,cost_per_unit:w.cost_per_unit,total_cost:w.total_cost,created_by:w.created_by,created_at:w.created_at,creator:w.user})),P.value=$.total}catch($){console.error("Failed to fetch stock movements:",$),u.value=[]}finally{d.value=!1}},se=async()=>{try{await Y();const m=i.value;A.value={total_items:m.length,total_value:m.reduce(($,w)=>$+w.current_stock*w.cost_per_unit,0),low_stock_items:m.filter($=>$.current_stock<=$.minimum_stock&&$.current_stock>0).length,out_of_stock_items:m.filter($=>$.current_stock<=0).length,movements_today:0,movements_this_month:0,top_consumed_items:[],recent_movements:[]}}catch(m){console.error("Failed to fetch stats:",m)}},ce=async()=>{h.value=!0,V.value="";try{const m=await H.recordMovement({item_id:_.item_id,movement_type:_.type,quantity:_.quantity,notes:_.notes,cost_per_unit:_.cost_per_unit});if(m.success)n.value=`Stock ${_.type==="in"?"masuk":_.type==="out"?"keluar":"disesuaikan"} berhasil dicatat`,ke(),await Y(),await se(),X&&X();else throw new Error(m.message||"Gagal mencatat pergerakan stok")}catch(m){V.value=m.message||"Gagal mencatat pergerakan stok"}finally{h.value=!1}},Q=m=>{M.value=m,Object.assign(_,{item_id:m.id_item,type:"in",quantity:0,notes:"",cost_per_unit:m.cost_per_unit}),z.value=!0},_e=m=>{M.value=m,Object.assign(_,{item_id:m.id_item,type:"out",quantity:0,notes:"",cost_per_unit:m.cost_per_unit}),z.value=!0},fe=m=>{M.value=m,Object.assign(_,{item_id:m.id_item,type:"adjustment",quantity:m.current_stock,notes:"",cost_per_unit:m.cost_per_unit}),F.value=!0},ke=()=>{z.value=!1,F.value=!1,V.value="",M.value=null};return{itemsList:i,stockMovements:u,loading:d,saveLoading:h,stats:A,currentPage:R,totalItems:P,itemsPerPage:q,filters:J,movementDialog:z,adjustmentDialog:F,selectedItem:M,movementFormData:_,errorMessage:f,successMessage:n,modalErrorMessage:V,canManageStock:x,stockStatusOptions:W,movementTypeOptions:I,referenceTypeOptions:j,getStockStatus:ie,getStockPercentage:ue,fetchItems:Y,fetchStockMovements:ve,fetchStats:se,recordStockMovement:ce,openStockInDialog:Q,openStockOutDialog:_e,openAdjustmentDialog:fe,closeMovementDialog:ke,clearModalError:()=>{V.value=""},onPageChange:m=>{R.value=m,Y()},handleFiltersUpdate:m=>{Object.assign(J,m),R.value=1,Y()}}}const Rt={class:"inventory-management"},Lt={class:"d-flex justify-space-between align-center mb-6"},At={class:"d-flex gap-3 align-center"},zt={class:"d-flex align-center justify-space-between"},Ft={class:"text-h4 font-weight-bold text-primary"},Ot={class:"d-flex align-center justify-space-between"},Nt={class:"text-h4 font-weight-bold text-warning"},qt={class:"d-flex align-center justify-space-between"},Bt={class:"text-h4 font-weight-bold text-error"},Kt={class:"d-flex align-center justify-space-between"},Ht={class:"text-h4 font-weight-bold text-success"},Gt={class:"d-flex align-center justify-space-between"},Jt={class:"d-flex align-center gap-3"},Xt={class:"d-flex gap-2"},Wt={class:"d-flex flex-wrap gap-2"},Yt={class:"table-container"},Qt={class:"d-flex align-center"},Zt={class:"font-weight-medium"},ea={class:"d-flex flex-column"},ta={class:"text-primary font-weight-medium"},aa={class:"text-medium-emphasis"},sa={class:"text-center"},oa={class:"text-h6 font-weight-bold"},la={key:0,class:"text-warning"},ra={class:"text-center"},na={class:"text-center"},ia={class:"text-end"},ua={class:"text-end font-weight-medium text-success"},ca={class:"d-flex align-center gap-1"},da={class:"text-center py-12"},ma={class:"text-h5 text-medium-emphasis mb-2"},pa={class:"text-body-1 text-medium-emphasis mb-4"},va={key:0},_a={key:0},fa={key:1},ka={key:2},ga={key:1},ya={class:"d-flex justify-center gap-3"},ba={class:"text-center py-8"},ha={class:"d-flex align-center gap-2"},xa={class:"d-flex align-center gap-3"},wa={class:"font-weight-bold"},Sa={class:"text-caption"},Va={class:"text-caption"},Ma={class:"d-flex gap-3 justify-end"},Ca={class:"d-flex align-center gap-2"},Da={class:"text-white"},Pa={class:"d-flex align-center gap-3"},Ia={class:"font-weight-bold"},Ta={class:"text-caption"},Ea=lt({__name:"inventory-management",setup(X){const{xs:i}=ut(),u=()=>{se(),ce(),Q()},{inventoryList:d,loading:h,saveLoading:A,stats:R,lowStockItems:P,stockUpdateDialog:q,reorderDialog:J,movementsDialog:z,selectedInventory:F,currentPage:M,totalItems:_,itemsPerPage:f,filters:n,errorMessage:V,successMessage:x,modalErrorMessage:W,stockUpdateForm:I,reorderForm:j,totalStockValue:ie,lowStockCount:ue,outOfStockCount:Y,stockStatusOptions:ve,fetchInventoryList:se,fetchStats:ce,fetchLowStockAlerts:Q,updateStock:_e,setReorderLevel:fe,openStockUpdateDialog:ke,openReorderDialog:Ie,openMovementsDialog:Te,closeStockUpdateDialog:Ee,closeReorderDialog:m,clearModalError:$,onPageChange:w,onItemsPerPageChange:Ue,handleFiltersUpdate:de,formatCurrency:oe,getStockStatusColor:Be,getStockStatusText:je}=jt(),{recordStockMovement:ye,openAdjustmentDialog:Ke,movementDialog:be,adjustmentDialog:ge,selectedItem:B,movementFormData:T,saveLoading:He,closeMovementDialog:he,successMessage:$e,modalErrorMessage:Ge,clearModalError:Xe}=$t(u),We=k=>k.item?{id_item:k.item.id_item,item_code:k.item.item_code,name:k.item.name,description:k.item.description||"",unit:k.item.unit,cost_per_unit:parseFloat(k.item.cost_per_unit),current_stock:k.current_stock,minimum_stock:k.reorder_level||0,active:!0,storage_location:k.item.storage_location||"",expiry_date:k.item.expiry_date||null,properties:k.item.properties||null,created_by:k.item.created_by||null,updated_by:k.item.updated_by||null,created_at:k.item.created_at,updated_at:k.item.updated_at,deleted_at:k.item.deleted_at||null}:null,Ye=k=>{const a=We(k);a&&Ke(a)},Qe=K(()=>R.value);K(()=>d.value),K(()=>h.value),ct(()=>{se(),ce(),Q()});const r=v(!1),O=async()=>{try{r.value=!0;const k=await pt(()=>import("./xlsx-CfQreh1U.js"),[]),a=d.value.map((b,Ae)=>{var we,Se,Ve,Me,Ze,et,tt,at;return{No:Ae+1,"Produk/Variant":`${((we=b.item)==null?void 0:we.name)||((Se=b.product)==null?void 0:Se.name)||"Unknown Item"} (SKU: ${((Ve=b.item)==null?void 0:Ve.item_code)||((Me=b.product)==null?void 0:Me.sku)||"-"})`,Deskripsi:((Ze=b.item)==null?void 0:Ze.description)||((et=b.product)==null?void 0:et.description)||"-",Unit:((tt=b.item)==null?void 0:tt.unit)||"pcs","Stok Saat Ini":b.current_stock||0,"Stok Tersedia":b.available_stock||0,"Stok Minimum":b.reorder_level||0,Status:je(b.current_stock,b.reorder_level),"Harga Rata-rata":oe(b.average_cost||0),"Nilai Stok":oe(b.stock_value||0),"Lokasi Penyimpanan":((at=b.item)==null?void 0:at.storage_location)||"-",Dibuat:b.created_at?new Date(b.created_at).toLocaleDateString("id-ID"):"-",Diperbarui:b.updated_at?new Date(b.updated_at).toLocaleDateString("id-ID"):"-"}}),xe=k.utils.book_new(),me=k.utils.json_to_sheet(a),Re=[["LAPORAN INVENTORY MANAGEMENT"],["Tanggal Export: "+new Date().toLocaleDateString("id-ID")],["Total Items: "+_.value],["Total Nilai Stok: "+oe(ie.value||0)],["Items Low Stock: "+ue.value],["Items Out of Stock: "+Y.value],[]];k.utils.sheet_add_aoa(me,Re,{origin:"A1"}),k.utils.sheet_add_json(me,a,{origin:"A8"});const Le=[{wch:5},{wch:30},{wch:15},{wch:30},{wch:8},{wch:12},{wch:12},{wch:12},{wch:15},{wch:15},{wch:15},{wch:20},{wch:12},{wch:12}];me["!cols"]=Le,k.utils.book_append_sheet(xe,me,"Inventory Report");const g=`inventory-report-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.xlsx`;k.writeFile(xe,g),x.value="Laporan berhasil di-export ke Excel!"}catch(k){console.error("Export error:",k),V.value="Gagal mengexport laporan: "+(k instanceof Error?k.message:"Unknown error")}finally{r.value=!1}};return rt(_,(k,a)=>{},{immediate:!0}),(k,a)=>{var xe,me,Re,Le;return y(),G("div",Rt,[l("div",Lt,[a[30]||(a[30]=l("div",null,[l("h1",{class:"text-h4 font-weight-bold inventory-title"}," Kelola Inventory "),l("p",{class:"text-body-1 text-medium-emphasis inventory-subtitle"}," Kelola stok barang dan pergerakan inventory ")],-1)),l("div",At,[e(S,{color:"primary","prepend-icon":"tabler-refresh",variant:"outlined",onClick:u},{default:s(()=>a[29]||(a[29]=[p(" Refresh Data ")])),_:1,__:[29]})])]),t(V)?(y(),D(ne,{key:0,type:"error",variant:"outlined",class:"mb-4",text:t(V),closable:"","onClick:close":a[0]||(a[0]=o=>V.value="")},null,8,["text"])):C("",!0),t(x)?(y(),D(ne,{key:1,type:"success",variant:"outlined",class:"mb-4",text:t(x),closable:"","onClick:close":a[1]||(a[1]=o=>x.value="")},null,8,["text"])):C("",!0),t($e)?(y(),D(ne,{key:2,type:"success",variant:"outlined",class:"mb-4",text:t($e),closable:"","onClick:close":a[2]||(a[2]=o=>$e.value="")},null,8,["text"])):C("",!0),e(re,{class:"mb-6"},{default:s(()=>[e(E,{cols:"12",md:"3"},{default:s(()=>[e(L,{class:"stats-card"},{default:s(()=>[e(N,null,{default:s(()=>[l("div",zt,[l("div",null,[l("div",Ft,c(Qe.value.total_items||0),1),a[31]||(a[31]=l("div",{class:"text-caption text-medium-emphasis"}," Total Produk ",-1))]),e(U,{icon:"tabler-package",size:"48",class:"text-primary opacity-50"})])]),_:1})]),_:1})]),_:1}),e(E,{cols:"12",md:"3"},{default:s(()=>[e(L,{class:"stats-card"},{default:s(()=>[e(N,null,{default:s(()=>[l("div",Ot,[l("div",null,[l("div",Nt,c(t(ue)||0),1),a[32]||(a[32]=l("div",{class:"text-caption text-medium-emphasis"}," Stok Menipis ",-1))]),e(U,{icon:"tabler-alert-triangle",size:"48",class:"text-warning opacity-50"})])]),_:1})]),_:1})]),_:1}),e(E,{cols:"12",md:"3"},{default:s(()=>[e(L,{class:"stats-card"},{default:s(()=>[e(N,null,{default:s(()=>[l("div",qt,[l("div",null,[l("div",Bt,c(t(Y)||0),1),a[33]||(a[33]=l("div",{class:"text-caption text-medium-emphasis"}," Stok Habis ",-1))]),e(U,{icon:"tabler-x-circle",size:"48",class:"text-error opacity-50"})])]),_:1})]),_:1})]),_:1}),e(E,{cols:"12",md:"3"},{default:s(()=>[e(L,{class:"stats-card"},{default:s(()=>[e(N,null,{default:s(()=>[l("div",Kt,[l("div",null,[l("div",Ht,c(t(oe)(t(ie)||0)),1),a[34]||(a[34]=l("div",{class:"text-caption text-medium-emphasis"}," Nilai Stok ",-1))]),e(U,{icon:"tabler-currency-dollar",size:"48",class:"text-success opacity-50"})])]),_:1})]),_:1})]),_:1})]),_:1}),e(L,{class:"mb-6 info-card",color:"info",variant:"tonal"},{default:s(()=>[e(N,null,{default:s(()=>[l("div",Gt,[l("div",Jt,[e(U,{icon:"tabler-info-circle",size:"32",class:"text-info"}),a[35]||(a[35]=l("div",null,[l("div",{class:"text-subtitle-1 font-weight-medium text-info"}," Sistem Stock Movement Otomatis "),l("div",{class:"text-body-2 text-medium-emphasis"},[p(" Stok akan bertambah otomatis saat purchasing dan berkurang saat penjualan POS. Gunakan tombol "),l("strong",null,"Penyesuaian"),p(" untuk koreksi manual jika diperlukan. ")])],-1))]),l("div",Xt,[e(ae,{color:"success",variant:"tonal",size:"small"},{default:s(()=>[e(U,{icon:"tabler-shopping-cart",class:"me-1"}),a[36]||(a[36]=p(" Purchase → Stok + "))]),_:1,__:[36]}),e(ae,{color:"error",variant:"tonal",size:"small"},{default:s(()=>[e(U,{icon:"tabler-cash",class:"me-1"}),a[37]||(a[37]=p(" POS Sale → Stok - "))]),_:1,__:[37]})])])]),_:1})]),_:1}),t(P).length>0?(y(),D(L,{key:3,class:"mb-6 low-stock-alert"},{default:s(()=>[e(pe,{class:"d-flex align-center"},{default:s(()=>[e(U,{icon:"tabler-alert-triangle",class:"text-warning me-2"}),p(" Peringatan Stok Menipis ("+c(t(P).length)+" produk) ",1)]),_:1}),e(N,null,{default:s(()=>[l("div",Wt,[(y(!0),G(dt,null,mt(t(P).slice(0,10),o=>(y(),D(ae,{key:o.id_inventory,color:"warning",variant:"outlined",size:"small"},{default:s(()=>{var g;return[p(c((g=o.product)==null?void 0:g.name)+" ("+c(o.current_stock)+"/"+c(o.reorder_level)+") ",1)]}),_:2},1024))),128)),t(P).length>10?(y(),D(ae,{key:0,color:"warning",variant:"tonal",size:"small"},{default:s(()=>[p(" +"+c(t(P).length-10)+" lainnya ",1)]),_:1})):C("",!0)])]),_:1})]),_:1})):C("",!0),!t(h)&&t(d).length===0&&!t(V)&&!t(n).search&&t(n).stock_status==="all"?(y(),D(L,{key:4,class:"mb-6"},{default:s(()=>[e(N,{class:"text-center py-6"},{default:s(()=>[e(U,{icon:"tabler-info-circle",size:"48",class:"text-info mb-3"}),a[38]||(a[38]=l("div",{class:"text-h6 mb-2"}," Sistem Inventory Management Siap Digunakan ",-1)),a[39]||(a[39]=l("div",{class:"text-body-2 text-medium-emphasis"}," Buat produk dan variant terlebih dahulu untuk mulai melacak inventory. ",-1))]),_:1,__:[38,39]})]),_:1})):C("",!0),e(L,{class:"mb-6"},{default:s(()=>[e(N,null,{default:s(()=>[e(re,null,{default:s(()=>[e(E,{cols:"12",md:"4"},{default:s(()=>[e(Z,{modelValue:t(n).search,"onUpdate:modelValue":[a[3]||(a[3]=o=>t(n).search=o),a[4]||(a[4]=o=>t(de)({search:o}))],label:"Cari inventory produk...",placeholder:"Nama produk, SKU, atau variant","prepend-inner-icon":"tabler-search",clearable:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(E,{cols:"12",md:"4"},{default:s(()=>[e(ot,{modelValue:t(n).stock_status,"onUpdate:modelValue":[a[5]||(a[5]=o=>t(n).stock_status=o),a[6]||(a[6]=o=>t(de)({stock_status:o||"all"}))],items:t(ve),label:"Status Stok",variant:"outlined",clearable:""},null,8,["modelValue","items"])]),_:1}),e(E,{cols:"12",md:"4",class:"d-flex align-center gap-2"},{default:s(()=>[e(S,{variant:"outlined","prepend-icon":"tabler-refresh",onClick:a[7]||(a[7]=o=>{t(se)(),t(ce)(),t(Q)()})},{default:s(()=>a[40]||(a[40]=[p(" Refresh ")])),_:1,__:[40]}),t(n).search||t(n).stock_status!=="all"?(y(),D(S,{key:0,variant:"outlined",color:"warning","prepend-icon":"tabler-filter-off",onClick:a[8]||(a[8]=o=>t(de)({search:"",stock_status:"all"}))},{default:s(()=>a[41]||(a[41]=[p(" Clear ")])),_:1,__:[41]})):C("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),!t(h)&&t(d).length===0&&!t(V)&&!t(n).search&&t(n).stock_status==="all"?(y(),D(L,{key:5,class:"mb-6"},{default:s(()=>[e(N,{class:"text-center py-6"},{default:s(()=>[e(U,{icon:"tabler-package-off",size:"48",class:"text-disabled mb-3"}),a[42]||(a[42]=l("div",{class:"text-h6 mb-2"}," Sistem Inventory Management Siap Digunakan ",-1)),a[43]||(a[43]=l("div",{class:"text-body-2 text-medium-emphasis"}," Buat produk dan variant terlebih dahulu untuk mulai melacak inventory. ",-1))]),_:1,__:[42,43]})]),_:1})):C("",!0),e(L,{class:"products-inventory-table"},{default:s(()=>[e(pe,{class:"d-flex align-center gap-2 coffee-header"},{default:s(()=>[e(U,{icon:"tabler-package",class:"text-white"}),a[45]||(a[45]=l("span",{class:"text-white"},"Inventory Produk",-1)),e(Pe),e(S,{color:"success",variant:"elevated","prepend-icon":"tabler-file-spreadsheet",loading:r.value,onClick:O},{default:s(()=>a[44]||(a[44]=[p(" Export Excel ")])),_:1,__:[44]},8,["loading"]),e(ae,{color:"white",size:"small",variant:"tonal"},{default:s(()=>[p(c(t(_))+" Produk ",1)]),_:1})]),_:1,__:[45]}),e(te),l("div",Yt,[e(ft,{headers:[{title:"Produk/Variant",key:"item_name",sortable:!1,width:"280px"},{title:"Stok Saat Ini",key:"current_stock",sortable:!1,width:"120px"},{title:"Stok Tersedia",key:"available_stock",sortable:!1,width:"120px"},{title:"Status",key:"status",sortable:!1,width:"120px"},{title:"Reorder Level",key:"reorder_level",sortable:!1,width:"120px"},{title:"Harga Rata-rata",key:"average_cost",sortable:!1,width:"150px"},{title:"Nilai Stok",key:"stock_value",sortable:!1,width:"150px"},{title:"Aksi",key:"actions",sortable:!1,width:"200px",fixed:!0}],items:t(d),loading:t(h),"items-length":t(_),"items-per-page":t(f),page:t(M),"items-per-page-options":[10,15,25,50,100],"items-per-page-text":"Items per page:","page-text":"{0}-{1} of {2}","no-data-text":"Tidak ada data inventory",class:"text-no-wrap fixed-actions-table",id:"inventory-table","fixed-header":"",height:"500px","onUpdate:page":t(w),"onUpdate:itemsPerPage":t(Ue)},{"item.item_name":s(({item:o})=>{var g,b,Ae,we,Se,Ve,Me;return[l("div",Qt,[l("div",null,[l("div",Zt,c(((g=o.item)==null?void 0:g.name)||((b=o.product)==null?void 0:b.name)||"Unknown Item"),1),l("div",ea,[l("small",ta," SKU: "+c(((Ae=o.item)==null?void 0:Ae.item_code)||((we=o.product)==null?void 0:we.sku)||"-"),1),l("small",aa,c(((Se=o.item)==null?void 0:Se.description)||((Me=(Ve=o.product)==null?void 0:Ve.category)==null?void 0:Me.name)||"-"),1)])])])]}),"item.sku":s(({item:o})=>[e(ae,{variant:"outlined",size:"small",color:"primary"},{default:s(()=>{var g,b;return[p(c(((g=o.item)==null?void 0:g.item_code)||((b=o.product)==null?void 0:b.sku)||"N/A"),1)]}),_:2},1024)]),"item.current_stock":s(({item:o})=>[l("div",sa,[l("div",oa,c(o.current_stock),1),o.reserved_stock>0?(y(),G("small",la," ("+c(o.reserved_stock)+" reserved) ",1)):C("",!0)])]),"item.available_stock":s(({item:o})=>[l("div",ra,[e(ae,{color:o.available_stock>0?"success":"error",variant:"tonal",size:"small"},{default:s(()=>[p(c(o.available_stock),1)]),_:2},1032,["color"])])]),"item.status":s(({item:o})=>[e(ae,{color:t(Be)(o),variant:"tonal",size:"small"},{default:s(()=>[p(c(t(je)(o)),1)]),_:2},1032,["color"])]),"item.reorder_level":s(({item:o})=>[l("div",na,c(o.reorder_level||"-"),1)]),"item.average_cost":s(({item:o})=>[l("div",ia,c(t(oe)(o.average_cost)),1)]),"item.stock_value":s(({item:o})=>[l("div",ua,c(t(oe)(o.current_stock*o.average_cost)),1)]),"item.actions":s(({item:o})=>[l("div",ca,[e(Oe,{text:"Penyesuaian Stok"},{activator:s(({props:g})=>[e(S,ze(g,{icon:"tabler-adjustments",color:"warning",variant:"text",size:"small",disabled:!o.item,onClick:b=>Ye(o)}),null,16,["disabled","onClick"])]),_:2},1024),e(Oe,{text:"Update Stok"},{activator:s(({props:g})=>[e(S,ze(g,{icon:"tabler-edit",color:"primary",variant:"text",size:"small",onClick:b=>t(ke)(o)}),null,16,["onClick"])]),_:2},1024),e(Oe,{text:"Set Reorder Level"},{activator:s(({props:g})=>[e(S,ze(g,{icon:"tabler-settings",color:"info",variant:"text",size:"small",onClick:b=>t(Ie)(o)}),null,16,["onClick"])]),_:2},1024),e(Oe,{text:"Lihat Riwayat"},{activator:s(({props:g})=>[e(S,ze(g,{icon:"tabler-history",color:"secondary",variant:"text",size:"small",onClick:b=>t(Te)(o)}),null,16,["onClick"])]),_:2},1024)])]),"no-data":s(()=>{var o;return[l("div",da,[e(U,{icon:t(n).search||t(n).stock_status!=="all"?"tabler-search-off":"tabler-package-off",size:"64",class:"text-medium-emphasis mb-4"},null,8,["icon"]),l("div",ma,c(t(n).search||t(n).stock_status!=="all"?"Tidak Ada Hasil Pencarian":"Belum Ada Data Inventory"),1),l("div",pa,[t(n).search||t(n).stock_status!=="all"?(y(),G("span",va,[t(n).search?(y(),G("span",_a,[a[46]||(a[46]=p(' Tidak ditemukan inventory dengan kata kunci "')),l("strong",null,c(t(n).search),1),a[47]||(a[47]=p('" '))])):C("",!0),t(n).search&&t(n).stock_status!=="all"?(y(),G("span",fa," dan ")):C("",!0),t(n).stock_status!=="all"?(y(),G("span",ka,[a[48]||(a[48]=p(' status stok "')),l("strong",null,c(((o=t(ve).find(g=>g.value===t(n).stock_status))==null?void 0:o.title)||t(n).stock_status),1),a[49]||(a[49]=p('" '))])):C("",!0),a[50]||(a[50]=l("br",null,null,-1)),a[51]||(a[51]=p("Coba kata kunci yang berbeda atau hapus filter. "))])):(y(),G("span",ga,a[52]||(a[52]=[p(" Data inventory akan muncul setelah produk dan variant dibuat."),l("br",null,null,-1),p(" Silakan buat produk terlebih dahulu di menu "),l("strong",null,"Kelola Produk",-1),p(". ")])))]),l("div",ya,[t(n).search||t(n).stock_status!=="all"?(y(),D(S,{key:0,color:"warning",variant:"outlined","prepend-icon":"tabler-filter-off",onClick:a[9]||(a[9]=g=>t(de)({search:"",stock_status:"all"}))},{default:s(()=>a[53]||(a[53]=[p(" Hapus Filter ")])),_:1,__:[53]})):(y(),D(S,{key:1,color:"primary","prepend-icon":"tabler-plus",to:"/products-management"},{default:s(()=>a[54]||(a[54]=[p(" Buat Produk Baru ")])),_:1,__:[54]})),e(S,{variant:"outlined","prepend-icon":"tabler-refresh",onClick:a[10]||(a[10]=g=>{t(se)(),t(ce)(),t(Q)()})},{default:s(()=>a[55]||(a[55]=[p(" Refresh Data ")])),_:1,__:[55]})])])]}),loading:s(()=>[l("div",ba,[e(nt,{indeterminate:"",color:"primary",size:"40"}),a[56]||(a[56]=l("div",{class:"mt-4 text-medium-emphasis"}," Memuat data inventory... ",-1))])]),_:1},8,["items","loading","items-length","items-per-page","page","onUpdate:page","onUpdate:itemsPerPage"])])]),_:1}),e(De,{modelValue:t(q),"onUpdate:modelValue":a[17]||(a[17]=o=>Ce(q)?q.value=o:null),"max-width":"800px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:s(()=>[e(L,null,{default:s(()=>[e(pe,null,{default:s(()=>{var o,g;return[p(" Update Stok - "+c((g=(o=t(F))==null?void 0:o.product)==null?void 0:g.name),1)]}),_:1}),e(te),e(Ne,{onSubmit:Fe(t(_e),["prevent"])},{default:s(()=>[e(N,null,{default:s(()=>[t(W)?(y(),D(ne,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4","onClick:close":t($)},{default:s(()=>[p(c(t(W)),1)]),_:1},8,["onClick:close"])):C("",!0),e(re,null,{default:s(()=>[e(E,{cols:"12",md:"6"},{default:s(()=>[e(ot,{modelValue:t(I).movement_type,"onUpdate:modelValue":a[11]||(a[11]=o=>t(I).movement_type=o),label:"Jenis Pergerakan *",items:[{title:"Stock Masuk",value:"stock_in"},{title:"Stock Keluar",value:"stock_out"},{title:"Penyesuaian",value:"adjustment"},{title:"Transfer",value:"transfer"},{title:"Retur",value:"return"}],variant:"outlined"},null,8,["modelValue"])]),_:1}),e(E,{cols:"12",md:"6"},{default:s(()=>[e(Z,{modelValue:t(I).quantity,"onUpdate:modelValue":a[12]||(a[12]=o=>t(I).quantity=o),modelModifiers:{number:!0},label:"Kuantitas *",type:"number",min:"1",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(re,null,{default:s(()=>[e(E,{cols:"12"},{default:s(()=>[e(Z,{modelValue:t(I).reason,"onUpdate:modelValue":a[13]||(a[13]=o=>t(I).reason=o),label:"Alasan *",placeholder:"Contoh: Pembelian dari supplier, Penjualan, dll",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(re,null,{default:s(()=>[e(E,{cols:"12",md:"6"},{default:s(()=>[e(Z,{modelValue:t(I).reference_number,"onUpdate:modelValue":a[14]||(a[14]=o=>t(I).reference_number=o),label:"Nomor Referensi",placeholder:"PO-001, SO-001, dll",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(E,{cols:"12",md:"6"},{default:s(()=>[e(Z,{modelValue:t(I).cost_per_unit,"onUpdate:modelValue":a[15]||(a[15]=o=>t(I).cost_per_unit=o),modelModifiers:{number:!0},label:"Harga per Unit",type:"number",min:"0",step:"0.01",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(re,null,{default:s(()=>[e(E,{cols:"12"},{default:s(()=>[e(Je,{modelValue:t(I).notes,"onUpdate:modelValue":a[16]||(a[16]=o=>t(I).notes=o),label:"Catatan",rows:"2",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(te),e(qe,{class:"pa-4"},{default:s(()=>[e(Pe),e(S,{variant:"outlined",onClick:t(Ee)},{default:s(()=>a[57]||(a[57]=[p(" Batal ")])),_:1,__:[57]},8,["onClick"]),e(S,{type:"submit",color:"primary",loading:t(A)},{default:s(()=>a[58]||(a[58]=[p(" Update Stok ")])),_:1,__:[58]},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","fullscreen"]),e(De,{modelValue:t(J),"onUpdate:modelValue":a[20]||(a[20]=o=>Ce(J)?J.value=o:null),"max-width":"600px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:s(()=>[e(L,null,{default:s(()=>[e(pe,null,{default:s(()=>{var o,g;return[p(" Set Reorder Level - "+c((g=(o=t(F))==null?void 0:o.product)==null?void 0:g.name),1)]}),_:1}),e(te),e(Ne,{onSubmit:Fe(t(fe),["prevent"])},{default:s(()=>[e(N,null,{default:s(()=>[t(W)?(y(),D(ne,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4","onClick:close":t($)},{default:s(()=>[p(c(t(W)),1)]),_:1},8,["onClick:close"])):C("",!0),e(re,null,{default:s(()=>[e(E,{cols:"12"},{default:s(()=>[e(Z,{modelValue:t(j).reorder_level,"onUpdate:modelValue":a[18]||(a[18]=o=>t(j).reorder_level=o),modelModifiers:{number:!0},label:"Reorder Level *",type:"number",min:"0",hint:"Stok minimum sebelum perlu restock","persistent-hint":"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(re,null,{default:s(()=>[e(E,{cols:"12"},{default:s(()=>[e(Z,{modelValue:t(j).max_stock_level,"onUpdate:modelValue":a[19]||(a[19]=o=>t(j).max_stock_level=o),modelModifiers:{number:!0},label:"Max Stock Level",type:"number",min:"0",hint:"Stok maksimum yang diizinkan","persistent-hint":"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(te),e(qe,{class:"pa-4"},{default:s(()=>[e(Pe),e(S,{variant:"outlined",onClick:t(m)},{default:s(()=>a[59]||(a[59]=[p(" Batal ")])),_:1,__:[59]},8,["onClick"]),e(S,{type:"submit",color:"primary",loading:t(A)},{default:s(()=>a[60]||(a[60]=[p(" Simpan ")])),_:1,__:[60]},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","fullscreen"]),e(Ut,{modelValue:t(z),"onUpdate:modelValue":a[21]||(a[21]=o=>Ce(z)?z.value=o:null),"inventory-id":(me=(xe=t(F))==null?void 0:xe.id_inventory)==null?void 0:me.toString(),"inventory-name":(Le=(Re=t(F))==null?void 0:Re.item)==null?void 0:Le.name},null,8,["modelValue","inventory-id","inventory-name"]),e(De,{modelValue:t(ge),"onUpdate:modelValue":a[24]||(a[24]=o=>Ce(ge)?ge.value=o:null),"max-width":"600px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:s(()=>[e(L,{class:"stock-movement-dialog coffee-dialog"},{default:s(()=>[e(pe,{class:"d-flex align-center justify-space-between coffee-header"},{default:s(()=>[l("div",ha,[e(U,{icon:"tabler-adjustments",class:"text-white"}),a[61]||(a[61]=l("span",{class:"text-white"}," Penyesuaian Stok ",-1))]),e(S,{icon:"tabler-x",variant:"text",color:"white",onClick:t(he)},null,8,["onClick"])]),_:1}),e(te),e(N,{class:"pa-6"},{default:s(()=>[e(Ne,{onSubmit:Fe(t(ye),["prevent"])},{default:s(()=>{var o;return[t(B)?(y(),D(ne,{key:0,color:"info",variant:"tonal",class:"mb-4"},{default:s(()=>[l("div",xa,[e(U,{icon:"tabler-package"}),l("div",null,[l("div",wa,c(t(B).name),1),l("div",Sa,c(t(B).item_code),1),l("div",Va,"Stok Saat Ini: "+c(t(B).current_stock)+" "+c(t(B).unit),1)])])]),_:1})):C("",!0),t(Ge)?(y(),D(ne,{key:1,type:"error",variant:"outlined",class:"mb-4",text:t(Ge),closable:"","onClick:close":t(Xe)},null,8,["text","onClick:close"])):C("",!0),e(Z,{modelValue:t(T).quantity,"onUpdate:modelValue":a[22]||(a[22]=g=>t(T).quantity=g),modelModifiers:{number:!0},label:"Stok Baru",type:"number",min:"0",step:"0.001",variant:"outlined",suffix:(o=t(B))==null?void 0:o.unit,class:"mb-4",required:""},null,8,["modelValue","suffix"]),e(Je,{modelValue:t(T).notes,"onUpdate:modelValue":a[23]||(a[23]=g=>t(T).notes=g),label:"Catatan (opsional)",variant:"outlined",rows:"3",class:"mb-4"},null,8,["modelValue"]),l("div",Ma,[e(S,{variant:"outlined",onClick:t(he)},{default:s(()=>a[62]||(a[62]=[p(" Batal ")])),_:1,__:[62]},8,["onClick"]),e(S,{type:"submit",color:"primary",class:"coffee-primary",loading:t(He)},{default:s(()=>a[63]||(a[63]=[p(" Simpan Penyesuaian ")])),_:1,__:[63]},8,["loading"])])]}),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"]),e(De,{modelValue:t(be),"onUpdate:modelValue":a[28]||(a[28]=o=>Ce(be)?be.value=o:null),"max-width":"800px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:s(()=>[e(L,{class:"stock-movement-dialog coffee-dialog"},{default:s(()=>[e(pe,{class:"d-flex align-center justify-space-between coffee-header"},{default:s(()=>[l("div",Ca,[e(U,{icon:t(T).type==="in"?"tabler-plus":"tabler-minus",class:"text-white"},null,8,["icon"]),l("span",Da,c(t(T).type==="in"?"Stok Masuk":t(T).type==="out"?"Stok Keluar":"Penyesuaian Stok"),1)]),e(S,{icon:"tabler-x",variant:"text",color:"white",onClick:t(he)},null,8,["onClick"])]),_:1}),e(te),e(N,{class:"pa-6"},{default:s(()=>[e(Ne,{onSubmit:Fe(t(ye),["prevent"])},{default:s(()=>[t(B)?(y(),D(ne,{key:0,color:"info",variant:"tonal",class:"mb-4"},{default:s(()=>[l("div",Pa,[e(kt,{color:"primary",size:"40",variant:"tonal"},{default:s(()=>[e(U,{icon:"tabler-package"})]),_:1}),l("div",null,[l("div",Ia,c(t(B).name),1),l("div",Ta," Stok saat ini: "+c(t(B).current_stock)+" "+c(t(B).unit),1)])])]),_:1})):C("",!0),e(re,null,{default:s(()=>[e(E,{cols:"12",md:"6"},{default:s(()=>[e(Z,{modelValue:t(T).quantity,"onUpdate:modelValue":a[25]||(a[25]=o=>t(T).quantity=o),modelModifiers:{number:!0},label:`Jumlah ${t(T).type==="in"?"Masuk":t(T).type==="out"?"Keluar":"Akhir"}`,type:"number",variant:"outlined",required:"",min:t(T).type==="adjustment"?0:1,rules:[o=>o>0||"Jumlah harus lebih dari 0"]},null,8,["modelValue","label","min","rules"])]),_:1}),e(E,{cols:"12",md:"6"},{default:s(()=>[e(Z,{modelValue:t(T).cost_per_unit,"onUpdate:modelValue":a[26]||(a[26]=o=>t(T).cost_per_unit=o),modelModifiers:{number:!0},label:"Harga per Unit",type:"number",variant:"outlined",prefix:"Rp",readonly:t(T).type!=="in"},null,8,["modelValue","readonly"])]),_:1}),e(E,{cols:"12"},{default:s(()=>[e(Je,{modelValue:t(T).notes,"onUpdate:modelValue":a[27]||(a[27]=o=>t(T).notes=o),label:"Catatan",placeholder:"Masukkan catatan untuk pergerakan stok...",rows:"3",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),e(te),e(qe,{class:"pa-6"},{default:s(()=>[e(Pe),e(S,{variant:"outlined",class:"coffee-secondary",onClick:t(he)},{default:s(()=>a[64]||(a[64]=[p(" Batal ")])),_:1,__:[64]},8,["onClick"]),e(S,{color:"primary",class:"coffee-primary",loading:t(He),onClick:t(ye)},{default:s(()=>a[65]||(a[65]=[p(" Simpan ")])),_:1,__:[65]},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}}),ns=it(Ea,[["__scopeId","data-v-1556a565"]]);export{ns as default};

import{aA as re,d as et,r as v,V as N,w as ot,g as R,f as a,b as e,s as _,X as E,t as u,l as P,c as ne,e as r,aw as tt,a0 as M,o as x,ax as Ye,aW as lt,D as rt,m as t,a5 as me,F as nt,i as it,p as je,$ as Te}from"./main-BQunTPpd.js";import{V as be}from"./VDialog-Q2UCCGRm.js";import{b as pe,c as $e,V as q}from"./VCard-Dx4yAX94.js";import{V as Z}from"./VDivider-DLM0R2Gc.js";import{V as z}from"./VCardText-LAWOA4bE.js";import{V as se}from"./VAlert-C0Wunns7.js";import{V as at}from"./VDataTable-Bwl40scW.js";import{V as Q}from"./VChip-KgqmBPeW.js";import{V as he}from"./VSpacer-Cqg38YWt.js";import{_ as st}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as ut}from"./ItemsApi-BgrM_IwY.js";import{V as te,a as V}from"./VRow-YSpcY-iJ.js";import{V as W}from"./VTextField-Dxcj6oI0.js";import{V as Ie}from"./VSelect-Cc1M7E1k.js";import{V as Ee}from"./VTooltip-DiBYXK9U.js";import{V as Re}from"./VForm-Wm9Vtx0V.js";import{V as Ne}from"./VTextarea-oqgVELhG.js";import{V as ct}from"./VAvatar-2-PWRlcK.js";import"./VOverlay-BR8dubdo.js";import"./forwardRefs-B931MWyl.js";import"./VImg-mB6OHmob.js";import"./VCheckboxBtn-CCMRelk7.js";import"./VTable-CczKSHcH.js";import"./filter-DYRhAWmK.js";/* empty css              */import"./VList-Bw5yts75.js";import"./VMenu-Di2LUEhc.js";const ae="/api/inventory";class J{static async getAll(i){var c;try{return(await re.get(ae,{params:i})).data}catch(m){throw((c=m.response)==null?void 0:c.data)||this.handleError(m)}}static async getById(i){var c;try{return(await re.get(`${ae}/${i}`)).data}catch(m){throw((c=m.response)==null?void 0:c.data)||this.handleError(m)}}static async getStats(){var i;try{return(await re.get(`${ae}/stats`)).data}catch(c){throw((i=c.response)==null?void 0:i.data)||this.handleError(c)}}static async getLowStockAlerts(){var i;try{return(await re.get(`${ae}/low-stock-alerts`)).data}catch(c){throw((i=c.response)==null?void 0:i.data)||this.handleError(c)}}static async updateStock(i,c){var m;try{return(await re.post(`${ae}/${i}/update-stock`,c)).data}catch(k){throw((m=k.response)==null?void 0:m.data)||this.handleError(k)}}static async bulkUpdateStock(i){var c;try{return(await re.post(`${ae}/bulk-update-stock`,i)).data}catch(m){throw((c=m.response)==null?void 0:c.data)||this.handleError(m)}}static async setReorderLevel(i,c){var m;try{return(await re.post(`${ae}/${i}/reorder-level`,c)).data}catch(k){throw((m=k.response)==null?void 0:m.data)||this.handleError(k)}}static async getMovements(i){var c;try{const m=i!=null&&i.id_inventory?`${ae}/${i.id_inventory}/movements`:`${ae}/movements`;return(await re.get(m,{params:i})).data}catch(m){throw((c=m.response)==null?void 0:c.data)||this.handleError(m)}}static handleError(i){var c,m;return i.response?{message:((c=i.response.data)==null?void 0:c.message)||"Terjadi kesalahan pada server",success:!1,errors:(m=i.response.data)==null?void 0:m.errors}:i.request?{message:"Tidak dapat terhubung ke server",success:!1}:{message:i.message||"Terjadi kesalahan yang tidak diketahui",success:!1}}static formatError(i){return i.errors?Object.values(i.errors).flat().join(", "):i.message||"Terjadi kesalahan yang tidak diketahui"}static isValidationError(i){return i.errors&&typeof i.errors=="object"}static getFieldError(i,c){return i.errors&&i.errors[c]?Array.isArray(i.errors[c])?i.errors[c][0]:i.errors[c]:null}static getMovementTypes(){return[{value:"stock_in",label:"Stock Masuk",color:"success"},{value:"stock_out",label:"Stock Keluar",color:"warning"},{value:"adjustment",label:"Penyesuaian",color:"info"},{value:"transfer",label:"Transfer",color:"primary"},{value:"return",label:"Retur",color:"success"},{value:"damaged",label:"Rusak",color:"error"},{value:"expired",label:"Kadaluarsa",color:"error"}]}static getStockStatusOptions(){return[{value:"all",label:"Semua Status"},{value:"in_stock",label:"Tersedia"},{value:"low_stock",label:"Stok Menipis"},{value:"out_of_stock",label:"Habis"},{value:"overstock",label:"Stok Berlebih"}]}}const dt={key:1,class:"text-center py-8"},mt={class:"font-weight-medium"},pt={class:"text-medium-emphasis"},vt={class:"text-center"},_t={class:"text-center font-weight-medium"},ft={class:"text-center font-weight-bold text-primary"},kt={class:"text-end"},gt={class:"text-end font-weight-medium text-success"},yt={class:"max-width-200"},bt={class:"font-weight-medium"},ht={key:0,class:"text-medium-emphasis"},xt={key:1,class:"d-block text-caption"},St={key:2,class:"text-info d-block"},wt={class:"text-center py-8"},Vt=et({__name:"InventoryMovementsDialog",props:{modelValue:{type:Boolean},inventoryId:{},inventoryName:{}},emits:["update:modelValue"],setup(K,{emit:i}){const c=K,m=i,k=v([]),$=v(!1),L=v(""),j=N({get:()=>c.modelValue,set:g=>m("update:modelValue",g)}),F=async()=>{var g,p,n,T;if(c.inventoryId)try{$.value=!0,L.value="";const b=await J.getMovements({id_inventory:parseInt(c.inventoryId),page:1,per_page:50});b.data&&Array.isArray(b.data)?k.value=b.data:b.data&&((g=b==null?void 0:b.data)!=null&&g.data)&&Array.isArray((p=b==null?void 0:b.data)==null?void 0:p.data)?k.value=b.data.data:k.value=[]}catch(b){console.error("Error fetching movements:",b),L.value=((T=(n=b.response)==null?void 0:n.data)==null?void 0:T.message)||"Gagal memuat riwayat pergerakan"}finally{$.value=!1}},O=g=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(g),B=g=>({in:"success",out:"error",stock_in:"success",stock_out:"error",adjustment:"warning",transfer:"info",return:"secondary"})[g]||"primary",A=g=>({in:"Stock Masuk",out:"Stock Keluar",stock_in:"Stock Masuk",stock_out:"Stock Keluar",adjustment:"Penyesuaian",transfer:"Transfer",return:"Retur"})[g]||g,f=g=>({in:"tabler-plus",out:"tabler-minus",stock_in:"tabler-plus",stock_out:"tabler-minus",adjustment:"tabler-edit",transfer:"tabler-arrows-exchange",return:"tabler-arrow-back"})[g]||"tabler-package";return ot(j,g=>{g&&c.inventoryId?F():(k.value=[],L.value="")}),(g,p)=>(x(),R(be,{modelValue:j.value,"onUpdate:modelValue":p[1]||(p[1]=n=>j.value=n),"max-width":"900px",scrollable:""},{default:a(()=>[e(q,null,{default:a(()=>[e(pe,{class:"d-flex align-center"},{default:a(()=>[e(E,{icon:"tabler-history",class:"me-2"}),_(" Riwayat Pergerakan - "+u(g.inventoryName),1)]),_:1}),e(Z),e(z,{class:"pa-0"},{default:a(()=>[L.value?(x(),R(se,{key:0,type:"error",variant:"tonal",class:"ma-4"},{default:a(()=>[_(u(L.value),1)]),_:1})):P("",!0),$.value?(x(),ne("div",dt,[e(tt,{indeterminate:"",color:"primary",size:"40"}),p[2]||(p[2]=r("div",{class:"mt-4 text-medium-emphasis"}," Memuat riwayat pergerakan... ",-1))])):(x(),R(at,{key:2,headers:[{title:"Tanggal",key:"created_at",sortable:!1},{title:"Jenis",key:"movement_type",sortable:!1},{title:"Kuantitas",key:"quantity",sortable:!1},{title:"Stok Sebelum",key:"stock_before",sortable:!1},{title:"Stok Sesudah",key:"stock_after",sortable:!1},{title:"Harga/Unit",key:"unit_cost",sortable:!1},{title:"Total Nilai",key:"total_cost",sortable:!1},{title:"Catatan",key:"notes",sortable:!1}],items:k.value,loading:$.value,class:"text-no-wrap","items-per-page":"15",height:"500","fixed-header":""},{"item.created_at":a(({item:n})=>[r("div",null,[r("div",mt,u(new Date(n.created_at).toLocaleDateString("id-ID")),1),r("small",pt,u(new Date(n.created_at).toLocaleTimeString("id-ID")),1)])]),"item.movement_type":a(({item:n})=>[e(Q,{color:B(n.movement_type),variant:"tonal",size:"small","prepend-icon":f(n.movement_type)},{default:a(()=>[_(u(A(n.movement_type)),1)]),_:2},1032,["color","prepend-icon"])]),"item.quantity":a(({item:n})=>[r("div",vt,[e(Q,{color:n.movement_type==="in"||n.movement_type==="stock_in"?"success":"error",variant:"outlined",size:"small"},{default:a(()=>[_(u(n.movement_type==="in"||n.movement_type==="stock_in"?"+":"-")+u(Math.abs(n.quantity)),1)]),_:2},1032,["color"])])]),"item.stock_before":a(({item:n})=>[r("div",_t,u(n.stock_before),1)]),"item.stock_after":a(({item:n})=>[r("div",ft,u(n.stock_after),1)]),"item.unit_cost":a(({item:n})=>[r("div",kt,u(n.unit_cost?O(n.unit_cost):"-"),1)]),"item.total_cost":a(({item:n})=>[r("div",gt,u(n.total_cost?O(n.total_cost):"-"),1)]),"item.notes":a(({item:n})=>[r("div",yt,[r("div",bt,u(n.notes||"-"),1),n.reference_type&&n.reference_id?(x(),ne("small",ht," Ref: "+u(n.reference_type)+"-"+u(n.reference_id),1)):P("",!0),n.batch_number?(x(),ne("small",xt," Batch: "+u(n.batch_number),1)):P("",!0),n.user?(x(),ne("small",St," oleh: "+u(n.user.name),1)):P("",!0)])]),"no-data":a(()=>[r("div",wt,[e(E,{icon:"tabler-history-off",size:"48",class:"text-medium-emphasis mb-4"}),p[3]||(p[3]=r("div",{class:"text-h6 text-medium-emphasis mb-2"}," Belum ada riwayat pergerakan ",-1)),p[4]||(p[4]=r("div",{class:"text-body-2 text-medium-emphasis"}," Riwayat akan muncul setelah ada pergerakan stok ",-1))])]),_:1},8,["items","loading"]))]),_:1}),e(Z),e($e,{class:"pa-4"},{default:a(()=>[e(he),e(M,{variant:"outlined",onClick:p[0]||(p[0]=n=>j.value=!1)},{default:a(()=>p[5]||(p[5]=[_(" Tutup ")])),_:1,__:[5]}),e(M,{color:"primary","prepend-icon":"tabler-refresh",onClick:F},{default:a(()=>p[6]||(p[6]=[_(" Refresh ")])),_:1,__:[6]})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Mt=st(Vt,[["__scopeId","data-v-ca0277a4"]]),Pt=()=>{const K=v([]),i=v(!1),c=v(!1),m=v({total_items:0,low_stock_items:0,out_of_stock_items:0,overstock_items:0,total_stock_value:0,total_stock_quantity:0,total_reserved_stock:0,items_need_restock:0}),k=v([]),$=v(!1),L=v([]),j=v(!1),F=v(!1),O=v(!1),B=v(!1),A=v(!1),f=v(null),g=v([]),p=v(1),n=v(0),T=v(15),b=v({search:"",stock_status:"all",category_id:void 0,supplier_id:void 0,sort_by:"current_stock",sort_order:"asc"}),X=v(""),C=v(""),I=v(""),ie=v({movement_type:"stock_in",quantity:0,reason:"",reference_number:"",cost_per_unit:void 0,notes:""}),H=v({reorder_level:0,max_stock_level:0}),ge=N(()=>g.value.length>0),ve=N(()=>m.value.total_stock_value),ue=N(()=>m.value.low_stock_items),ce=N(()=>m.value.out_of_stock_items),Y=N(()=>Math.ceil(n.value/T.value)),_e=N(()=>p.value<Y.value),de=N(()=>p.value>1),xe=N(()=>({currentPage:p.value,totalPages:Y.value,totalItems:n.value,itemsPerPage:T.value,hasNext:_e.value,hasPrev:de.value})),Se=[l=>l>0||"Kuantitas harus lebih dari 0",l=>Number.isInteger(l)||"Kuantitas harus berupa bilangan bulat"],we=[l=>!!l||"Alasan wajib diisi",l=>l&&l.length>=3||"Alasan minimal 3 karakter"],d=[l=>!l||l>=0||"Harga harus lebih dari atau sama dengan 0"],D=[{title:"Stock Masuk",value:"stock_in",color:"success"},{title:"Stock Keluar",value:"stock_out",color:"warning"},{title:"Penyesuaian",value:"adjustment",color:"info"},{title:"Transfer",value:"transfer",color:"primary"},{title:"Retur",value:"return",color:"success"}],w=[{title:"Semua Status",value:"all"},{title:"Tersedia",value:"in_stock"},{title:"Stok Menipis",value:"low_stock"},{title:"Habis",value:"out_of_stock"},{title:"Stok Berlebih",value:"overstock"}],oe=async()=>{i.value=!0,X.value="";try{const l={...b.value,page:p.value,per_page:T.value};Object.keys(l).forEach(Ue=>{const h=l[Ue];(h===""||h===void 0||h===null||h==="all")&&delete l[Ue]}),console.log("Fetching inventory with params:",l);const S=await J.getAll(l);if(S.success)K.value=S.data.data||[],n.value=S.data.total||0,S.data.current_page&&(p.value=S.data.current_page),console.log("Inventory data loaded:",{total:S.data.total,itemsLength:S.data.data.length,currentPage:S.data.current_page,perPage:S.data.per_page,lastPage:S.data.last_page,from:S.data.from,to:S.data.to,requestedPage:p.value,requestedPerPage:T.value,hasNextPage:S.data.current_page<S.data.last_page,hasPrevPage:S.data.current_page>1});else throw new Error(S.message||"Gagal mengambil data inventory")}catch(l){console.error("Error fetching inventory:",l),X.value=J.formatError(l)||"Gagal mengambil data inventory",K.value=[],n.value=0}finally{i.value=!1}},Ve=async()=>{try{const l=await J.getStats();l.success&&(m.value=l.data)}catch(l){console.error("Error fetching inventory stats:",l)}},le=async()=>{j.value=!0;try{const l=await J.getLowStockAlerts();l.success&&(L.value=l.data.data||[])}catch(l){console.error("Error fetching low stock alerts:",l),L.value=[]}finally{j.value=!1}},fe=async l=>{$.value=!0;try{const S=await J.getMovements({id_inventory:l,page:1,per_page:20});S.success&&(k.value=S.data)}catch(S){console.error("Error fetching movements:",S)}finally{$.value=!1}},Ae=async()=>{if(f.value){c.value=!0,I.value="";try{const l=await J.updateStock(f.value.id_inventory,ie.value);if(l.success)C.value="Stock berhasil diperbarui",ke(),await oe(),await Ve(),await le();else throw new Error(l.message||"Gagal memperbarui stock")}catch(l){console.error("Error updating stock:",l),I.value=J.formatError(l)||"Gagal memperbarui stock"}finally{c.value=!1}}},Le=async()=>{if(f.value){c.value=!0,I.value="";try{const l=await J.setReorderLevel(f.value.id_inventory,H.value);if(l.success)C.value="Reorder level berhasil diperbarui",Me(),await oe();else throw new Error(l.message||"Gagal memperbarui reorder level")}catch(l){console.error("Error setting reorder level:",l),I.value=J.formatError(l)||"Gagal memperbarui reorder level"}finally{c.value=!1}}},qe=l=>{f.value=l,ie.value={movement_type:"stock_in",quantity:0,reason:"",reference_number:"",cost_per_unit:l.average_cost||void 0,notes:""},I.value="",F.value=!0},ze=l=>{f.value=l,H.value={reorder_level:l.reorder_level||0,max_stock_level:l.max_stock_level||0},I.value="",A.value=!0},Fe=l=>{f.value=l,fe(l.id_inventory),B.value=!0},ke=()=>{F.value=!1,setTimeout(()=>{f.value=null,I.value=""},300)},Me=()=>{A.value=!1,setTimeout(()=>{f.value=null,I.value=""},300)};return{inventoryList:K,loading:i,saveLoading:c,stats:m,movementsList:k,movementsLoading:$,lowStockItems:L,alertsLoading:j,stockUpdateDialog:F,bulkUpdateDialog:O,movementsDialog:B,reorderDialog:A,selectedInventory:f,selectedItems:g,currentPage:p,totalItems:n,itemsPerPage:T,filters:b,errorMessage:X,successMessage:C,modalErrorMessage:I,stockUpdateForm:ie,reorderForm:H,hasSelectedItems:ge,totalStockValue:ve,lowStockCount:ue,outOfStockCount:ce,quantityRules:Se,reasonRules:we,costRules:d,movementTypeOptions:D,stockStatusOptions:w,fetchInventoryList:oe,fetchStats:Ve,fetchLowStockAlerts:le,fetchMovements:fe,updateStock:Ae,setReorderLevel:Le,openStockUpdateDialog:qe,openReorderDialog:ze,openMovementsDialog:Fe,closeStockUpdateDialog:ke,closeReorderDialog:Me,closeMovementsDialog:()=>{B.value=!1,setTimeout(()=>{f.value=null,k.value=[]},300)},clearModalError:()=>{I.value=""},onPageChange:l=>{console.log("Page changed to:",l,"Current total items:",n.value),l!==p.value&&(p.value=l,oe())},onItemsPerPageChange:l=>{console.log("Items per page changed to:",l),l!==T.value&&(T.value=l,p.value=1,oe())},handleFiltersUpdate:l=>{b.value={...b.value,...l},p.value=1,oe()},formatCurrency:l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(l),getStockStatusColor:l=>l.current_stock===0?"error":l.is_low_stock?"warning":"success",getStockStatusText:l=>l.current_stock===0?"Habis":l.reorder_level>0&&l.current_stock<=l.reorder_level?"Menipis":l.max_stock_level&&l.current_stock>l.max_stock_level?"Berlebih":"Tersedia",getMovementTypeColor:l=>({stock_in:"success",stock_out:"warning",adjustment:"info",transfer:"primary",return:"success",damaged:"error",expired:"error"})[l]||"grey",totalPages:Y,hasNextPage:_e,hasPrevPage:de,paginationInfo:xe}};function Ct(){const K=v([]),i=v([]),c=v(!1),m=v(!1),k=v({total_items:0,total_value:0,low_stock_items:0,out_of_stock_items:0,movements_today:0,movements_this_month:0,top_consumed_items:[],recent_movements:[]}),$=v(1),L=v(0),j=v(10),F=Ye({search:"",stock_status:"all",movement_type:"",date_from:"",date_to:"",item_id:void 0}),O=v(!1),B=v(!1),A=v(null),f=Ye({item_id:0,type:"in",quantity:0,notes:"",cost_per_unit:0}),g=v(""),p=v(""),n=v(""),T=N(()=>!0),b=[{title:"Semua Status",value:"all"},{title:"Tersedia",value:"in_stock"},{title:"Stok Rendah",value:"low_stock"},{title:"Habis",value:"out_of_stock"}],X=[{title:"Masuk",value:"in",color:"success",icon:"tabler-plus"},{title:"Keluar",value:"out",color:"error",icon:"tabler-minus"},{title:"Penyesuaian",value:"adjustment",color:"warning",icon:"tabler-adjustments"}],C=[{title:"Pembelian",value:"purchase"},{title:"Penjualan",value:"sale"},{title:"Produksi",value:"production"},{title:"Penyesuaian",value:"adjustment"},{title:"Kerusakan",value:"waste"}],I=d=>d.current_stock<=0?{status:"out_of_stock",color:"error",text:"Habis",icon:"tabler-x"}:d.current_stock<=d.minimum_stock?{status:"low_stock",color:"warning",text:"Rendah",icon:"tabler-alert-triangle"}:{status:"in_stock",color:"success",text:"Tersedia",icon:"tabler-check"},ie=d=>!d.maximum_stock||d.maximum_stock<=0?100:Math.round(d.current_stock/d.maximum_stock*100),H=async()=>{c.value=!0;try{await new Promise(d=>setTimeout(d,1e3)),K.value=await ut.getAll(),L.value=K.value.length,p.value=""}catch{g.value="Gagal memuat data items"}finally{c.value=!1}},ge=async d=>{c.value=!0;try{const D=await J.getMovements({id_inventory:d,page:$.value,per_page:j.value});i.value=D.data.map(w=>({id:w.id_movement,item_id:w.id_inventory,type:w.movement_type,quantity:w.quantity,unit:"pcs",reference_id:w.reference_number?parseInt(w.reference_number):void 0,reference_type:w.reason,notes:w.notes,cost_per_unit:w.cost_per_unit,total_cost:w.total_cost,created_by:w.created_by,created_at:w.created_at,creator:w.user})),L.value=D.total}catch(D){console.error("Failed to fetch stock movements:",D),i.value=[]}finally{c.value=!1}},ve=async()=>{try{await H();const d=K.value;k.value={total_items:d.length,total_value:d.reduce((D,w)=>D+w.current_stock*w.cost_per_unit,0),low_stock_items:d.filter(D=>D.current_stock<=D.minimum_stock&&D.current_stock>0).length,out_of_stock_items:d.filter(D=>D.current_stock<=0).length,movements_today:0,movements_this_month:0,top_consumed_items:[],recent_movements:[]}}catch(d){console.error("Failed to fetch stats:",d)}},ue=async()=>{m.value=!0,n.value="";try{const d=await fetch("/api/inventory/movement",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({item_id:f.item_id,movement_type:f.type,quantity:f.quantity,notes:f.notes,cost_per_unit:f.cost_per_unit})});if(!d.ok){const D=await d.json();throw new Error(D.message||"Gagal mencatat pergerakan stok")}p.value=`Stock ${f.type==="in"?"masuk":f.type==="out"?"keluar":"disesuaikan"} berhasil dicatat`,de(),await H(),await ve()}catch(d){n.value=d.message||"Gagal mencatat pergerakan stok"}finally{m.value=!1}},ce=d=>{A.value=d,Object.assign(f,{item_id:d.id_item,type:"in",quantity:0,notes:"",cost_per_unit:d.cost_per_unit}),O.value=!0},Y=d=>{A.value=d,Object.assign(f,{item_id:d.id_item,type:"out",quantity:0,notes:"",cost_per_unit:d.cost_per_unit}),O.value=!0},_e=d=>{A.value=d,Object.assign(f,{item_id:d.id_item,type:"adjustment",quantity:d.current_stock,notes:"",cost_per_unit:d.cost_per_unit}),B.value=!0},de=()=>{O.value=!1,B.value=!1,n.value="",A.value=null};return{itemsList:K,stockMovements:i,loading:c,saveLoading:m,stats:k,currentPage:$,totalItems:L,itemsPerPage:j,filters:F,movementDialog:O,adjustmentDialog:B,selectedItem:A,movementFormData:f,errorMessage:g,successMessage:p,modalErrorMessage:n,canManageStock:T,stockStatusOptions:b,movementTypeOptions:X,referenceTypeOptions:C,getStockStatus:I,getStockPercentage:ie,fetchItems:H,fetchStockMovements:ge,fetchStats:ve,recordStockMovement:ue,openStockInDialog:ce,openStockOutDialog:Y,openAdjustmentDialog:_e,closeMovementDialog:de,clearModalError:()=>{n.value=""},onPageChange:d=>{$.value=d,H()},handleFiltersUpdate:d=>{Object.assign(F,d),$.value=1,H()}}}const Dt={class:"inventory-management"},Ut={class:"d-flex justify-space-between align-center mb-6"},jt={class:"d-flex gap-3 align-center"},Tt={class:"d-flex align-center justify-space-between"},It={class:"text-h4 font-weight-bold text-primary"},Et={class:"d-flex align-center justify-space-between"},Rt={class:"text-h4 font-weight-bold text-warning"},$t={class:"d-flex align-center justify-space-between"},At={class:"text-h4 font-weight-bold text-error"},Lt={class:"d-flex align-center justify-space-between"},qt={class:"text-h4 font-weight-bold text-success"},zt={class:"d-flex align-center justify-space-between"},Ft={class:"d-flex align-center gap-3"},Ot={class:"d-flex gap-2"},Bt={class:"d-flex flex-wrap gap-2"},Nt={class:"d-flex align-center"},Kt={class:"font-weight-medium"},Ht={class:"text-medium-emphasis"},Gt={class:"text-center"},Jt={class:"text-h6 font-weight-bold"},Xt={key:0,class:"text-warning"},Wt={class:"text-center"},Zt={class:"text-center"},Qt={class:"text-end"},Yt={class:"text-end font-weight-medium text-success"},ea={class:"d-flex align-center gap-1"},ta={class:"text-center py-12"},aa={class:"d-flex justify-center gap-3"},sa={class:"text-center py-8"},oa={key:0},la={class:"text-xs text-info"},ra={class:"d-flex align-center gap-2"},na={class:"d-flex align-center gap-3"},ia={class:"font-weight-bold"},ua={class:"text-caption"},ca={class:"text-caption"},da={class:"d-flex gap-3 justify-end"},ma={class:"d-flex align-center gap-2"},pa={class:"text-white"},va={class:"d-flex align-center gap-3"},_a={class:"font-weight-bold"},fa={class:"text-caption"},ka=et({__name:"inventory-management",setup(K){const{xs:i}=lt(),c=()=>{ue(),ce(),Y()},{inventoryList:m,loading:k,saveLoading:$,stats:L,lowStockItems:j,stockUpdateDialog:F,reorderDialog:O,movementsDialog:B,selectedInventory:A,currentPage:f,totalItems:g,itemsPerPage:p,filters:n,errorMessage:T,successMessage:b,modalErrorMessage:X,stockUpdateForm:C,reorderForm:I,totalStockValue:ie,lowStockCount:H,outOfStockCount:ge,stockStatusOptions:ve,fetchInventoryList:ue,fetchStats:ce,fetchLowStockAlerts:Y,updateStock:_e,setReorderLevel:de,openStockUpdateDialog:xe,openReorderDialog:Se,openMovementsDialog:we,closeStockUpdateDialog:d,closeReorderDialog:D,clearModalError:w,onPageChange:oe,onItemsPerPageChange:Ve,handleFiltersUpdate:le,formatCurrency:fe,getStockStatusColor:Ae,getStockStatusText:Le,totalPages:qe,hasNextPage:ze,hasPrevPage:Fe}=Pt(),{recordStockMovement:ke,openAdjustmentDialog:Me,movementDialog:Pe,adjustmentDialog:Ce,selectedItem:G,movementFormData:U,saveLoading:Oe,closeMovementDialog:ye,successMessage:De,modalErrorMessage:Be,clearModalError:Ke}=Ct(),l=h=>h.item?{id_item:h.item.id_item,item_code:h.item.item_code,name:h.item.name,description:h.item.description||"",unit:h.item.unit,cost_per_unit:parseFloat(h.item.cost_per_unit),current_stock:h.current_stock,minimum_stock:h.reorder_level||0,active:!0,storage_location:h.item.storage_location||"",expiry_date:h.item.expiry_date||null,properties:h.item.properties||null,created_by:h.item.created_by||null,updated_by:h.item.updated_by||null,created_at:h.item.created_at,updated_at:h.item.updated_at,deleted_at:h.item.deleted_at||null}:null,S=h=>{const s=l(h);s&&Me(s)},Ue=N(()=>L.value);return N(()=>m.value),N(()=>k.value),rt(()=>{ue(),ce(),Y()}),(h,s)=>{var He,Ge,Je,Xe;return x(),ne("div",Dt,[r("div",Ut,[s[34]||(s[34]=r("div",null,[r("h1",{class:"text-h4 font-weight-bold inventory-title"}," Kelola Inventory "),r("p",{class:"text-body-1 text-medium-emphasis inventory-subtitle"}," Kelola stok barang dan pergerakan inventory ")],-1)),r("div",jt,[e(M,{color:"primary","prepend-icon":"tabler-refresh",variant:"outlined",onClick:c},{default:a(()=>s[33]||(s[33]=[_(" Refresh Data ")])),_:1,__:[33]})])]),t(T)?(x(),R(se,{key:0,type:"error",variant:"outlined",class:"mb-4",text:t(T),closable:"","onClick:close":s[0]||(s[0]=o=>T.value="")},null,8,["text"])):P("",!0),t(b)?(x(),R(se,{key:1,type:"success",variant:"outlined",class:"mb-4",text:t(b),closable:"","onClick:close":s[1]||(s[1]=o=>b.value="")},null,8,["text"])):P("",!0),t(De)?(x(),R(se,{key:2,type:"success",variant:"outlined",class:"mb-4",text:t(De),closable:"","onClick:close":s[2]||(s[2]=o=>De.value="")},null,8,["text"])):P("",!0),e(te,{class:"mb-6"},{default:a(()=>[e(V,{cols:"12",md:"3"},{default:a(()=>[e(q,{class:"stats-card"},{default:a(()=>[e(z,null,{default:a(()=>[r("div",Tt,[r("div",null,[r("div",It,u(Ue.value.total_items||0),1),s[35]||(s[35]=r("div",{class:"text-caption text-medium-emphasis"}," Total Produk ",-1))]),e(E,{icon:"tabler-package",size:"48",class:"text-primary opacity-50"})])]),_:1})]),_:1})]),_:1}),e(V,{cols:"12",md:"3"},{default:a(()=>[e(q,{class:"stats-card"},{default:a(()=>[e(z,null,{default:a(()=>[r("div",Et,[r("div",null,[r("div",Rt,u(t(H)||0),1),s[36]||(s[36]=r("div",{class:"text-caption text-medium-emphasis"}," Stok Menipis ",-1))]),e(E,{icon:"tabler-alert-triangle",size:"48",class:"text-warning opacity-50"})])]),_:1})]),_:1})]),_:1}),e(V,{cols:"12",md:"3"},{default:a(()=>[e(q,{class:"stats-card"},{default:a(()=>[e(z,null,{default:a(()=>[r("div",$t,[r("div",null,[r("div",At,u(t(ge)||0),1),s[37]||(s[37]=r("div",{class:"text-caption text-medium-emphasis"}," Stok Habis ",-1))]),e(E,{icon:"tabler-x-circle",size:"48",class:"text-error opacity-50"})])]),_:1})]),_:1})]),_:1}),e(V,{cols:"12",md:"3"},{default:a(()=>[e(q,{class:"stats-card"},{default:a(()=>[e(z,null,{default:a(()=>[r("div",Lt,[r("div",null,[r("div",qt,u(t(fe)(t(ie)||0)),1),s[38]||(s[38]=r("div",{class:"text-caption text-medium-emphasis"}," Nilai Stok ",-1))]),e(E,{icon:"tabler-currency-dollar",size:"48",class:"text-success opacity-50"})])]),_:1})]),_:1})]),_:1})]),_:1}),e(q,{class:"mb-6 info-card",color:"info",variant:"tonal"},{default:a(()=>[e(z,null,{default:a(()=>[r("div",zt,[r("div",Ft,[e(E,{icon:"tabler-info-circle",size:"32",class:"text-info"}),s[39]||(s[39]=r("div",null,[r("div",{class:"text-subtitle-1 font-weight-medium text-info"}," Sistem Stock Movement Otomatis "),r("div",{class:"text-body-2 text-medium-emphasis"},[_(" Stok akan bertambah otomatis saat purchasing dan berkurang saat penjualan POS. Gunakan tombol "),r("strong",null,"Penyesuaian"),_(" untuk koreksi manual jika diperlukan. ")])],-1))]),r("div",Ot,[e(Q,{color:"success",variant:"tonal",size:"small"},{default:a(()=>[e(E,{icon:"tabler-shopping-cart",class:"me-1"}),s[40]||(s[40]=_(" Purchase → Stok + "))]),_:1,__:[40]}),e(Q,{color:"error",variant:"tonal",size:"small"},{default:a(()=>[e(E,{icon:"tabler-cash",class:"me-1"}),s[41]||(s[41]=_(" POS Sale → Stok - "))]),_:1,__:[41]})])])]),_:1})]),_:1}),t(j).length>0?(x(),R(q,{key:3,class:"mb-6 low-stock-alert"},{default:a(()=>[e(pe,{class:"d-flex align-center"},{default:a(()=>[e(E,{icon:"tabler-alert-triangle",class:"text-warning me-2"}),_(" Peringatan Stok Menipis ("+u(t(j).length)+" produk) ",1)]),_:1}),e(z,null,{default:a(()=>[r("div",Bt,[(x(!0),ne(nt,null,it(t(j).slice(0,10),o=>(x(),R(Q,{key:o.id_inventory,color:"warning",variant:"outlined",size:"small"},{default:a(()=>{var y;return[_(u((y=o.product)==null?void 0:y.name)+" ("+u(o.current_stock)+"/"+u(o.reorder_level)+") ",1)]}),_:2},1024))),128)),t(j).length>10?(x(),R(Q,{key:0,color:"warning",variant:"tonal",size:"small"},{default:a(()=>[_(" +"+u(t(j).length-10)+" lainnya ",1)]),_:1})):P("",!0)])]),_:1})]),_:1})):P("",!0),!t(k)&&t(m).length===0&&!t(T)?(x(),R(q,{key:4,class:"mb-6"},{default:a(()=>[e(z,{class:"text-center py-6"},{default:a(()=>[e(E,{icon:"tabler-info-circle",size:"48",class:"text-info mb-3"}),s[42]||(s[42]=r("div",{class:"text-h6 mb-2"}," Sistem Inventory Management Siap Digunakan ",-1)),s[43]||(s[43]=r("div",{class:"text-body-2 text-medium-emphasis"}," Buat produk dan variant terlebih dahulu untuk mulai melacak inventory. ",-1))]),_:1,__:[42,43]})]),_:1})):P("",!0),t(k)||t(m).length>0?(x(),R(q,{key:5,class:"mb-6"},{default:a(()=>[e(z,null,{default:a(()=>[e(te,null,{default:a(()=>[e(V,{cols:"12",md:"4"},{default:a(()=>[e(W,{modelValue:t(n).search,"onUpdate:modelValue":[s[3]||(s[3]=o=>t(n).search=o),s[4]||(s[4]=o=>t(le)({search:o}))],label:"Cari inventory produk...",placeholder:"Nama produk, SKU, atau variant","prepend-inner-icon":"tabler-search",clearable:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",md:"3"},{default:a(()=>[e(Ie,{modelValue:t(n).stock_status,"onUpdate:modelValue":[s[5]||(s[5]=o=>t(n).stock_status=o),s[6]||(s[6]=o=>t(le)({stock_status:o}))],label:"Status Stok",items:t(ve),clearable:"",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),e(V,{cols:"12",md:"2"},{default:a(()=>[e(Ie,{modelValue:t(n).sort_by,"onUpdate:modelValue":[s[7]||(s[7]=o=>t(n).sort_by=o),s[8]||(s[8]=o=>t(le)({sort_by:o}))],label:"Urutkan",items:[{title:"Stok Tersedia",value:"current_stock"},{title:"Nama Produk",value:"product_name"},{title:"Terakhir Diperbarui",value:"updated_at"}],variant:"outlined"},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",md:"2"},{default:a(()=>[e(Ie,{modelValue:t(n).sort_order,"onUpdate:modelValue":[s[9]||(s[9]=o=>t(n).sort_order=o),s[10]||(s[10]=o=>t(le)({sort_order:o}))],label:"Urutan",items:[{title:"A-Z / 0-9",value:"asc"},{title:"Z-A / 9-0",value:"desc"}],variant:"outlined"},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",md:"1"},{default:a(()=>[e(M,{variant:"outlined",color:"secondary",block:"",onClick:s[11]||(s[11]=o=>t(le)({search:"",stock_status:"all",sort_by:"current_stock",sort_order:"asc"}))},{default:a(()=>s[44]||(s[44]=[_(" Reset ")])),_:1,__:[44]})]),_:1})]),_:1})]),_:1})]),_:1})):P("",!0),e(q,{class:"products-inventory-table"},{default:a(()=>[e(pe,{class:"d-flex align-center gap-2 coffee-header"},{default:a(()=>[e(E,{icon:"tabler-package",class:"text-white"}),s[45]||(s[45]=r("span",{class:"text-white"},"Inventory Produk",-1)),e(he),e(Q,{color:"white",size:"small",variant:"tonal"},{default:a(()=>[_(u(t(g))+" Produk ",1)]),_:1})]),_:1,__:[45]}),e(Z),e(at,{headers:[{title:"Produk/Variant",key:"item_name",sortable:!1},{title:"SKU",key:"sku",sortable:!1},{title:"Stok Saat Ini",key:"current_stock",sortable:!1},{title:"Stok Tersedia",key:"available_stock",sortable:!1},{title:"Status",key:"status",sortable:!1},{title:"Reorder Level",key:"reorder_level",sortable:!1},{title:"Harga Rata-rata",key:"average_cost",sortable:!1},{title:"Nilai Stok",key:"stock_value",sortable:!1},{title:"Aksi",key:"actions",sortable:!1}],page:t(f),"onUpdate:page":[s[13]||(s[13]=o=>me(f)?f.value=o:null),t(oe)],"items-per-page":t(p),"onUpdate:itemsPerPage":[s[14]||(s[14]=o=>me(p)?p.value=o:null),t(Ve)],items:t(m),loading:t(k),"items-per-page-options":[10,15,25,50,100],"items-length":t(g),"show-current-page":!0,"items-per-page-text":"Items per page:","page-text":"{0}-{1} of {2}","no-data-text":"Tidak ada data inventory",class:"text-no-wrap"},{"item.item_name":a(({item:o})=>{var y,ee,We,Ze,Qe;return[r("div",Nt,[r("div",null,[r("div",Kt,u(((y=o.item)==null?void 0:y.name)||((ee=o.product)==null?void 0:ee.name)||"Unknown Item"),1),r("small",Ht,u(((We=o.item)==null?void 0:We.description)||((Qe=(Ze=o.product)==null?void 0:Ze.category)==null?void 0:Qe.name)||"-"),1)])])]}),"item.sku":a(({item:o})=>[e(Q,{variant:"outlined",size:"small",color:"primary"},{default:a(()=>{var y,ee;return[_(u(((y=o.item)==null?void 0:y.item_code)||((ee=o.product)==null?void 0:ee.sku)||"N/A"),1)]}),_:2},1024)]),"item.current_stock":a(({item:o})=>[r("div",Gt,[r("div",Jt,u(o.current_stock),1),o.reserved_stock>0?(x(),ne("small",Xt," ("+u(o.reserved_stock)+" reserved) ",1)):P("",!0)])]),"item.available_stock":a(({item:o})=>[r("div",Wt,[e(Q,{color:o.available_stock>0?"success":"error",variant:"tonal",size:"small"},{default:a(()=>[_(u(o.available_stock),1)]),_:2},1032,["color"])])]),"item.status":a(({item:o})=>[e(Q,{color:t(Ae)(o),variant:"tonal",size:"small"},{default:a(()=>[_(u(t(Le)(o)),1)]),_:2},1032,["color"])]),"item.reorder_level":a(({item:o})=>[r("div",Zt,u(o.reorder_level||"-"),1)]),"item.average_cost":a(({item:o})=>[r("div",Qt,u(t(fe)(o.average_cost)),1)]),"item.stock_value":a(({item:o})=>[r("div",Yt,u(t(fe)(o.current_stock*o.average_cost)),1)]),"item.actions":a(({item:o})=>[r("div",ea,[e(Ee,{text:"Penyesuaian Stok"},{activator:a(({props:y})=>[e(M,je(y,{icon:"tabler-adjustments",color:"warning",variant:"text",size:"small",disabled:!o.item,onClick:ee=>S(o)}),null,16,["disabled","onClick"])]),_:2},1024),e(Ee,{text:"Update Stok"},{activator:a(({props:y})=>[e(M,je(y,{icon:"tabler-edit",color:"primary",variant:"text",size:"small",onClick:ee=>t(xe)(o)}),null,16,["onClick"])]),_:2},1024),e(Ee,{text:"Set Reorder Level"},{activator:a(({props:y})=>[e(M,je(y,{icon:"tabler-settings",color:"info",variant:"text",size:"small",onClick:ee=>t(Se)(o)}),null,16,["onClick"])]),_:2},1024),e(Ee,{text:"Lihat Riwayat"},{activator:a(({props:y})=>[e(M,je(y,{icon:"tabler-history",color:"secondary",variant:"text",size:"small",onClick:ee=>t(we)(o)}),null,16,["onClick"])]),_:2},1024)])]),"no-data":a(()=>[r("div",ta,[e(E,{icon:"tabler-package-off",size:"64",class:"text-medium-emphasis mb-4"}),s[48]||(s[48]=r("div",{class:"text-h5 text-medium-emphasis mb-2"}," Belum Ada Data Inventory ",-1)),s[49]||(s[49]=r("div",{class:"text-body-1 text-medium-emphasis mb-4"},[_(" Data inventory akan muncul setelah produk dan variant dibuat."),r("br"),_(" Silakan buat produk terlebih dahulu di menu "),r("strong",null,"Kelola Produk"),_(". ")],-1)),r("div",aa,[e(M,{color:"primary","prepend-icon":"tabler-plus",to:"/products-management"},{default:a(()=>s[46]||(s[46]=[_(" Buat Produk Baru ")])),_:1,__:[46]}),e(M,{variant:"outlined","prepend-icon":"tabler-refresh",onClick:s[12]||(s[12]=o=>{t(ue)(),t(ce)(),t(Y)()})},{default:a(()=>s[47]||(s[47]=[_(" Refresh Data ")])),_:1,__:[47]})])])]),loading:a(()=>[r("div",sa,[e(tt,{indeterminate:"",color:"primary",size:"40"}),s[50]||(s[50]=r("div",{class:"mt-4 text-medium-emphasis"}," Memuat data inventory... ",-1))])]),_:1},8,["page","items-per-page","items","loading","items-length","onUpdate:page","onUpdate:itemsPerPage"]),!t(k)&&t(m).length>0?(x(),R(z,{key:0,class:"text-center py-2 text-caption text-medium-emphasis"},{default:a(()=>[_(" Menampilkan "+u(t(m).length)+" dari "+u(t(g))+" total produk inventory ",1),t(n).search||t(n).stock_status!=="all"?(x(),ne("span",oa," (hasil pencarian/filter) ")):P("",!0),s[51]||(s[51]=r("br",null,null,-1)),r("small",la," Debug: Page "+u(t(f))+"/"+u(t(qe))+" | Items per page: "+u(t(p))+" | Has Next: "+u(t(ze))+" | Has Prev: "+u(t(Fe)),1)]),_:1,__:[51]})):P("",!0)]),_:1}),e(be,{modelValue:t(F),"onUpdate:modelValue":s[21]||(s[21]=o=>me(F)?F.value=o:null),"max-width":"800px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:a(()=>[e(q,null,{default:a(()=>[e(pe,null,{default:a(()=>{var o,y;return[_(" Update Stok - "+u((y=(o=t(A))==null?void 0:o.product)==null?void 0:y.name),1)]}),_:1}),e(Z),e(Re,{onSubmit:Te(t(_e),["prevent"])},{default:a(()=>[e(z,null,{default:a(()=>[t(X)?(x(),R(se,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4","onClick:close":t(w)},{default:a(()=>[_(u(t(X)),1)]),_:1},8,["onClick:close"])):P("",!0),e(te,null,{default:a(()=>[e(V,{cols:"12",md:"6"},{default:a(()=>[e(Ie,{modelValue:t(C).movement_type,"onUpdate:modelValue":s[15]||(s[15]=o=>t(C).movement_type=o),label:"Jenis Pergerakan *",items:[{title:"Stock Masuk",value:"stock_in"},{title:"Stock Keluar",value:"stock_out"},{title:"Penyesuaian",value:"adjustment"},{title:"Transfer",value:"transfer"},{title:"Retur",value:"return"}],variant:"outlined"},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",md:"6"},{default:a(()=>[e(W,{modelValue:t(C).quantity,"onUpdate:modelValue":s[16]||(s[16]=o=>t(C).quantity=o),modelModifiers:{number:!0},label:"Kuantitas *",type:"number",min:"1",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(te,null,{default:a(()=>[e(V,{cols:"12"},{default:a(()=>[e(W,{modelValue:t(C).reason,"onUpdate:modelValue":s[17]||(s[17]=o=>t(C).reason=o),label:"Alasan *",placeholder:"Contoh: Pembelian dari supplier, Penjualan, dll",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(te,null,{default:a(()=>[e(V,{cols:"12",md:"6"},{default:a(()=>[e(W,{modelValue:t(C).reference_number,"onUpdate:modelValue":s[18]||(s[18]=o=>t(C).reference_number=o),label:"Nomor Referensi",placeholder:"PO-001, SO-001, dll",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",md:"6"},{default:a(()=>[e(W,{modelValue:t(C).cost_per_unit,"onUpdate:modelValue":s[19]||(s[19]=o=>t(C).cost_per_unit=o),modelModifiers:{number:!0},label:"Harga per Unit",type:"number",min:"0",step:"0.01",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(te,null,{default:a(()=>[e(V,{cols:"12"},{default:a(()=>[e(Ne,{modelValue:t(C).notes,"onUpdate:modelValue":s[20]||(s[20]=o=>t(C).notes=o),label:"Catatan",rows:"2",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(Z),e($e,{class:"pa-4"},{default:a(()=>[e(he),e(M,{variant:"outlined",onClick:t(d)},{default:a(()=>s[52]||(s[52]=[_(" Batal ")])),_:1,__:[52]},8,["onClick"]),e(M,{type:"submit",color:"primary",loading:t($)},{default:a(()=>s[53]||(s[53]=[_(" Update Stok ")])),_:1,__:[53]},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","fullscreen"]),e(be,{modelValue:t(O),"onUpdate:modelValue":s[24]||(s[24]=o=>me(O)?O.value=o:null),"max-width":"600px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:a(()=>[e(q,null,{default:a(()=>[e(pe,null,{default:a(()=>{var o,y;return[_(" Set Reorder Level - "+u((y=(o=t(A))==null?void 0:o.product)==null?void 0:y.name),1)]}),_:1}),e(Z),e(Re,{onSubmit:Te(t(de),["prevent"])},{default:a(()=>[e(z,null,{default:a(()=>[t(X)?(x(),R(se,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4","onClick:close":t(w)},{default:a(()=>[_(u(t(X)),1)]),_:1},8,["onClick:close"])):P("",!0),e(te,null,{default:a(()=>[e(V,{cols:"12"},{default:a(()=>[e(W,{modelValue:t(I).reorder_level,"onUpdate:modelValue":s[22]||(s[22]=o=>t(I).reorder_level=o),modelModifiers:{number:!0},label:"Reorder Level *",type:"number",min:"0",hint:"Stok minimum sebelum perlu restock","persistent-hint":"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(te,null,{default:a(()=>[e(V,{cols:"12"},{default:a(()=>[e(W,{modelValue:t(I).max_stock_level,"onUpdate:modelValue":s[23]||(s[23]=o=>t(I).max_stock_level=o),modelModifiers:{number:!0},label:"Max Stock Level",type:"number",min:"0",hint:"Stok maksimum yang diizinkan","persistent-hint":"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(Z),e($e,{class:"pa-4"},{default:a(()=>[e(he),e(M,{variant:"outlined",onClick:t(D)},{default:a(()=>s[54]||(s[54]=[_(" Batal ")])),_:1,__:[54]},8,["onClick"]),e(M,{type:"submit",color:"primary",loading:t($)},{default:a(()=>s[55]||(s[55]=[_(" Simpan ")])),_:1,__:[55]},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","fullscreen"]),e(Mt,{modelValue:t(B),"onUpdate:modelValue":s[25]||(s[25]=o=>me(B)?B.value=o:null),"inventory-id":(Ge=(He=t(A))==null?void 0:He.id_inventory)==null?void 0:Ge.toString(),"inventory-name":(Xe=(Je=t(A))==null?void 0:Je.item)==null?void 0:Xe.name},null,8,["modelValue","inventory-id","inventory-name"]),e(be,{modelValue:t(Ce),"onUpdate:modelValue":s[28]||(s[28]=o=>me(Ce)?Ce.value=o:null),"max-width":"600px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:a(()=>[e(q,{class:"stock-movement-dialog coffee-dialog"},{default:a(()=>[e(pe,{class:"d-flex align-center justify-space-between coffee-header"},{default:a(()=>[r("div",ra,[e(E,{icon:"tabler-adjustments",class:"text-white"}),s[56]||(s[56]=r("span",{class:"text-white"}," Penyesuaian Stok ",-1))]),e(M,{icon:"tabler-x",variant:"text",color:"white",onClick:t(ye)},null,8,["onClick"])]),_:1}),e(Z),e(z,{class:"pa-6"},{default:a(()=>[e(Re,{onSubmit:Te(t(ke),["prevent"])},{default:a(()=>{var o;return[t(G)?(x(),R(se,{key:0,color:"info",variant:"tonal",class:"mb-4"},{default:a(()=>[r("div",na,[e(E,{icon:"tabler-package"}),r("div",null,[r("div",ia,u(t(G).name),1),r("div",ua,u(t(G).item_code),1),r("div",ca,"Stok Saat Ini: "+u(t(G).current_stock)+" "+u(t(G).unit),1)])])]),_:1})):P("",!0),t(Be)?(x(),R(se,{key:1,type:"error",variant:"outlined",class:"mb-4",text:t(Be),closable:"","onClick:close":t(Ke)},null,8,["text","onClick:close"])):P("",!0),e(W,{modelValue:t(U).quantity,"onUpdate:modelValue":s[26]||(s[26]=y=>t(U).quantity=y),modelModifiers:{number:!0},label:"Stok Baru",type:"number",min:"0",step:"0.001",variant:"outlined",suffix:(o=t(G))==null?void 0:o.unit,class:"mb-4",required:""},null,8,["modelValue","suffix"]),e(Ne,{modelValue:t(U).notes,"onUpdate:modelValue":s[27]||(s[27]=y=>t(U).notes=y),label:"Catatan (opsional)",variant:"outlined",rows:"3",class:"mb-4"},null,8,["modelValue"]),r("div",da,[e(M,{variant:"outlined",onClick:t(ye)},{default:a(()=>s[57]||(s[57]=[_(" Batal ")])),_:1,__:[57]},8,["onClick"]),e(M,{type:"submit",color:"primary",class:"coffee-primary",loading:t(Oe)},{default:a(()=>s[58]||(s[58]=[_(" Simpan Penyesuaian ")])),_:1,__:[58]},8,["loading"])])]}),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"]),e(be,{modelValue:t(Pe),"onUpdate:modelValue":s[32]||(s[32]=o=>me(Pe)?Pe.value=o:null),"max-width":"800px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:a(()=>[e(q,{class:"stock-movement-dialog coffee-dialog"},{default:a(()=>[e(pe,{class:"d-flex align-center justify-space-between coffee-header"},{default:a(()=>[r("div",ma,[e(E,{icon:t(U).type==="in"?"tabler-plus":"tabler-minus",class:"text-white"},null,8,["icon"]),r("span",pa,u(t(U).type==="in"?"Stok Masuk":t(U).type==="out"?"Stok Keluar":"Penyesuaian Stok"),1)]),e(M,{icon:"tabler-x",variant:"text",color:"white",onClick:t(ye)},null,8,["onClick"])]),_:1}),e(Z),e(z,{class:"pa-6"},{default:a(()=>[e(Re,{onSubmit:Te(t(ke),["prevent"])},{default:a(()=>[t(G)?(x(),R(se,{key:0,color:"info",variant:"tonal",class:"mb-4"},{default:a(()=>[r("div",va,[e(ct,{color:"primary",size:"40",variant:"tonal"},{default:a(()=>[e(E,{icon:"tabler-package"})]),_:1}),r("div",null,[r("div",_a,u(t(G).name),1),r("div",fa," Stok saat ini: "+u(t(G).current_stock)+" "+u(t(G).unit),1)])])]),_:1})):P("",!0),e(te,null,{default:a(()=>[e(V,{cols:"12",md:"6"},{default:a(()=>[e(W,{modelValue:t(U).quantity,"onUpdate:modelValue":s[29]||(s[29]=o=>t(U).quantity=o),modelModifiers:{number:!0},label:`Jumlah ${t(U).type==="in"?"Masuk":t(U).type==="out"?"Keluar":"Akhir"}`,type:"number",variant:"outlined",required:"",min:t(U).type==="adjustment"?0:1,rules:[o=>o>0||"Jumlah harus lebih dari 0"]},null,8,["modelValue","label","min","rules"])]),_:1}),e(V,{cols:"12",md:"6"},{default:a(()=>[e(W,{modelValue:t(U).cost_per_unit,"onUpdate:modelValue":s[30]||(s[30]=o=>t(U).cost_per_unit=o),modelModifiers:{number:!0},label:"Harga per Unit",type:"number",variant:"outlined",prefix:"Rp",readonly:t(U).type!=="in"},null,8,["modelValue","readonly"])]),_:1}),e(V,{cols:"12"},{default:a(()=>[e(Ne,{modelValue:t(U).notes,"onUpdate:modelValue":s[31]||(s[31]=o=>t(U).notes=o),label:"Catatan",placeholder:"Masukkan catatan untuk pergerakan stok...",rows:"3",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),e(Z),e($e,{class:"pa-6"},{default:a(()=>[e(he),e(M,{variant:"outlined",class:"coffee-secondary",onClick:t(ye)},{default:a(()=>s[59]||(s[59]=[_(" Batal ")])),_:1,__:[59]},8,["onClick"]),e(M,{color:"primary",class:"coffee-primary",loading:t(Oe),onClick:t(ke)},{default:a(()=>s[60]||(s[60]=[_(" Simpan ")])),_:1,__:[60]},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}}),Ka=st(ka,[["__scopeId","data-v-0192cc86"]]);export{Ka as default};

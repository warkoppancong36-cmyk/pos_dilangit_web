import{av as _e,d as ht,r as v,V as te,w as bt,g as R,f as o,b as t,s as m,X as A,t as i,l as I,c as G,e as l,at as nt,a0 as S,o as b,au as gt,aU as Mt,D as Dt,m as a,a2 as Le,F as Pt,i as It,p as Ke,$ as Ge,a4 as Ut,aw as st,ar as At}from"./main-BkLglF7t.js";import{V as Ie}from"./VDialog-DB8TEzq0.js";import{b as he,c as Ne,V as H}from"./VCard-BS__dGOO.js";import{V as ae}from"./VDivider-BZHAFeBt.js";import{V as K}from"./VCardText-BOTswayt.js";import{V as ke}from"./VAlert-DFmPVfw3.js";import{V as xt,a as Et}from"./VDataTable-DCnuhqB_.js";import{V as Q}from"./VChip-CxhAj40j.js";import{V as Ue}from"./VSpacer-CX-6HcGf.js";import{_ as wt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as Rt}from"./ItemsApi-Q2KA4SOa.js";import{u as $t}from"./useApi-BURlRXwm.js";import{V as ve,a as N}from"./VRow-yY4fG0sB.js";import{V as ce}from"./VTextField-CEzXoRfQ.js";import{V as ft}from"./VSelect-B9qIr49F.js";import{V as jt}from"./VDataTableServer-C_-91Q-F.js";import{V as Xe}from"./VTooltip-uxX19g26.js";import{V as Je}from"./VForm-CmZC-fy-.js";import{V as lt}from"./VTextarea-j8PBoJ9o.js";import{V as yt}from"./VAvatar-ChsJyCUu.js";import"./VOverlay-ecUBiCQA.js";import"./forwardRefs-B931MWyl.js";import"./VImg-C910MdjQ.js";import"./VCheckboxBtn-BH3ZQAdA.js";import"./VTable-BXXBU8Pu.js";import"./filter-CgeN0Sso.js";/* empty css              */import"./VList-D0K_6S33.js";import"./VMenu-DvnoRXb3.js";const de="/api/inventory";class oe{static async getAll(u){var d;try{return(await _e.get(de,{params:u})).data}catch(p){throw((d=p.response)==null?void 0:d.data)||this.handleError(p)}}static async getById(u){var d;try{return(await _e.get(`${de}/${u}`)).data}catch(p){throw((d=p.response)==null?void 0:d.data)||this.handleError(p)}}static async getStats(){var u;try{return(await _e.get(`${de}/stats`)).data}catch(d){throw((u=d.response)==null?void 0:u.data)||this.handleError(d)}}static async getLowStockAlerts(){var u;try{return(await _e.get(`${de}/low-stock-alerts`)).data}catch(d){throw((u=d.response)==null?void 0:u.data)||this.handleError(d)}}static async updateStock(u,d){var p;try{return(await _e.post(`${de}/${u}/update-stock`,d)).data}catch(V){throw((p=V.response)==null?void 0:p.data)||this.handleError(V)}}static async bulkUpdateStock(u){var d;try{return(await _e.post(`${de}/bulk-update-stock`,u)).data}catch(p){throw((d=p.response)==null?void 0:d.data)||this.handleError(p)}}static async setReorderLevel(u,d){var p;try{return(await _e.post(`${de}/${u}/reorder-level`,d)).data}catch(V){throw((p=V.response)==null?void 0:p.data)||this.handleError(V)}}static async getMovements(u){var d;try{const p=u!=null&&u.id_inventory?`${de}/${u.id_inventory}/movements`:`${de}/movements`;return(await _e.get(p,{params:u})).data}catch(p){throw((d=p.response)==null?void 0:d.data)||this.handleError(p)}}static async recordMovement(u){var d;try{return(await _e.post(`${de}/movement`,u)).data}catch(p){throw((d=p.response)==null?void 0:d.data)||this.handleError(p)}}static handleError(u){var d,p;return u.response?{message:((d=u.response.data)==null?void 0:d.message)||"Terjadi kesalahan pada server",success:!1,errors:(p=u.response.data)==null?void 0:p.errors}:u.request?{message:"Tidak dapat terhubung ke server",success:!1}:{message:u.message||"Terjadi kesalahan yang tidak diketahui",success:!1}}static formatError(u){return u.errors?Object.values(u.errors).flat().join(", "):u.message||"Terjadi kesalahan yang tidak diketahui"}static isValidationError(u){return u.errors&&typeof u.errors=="object"}static getFieldError(u,d){return u.errors&&u.errors[d]?Array.isArray(u.errors[d])?u.errors[d][0]:u.errors[d]:null}static getMovementTypes(){return[{value:"stock_in",label:"Stock Masuk",color:"success"},{value:"stock_out",label:"Stock Keluar",color:"warning"},{value:"adjustment",label:"Penyesuaian",color:"info"},{value:"transfer",label:"Transfer",color:"primary"},{value:"return",label:"Retur",color:"success"},{value:"damaged",label:"Rusak",color:"error"},{value:"expired",label:"Kadaluarsa",color:"error"}]}static getStockStatusOptions(){return[{value:"all",label:"Semua Status"},{value:"in_stock",label:"Tersedia"},{value:"low_stock",label:"Stok Menipis"},{value:"out_of_stock",label:"Habis"},{value:"overstock",label:"Stok Berlebih"}]}}const Lt={key:1,class:"text-center py-8"},Nt={class:"font-weight-medium"},zt={class:"text-medium-emphasis"},Ft={class:"text-center"},qt={class:"text-center font-weight-medium"},Ot={class:"text-center font-weight-bold text-primary"},Ht={class:"text-end"},Bt={class:"text-end font-weight-medium text-success"},Kt={class:"max-width-200"},Gt={class:"font-weight-medium"},Xt={key:0,class:"text-medium-emphasis"},Jt={key:1,class:"d-block text-caption"},Wt={key:2,class:"text-info d-block"},Yt={class:"text-center py-8"},Qt=ht({__name:"InventoryMovementsDialog",props:{modelValue:{type:Boolean},inventoryId:{},inventoryName:{}},emits:["update:modelValue"],setup(le,{emit:u}){const d=le,p=u,V=v([]),X=v(!1),q=v(""),$=te({get:()=>d.modelValue,set:f=>p("update:modelValue",f)}),Z=async()=>{var f,y,n,T;if(d.inventoryId)try{X.value=!0,q.value="";const w=await oe.getMovements({id_inventory:parseInt(d.inventoryId),page:1,per_page:50});w.data&&Array.isArray(w.data)?V.value=w.data:w.data&&((f=w==null?void 0:w.data)!=null&&f.data)&&Array.isArray((y=w==null?void 0:w.data)==null?void 0:y.data)?V.value=w.data.data:V.value=[]}catch(w){console.error("Error fetching movements:",w),q.value=((T=(n=w.response)==null?void 0:n.data)==null?void 0:T.message)||"Gagal memuat riwayat pergerakan"}finally{X.value=!1}},se=f=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(f),J=f=>({in:"success",out:"error",stock_in:"success",stock_out:"error",adjustment:"warning",transfer:"info",return:"secondary"})[f]||"primary",W=f=>({in:"Stock Masuk",out:"Stock Keluar",stock_in:"Stock Masuk",stock_out:"Stock Keluar",adjustment:"Penyesuaian",transfer:"Transfer",return:"Retur"})[f]||f,U=f=>({in:"tabler-plus",out:"tabler-minus",stock_in:"tabler-plus",stock_out:"tabler-minus",adjustment:"tabler-edit",transfer:"tabler-arrows-exchange",return:"tabler-arrow-back"})[f]||"tabler-package";return bt($,f=>{f&&d.inventoryId?Z():(V.value=[],q.value="")}),(f,y)=>(b(),R(Ie,{modelValue:$.value,"onUpdate:modelValue":y[1]||(y[1]=n=>$.value=n),"max-width":"900px",scrollable:""},{default:o(()=>[t(H,null,{default:o(()=>[t(he,{class:"d-flex align-center"},{default:o(()=>[t(A,{icon:"tabler-history",class:"me-2"}),m(" Riwayat Pergerakan - "+i(f.inventoryName),1)]),_:1}),t(ae),t(K,{class:"pa-0"},{default:o(()=>[q.value?(b(),R(ke,{key:0,type:"error",variant:"tonal",class:"ma-4"},{default:o(()=>[m(i(q.value),1)]),_:1})):I("",!0),X.value?(b(),G("div",Lt,[t(nt,{indeterminate:"",color:"primary",size:"40"}),y[2]||(y[2]=l("div",{class:"mt-4 text-medium-emphasis"}," Memuat riwayat pergerakan... ",-1))])):(b(),R(xt,{key:2,headers:[{title:"Tanggal",key:"created_at",sortable:!1},{title:"Jenis",key:"movement_type",sortable:!1},{title:"Kuantitas",key:"quantity",sortable:!1},{title:"Stok Sebelum",key:"stock_before",sortable:!1},{title:"Stok Sesudah",key:"stock_after",sortable:!1},{title:"Harga/Unit",key:"unit_cost",sortable:!1},{title:"Total Nilai",key:"total_cost",sortable:!1},{title:"Catatan",key:"notes",sortable:!1}],items:V.value,loading:X.value,class:"text-no-wrap","items-per-page":"15",height:"500","fixed-header":""},{"item.created_at":o(({item:n})=>[l("div",null,[l("div",Nt,i(new Date(n.created_at).toLocaleDateString("id-ID")),1),l("small",zt,i(new Date(n.created_at).toLocaleTimeString("id-ID")),1)])]),"item.movement_type":o(({item:n})=>[t(Q,{color:J(n.movement_type),variant:"tonal",size:"small","prepend-icon":U(n.movement_type)},{default:o(()=>[m(i(W(n.movement_type)),1)]),_:2},1032,["color","prepend-icon"])]),"item.quantity":o(({item:n})=>[l("div",Ft,[t(Q,{color:n.movement_type==="in"||n.movement_type==="stock_in"?"success":"error",variant:"outlined",size:"small"},{default:o(()=>[m(i(n.movement_type==="in"||n.movement_type==="stock_in"?"+":"-")+i(Math.abs(n.quantity)),1)]),_:2},1032,["color"])])]),"item.stock_before":o(({item:n})=>[l("div",qt,i(n.stock_before),1)]),"item.stock_after":o(({item:n})=>[l("div",Ot,i(n.stock_after),1)]),"item.unit_cost":o(({item:n})=>[l("div",Ht,i(n.unit_cost?se(n.unit_cost):"-"),1)]),"item.total_cost":o(({item:n})=>[l("div",Bt,i(n.total_cost?se(n.total_cost):"-"),1)]),"item.notes":o(({item:n})=>[l("div",Kt,[l("div",Gt,i(n.notes||"-"),1),n.reference_type&&n.reference_id?(b(),G("small",Xt," Ref: "+i(n.reference_type)+"-"+i(n.reference_id),1)):I("",!0),n.batch_number?(b(),G("small",Jt," Batch: "+i(n.batch_number),1)):I("",!0),n.user?(b(),G("small",Wt," oleh: "+i(n.user.name),1)):I("",!0)])]),"no-data":o(()=>[l("div",Yt,[t(A,{icon:"tabler-history-off",size:"48",class:"text-medium-emphasis mb-4"}),y[3]||(y[3]=l("div",{class:"text-h6 text-medium-emphasis mb-2"}," Belum ada riwayat pergerakan ",-1)),y[4]||(y[4]=l("div",{class:"text-body-2 text-medium-emphasis"}," Riwayat akan muncul setelah ada pergerakan stok ",-1))])]),_:1},8,["items","loading"]))]),_:1}),t(ae),t(Ne,{class:"pa-4"},{default:o(()=>[t(Ue),t(S,{variant:"outlined",onClick:y[0]||(y[0]=n=>$.value=!1)},{default:o(()=>y[5]||(y[5]=[m(" Tutup ")])),_:1,__:[5]}),t(S,{color:"primary","prepend-icon":"tabler-refresh",onClick:Z},{default:o(()=>y[6]||(y[6]=[m(" Refresh ")])),_:1,__:[6]})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Zt=wt(Qt,[["__scopeId","data-v-ca0277a4"]]),ea=()=>{const le=v([]),u=v(!1),d=v(!1),p=v({total_items:0,low_stock_items:0,out_of_stock_items:0,overstock_items:0,total_stock_value:0,total_stock_quantity:0,total_reserved_stock:0,items_need_restock:0}),V=v([]),X=v(!1),q=v([]),$=v(!1),Z=v(!1),se=v(!1),J=v(!1),W=v(!1),U=v(null),f=v([]),y=v(1),n=v(0),T=v(15),w=v({search:"",stock_status:"all",category_id:void 0,supplier_id:void 0,sort_by:"current_stock",sort_order:"asc"}),ne=v(""),j=v(""),z=v(""),ge=v({movement_type:"stock_in",quantity:0,reason:"",reference_number:"",cost_per_unit:void 0,notes:""}),fe=v({reorder_level:0,max_stock_level:0}),re=te(()=>f.value.length>0),Se=te(()=>p.value.total_stock_value),me=te(()=>p.value.low_stock_items),ye=te(()=>p.value.out_of_stock_items),ie=te(()=>Math.ceil(n.value/T.value)),Ve=te(()=>y.value<ie.value),Te=te(()=>y.value>1),Ce=te(()=>({currentPage:y.value,totalPages:ie.value,totalItems:n.value,itemsPerPage:T.value,hasNext:Ve.value,hasPrev:Te.value})),ze=[r=>r>0||"Kuantitas harus lebih dari 0",r=>Number.isInteger(r)||"Kuantitas harus berupa bilangan bulat"],Fe=[r=>!!r||"Alasan wajib diisi",r=>r&&r.length>=3||"Alasan minimal 3 karakter"],qe=[r=>!r||r>=0||"Harga harus lebih dari atau sama dengan 0"],k=[{title:"Stock Masuk",value:"stock_in",color:"success"},{title:"Stock Keluar",value:"stock_out",color:"warning"},{title:"Penyesuaian",value:"adjustment",color:"info"},{title:"Transfer",value:"transfer",color:"primary"},{title:"Retur",value:"return",color:"success"}],F=[{title:"Semua Status",value:"all"},{title:"Tersedia",value:"in_stock"},{title:"Stok Menipis",value:"low_stock"},{title:"Habis",value:"out_of_stock"},{title:"Stok Berlebih",value:"overstock"}],C=async()=>{u.value=!0,ne.value="";try{const r={...w.value,page:y.value,per_page:T.value};Object.keys(r).forEach(De=>{const Pe=r[De];(Pe===""||Pe===void 0||Pe===null||Pe==="all")&&delete r[De]});const B=await oe.getAll(r);if(B.success)le.value=B.data.data||[],n.value=B.data.total||0,B.data.current_page&&(y.value=B.data.current_page);else throw new Error(B.message||"Gagal mengambil data inventory")}catch(r){console.error("Error fetching inventory:",r),ne.value=oe.formatError(r)||"Gagal mengambil data inventory",le.value=[],n.value=0}finally{u.value=!1}},Oe=async()=>{try{const r=await oe.getStats();r.success&&(p.value=r.data)}catch(r){console.error("Error fetching inventory stats:",r)}},be=async()=>{$.value=!0;try{const r=await oe.getLowStockAlerts();r.success&&(q.value=r.data.data||[])}catch(r){console.error("Error fetching low stock alerts:",r),q.value=[]}finally{$.value=!1}},xe=async r=>{X.value=!0;try{const B=await oe.getMovements({id_inventory:r,page:1,per_page:20});B.success&&(V.value=B.data)}catch(B){console.error("Error fetching movements:",B)}finally{X.value=!1}},We=async()=>{if(U.value){d.value=!0,z.value="";try{const r=await oe.updateStock(U.value.id_inventory,ge.value);if(r.success)j.value="Stock berhasil diperbarui",Me(),await C(),await Oe(),await be();else throw new Error(r.message||"Gagal memperbarui stock")}catch(r){console.error("Error updating stock:",r),z.value=oe.formatError(r)||"Gagal memperbarui stock"}finally{d.value=!1}}},Ae=async()=>{if(U.value){d.value=!0,z.value="";try{const r=await oe.setReorderLevel(U.value.id_inventory,fe.value);if(r.success)j.value="Reorder level berhasil diperbarui",ee(),await C();else throw new Error(r.message||"Gagal memperbarui reorder level")}catch(r){console.error("Error setting reorder level:",r),z.value=oe.formatError(r)||"Gagal memperbarui reorder level"}finally{d.value=!1}}},Ee=r=>{U.value=r,ge.value={movement_type:"stock_in",quantity:0,reason:"",reference_number:"",cost_per_unit:r.average_cost||void 0,notes:""},z.value="",Z.value=!0},Ye=r=>{U.value=r,fe.value={reorder_level:r.reorder_level||0,max_stock_level:r.max_stock_level||0},z.value="",W.value=!0},Re=r=>{U.value=r,xe(r.id_inventory),J.value=!0},Me=()=>{Z.value=!1,setTimeout(()=>{U.value=null,z.value=""},300)},ee=()=>{W.value=!1,setTimeout(()=>{U.value=null,z.value=""},300)};return{inventoryList:le,loading:u,saveLoading:d,stats:p,movementsList:V,movementsLoading:X,lowStockItems:q,alertsLoading:$,stockUpdateDialog:Z,bulkUpdateDialog:se,movementsDialog:J,reorderDialog:W,selectedInventory:U,selectedItems:f,currentPage:y,totalItems:n,itemsPerPage:T,filters:w,errorMessage:ne,successMessage:j,modalErrorMessage:z,stockUpdateForm:ge,reorderForm:fe,hasSelectedItems:re,totalStockValue:Se,lowStockCount:me,outOfStockCount:ye,quantityRules:ze,reasonRules:Fe,costRules:qe,movementTypeOptions:k,stockStatusOptions:F,fetchInventoryList:C,fetchStats:Oe,fetchLowStockAlerts:be,fetchMovements:xe,updateStock:We,setReorderLevel:Ae,openStockUpdateDialog:Ee,openReorderDialog:Ye,openMovementsDialog:Re,closeStockUpdateDialog:Me,closeReorderDialog:ee,closeMovementsDialog:()=>{J.value=!1,setTimeout(()=>{U.value=null,V.value=[]},300)},clearModalError:()=>{z.value=""},onPageChange:r=>{r!==y.value&&(y.value=r,C())},onItemsPerPageChange:r=>{r!==T.value&&(T.value=r,y.value=1,C())},handleFiltersUpdate:r=>{w.value={...w.value,...r},y.value=1,C()},formatCurrency:r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),getStockStatusColor:r=>r.current_stock===0?"error":r.is_low_stock?"warning":"success",getStockStatusText:r=>r.current_stock===0?"Habis":r.reorder_level>0&&r.current_stock<=r.reorder_level?"Menipis":r.max_stock_level&&r.current_stock>r.max_stock_level?"Berlebih":"Tersedia",getMovementTypeColor:r=>({stock_in:"success",stock_out:"warning",adjustment:"info",transfer:"primary",return:"success",damaged:"error",expired:"error"})[r]||"grey",totalPages:ie,hasNextPage:Ve,hasPrevPage:Te,paginationInfo:Ce}};function ta(le){const u=v([]),d=v([]),p=v(!1),V=v(!1),X=v({total_items:0,total_value:0,low_stock_items:0,out_of_stock_items:0,movements_today:0,movements_this_month:0,top_consumed_items:[],recent_movements:[]}),q=v(1),$=v(0),Z=v(10),se=gt({search:"",stock_status:"all",movement_type:"",date_from:"",date_to:"",item_id:void 0}),J=v(!1),W=v(!1),U=v(null),f=gt({item_id:0,type:"in",quantity:0,notes:"",cost_per_unit:0}),y=v(""),n=v(""),T=v(""),w=te(()=>!0),ne=[{title:"Semua Status",value:"all"},{title:"Tersedia",value:"in_stock"},{title:"Stok Rendah",value:"low_stock"},{title:"Habis",value:"out_of_stock"}],j=[{title:"Masuk",value:"in",color:"success",icon:"tabler-plus"},{title:"Keluar",value:"out",color:"error",icon:"tabler-minus"},{title:"Penyesuaian",value:"adjustment",color:"warning",icon:"tabler-adjustments"}],z=[{title:"Pembelian",value:"purchase"},{title:"Penjualan",value:"sale"},{title:"Produksi",value:"production"},{title:"Penyesuaian",value:"adjustment"},{title:"Kerusakan",value:"waste"}],ge=k=>k.current_stock<=0?{status:"out_of_stock",color:"error",text:"Habis",icon:"tabler-x"}:k.current_stock<=k.minimum_stock?{status:"low_stock",color:"warning",text:"Rendah",icon:"tabler-alert-triangle"}:{status:"in_stock",color:"success",text:"Tersedia",icon:"tabler-check"},fe=k=>!k.maximum_stock||k.maximum_stock<=0?100:Math.round(k.current_stock/k.maximum_stock*100),re=async()=>{p.value=!0;try{await new Promise(k=>setTimeout(k,1e3)),u.value=await Rt.getAll(),$.value=u.value.length,n.value=""}catch{y.value="Gagal memuat data items"}finally{p.value=!1}},Se=async k=>{p.value=!0;try{const F=await oe.getMovements({id_inventory:k,page:q.value,per_page:Z.value});d.value=F.data.map(C=>({id:C.id_movement,item_id:C.id_inventory,type:C.movement_type,quantity:C.quantity,unit:"pcs",reference_id:C.reference_number?parseInt(C.reference_number):void 0,reference_type:C.reason,notes:C.notes,cost_per_unit:C.cost_per_unit,total_cost:C.total_cost,created_by:C.created_by,created_at:C.created_at,creator:C.user})),$.value=F.total}catch(F){console.error("Failed to fetch stock movements:",F),d.value=[]}finally{p.value=!1}},me=async()=>{try{await re();const k=u.value;X.value={total_items:k.length,total_value:k.reduce((F,C)=>F+C.current_stock*C.cost_per_unit,0),low_stock_items:k.filter(F=>F.current_stock<=F.minimum_stock&&F.current_stock>0).length,out_of_stock_items:k.filter(F=>F.current_stock<=0).length,movements_today:0,movements_this_month:0,top_consumed_items:[],recent_movements:[]}}catch(k){console.error("Failed to fetch stats:",k)}},ye=async()=>{V.value=!0,T.value="";try{const k=await oe.recordMovement({item_id:f.item_id,movement_type:f.type,quantity:f.quantity,notes:f.notes,cost_per_unit:f.cost_per_unit});if(k.success)n.value=`Stock ${f.type==="in"?"masuk":f.type==="out"?"keluar":"disesuaikan"} berhasil dicatat`,Ce(),await re(),await me(),le&&le();else throw new Error(k.message||"Gagal mencatat pergerakan stok")}catch(k){T.value=k.message||"Gagal mencatat pergerakan stok"}finally{V.value=!1}},ie=k=>{U.value=k,Object.assign(f,{item_id:k.id_item,type:"in",quantity:0,notes:"",cost_per_unit:k.cost_per_unit}),J.value=!0},Ve=k=>{U.value=k,Object.assign(f,{item_id:k.id_item,type:"out",quantity:0,notes:"",cost_per_unit:k.cost_per_unit}),J.value=!0},Te=k=>{U.value=k,Object.assign(f,{item_id:k.id_item,type:"adjustment",quantity:k.current_stock,notes:"",cost_per_unit:k.cost_per_unit}),W.value=!0},Ce=()=>{J.value=!1,W.value=!1,T.value="",U.value=null};return{itemsList:u,stockMovements:d,loading:p,saveLoading:V,stats:X,currentPage:q,totalItems:$,itemsPerPage:Z,filters:se,movementDialog:J,adjustmentDialog:W,selectedItem:U,movementFormData:f,errorMessage:y,successMessage:n,modalErrorMessage:T,canManageStock:w,stockStatusOptions:ne,movementTypeOptions:j,referenceTypeOptions:z,getStockStatus:ge,getStockPercentage:fe,fetchItems:re,fetchStockMovements:Se,fetchStats:me,recordStockMovement:ye,openStockInDialog:ie,openStockOutDialog:Ve,openAdjustmentDialog:Te,closeMovementDialog:Ce,clearModalError:()=>{T.value=""},onPageChange:k=>{q.value=k,re()},handleFiltersUpdate:k=>{Object.assign(se,k),q.value=1,re()}}}const aa={class:"inventory-management"},oa={class:"d-flex justify-space-between align-center mb-6"},sa={class:"d-flex gap-3 align-center"},la={class:"d-flex align-center justify-space-between"},na={class:"text-h4 font-weight-bold text-primary"},ra={class:"d-flex align-center justify-space-between"},ia={class:"text-h4 font-weight-bold text-warning"},ua={class:"d-flex align-center justify-space-between"},ca={class:"text-h4 font-weight-bold text-error"},da={class:"d-flex align-center justify-space-between"},ma={class:"text-h4 font-weight-bold text-success"},pa={class:"d-flex align-center justify-space-between"},_a={class:"d-flex align-center gap-3"},va={class:"d-flex gap-2"},ka={class:"d-flex flex-wrap gap-2"},ga={class:"table-container"},fa={class:"d-flex align-center"},ya={class:"font-weight-medium"},ha={class:"d-flex flex-column"},ba={class:"text-primary font-weight-medium"},xa={class:"text-medium-emphasis"},wa={class:"text-center"},Sa={class:"text-h6 font-weight-bold"},Va={key:0,class:"text-warning"},Ta={class:"text-center"},Ca={class:"text-center"},Ma={class:"text-end"},Da={class:"text-end font-weight-medium text-success"},Pa={class:"d-flex align-center gap-1"},Ia={class:"text-center py-12"},Ua={class:"text-h5 text-medium-emphasis mb-2"},Aa={class:"text-body-1 text-medium-emphasis mb-4"},Ea={key:0},Ra={key:0},$a={key:1},ja={key:2},La={key:1},Na={class:"d-flex justify-center gap-3"},za={class:"text-center py-8"},Fa={class:"d-flex align-center gap-2"},qa={class:"d-flex align-center gap-3"},Oa={class:"font-weight-bold"},Ha={class:"text-caption"},Ba={class:"text-caption"},Ka={class:"d-flex gap-3 justify-end"},Ga={class:"d-flex align-center gap-2"},Xa={class:"text-white"},Ja={class:"d-flex align-center gap-3"},Wa={class:"font-weight-bold"},Ya={class:"text-caption"},Qa={class:"d-flex align-center gap-2"},Za={key:0,class:"text-center py-8"},eo={key:1},to={class:"text-body-2"},ao={class:"d-flex align-center gap-2"},oo={class:"text-body-2 font-weight-medium"},so={class:"text-caption text-medium-emphasis"},lo={class:"text-end font-weight-medium text-success"},no={class:"text-center py-8"},ro={key:0,class:"d-flex justify-center mt-4"},io=ht({__name:"inventory-management",setup(le){const{xs:u}=Mt(),d=()=>{me(),ye(),ie()},{inventoryList:p,loading:V,saveLoading:X,stats:q,lowStockItems:$,stockUpdateDialog:Z,reorderDialog:se,movementsDialog:J,selectedInventory:W,currentPage:U,totalItems:f,itemsPerPage:y,filters:n,errorMessage:T,successMessage:w,modalErrorMessage:ne,stockUpdateForm:j,reorderForm:z,totalStockValue:ge,lowStockCount:fe,outOfStockCount:re,stockStatusOptions:Se,fetchInventoryList:me,fetchStats:ye,fetchLowStockAlerts:ie,updateStock:Ve,setReorderLevel:Te,openStockUpdateDialog:Ce,openReorderDialog:ze,openMovementsDialog:Fe,closeStockUpdateDialog:qe,closeReorderDialog:k,clearModalError:F,onPageChange:C,onItemsPerPageChange:Oe,handleFiltersUpdate:be,formatCurrency:xe,getStockStatusColor:We,getStockStatusText:Ae}=ea(),{recordStockMovement:Ee,openAdjustmentDialog:Ye,movementDialog:Re,adjustmentDialog:Me,selectedItem:ee,movementFormData:L,saveLoading:Qe,closeMovementDialog:$e,successMessage:He,modalErrorMessage:Ze,clearModalError:rt}=ta(d),it=c=>c.item?{id_item:c.item.id_item,item_code:c.item.item_code,name:c.item.name,description:c.item.description||"",unit:c.item.unit,cost_per_unit:parseFloat(c.item.cost_per_unit),current_stock:c.current_stock,minimum_stock:c.reorder_level||0,active:!0,storage_location:c.item.storage_location||"",expiry_date:c.item.expiry_date||null,properties:c.item.properties||null,created_by:c.item.created_by||null,updated_by:c.item.updated_by||null,created_at:c.item.created_at,updated_at:c.item.updated_at,deleted_at:c.item.deleted_at||null}:null,ut=c=>{const e=it(c);e&&Ye(e)},ct=te(()=>q.value);te(()=>p.value),te(()=>V.value),Dt(()=>{me(),ye(),ie()});const r=v(!1),B=()=>{var P;console.log("ðŸ” === AUTH STATUS CHECK ===");const c=st("accessToken").value,e=localStorage.getItem("token"),x=localStorage.getItem("auth_token"),M=localStorage.getItem("accessToken");console.log("ðŸª Cookie accessToken:",c?`Found (${c.substring(0,20)}...)`:"Not found"),console.log("ðŸ’¾ localStorage token:",e?`Found (${e.substring(0,20)}...)`:"Not found"),console.log("ðŸ’¾ localStorage auth_token:",x?`Found (${x.substring(0,20)}...)`:"Not found"),console.log("ðŸ’¾ localStorage accessToken:",M?`Found (${M.substring(0,20)}...)`:"Not found");try{const D=At();console.log("ðŸª Auth Store isLoggedIn:",D.isLoggedIn),console.log("ðŸª Auth Store user:",((P=D.user)==null?void 0:P.name)||"No user"),console.log("ðŸª Auth Store token:",D.token?`Found (${D.token.substring(0,20)}...)`:"Not found")}catch(D){console.log("ðŸª Auth Store not available:",D)}return console.log("========================="),{cookieToken:c,localToken:e,authToken:x,accessToken:M}},De=()=>{try{const c=B(),e=st("accessToken").value;if(console.log("ðŸ” Checking cookie token:",e?"Token found in cookie":"No token in cookie"),e)return console.log("âœ… Using cookie token (first 20 chars):",e.substring(0,20)+"..."),e;console.log("ðŸ” Checking localStorage methods...");const x=localStorage.getItem("token")||localStorage.getItem("auth_token")||localStorage.getItem("accessToken");return x?console.log("âœ… Using localStorage token (first 20 chars):",x.substring(0,20)+"..."):console.log("âŒ No token found in any storage"),x||null}catch(c){console.warn("âŒ Error getting auth token:",c);const e=localStorage.getItem("token")||localStorage.getItem("auth_token")||localStorage.getItem("accessToken")||null;return console.log("ðŸ”„ Fallback token result:",e?"Found fallback token":"No fallback token"),e}},Pe=async()=>{var c,e,x,M;try{console.log("ðŸš€ Starting fetchAllInventoryForExport...");const P=new URLSearchParams({per_page:"999999",page:"1",search:n.value.search||"",stock_status:n.value.stock_status||"all"});console.log("ðŸ“ Request params:",P.toString());try{console.log("ðŸ”„ Attempting to fetch with useApi composable...");const{data:D}=await $t(`/inventory?${P}`).get().json();if(D.value&&D.value.success){console.log("âœ… Successfully fetched with useApi:",((c=D.value.data.data)==null?void 0:c.length)||0,"items");const g=(D.value.data.data||[]).filter((_,E,O)=>E===O.findIndex(Y=>Y.id_inventory===_.id_inventory));return console.log("ðŸ” After deduplication:",g.length,"unique items"),g}else throw console.log("âŒ useApi response not successful:",D.value),new Error(((e=D.value)==null?void 0:e.message)||"useApi failed")}catch(D){console.warn("âŒ useApi failed, trying manual fetch:",D);const s=De();console.log("ðŸ” Token for manual fetch:",s?`Token available (${s.substring(0,20)}...)`:"No token");const g={"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest",...s&&{Authorization:`Bearer ${s}`}};console.log("ðŸ“‹ Request headers:",{...g,Authorization:g.Authorization?g.Authorization.substring(0,30)+"...":"Not set"});const _=await fetch(`/api/inventory?${P}`,{method:"GET",headers:g});if(console.log("ðŸ“Š Response status:",_.status,_.statusText),console.log("ðŸ“‹ Response headers:",Object.fromEntries(_.headers.entries())),!_.ok){const O=await _.text();console.error("âŒ Manual fetch API Error Response:",O),console.error("ðŸ“Š Error details - Status:",_.status,"StatusText:",_.statusText);try{const Y=JSON.parse(O);console.error("ðŸ“‹ Parsed error JSON:",Y)}catch{console.error("ðŸ“‹ Error response is not JSON:",O)}throw new Error(`HTTP ${_.status}: ${_.statusText}`)}const E=await _.json();if(console.log("âœ… Manual fetch successful response:",{success:E.success,dataLength:((M=(x=E.data)==null?void 0:x.data)==null?void 0:M.length)||0,message:E.message}),E.success){const O=E.data.data||[],Y=O.filter((ue,h,pe)=>h===pe.findIndex(we=>we.id_inventory===ue.id_inventory));return console.log("âœ… Successfully fetched with manual fetch:",O.length,"items"),console.log("ðŸ” After deduplication:",Y.length,"unique items"),Y}else throw console.error("âŒ Manual fetch response not successful:",E),new Error(E.message||"Failed to fetch inventory data")}}catch(P){throw console.error("ðŸ’¥ Fetch all inventory error:",P),new Error("Gagal mengambil data inventory lengkap: "+(P instanceof Error?P.message:"Unknown error"))}},et=v(!1),tt=v([]),at=v(!1),je=v(1),Be=v(10),ot=v(0),St=async()=>{try{r.value=!0;const c=await Pe();console.log("ðŸ“Š Exporting",c.length,"inventory items to Excel");const e=await Ut(()=>import("./xlsx-CfQreh1U.js"),[]),x=c.length,M=c.filter(h=>h.current_stock<=h.reorder_level).length,P=c.filter(h=>h.current_stock===0).length,D=c.reduce((h,pe)=>h+(pe.current_stock||0)*(pe.average_cost||0),0),s=c.map((h,pe)=>{var we,pt,_t,vt,kt;return{No:pe+1,"Produk/Variant":((we=h.item)==null?void 0:we.name)||((pt=h.product)==null?void 0:pt.name)||"Unknown Item",SKU:((_t=h.item)==null?void 0:_t.item_code)||((vt=h.product)==null?void 0:vt.sku)||"-",Unit:((kt=h.item)==null?void 0:kt.unit)||"pcs","Stok Saat Ini":h.current_stock||0,"Stok Tersedia":h.available_stock||0,"Stok Minimum":h.reorder_level||0,Status:Ae(h),"Harga Rata-rata":h.average_cost||0,"Nilai Stok":(h.current_stock||0)*(h.average_cost||0),Dibuat:h.created_at?new Date(h.created_at).toLocaleDateString("id-ID"):"-",Diperbarui:h.updated_at?new Date(h.updated_at).toLocaleDateString("id-ID"):"-"}}),g=e.utils.book_new(),_=[["LAPORAN INVENTORY MANAGEMENT"],["Tanggal Export:",new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})],["Total Items:",x],["Total Nilai Stok:",`Rp ${D.toLocaleString("id-ID")}`],["Items Low Stock:",M],["Items Out of Stock:",P],["Filter Diterapkan:",n.value.search?`Pencarian: "${n.value.search}"`:"Semua Data"],[]],E=e.utils.aoa_to_sheet(_);e.utils.sheet_add_json(E,s,{origin:"A9"});const O=[{wch:5},{wch:35},{wch:15},{wch:8},{wch:12},{wch:12},{wch:12},{wch:15},{wch:15},{wch:15},{wch:12},{wch:12}];E["!cols"]=O,e.utils.book_append_sheet(g,E,"Inventory Report");const ue=`inventory-report-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.xlsx`;e.writeFile(g,ue),console.log("âœ… Excel file generated successfully:",ue);try{await Vt(c,{total_items:x,total_stock_value:D,low_stock_count:M,out_of_stock_count:P}),w.value=`Laporan berhasil di-export ke Excel dengan ${x} item lengkap dan data berhasil diupload ke server!`}catch(h){console.error("Upload error:",h),w.value=`Laporan berhasil di-export ke Excel dengan ${x} item lengkap, tetapi gagal upload data ke server: `+(h instanceof Error?h.message:"Unknown error")}}catch(c){console.error("Export error:",c),T.value="Gagal mengexport laporan: "+(c instanceof Error?c.message:"Unknown error")}finally{r.value=!1}},Vt=async(c,e)=>{try{const x=c||p.value,M=e||{total_items:f.value,total_stock_value:ge.value||0,low_stock_count:fe.value,out_of_stock_count:re.value},P={inventory_data:x.map(_=>{var E,O,Y,ue,h,pe,we;return{id_inventory:_.id_inventory,id_product:_.id_product,id_item:_.id_item,current_stock:_.current_stock||0,available_stock:_.available_stock||0,reserved_stock:_.reserved_stock||0,reorder_level:_.reorder_level||0,max_stock_level:_.max_stock_level||null,average_cost:_.average_cost||0,product_name:((E=_.product)==null?void 0:E.name)||((O=_.item)==null?void 0:O.name)||"Unknown",product_sku:((Y=_.product)==null?void 0:Y.sku)||((ue=_.item)==null?void 0:ue.item_code)||null,unit:((h=_.item)==null?void 0:h.unit)||"pcs",category:((we=(pe=_.product)==null?void 0:pe.category)==null?void 0:we.name)||null,status:Ae(_),stock_value:(_.current_stock||0)*(_.average_cost||0),created_at:_.created_at,updated_at:_.updated_at}}),summary:{total_items:M.total_items,total_stock_value:M.total_stock_value,low_stock_count:M.low_stock_count,out_of_stock_count:M.out_of_stock_count,export_timestamp:new Date().toISOString(),filters_applied:{search:n.value.search||null,stock_status:n.value.stock_status!=="all"?n.value.stock_status:null}}},D=De(),s=await fetch("/api/inventory/upload-data",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest",...D&&{Authorization:`Bearer ${D}`}},body:JSON.stringify(P)});if(!s.ok){const _=await s.json();throw new Error(_.message||`HTTP ${s.status}: ${s.statusText}`)}const g=await s.json();return console.log("Upload result:",g),g}catch(x){throw console.error("Upload inventory data error:",x),x}},dt=async()=>{var c;try{at.value=!0;const e=De(),x=await fetch(`/api/inventory/upload-history?page=${je.value}&per_page=${Be.value}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest",...e&&{Authorization:`Bearer ${e}`}}});if(!x.ok)throw new Error(`HTTP ${x.status}: ${x.statusText}`);const M=await x.json();if(M.success)tt.value=M.data||[],ot.value=((c=M.pagination)==null?void 0:c.total)||0;else throw new Error(M.message||"Failed to fetch upload history")}catch(e){console.error("Fetch upload history error:",e),T.value="Gagal mengambil riwayat upload: "+(e instanceof Error?e.message:"Unknown error")}finally{at.value=!1}},Tt=c=>{je.value=c,dt()},mt=()=>{et.value=!1,tt.value=[],je.value=1},Ct=async()=>{try{console.log("ðŸš€ Testing login to get fresh token...");const c=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({login:"admin",password:"password123"})});console.log("ðŸ“Š Login Response Status:",c.status,c.statusText);const e=await c.json();if(console.log("ðŸ“‹ Login Response Data:",e),e.success&&e.data.token){const x=e.data.token;console.log("âœ… Login successful! Token:",x.substring(0,30)+"..."),localStorage.setItem("token",x),console.log("ðŸ’¾ Token saved to localStorage");const M=st("accessToken",{default:()=>"",secure:!0,sameSite:"strict",maxAge:3600*24*7});M.value=x,console.log("ðŸª Token saved to cookie"),w.value="Login berhasil! Token telah diperbarui. Silakan coba export lagi.",console.log("ðŸŒ Testing API call with new token...");const P=await fetch("/api/inventory?per_page=1",{headers:{Authorization:"Bearer "+x,Accept:"application/json"}});console.log("ðŸ“Š Test API Response Status:",P.status,P.statusText),P.ok?console.log("âœ… New token works! You can now try the export function."):(console.log("âŒ New token still doesn't work"),T.value="Token baru tidak bekerja. Mungkin ada masalah dengan server.")}else console.log("âŒ Login failed:",e.message),T.value="Login gagal: "+(e.message||"Unknown error")}catch(c){console.log("ðŸ’¥ Login error:",c),T.value="Error saat login: "+(c instanceof Error?c.message:"Unknown error")}};return bt(f,(c,e)=>{},{immediate:!0}),(c,e)=>{var x,M,P,D;return b(),G("div",aa,[l("div",oa,[e[34]||(e[34]=l("div",null,[l("h1",{class:"text-h4 font-weight-bold inventory-title"}," Kelola Inventory "),l("p",{class:"text-body-1 text-medium-emphasis inventory-subtitle"}," Kelola stok barang dan pergerakan inventory ")],-1)),l("div",sa,[t(S,{color:"info","prepend-icon":"tabler-bug",variant:"outlined",size:"small",onClick:B},{default:o(()=>e[31]||(e[31]=[m(" Check Auth ")])),_:1,__:[31]}),t(S,{color:"warning","prepend-icon":"tabler-login",variant:"outlined",size:"small",onClick:Ct},{default:o(()=>e[32]||(e[32]=[m(" Test Login ")])),_:1,__:[32]}),t(S,{color:"primary","prepend-icon":"tabler-refresh",variant:"outlined",onClick:d},{default:o(()=>e[33]||(e[33]=[m(" Refresh Data ")])),_:1,__:[33]})])]),a(T)?(b(),R(ke,{key:0,type:"error",variant:"outlined",class:"mb-4",text:a(T),closable:"","onClick:close":e[0]||(e[0]=s=>T.value="")},null,8,["text"])):I("",!0),a(w)?(b(),R(ke,{key:1,type:"success",variant:"outlined",class:"mb-4",text:a(w),closable:"","onClick:close":e[1]||(e[1]=s=>w.value="")},null,8,["text"])):I("",!0),a(He)?(b(),R(ke,{key:2,type:"success",variant:"outlined",class:"mb-4",text:a(He),closable:"","onClick:close":e[2]||(e[2]=s=>He.value="")},null,8,["text"])):I("",!0),t(ve,{class:"mb-6"},{default:o(()=>[t(N,{cols:"12",md:"3"},{default:o(()=>[t(H,{class:"stats-card"},{default:o(()=>[t(K,null,{default:o(()=>[l("div",la,[l("div",null,[l("div",na,i(ct.value.total_items||0),1),e[35]||(e[35]=l("div",{class:"text-caption text-medium-emphasis"}," Total Produk ",-1))]),t(A,{icon:"tabler-package",size:"48",class:"text-primary opacity-50"})])]),_:1})]),_:1})]),_:1}),t(N,{cols:"12",md:"3"},{default:o(()=>[t(H,{class:"stats-card"},{default:o(()=>[t(K,null,{default:o(()=>[l("div",ra,[l("div",null,[l("div",ia,i(a(fe)||0),1),e[36]||(e[36]=l("div",{class:"text-caption text-medium-emphasis"}," Stok Menipis ",-1))]),t(A,{icon:"tabler-alert-triangle",size:"48",class:"text-warning opacity-50"})])]),_:1})]),_:1})]),_:1}),t(N,{cols:"12",md:"3"},{default:o(()=>[t(H,{class:"stats-card"},{default:o(()=>[t(K,null,{default:o(()=>[l("div",ua,[l("div",null,[l("div",ca,i(a(re)||0),1),e[37]||(e[37]=l("div",{class:"text-caption text-medium-emphasis"}," Stok Habis ",-1))]),t(A,{icon:"tabler-x-circle",size:"48",class:"text-error opacity-50"})])]),_:1})]),_:1})]),_:1}),t(N,{cols:"12",md:"3"},{default:o(()=>[t(H,{class:"stats-card"},{default:o(()=>[t(K,null,{default:o(()=>[l("div",da,[l("div",null,[l("div",ma,i(a(xe)(a(ge)||0)),1),e[38]||(e[38]=l("div",{class:"text-caption text-medium-emphasis"}," Nilai Stok ",-1))]),t(A,{icon:"tabler-currency-dollar",size:"48",class:"text-success opacity-50"})])]),_:1})]),_:1})]),_:1})]),_:1}),t(H,{class:"mb-6 info-card",color:"info",variant:"tonal"},{default:o(()=>[t(K,null,{default:o(()=>[l("div",pa,[l("div",_a,[t(A,{icon:"tabler-info-circle",size:"32",class:"text-info"}),e[39]||(e[39]=l("div",null,[l("div",{class:"text-subtitle-1 font-weight-medium text-info"}," Sistem Stock Movement Otomatis "),l("div",{class:"text-body-2 text-medium-emphasis"},[m(" Stok akan bertambah otomatis saat purchasing dan berkurang saat penjualan POS. Gunakan tombol "),l("strong",null,"Penyesuaian"),m(" untuk koreksi manual jika diperlukan. ")])],-1))]),l("div",va,[t(Q,{color:"success",variant:"tonal",size:"small"},{default:o(()=>[t(A,{icon:"tabler-shopping-cart",class:"me-1"}),e[40]||(e[40]=m(" Purchase â†’ Stok + "))]),_:1,__:[40]}),t(Q,{color:"error",variant:"tonal",size:"small"},{default:o(()=>[t(A,{icon:"tabler-cash",class:"me-1"}),e[41]||(e[41]=m(" POS Sale â†’ Stok - "))]),_:1,__:[41]})])])]),_:1})]),_:1}),a($).length>0?(b(),R(H,{key:3,class:"mb-6 low-stock-alert"},{default:o(()=>[t(he,{class:"d-flex align-center"},{default:o(()=>[t(A,{icon:"tabler-alert-triangle",class:"text-warning me-2"}),m(" Peringatan Stok Menipis ("+i(a($).length)+" produk) ",1)]),_:1}),t(K,null,{default:o(()=>[l("div",ka,[(b(!0),G(Pt,null,It(a($).slice(0,10),s=>(b(),R(Q,{key:s.id_inventory,color:"warning",variant:"outlined",size:"small"},{default:o(()=>{var g;return[m(i((g=s.product)==null?void 0:g.name)+" ("+i(s.current_stock)+"/"+i(s.reorder_level)+") ",1)]}),_:2},1024))),128)),a($).length>10?(b(),R(Q,{key:0,color:"warning",variant:"tonal",size:"small"},{default:o(()=>[m(" +"+i(a($).length-10)+" lainnya ",1)]),_:1})):I("",!0)])]),_:1})]),_:1})):I("",!0),!a(V)&&a(p).length===0&&!a(T)&&!a(n).search&&a(n).stock_status==="all"?(b(),R(H,{key:4,class:"mb-6"},{default:o(()=>[t(K,{class:"text-center py-6"},{default:o(()=>[t(A,{icon:"tabler-info-circle",size:"48",class:"text-info mb-3"}),e[42]||(e[42]=l("div",{class:"text-h6 mb-2"}," Sistem Inventory Management Siap Digunakan ",-1)),e[43]||(e[43]=l("div",{class:"text-body-2 text-medium-emphasis"}," Buat produk dan variant terlebih dahulu untuk mulai melacak inventory. ",-1))]),_:1,__:[42,43]})]),_:1})):I("",!0),t(H,{class:"mb-6"},{default:o(()=>[t(K,null,{default:o(()=>[t(ve,null,{default:o(()=>[t(N,{cols:"12",md:"4"},{default:o(()=>[t(ce,{modelValue:a(n).search,"onUpdate:modelValue":[e[3]||(e[3]=s=>a(n).search=s),e[4]||(e[4]=s=>a(be)({search:s}))],label:"Cari inventory produk...",placeholder:"Nama produk, SKU, atau variant","prepend-inner-icon":"tabler-search",clearable:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(N,{cols:"12",md:"4"},{default:o(()=>[t(ft,{modelValue:a(n).stock_status,"onUpdate:modelValue":[e[5]||(e[5]=s=>a(n).stock_status=s),e[6]||(e[6]=s=>a(be)({stock_status:s||"all"}))],items:a(Se),label:"Status Stok",variant:"outlined",clearable:""},null,8,["modelValue","items"])]),_:1}),t(N,{cols:"12",md:"4",class:"d-flex align-center gap-2"},{default:o(()=>[t(S,{variant:"outlined","prepend-icon":"tabler-refresh",onClick:e[7]||(e[7]=s=>{a(me)(),a(ye)(),a(ie)()})},{default:o(()=>e[44]||(e[44]=[m(" Refresh ")])),_:1,__:[44]}),a(n).search||a(n).stock_status!=="all"?(b(),R(S,{key:0,variant:"outlined",color:"warning","prepend-icon":"tabler-filter-off",onClick:e[8]||(e[8]=s=>a(be)({search:"",stock_status:"all"}))},{default:o(()=>e[45]||(e[45]=[m(" Clear ")])),_:1,__:[45]})):I("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),!a(V)&&a(p).length===0&&!a(T)&&!a(n).search&&a(n).stock_status==="all"?(b(),R(H,{key:5,class:"mb-6"},{default:o(()=>[t(K,{class:"text-center py-6"},{default:o(()=>[t(A,{icon:"tabler-package-off",size:"48",class:"text-disabled mb-3"}),e[46]||(e[46]=l("div",{class:"text-h6 mb-2"}," Sistem Inventory Management Siap Digunakan ",-1)),e[47]||(e[47]=l("div",{class:"text-body-2 text-medium-emphasis"}," Buat produk dan variant terlebih dahulu untuk mulai melacak inventory. ",-1))]),_:1,__:[46,47]})]),_:1})):I("",!0),t(H,{class:"products-inventory-table"},{default:o(()=>[t(he,{class:"d-flex align-center gap-2 coffee-header"},{default:o(()=>[t(A,{icon:"tabler-package",class:"text-white"}),e[49]||(e[49]=l("span",{class:"text-white"},"Inventory Produk",-1)),t(Ue),t(S,{color:"success",variant:"elevated","prepend-icon":"tabler-file-spreadsheet",loading:r.value,onClick:St},{default:o(()=>e[48]||(e[48]=[m(" Export Semua Data ")])),_:1,__:[48]},8,["loading"]),t(Q,{color:"black",size:"small",variant:"tonal"},{default:o(()=>[m(i(a(f))+" Produk ",1)]),_:1})]),_:1,__:[49]}),t(ae),l("div",ga,[t(jt,{headers:[{title:"Produk/Variant",key:"item_name",sortable:!1,width:"280px"},{title:"Stok Saat Ini",key:"current_stock",sortable:!1,width:"120px"},{title:"Stok Tersedia",key:"available_stock",sortable:!1,width:"120px"},{title:"Status",key:"status",sortable:!1,width:"120px"},{title:"Reorder Level",key:"reorder_level",sortable:!1,width:"120px"},{title:"Harga Rata-rata",key:"average_cost",sortable:!1,width:"150px"},{title:"Nilai Stok",key:"stock_value",sortable:!1,width:"150px"},{title:"Aksi",key:"actions",sortable:!1,width:"200px",fixed:!0}],items:a(p),loading:a(V),"items-length":a(f),"items-per-page":a(y),page:a(U),"items-per-page-options":[10,15,25,50,100],"items-per-page-text":"Items per page:","page-text":"{0}-{1} of {2}","no-data-text":"Tidak ada data inventory",class:"text-no-wrap fixed-actions-table",id:"inventory-table","fixed-header":"",height:"500px","onUpdate:page":a(C),"onUpdate:itemsPerPage":a(Oe)},{"item.item_name":o(({item:s})=>{var g,_,E,O,Y,ue,h;return[l("div",fa,[l("div",null,[l("div",ya,i(((g=s.item)==null?void 0:g.name)||((_=s.product)==null?void 0:_.name)||"Unknown Item"),1),l("div",ha,[l("small",ba," SKU: "+i(((E=s.item)==null?void 0:E.item_code)||((O=s.product)==null?void 0:O.sku)||"-"),1),l("small",xa,i(((Y=s.item)==null?void 0:Y.description)||((h=(ue=s.product)==null?void 0:ue.category)==null?void 0:h.name)||"-"),1)])])])]}),"item.sku":o(({item:s})=>[t(Q,{variant:"outlined",size:"small",color:"primary"},{default:o(()=>{var g,_;return[m(i(((g=s.item)==null?void 0:g.item_code)||((_=s.product)==null?void 0:_.sku)||"N/A"),1)]}),_:2},1024)]),"item.current_stock":o(({item:s})=>[l("div",wa,[l("div",Sa,i(s.current_stock),1),s.reserved_stock>0?(b(),G("small",Va," ("+i(s.reserved_stock)+" reserved) ",1)):I("",!0)])]),"item.available_stock":o(({item:s})=>[l("div",Ta,[t(Q,{color:s.available_stock>0?"success":"error",variant:"tonal",size:"small"},{default:o(()=>[m(i(s.available_stock),1)]),_:2},1032,["color"])])]),"item.status":o(({item:s})=>[t(Q,{color:a(We)(s),variant:"tonal",size:"small"},{default:o(()=>[m(i(a(Ae)(s)),1)]),_:2},1032,["color"])]),"item.reorder_level":o(({item:s})=>[l("div",Ca,i(s.reorder_level||"-"),1)]),"item.average_cost":o(({item:s})=>[l("div",Ma,i(a(xe)(s.average_cost)),1)]),"item.stock_value":o(({item:s})=>[l("div",Da,i(a(xe)(s.current_stock*s.average_cost)),1)]),"item.actions":o(({item:s})=>[l("div",Pa,[t(Xe,{text:"Penyesuaian Stok"},{activator:o(({props:g})=>[t(S,Ke(g,{icon:"tabler-adjustments",color:"warning",variant:"text",size:"small",disabled:!s.item,onClick:_=>ut(s)}),null,16,["disabled","onClick"])]),_:2},1024),t(Xe,{text:"Update Stok"},{activator:o(({props:g})=>[t(S,Ke(g,{icon:"tabler-edit",color:"primary",variant:"text",size:"small",onClick:_=>a(Ce)(s)}),null,16,["onClick"])]),_:2},1024),t(Xe,{text:"Set Reorder Level"},{activator:o(({props:g})=>[t(S,Ke(g,{icon:"tabler-settings",color:"info",variant:"text",size:"small",onClick:_=>a(ze)(s)}),null,16,["onClick"])]),_:2},1024),t(Xe,{text:"Lihat Riwayat"},{activator:o(({props:g})=>[t(S,Ke(g,{icon:"tabler-history",color:"secondary",variant:"text",size:"small",onClick:_=>a(Fe)(s)}),null,16,["onClick"])]),_:2},1024)])]),"no-data":o(()=>{var s;return[l("div",Ia,[t(A,{icon:a(n).search||a(n).stock_status!=="all"?"tabler-search-off":"tabler-package-off",size:"64",class:"text-medium-emphasis mb-4"},null,8,["icon"]),l("div",Ua,i(a(n).search||a(n).stock_status!=="all"?"Tidak Ada Hasil Pencarian":"Belum Ada Data Inventory"),1),l("div",Aa,[a(n).search||a(n).stock_status!=="all"?(b(),G("span",Ea,[a(n).search?(b(),G("span",Ra,[e[50]||(e[50]=m(' Tidak ditemukan inventory dengan kata kunci "')),l("strong",null,i(a(n).search),1),e[51]||(e[51]=m('" '))])):I("",!0),a(n).search&&a(n).stock_status!=="all"?(b(),G("span",$a," dan ")):I("",!0),a(n).stock_status!=="all"?(b(),G("span",ja,[e[52]||(e[52]=m(' status stok "')),l("strong",null,i(((s=a(Se).find(g=>g.value===a(n).stock_status))==null?void 0:s.title)||a(n).stock_status),1),e[53]||(e[53]=m('" '))])):I("",!0),e[54]||(e[54]=l("br",null,null,-1)),e[55]||(e[55]=m("Coba kata kunci yang berbeda atau hapus filter. "))])):(b(),G("span",La,e[56]||(e[56]=[m(" Data inventory akan muncul setelah produk dan variant dibuat."),l("br",null,null,-1),m(" Silakan buat produk terlebih dahulu di menu "),l("strong",null,"Kelola Produk",-1),m(". ")])))]),l("div",Na,[a(n).search||a(n).stock_status!=="all"?(b(),R(S,{key:0,color:"warning",variant:"outlined","prepend-icon":"tabler-filter-off",onClick:e[9]||(e[9]=g=>a(be)({search:"",stock_status:"all"}))},{default:o(()=>e[57]||(e[57]=[m(" Hapus Filter ")])),_:1,__:[57]})):(b(),R(S,{key:1,color:"primary","prepend-icon":"tabler-plus",to:"/products-management"},{default:o(()=>e[58]||(e[58]=[m(" Buat Produk Baru ")])),_:1,__:[58]})),t(S,{variant:"outlined","prepend-icon":"tabler-refresh",onClick:e[10]||(e[10]=g=>{a(me)(),a(ye)(),a(ie)()})},{default:o(()=>e[59]||(e[59]=[m(" Refresh Data ")])),_:1,__:[59]})])])]}),loading:o(()=>[l("div",za,[t(nt,{indeterminate:"",color:"primary",size:"40"}),e[60]||(e[60]=l("div",{class:"mt-4 text-medium-emphasis"}," Memuat data inventory... ",-1))])]),_:1},8,["items","loading","items-length","items-per-page","page","onUpdate:page","onUpdate:itemsPerPage"])])]),_:1}),t(Ie,{modelValue:a(Z),"onUpdate:modelValue":e[17]||(e[17]=s=>Le(Z)?Z.value=s:null),"max-width":"800px",fullscreen:a(u),persistent:"",class:"stock-dialog"},{default:o(()=>[t(H,null,{default:o(()=>[t(he,null,{default:o(()=>{var s,g;return[m(" Update Stok - "+i((g=(s=a(W))==null?void 0:s.product)==null?void 0:g.name),1)]}),_:1}),t(ae),t(Je,{onSubmit:Ge(a(Ve),["prevent"])},{default:o(()=>[t(K,null,{default:o(()=>[a(ne)?(b(),R(ke,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4","onClick:close":a(F)},{default:o(()=>[m(i(a(ne)),1)]),_:1},8,["onClick:close"])):I("",!0),t(ve,null,{default:o(()=>[t(N,{cols:"12",md:"6"},{default:o(()=>[t(ft,{modelValue:a(j).movement_type,"onUpdate:modelValue":e[11]||(e[11]=s=>a(j).movement_type=s),label:"Jenis Pergerakan *",items:[{title:"Stock Masuk",value:"stock_in"},{title:"Stock Keluar",value:"stock_out"},{title:"Penyesuaian",value:"adjustment"},{title:"Transfer",value:"transfer"},{title:"Retur",value:"return"}],variant:"outlined"},null,8,["modelValue"])]),_:1}),t(N,{cols:"12",md:"6"},{default:o(()=>[t(ce,{modelValue:a(j).quantity,"onUpdate:modelValue":e[12]||(e[12]=s=>a(j).quantity=s),modelModifiers:{number:!0},label:"Kuantitas *",type:"number",min:"1",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(ve,null,{default:o(()=>[t(N,{cols:"12"},{default:o(()=>[t(ce,{modelValue:a(j).reason,"onUpdate:modelValue":e[13]||(e[13]=s=>a(j).reason=s),label:"Alasan *",placeholder:"Contoh: Pembelian dari supplier, Penjualan, dll",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(ve,null,{default:o(()=>[t(N,{cols:"12",md:"6"},{default:o(()=>[t(ce,{modelValue:a(j).reference_number,"onUpdate:modelValue":e[14]||(e[14]=s=>a(j).reference_number=s),label:"Nomor Referensi",placeholder:"PO-001, SO-001, dll",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(N,{cols:"12",md:"6"},{default:o(()=>[t(ce,{modelValue:a(j).cost_per_unit,"onUpdate:modelValue":e[15]||(e[15]=s=>a(j).cost_per_unit=s),modelModifiers:{number:!0},label:"Harga per Unit",type:"number",min:"0",step:"0.01",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(ve,null,{default:o(()=>[t(N,{cols:"12"},{default:o(()=>[t(lt,{modelValue:a(j).notes,"onUpdate:modelValue":e[16]||(e[16]=s=>a(j).notes=s),label:"Catatan",rows:"2",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(ae),t(Ne,{class:"pa-4"},{default:o(()=>[t(Ue),t(S,{variant:"outlined",onClick:a(qe)},{default:o(()=>e[61]||(e[61]=[m(" Batal ")])),_:1,__:[61]},8,["onClick"]),t(S,{type:"submit",color:"primary",loading:a(X)},{default:o(()=>e[62]||(e[62]=[m(" Update Stok ")])),_:1,__:[62]},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","fullscreen"]),t(Ie,{modelValue:a(se),"onUpdate:modelValue":e[20]||(e[20]=s=>Le(se)?se.value=s:null),"max-width":"600px",fullscreen:a(u),persistent:"",class:"stock-dialog"},{default:o(()=>[t(H,null,{default:o(()=>[t(he,null,{default:o(()=>{var s,g;return[m(" Set Reorder Level - "+i((g=(s=a(W))==null?void 0:s.product)==null?void 0:g.name),1)]}),_:1}),t(ae),t(Je,{onSubmit:Ge(a(Te),["prevent"])},{default:o(()=>[t(K,null,{default:o(()=>[a(ne)?(b(),R(ke,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4","onClick:close":a(F)},{default:o(()=>[m(i(a(ne)),1)]),_:1},8,["onClick:close"])):I("",!0),t(ve,null,{default:o(()=>[t(N,{cols:"12"},{default:o(()=>[t(ce,{modelValue:a(z).reorder_level,"onUpdate:modelValue":e[18]||(e[18]=s=>a(z).reorder_level=s),modelModifiers:{number:!0},label:"Reorder Level *",type:"number",min:"0",hint:"Stok minimum sebelum perlu restock","persistent-hint":"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(ve,null,{default:o(()=>[t(N,{cols:"12"},{default:o(()=>[t(ce,{modelValue:a(z).max_stock_level,"onUpdate:modelValue":e[19]||(e[19]=s=>a(z).max_stock_level=s),modelModifiers:{number:!0},label:"Max Stock Level",type:"number",min:"0",hint:"Stok maksimum yang diizinkan","persistent-hint":"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(ae),t(Ne,{class:"pa-4"},{default:o(()=>[t(Ue),t(S,{variant:"outlined",onClick:a(k)},{default:o(()=>e[63]||(e[63]=[m(" Batal ")])),_:1,__:[63]},8,["onClick"]),t(S,{type:"submit",color:"primary",loading:a(X)},{default:o(()=>e[64]||(e[64]=[m(" Simpan ")])),_:1,__:[64]},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","fullscreen"]),t(Zt,{modelValue:a(J),"onUpdate:modelValue":e[21]||(e[21]=s=>Le(J)?J.value=s:null),"inventory-id":(M=(x=a(W))==null?void 0:x.id_inventory)==null?void 0:M.toString(),"inventory-name":(D=(P=a(W))==null?void 0:P.item)==null?void 0:D.name},null,8,["modelValue","inventory-id","inventory-name"]),t(Ie,{modelValue:a(Me),"onUpdate:modelValue":e[24]||(e[24]=s=>Le(Me)?Me.value=s:null),"max-width":"600px",fullscreen:a(u),persistent:"",class:"stock-dialog"},{default:o(()=>[t(H,{class:"stock-movement-dialog coffee-dialog"},{default:o(()=>[t(he,{class:"d-flex align-center justify-space-between coffee-header"},{default:o(()=>[l("div",Fa,[t(A,{icon:"tabler-adjustments",class:"text-white"}),e[65]||(e[65]=l("span",{class:"text-white"}," Penyesuaian Stok ",-1))]),t(S,{icon:"tabler-x",variant:"text",color:"white",onClick:a($e)},null,8,["onClick"])]),_:1}),t(ae),t(K,{class:"pa-6"},{default:o(()=>[t(Je,{onSubmit:Ge(a(Ee),["prevent"])},{default:o(()=>{var s;return[a(ee)?(b(),R(ke,{key:0,color:"info",variant:"tonal",class:"mb-4"},{default:o(()=>[l("div",qa,[t(A,{icon:"tabler-package"}),l("div",null,[l("div",Oa,i(a(ee).name),1),l("div",Ha,i(a(ee).item_code),1),l("div",Ba,"Stok Saat Ini: "+i(a(ee).current_stock)+" "+i(a(ee).unit),1)])])]),_:1})):I("",!0),a(Ze)?(b(),R(ke,{key:1,type:"error",variant:"outlined",class:"mb-4",text:a(Ze),closable:"","onClick:close":a(rt)},null,8,["text","onClick:close"])):I("",!0),t(ce,{modelValue:a(L).quantity,"onUpdate:modelValue":e[22]||(e[22]=g=>a(L).quantity=g),modelModifiers:{number:!0},label:"Stok Baru",type:"number",min:"0",step:"0.001",variant:"outlined",suffix:(s=a(ee))==null?void 0:s.unit,class:"mb-4",required:""},null,8,["modelValue","suffix"]),t(lt,{modelValue:a(L).notes,"onUpdate:modelValue":e[23]||(e[23]=g=>a(L).notes=g),label:"Catatan (opsional)",variant:"outlined",rows:"3",class:"mb-4"},null,8,["modelValue"]),l("div",Ka,[t(S,{variant:"outlined",onClick:a($e)},{default:o(()=>e[66]||(e[66]=[m(" Batal ")])),_:1,__:[66]},8,["onClick"]),t(S,{type:"submit",color:"primary",class:"coffee-primary",loading:a(Qe)},{default:o(()=>e[67]||(e[67]=[m(" Simpan Penyesuaian ")])),_:1,__:[67]},8,["loading"])])]}),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"]),t(Ie,{modelValue:a(Re),"onUpdate:modelValue":e[28]||(e[28]=s=>Le(Re)?Re.value=s:null),"max-width":"800px",fullscreen:a(u),persistent:"",class:"stock-dialog"},{default:o(()=>[t(H,{class:"stock-movement-dialog coffee-dialog"},{default:o(()=>[t(he,{class:"d-flex align-center justify-space-between coffee-header"},{default:o(()=>[l("div",Ga,[t(A,{icon:a(L).type==="in"?"tabler-plus":"tabler-minus",class:"text-white"},null,8,["icon"]),l("span",Xa,i(a(L).type==="in"?"Stok Masuk":a(L).type==="out"?"Stok Keluar":"Penyesuaian Stok"),1)]),t(S,{icon:"tabler-x",variant:"text",color:"white",onClick:a($e)},null,8,["onClick"])]),_:1}),t(ae),t(K,{class:"pa-6"},{default:o(()=>[t(Je,{onSubmit:Ge(a(Ee),["prevent"])},{default:o(()=>[a(ee)?(b(),R(ke,{key:0,color:"info",variant:"tonal",class:"mb-4"},{default:o(()=>[l("div",Ja,[t(yt,{color:"primary",size:"40",variant:"tonal"},{default:o(()=>[t(A,{icon:"tabler-package"})]),_:1}),l("div",null,[l("div",Wa,i(a(ee).name),1),l("div",Ya," Stok saat ini: "+i(a(ee).current_stock)+" "+i(a(ee).unit),1)])])]),_:1})):I("",!0),t(ve,null,{default:o(()=>[t(N,{cols:"12",md:"6"},{default:o(()=>[t(ce,{modelValue:a(L).quantity,"onUpdate:modelValue":e[25]||(e[25]=s=>a(L).quantity=s),modelModifiers:{number:!0},label:`Jumlah ${a(L).type==="in"?"Masuk":a(L).type==="out"?"Keluar":"Akhir"}`,type:"number",variant:"outlined",required:"",min:a(L).type==="adjustment"?0:1,rules:[s=>s>0||"Jumlah harus lebih dari 0"]},null,8,["modelValue","label","min","rules"])]),_:1}),t(N,{cols:"12",md:"6"},{default:o(()=>[t(ce,{modelValue:a(L).cost_per_unit,"onUpdate:modelValue":e[26]||(e[26]=s=>a(L).cost_per_unit=s),modelModifiers:{number:!0},label:"Harga per Unit",type:"number",variant:"outlined",prefix:"Rp",readonly:a(L).type!=="in"},null,8,["modelValue","readonly"])]),_:1}),t(N,{cols:"12"},{default:o(()=>[t(lt,{modelValue:a(L).notes,"onUpdate:modelValue":e[27]||(e[27]=s=>a(L).notes=s),label:"Catatan",placeholder:"Masukkan catatan untuk pergerakan stok...",rows:"3",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),t(ae),t(Ne,{class:"pa-6"},{default:o(()=>[t(Ue),t(S,{variant:"outlined",class:"coffee-secondary",onClick:a($e)},{default:o(()=>e[68]||(e[68]=[m(" Batal ")])),_:1,__:[68]},8,["onClick"]),t(S,{color:"primary",class:"coffee-primary",loading:a(Qe),onClick:a(Ee)},{default:o(()=>e[69]||(e[69]=[m(" Simpan ")])),_:1,__:[69]},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"]),t(Ie,{modelValue:et.value,"onUpdate:modelValue":e[30]||(e[30]=s=>et.value=s),"max-width":"1200px",fullscreen:a(u),persistent:"",class:"upload-history-dialog"},{default:o(()=>[t(H,null,{default:o(()=>[t(he,{class:"d-flex align-center justify-space-between coffee-header"},{default:o(()=>[l("div",Qa,[t(A,{icon:"tabler-history",class:"text-white"}),e[70]||(e[70]=l("span",{class:"text-white"},"Riwayat Upload Data Inventory",-1))]),t(S,{icon:"tabler-x",variant:"text",color:"white",onClick:mt})]),_:1}),t(ae),t(K,{class:"pa-6"},{default:o(()=>[at.value?(b(),G("div",Za,[t(nt,{indeterminate:"",color:"primary",size:"40"}),e[71]||(e[71]=l("div",{class:"mt-4 text-medium-emphasis"}," Memuat riwayat upload... ",-1))])):(b(),G("div",eo,[t(xt,{headers:[{title:"Tanggal Upload",key:"created_at",sortable:!1},{title:"User",key:"user_name",sortable:!1},{title:"Total Items",key:"total_items_processed",sortable:!1},{title:"Berhasil Update",key:"total_items_updated",sortable:!1},{title:"Dilewati",key:"total_items_skipped",sortable:!1},{title:"Total Nilai Stok",key:"total_stock_value",sortable:!1},{title:"Status",key:"upload_status",sortable:!1}],items:tt.value,"items-per-page":Be.value,class:"elevation-1"},{"item.created_at":o(({item:s})=>[l("div",to,i(new Date(s.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),"item.user_name":o(({item:s})=>[l("div",ao,[t(yt,{size:"32",color:"primary",variant:"tonal"},{default:o(()=>[t(A,{icon:"tabler-user"})]),_:1}),l("div",null,[l("div",oo,i(s.user_name||"Unknown User"),1),l("div",so,i(s.user_email||"-"),1)])])]),"item.total_items_processed":o(({item:s})=>[t(Q,{color:"info",variant:"tonal",size:"small"},{default:o(()=>[m(i(s.total_items_processed),1)]),_:2},1024)]),"item.total_items_updated":o(({item:s})=>[t(Q,{color:"success",variant:"tonal",size:"small"},{default:o(()=>[m(i(s.total_items_updated),1)]),_:2},1024)]),"item.total_items_skipped":o(({item:s})=>[t(Q,{color:s.total_items_skipped>0?"warning":"success",variant:"tonal",size:"small"},{default:o(()=>[m(i(s.total_items_skipped),1)]),_:2},1032,["color"])]),"item.total_stock_value":o(({item:s})=>[l("div",lo,i(a(xe)(s.total_stock_value||0)),1)]),"item.upload_status":o(({item:s})=>[t(Q,{color:s.upload_status==="success"?"success":s.upload_status==="failed"?"error":"warning",variant:"tonal",size:"small"},{default:o(()=>[m(i(s.upload_status==="success"?"Berhasil":s.upload_status==="failed"?"Gagal":"Sebagian"),1)]),_:2},1032,["color"])]),"no-data":o(()=>[l("div",no,[t(A,{icon:"tabler-database-off",size:"64",class:"text-medium-emphasis mb-4"}),e[72]||(e[72]=l("div",{class:"text-h6 text-medium-emphasis mb-2"}," Belum Ada Riwayat Upload ",-1)),e[73]||(e[73]=l("div",{class:"text-body-2 text-medium-emphasis"}," Riwayat upload akan muncul setelah Anda melakukan export data inventory. ",-1))])]),_:1},8,["items","items-per-page"]),ot.value>Be.value?(b(),G("div",ro,[t(Et,{modelValue:je.value,"onUpdate:modelValue":[e[29]||(e[29]=s=>je.value=s),Tt],length:Math.ceil(ot.value/Be.value),"total-visible":7},null,8,["modelValue","length"])])):I("",!0)]))]),_:1}),t(ae),t(Ne,{class:"pa-4"},{default:o(()=>[t(Ue),t(S,{variant:"outlined",onClick:mt},{default:o(()=>e[74]||(e[74]=[m(" Tutup ")])),_:1,__:[74]}),t(S,{color:"primary","prepend-icon":"tabler-refresh",onClick:dt},{default:o(()=>e[75]||(e[75]=[m(" Refresh ")])),_:1,__:[75]})]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}}),No=wt(io,[["__scopeId","data-v-9880682c"]]);export{No as default};

import{au as ke,d as Vt,r as v,V as ae,w as Dt,g as S,f as s,b as t,s as i,X as T,t as u,l as x,c as J,at as se,e as n,aw as it,a1 as w,o as g,_ as Mt,ay as wt,aN as Ut,D as It,m as a,a3 as Le,F as At,i as $t,p as Ge,a0 as Je,a5 as jt,az as Rt}from"./main-mVb2Zi2r.js";import{V as Se}from"./VDialog-BhHbwSp-.js";import{b as pe,c as Me,V as O}from"./VCard-KdKd0_zs.js";import{V as G}from"./VDivider-Dg-qwhzs.js";import{V as N}from"./VCardText-C6cQ2YPR.js";import{V as Tt,a as zt}from"./VDataTable-CBL58a2p.js";import{V as C}from"./VChip-DfcpfFlX.js";import{V as Ve}from"./VSpacer-DKRYQo20.js";import{I as Lt}from"./ItemsApi-CT2GWEOy.js";import{u as Bt}from"./useApi-3B-ncDO2.js";import{V as ge,a as j}from"./VRow-BmgHKxKl.js";import{V as de}from"./VTextField-BbvOAUmR.js";import{V as nt}from"./VSelect-DaQg8yMC.js";import{V as Ot}from"./VDataTableServer-20j8L5ll.js";import{V as Xe}from"./VTooltip-DGe7dXvC.js";import{V as We}from"./VForm-Crx42ANL.js";import{V as rt}from"./VTextarea-DGBVzz8_.js";import{V as St}from"./VAvatar-CPl1Rs8l.js";import"./VOverlay-Q1I2eFOg.js";import"./forwardRefs-B931MWyl.js";import"./VImg-DDUr8xsk.js";import"./VCheckboxBtn-Bjfx1eIL.js";import"./VTable-COTb2rj8.js";import"./filter-BpN1xjbh.js";/* empty css              */import"./VList-B7SLC7Gv.js";import"./VMenu-MXx5zkZ-.js";const me="/api/inventory";class oe{static async getAll(c){var m;try{return(await ke.get(me,{params:c})).data}catch(p){throw((m=p.response)==null?void 0:m.data)||this.handleError(p)}}static async getById(c){var m;try{return(await ke.get(`${me}/${c}`)).data}catch(p){throw((m=p.response)==null?void 0:m.data)||this.handleError(p)}}static async getStats(){var c;try{return(await ke.get(`${me}/stats`)).data}catch(m){throw((c=m.response)==null?void 0:c.data)||this.handleError(m)}}static async getLowStockAlerts(){var c;try{return(await ke.get(`${me}/low-stock-alerts`)).data}catch(m){throw((c=m.response)==null?void 0:c.data)||this.handleError(m)}}static async updateStock(c,m){var p;try{return(await ke.post(`${me}/${c}/update-stock`,m)).data}catch(V){throw((p=V.response)==null?void 0:p.data)||this.handleError(V)}}static async bulkUpdateStock(c){var m;try{return(await ke.post(`${me}/bulk-update-stock`,c)).data}catch(p){throw((m=p.response)==null?void 0:m.data)||this.handleError(p)}}static async setReorderLevel(c,m){var p;try{return(await ke.post(`${me}/${c}/reorder-level`,m)).data}catch(V){throw((p=V.response)==null?void 0:p.data)||this.handleError(V)}}static async getMovements(c){var m;try{const p=c!=null&&c.id_inventory?`${me}/${c.id_inventory}/movements`:`${me}/movements`;return(await ke.get(p,{params:c})).data}catch(p){throw((m=p.response)==null?void 0:m.data)||this.handleError(p)}}static async recordMovement(c){var m;try{return(await ke.post(`${me}/movement`,c)).data}catch(p){throw((m=p.response)==null?void 0:m.data)||this.handleError(p)}}static handleError(c){var m,p;return c.response?{message:((m=c.response.data)==null?void 0:m.message)||"Terjadi kesalahan pada server",success:!1,errors:(p=c.response.data)==null?void 0:p.errors}:c.request?{message:"Tidak dapat terhubung ke server",success:!1}:{message:c.message||"Terjadi kesalahan yang tidak diketahui",success:!1}}static formatError(c){return c.errors?Object.values(c.errors).flat().join(", "):c.message||"Terjadi kesalahan yang tidak diketahui"}static isValidationError(c){return c.errors&&typeof c.errors=="object"}static getFieldError(c,m){return c.errors&&c.errors[m]?Array.isArray(c.errors[m])?c.errors[m][0]:c.errors[m]:null}static getMovementTypes(){return[{value:"stock_in",label:"Stock Masuk",color:"success"},{value:"stock_out",label:"Stock Keluar",color:"warning"},{value:"adjustment",label:"Penyesuaian",color:"info"},{value:"transfer",label:"Transfer",color:"primary"},{value:"return",label:"Retur",color:"success"},{value:"damaged",label:"Rusak",color:"error"},{value:"expired",label:"Kadaluarsa",color:"error"}]}static getStockStatusOptions(){return[{value:"all",label:"Semua Status"},{value:"in_stock",label:"Tersedia"},{value:"low_stock",label:"Stok Menipis"},{value:"out_of_stock",label:"Habis"},{value:"overstock",label:"Stok Berlebih"}]}}const Ft={key:1,class:"text-center py-8"},qt={class:"font-weight-medium"},Kt={class:"text-medium-emphasis"},Nt={class:"text-center"},Ht={class:"text-center font-weight-medium"},Gt={class:"text-center font-weight-bold text-primary"},Jt={class:"text-end"},Xt={class:"text-end font-weight-medium text-success"},Wt={class:"max-width-200"},Yt={class:"font-weight-medium"},Qt={key:0,class:"text-medium-emphasis"},Zt={key:1,class:"d-block text-caption"},ea={key:2,class:"text-info d-block"},ta={class:"text-center py-8"},aa=Vt({__name:"InventoryMovementsDialog",props:{modelValue:{type:Boolean},inventoryId:{},inventoryName:{}},emits:["update:modelValue"],setup(ne,{emit:c}){const m=ne,p=c,V=v([]),Y=v(!1),H=v(""),R=ae({get:()=>m.modelValue,set:y=>p("update:modelValue",y)}),ee=async()=>{var y,b,l,E;if(m.inventoryId)try{Y.value=!0,H.value="";const D=await oe.getMovements({id_inventory:parseInt(m.inventoryId),page:1,per_page:50});D.data&&Array.isArray(D.data)?V.value=D.data:D.data&&((y=D==null?void 0:D.data)!=null&&y.data)&&Array.isArray((b=D==null?void 0:D.data)==null?void 0:b.data)?V.value=D.data.data:V.value=[]}catch(D){console.error("Error fetching movements:",D),H.value=((E=(l=D.response)==null?void 0:l.data)==null?void 0:E.message)||"Gagal memuat riwayat pergerakan"}finally{Y.value=!1}},le=y=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(y),Q=y=>({in:"success",out:"error",stock_in:"success",stock_out:"error",adjustment:"warning",transfer:"info",return:"secondary"})[y]||"primary",Z=y=>({in:"Stock Masuk",out:"Stock Keluar",stock_in:"Stock Masuk",stock_out:"Stock Keluar",adjustment:"Penyesuaian",transfer:"Transfer",return:"Retur"})[y]||y,P=y=>({in:"tabler-plus",out:"tabler-minus",stock_in:"tabler-plus",stock_out:"tabler-minus",adjustment:"tabler-edit",transfer:"tabler-arrows-exchange",return:"tabler-arrow-back"})[y]||"tabler-package";return Dt(R,y=>{y&&m.inventoryId?ee():(V.value=[],H.value="")}),(y,b)=>(g(),S(Se,{modelValue:R.value,"onUpdate:modelValue":b[1]||(b[1]=l=>R.value=l),"max-width":"900px",scrollable:""},{default:s(()=>[t(O,null,{default:s(()=>[t(pe,{class:"d-flex align-center"},{default:s(()=>[t(T,{icon:"tabler-history",class:"me-2"}),i(" Riwayat Pergerakan - "+u(y.inventoryName),1)]),_:1}),t(G),t(N,{class:"pa-0"},{default:s(()=>[H.value?(g(),S(se,{key:0,type:"error",variant:"tonal",class:"ma-4"},{default:s(()=>[i(u(H.value),1)]),_:1})):x("",!0),Y.value?(g(),J("div",Ft,[t(it,{indeterminate:"",color:"primary",size:"40"}),b[2]||(b[2]=n("div",{class:"mt-4 text-medium-emphasis"}," Memuat riwayat pergerakan... ",-1))])):(g(),S(Tt,{key:2,headers:[{title:"Tanggal",key:"created_at",sortable:!1},{title:"Jenis",key:"movement_type",sortable:!1},{title:"Kuantitas",key:"quantity",sortable:!1},{title:"Stok Sebelum",key:"stock_before",sortable:!1},{title:"Stok Sesudah",key:"stock_after",sortable:!1},{title:"Harga/Unit",key:"unit_cost",sortable:!1},{title:"Total Nilai",key:"total_cost",sortable:!1},{title:"Catatan",key:"notes",sortable:!1}],items:V.value,loading:Y.value,class:"text-no-wrap","items-per-page":"15",height:"500","fixed-header":""},{"item.created_at":s(({item:l})=>[n("div",null,[n("div",qt,u(new Date(l.created_at).toLocaleDateString("id-ID")),1),n("small",Kt,u(new Date(l.created_at).toLocaleTimeString("id-ID")),1)])]),"item.movement_type":s(({item:l})=>[t(C,{color:Q(l.movement_type),variant:"tonal",size:"small","prepend-icon":P(l.movement_type)},{default:s(()=>[i(u(Z(l.movement_type)),1)]),_:2},1032,["color","prepend-icon"])]),"item.quantity":s(({item:l})=>[n("div",Nt,[t(C,{color:l.movement_type==="in"||l.movement_type==="stock_in"?"success":"error",variant:"outlined",size:"small"},{default:s(()=>[i(u(l.movement_type==="in"||l.movement_type==="stock_in"?"+":"-")+u(Math.abs(l.quantity)),1)]),_:2},1032,["color"])])]),"item.stock_before":s(({item:l})=>[n("div",Ht,u(l.stock_before),1)]),"item.stock_after":s(({item:l})=>[n("div",Gt,u(l.stock_after),1)]),"item.unit_cost":s(({item:l})=>[n("div",Jt,u(l.unit_cost?le(l.unit_cost):"-"),1)]),"item.total_cost":s(({item:l})=>[n("div",Xt,u(l.total_cost?le(l.total_cost):"-"),1)]),"item.notes":s(({item:l})=>[n("div",Wt,[n("div",Yt,u(l.notes||"-"),1),l.reference_type&&l.reference_id?(g(),J("small",Qt," Ref: "+u(l.reference_type)+"-"+u(l.reference_id),1)):x("",!0),l.batch_number?(g(),J("small",Zt," Batch: "+u(l.batch_number),1)):x("",!0),l.user?(g(),J("small",ea," oleh: "+u(l.user.name),1)):x("",!0)])]),"no-data":s(()=>[n("div",ta,[t(T,{icon:"tabler-history-off",size:"48",class:"text-medium-emphasis mb-4"}),b[3]||(b[3]=n("div",{class:"text-h6 text-medium-emphasis mb-2"}," Belum ada riwayat pergerakan ",-1)),b[4]||(b[4]=n("div",{class:"text-body-2 text-medium-emphasis"}," Riwayat akan muncul setelah ada pergerakan stok ",-1))])]),_:1},8,["items","loading"]))]),_:1}),t(G),t(Me,{class:"pa-4"},{default:s(()=>[t(Ve),t(w,{variant:"outlined",onClick:b[0]||(b[0]=l=>R.value=!1)},{default:s(()=>b[5]||(b[5]=[i(" Tutup ")])),_:1,__:[5]}),t(w,{color:"primary","prepend-icon":"tabler-refresh",onClick:ee},{default:s(()=>b[6]||(b[6]=[i(" Refresh ")])),_:1,__:[6]})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),sa=Mt(aa,[["__scopeId","data-v-ca0277a4"]]),oa=()=>{const ne=v([]),c=v(!1),m=v(!1),p=v({total_items:0,low_stock_items:0,out_of_stock_items:0,overstock_items:0,total_stock_value:0,total_stock_quantity:0,total_reserved_stock:0,items_need_restock:0}),V=v([]),Y=v(!1),H=v([]),R=v(!1),ee=v(!1),le=v(!1),Q=v(!1),Z=v(!1),P=v(null),y=v([]),b=v(1),l=v(0),E=v(15),D=v({search:"",stock_status:"all",category_id:void 0,supplier_id:void 0,station:"all",sort_by:"current_stock",sort_order:"asc"}),re=v(""),z=v(""),F=v(""),ye=v({movement_type:"stock_in",quantity:0,reason:"",reference_number:"",cost_per_unit:void 0,notes:""}),be=v({reorder_level:0,max_stock_level:0}),ie=ae(()=>y.value.length>0),Te=ae(()=>p.value.total_stock_value),_e=ae(()=>p.value.low_stock_items),he=ae(()=>p.value.out_of_stock_items),ue=ae(()=>Math.ceil(l.value/E.value)),Ce=ae(()=>b.value<ue.value),Ee=ae(()=>b.value>1),Pe=ae(()=>({currentPage:b.value,totalPages:ue.value,totalItems:l.value,itemsPerPage:E.value,hasNext:Ce.value,hasPrev:Ee.value})),Be=[r=>r>0||"Kuantitas harus lebih dari 0",r=>Number.isInteger(r)||"Kuantitas harus berupa bilangan bulat"],Oe=[r=>!!r||"Alasan wajib diisi",r=>r&&r.length>=3||"Alasan minimal 3 karakter"],Fe=[r=>!r||r>=0||"Harga harus lebih dari atau sama dengan 0"],k=[{title:"Stock Masuk",value:"stock_in",color:"success"},{title:"Stock Keluar",value:"stock_out",color:"warning"},{title:"Penyesuaian",value:"adjustment",color:"info"},{title:"Transfer",value:"transfer",color:"primary"},{title:"Retur",value:"return",color:"success"}],q=[{title:"Semua Status",value:"all"},{title:"Tersedia",value:"in_stock"},{title:"Stok Menipis",value:"low_stock"},{title:"Habis",value:"out_of_stock"},{title:"Stok Berlebih",value:"overstock"}],M=async()=>{c.value=!0,re.value="";try{const r={...D.value,page:b.value,per_page:E.value};Object.keys(r).forEach(ve=>{const Ie=r[ve];(Ie===""||Ie===void 0||Ie===null||Ie==="all")&&delete r[ve]});const $=await oe.getAll(r);if($.success)ne.value=$.data.data||[],l.value=$.data.total||0,$.data.current_page&&(b.value=$.data.current_page);else throw new Error($.message||"Gagal mengambil data inventory")}catch(r){console.error("Error fetching inventory:",r),re.value=oe.formatError(r)||"Gagal mengambil data inventory",ne.value=[],l.value=0}finally{c.value=!1}},qe=async()=>{try{const r=await oe.getStats();r.success&&(p.value=r.data)}catch(r){console.error("Error fetching inventory stats:",r)}},xe=async()=>{R.value=!0;try{const r=await oe.getLowStockAlerts();r.success&&(H.value=r.data.data||[])}catch(r){console.error("Error fetching low stock alerts:",r),H.value=[]}finally{R.value=!1}},De=async r=>{Y.value=!0;try{const $=await oe.getMovements({id_inventory:r,page:1,per_page:20});$.success&&(V.value=$.data)}catch($){console.error("Error fetching movements:",$)}finally{Y.value=!1}},Ye=async()=>{if(P.value){m.value=!0,F.value="";try{const r=await oe.updateStock(P.value.id_inventory,ye.value);if(r.success)z.value="Stock berhasil diperbarui",Ue(),await M(),await qe(),await xe();else throw new Error(r.message||"Gagal memperbarui stock")}catch(r){console.error("Error updating stock:",r),F.value=oe.formatError(r)||"Gagal memperbarui stock"}finally{m.value=!1}}},Ae=async()=>{if(P.value){m.value=!0,F.value="";try{const r=await oe.setReorderLevel(P.value.id_inventory,be.value);if(r.success)z.value="Reorder level berhasil diperbarui",te(),await M();else throw new Error(r.message||"Gagal memperbarui reorder level")}catch(r){console.error("Error setting reorder level:",r),F.value=oe.formatError(r)||"Gagal memperbarui reorder level"}finally{m.value=!1}}},$e=r=>{P.value=r,ye.value={movement_type:"stock_in",quantity:0,reason:"",reference_number:"",cost_per_unit:r.average_cost||void 0,notes:""},F.value="",ee.value=!0},Qe=r=>{P.value=r,be.value={reorder_level:r.reorder_level||0,max_stock_level:r.max_stock_level||0},F.value="",Z.value=!0},je=r=>{P.value=r,De(r.id_inventory),Q.value=!0},Ue=()=>{ee.value=!1,setTimeout(()=>{P.value=null,F.value=""},300)},te=()=>{Z.value=!1,setTimeout(()=>{P.value=null,F.value=""},300)};return{inventoryList:ne,loading:c,saveLoading:m,stats:p,movementsList:V,movementsLoading:Y,lowStockItems:H,alertsLoading:R,stockUpdateDialog:ee,bulkUpdateDialog:le,movementsDialog:Q,reorderDialog:Z,selectedInventory:P,selectedItems:y,currentPage:b,totalItems:l,itemsPerPage:E,filters:D,errorMessage:re,successMessage:z,modalErrorMessage:F,stockUpdateForm:ye,reorderForm:be,hasSelectedItems:ie,totalStockValue:Te,lowStockCount:_e,outOfStockCount:he,quantityRules:Be,reasonRules:Oe,costRules:Fe,movementTypeOptions:k,stockStatusOptions:q,fetchInventoryList:M,fetchStats:qe,fetchLowStockAlerts:xe,fetchMovements:De,updateStock:Ye,setReorderLevel:Ae,openStockUpdateDialog:$e,openReorderDialog:Qe,openMovementsDialog:je,closeStockUpdateDialog:Ue,closeReorderDialog:te,closeMovementsDialog:()=>{Q.value=!1,setTimeout(()=>{P.value=null,V.value=[]},300)},clearModalError:()=>{F.value=""},onPageChange:r=>{r!==b.value&&(b.value=r,M())},onItemsPerPageChange:r=>{r!==E.value&&(E.value=r,b.value=1,M())},handleFiltersUpdate:r=>{D.value={...D.value,...r},b.value=1,M()},formatCurrency:r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),getStockStatusColor:r=>r.current_stock===0?"error":r.is_low_stock?"warning":"success",getStockStatusText:r=>r.current_stock===0?"Habis":r.reorder_level>0&&r.current_stock<=r.reorder_level?"Menipis":r.max_stock_level&&r.current_stock>r.max_stock_level?"Berlebih":"Tersedia",getMovementTypeColor:r=>({stock_in:"success",stock_out:"warning",adjustment:"info",transfer:"primary",return:"success",damaged:"error",expired:"error"})[r]||"grey",totalPages:ue,hasNextPage:Ce,hasPrevPage:Ee,paginationInfo:Pe}};function la(ne){const c=v([]),m=v([]),p=v(!1),V=v(!1),Y=v({total_items:0,total_value:0,low_stock_items:0,out_of_stock_items:0,movements_today:0,movements_this_month:0,top_consumed_items:[],recent_movements:[]}),H=v(1),R=v(0),ee=v(10),le=wt({search:"",stock_status:"all",movement_type:"",date_from:"",date_to:"",item_id:void 0}),Q=v(!1),Z=v(!1),P=v(null),y=wt({item_id:0,type:"in",quantity:0,notes:"",cost_per_unit:0}),b=v(""),l=v(""),E=v(""),D=ae(()=>!0),re=[{title:"Semua Status",value:"all"},{title:"Tersedia",value:"in_stock"},{title:"Stok Rendah",value:"low_stock"},{title:"Habis",value:"out_of_stock"}],z=[{title:"Masuk",value:"in",color:"success",icon:"tabler-plus"},{title:"Keluar",value:"out",color:"error",icon:"tabler-minus"},{title:"Penyesuaian",value:"adjustment",color:"warning",icon:"tabler-adjustments"}],F=[{title:"Pembelian",value:"purchase"},{title:"Penjualan",value:"sale"},{title:"Produksi",value:"production"},{title:"Penyesuaian",value:"adjustment"},{title:"Kerusakan",value:"waste"}],ye=k=>k.current_stock<=0?{status:"out_of_stock",color:"error",text:"Habis",icon:"tabler-x"}:k.current_stock<=k.minimum_stock?{status:"low_stock",color:"warning",text:"Rendah",icon:"tabler-alert-triangle"}:{status:"in_stock",color:"success",text:"Tersedia",icon:"tabler-check"},be=k=>!k.maximum_stock||k.maximum_stock<=0?100:Math.round(k.current_stock/k.maximum_stock*100),ie=async()=>{p.value=!0;try{await new Promise(k=>setTimeout(k,1e3)),c.value=await Lt.getAll(),R.value=c.value.length,l.value=""}catch{b.value="Gagal memuat data items"}finally{p.value=!1}},Te=async k=>{p.value=!0;try{const q=await oe.getMovements({id_inventory:k,page:H.value,per_page:ee.value});m.value=q.data.map(M=>({id:M.id_movement,item_id:M.id_inventory,type:M.movement_type,quantity:M.quantity,unit:"pcs",reference_id:M.reference_number?parseInt(M.reference_number):void 0,reference_type:M.reason,notes:M.notes,cost_per_unit:M.cost_per_unit,total_cost:M.total_cost,created_by:M.created_by,created_at:M.created_at,creator:M.user})),R.value=q.total}catch(q){console.error("Failed to fetch stock movements:",q),m.value=[]}finally{p.value=!1}},_e=async()=>{try{await ie();const k=c.value;Y.value={total_items:k.length,total_value:k.reduce((q,M)=>q+M.current_stock*M.cost_per_unit,0),low_stock_items:k.filter(q=>q.current_stock<=q.minimum_stock&&q.current_stock>0).length,out_of_stock_items:k.filter(q=>q.current_stock<=0).length,movements_today:0,movements_this_month:0,top_consumed_items:[],recent_movements:[]}}catch(k){console.error("Failed to fetch stats:",k)}},he=async()=>{V.value=!0,E.value="";try{const k=await oe.recordMovement({item_id:y.item_id,movement_type:y.type,quantity:y.quantity,notes:y.notes,cost_per_unit:y.cost_per_unit});if(k.success)l.value=`Stock ${y.type==="in"?"masuk":y.type==="out"?"keluar":"disesuaikan"} berhasil dicatat`,Pe(),await ie(),await _e(),ne&&ne();else throw new Error(k.message||"Gagal mencatat pergerakan stok")}catch(k){E.value=k.message||"Gagal mencatat pergerakan stok"}finally{V.value=!1}},ue=k=>{P.value=k,Object.assign(y,{item_id:k.id_item,type:"in",quantity:0,notes:"",cost_per_unit:k.cost_per_unit}),Q.value=!0},Ce=k=>{P.value=k,Object.assign(y,{item_id:k.id_item,type:"out",quantity:0,notes:"",cost_per_unit:k.cost_per_unit}),Q.value=!0},Ee=k=>{P.value=k,Object.assign(y,{item_id:k.id_item,type:"adjustment",quantity:k.current_stock,notes:"",cost_per_unit:k.cost_per_unit}),Z.value=!0},Pe=()=>{Q.value=!1,Z.value=!1,E.value="",P.value=null};return{itemsList:c,stockMovements:m,loading:p,saveLoading:V,stats:Y,currentPage:H,totalItems:R,itemsPerPage:ee,filters:le,movementDialog:Q,adjustmentDialog:Z,selectedItem:P,movementFormData:y,errorMessage:b,successMessage:l,modalErrorMessage:E,canManageStock:D,stockStatusOptions:re,movementTypeOptions:z,referenceTypeOptions:F,getStockStatus:ye,getStockPercentage:be,fetchItems:ie,fetchStockMovements:Te,fetchStats:_e,recordStockMovement:he,openStockInDialog:ue,openStockOutDialog:Ce,openAdjustmentDialog:Ee,closeMovementDialog:Pe,clearModalError:()=>{E.value=""},onPageChange:k=>{H.value=k,ie()},handleFiltersUpdate:k=>{Object.assign(le,k),H.value=1,ie()}}}const na={class:"inventory-management"},ra={class:"d-flex justify-space-between align-center mb-6"},ia={class:"d-flex gap-3 align-center"},ua={class:"d-flex align-center justify-space-between"},ca={class:"text-h4 font-weight-bold text-primary"},da={class:"d-flex align-center justify-space-between"},ma={class:"text-h4 font-weight-bold text-warning"},pa={class:"d-flex align-center justify-space-between"},_a={class:"text-h4 font-weight-bold text-error"},va={class:"d-flex align-center justify-space-between"},fa={class:"text-h4 font-weight-bold text-success"},ka={class:"d-flex align-center justify-space-between"},ga={class:"d-flex align-center gap-3"},ya={class:"d-flex gap-2"},ba={class:"d-flex flex-wrap gap-2"},ha={class:"d-flex align-center gap-2"},xa={class:"text-caption"},wa={class:"table-container"},Sa={class:"d-flex align-center"},Va={class:"font-weight-medium"},Da={class:"d-flex flex-column"},Ma={class:"text-primary font-weight-medium"},Ta={class:"text-medium-emphasis"},Ca={class:"text-center"},Ea={class:"text-h6 font-weight-bold"},Pa={key:0,class:"text-warning"},Ua={class:"text-center"},Ia={class:"d-flex flex-column gap-1"},Aa={key:2,class:"text-caption text-medium-emphasis"},$a={class:"text-center"},ja={class:"text-end"},Ra={class:"text-end font-weight-medium text-success"},za={class:"d-flex align-center gap-1"},La={class:"text-center py-12"},Ba={class:"text-h5 text-medium-emphasis mb-2"},Oa={class:"text-body-1 text-medium-emphasis mb-4"},Fa={key:0},qa={key:0},Ka={key:1},Na={key:2},Ha={key:1},Ga={class:"d-flex justify-center gap-3"},Ja={class:"text-center py-8"},Xa={class:"d-flex align-center gap-2"},Wa={class:"d-flex align-center gap-3"},Ya={class:"font-weight-bold"},Qa={class:"text-caption"},Za={class:"text-caption"},es={class:"d-flex gap-3 justify-end"},ts={class:"d-flex align-center gap-2"},as={class:"text-white"},ss={class:"d-flex align-center gap-3"},os={class:"font-weight-bold"},ls={class:"text-caption"},ns={class:"d-flex align-center gap-2"},rs={key:0,class:"text-center py-8"},is={key:1},us={class:"text-body-2"},cs={class:"d-flex align-center gap-2"},ds={class:"text-body-2 font-weight-medium"},ms={class:"text-caption text-medium-emphasis"},ps={class:"text-end font-weight-medium text-success"},_s={class:"text-center py-8"},vs={key:0,class:"d-flex justify-center mt-4"},fs={class:"mb-4"},ks={class:"d-flex flex-column gap-2"},gs={class:"mb-4"},ys={class:"d-flex flex-column gap-2"},bs=Vt({__name:"inventory-management",setup(ne){const{xs:c}=Ut(),m=()=>{_e(),he(),ue()},{inventoryList:p,loading:V,saveLoading:Y,stats:H,lowStockItems:R,stockUpdateDialog:ee,reorderDialog:le,movementsDialog:Q,selectedInventory:Z,currentPage:P,totalItems:y,itemsPerPage:b,filters:l,errorMessage:E,successMessage:D,modalErrorMessage:re,stockUpdateForm:z,reorderForm:F,totalStockValue:ye,lowStockCount:be,outOfStockCount:ie,stockStatusOptions:Te,fetchInventoryList:_e,fetchStats:he,fetchLowStockAlerts:ue,updateStock:Ce,setReorderLevel:Ee,openStockUpdateDialog:Pe,openReorderDialog:Be,openMovementsDialog:Oe,closeStockUpdateDialog:Fe,closeReorderDialog:k,clearModalError:q,onPageChange:M,onItemsPerPageChange:qe,handleFiltersUpdate:xe,formatCurrency:De,getStockStatusColor:Ye,getStockStatusText:Ae}=oa(),{recordStockMovement:$e,openAdjustmentDialog:Qe,movementDialog:je,adjustmentDialog:Ue,selectedItem:te,movementFormData:L,saveLoading:Ze,closeMovementDialog:Re,successMessage:Ke,modalErrorMessage:et,clearModalError:ut}=la(m),ct=_=>_.item?{id_item:_.item.id_item,item_code:_.item.item_code,name:_.item.name,description:_.item.description||"",unit:_.item.unit,cost_per_unit:parseFloat(_.item.cost_per_unit),current_stock:_.current_stock,minimum_stock:_.reorder_level||0,active:!0,storage_location:_.item.storage_location||"",expiry_date:_.item.expiry_date||null,properties:_.item.properties||null,created_by:_.item.created_by||null,updated_by:_.item.updated_by||null,created_at:_.item.created_at,updated_at:_.item.updated_at,deleted_at:_.item.deleted_at||null}:null,dt=_=>{const e=ct(_);e&&Qe(e)},mt=ae(()=>H.value);ae(()=>p.value),ae(()=>V.value);const r=()=>{switch(l.value.station){case"kitchen":return"Menampilkan item yang hanya tersedia di Kitchen";case"bar":return"Menampilkan item yang hanya tersedia di Bar";case"both":return"Menampilkan item yang tersedia di Kitchen & Bar";case"all":default:return"Menampilkan item dari semua station"}};It(()=>{_e(),he(),ue()});const $=v(!1),ve=v(!1),Ie=()=>{ve.value=!0},Ne=()=>{ve.value=!1},tt=()=>{try{const _=Rt("accessToken").value;return _||localStorage.getItem("token")||localStorage.getItem("auth_token")||localStorage.getItem("accessToken")||null}catch{return localStorage.getItem("token")||localStorage.getItem("auth_token")||localStorage.getItem("accessToken")||null}},Ct=async()=>{var _,e,I,B;try{console.log("ðŸš€ Starting fetchAllInventoryForExport...");const X=new URLSearchParams({per_page:"999999",page:"1",search:l.value.search||"",stock_status:l.value.stock_status||"all",station:l.value.station||"all"});console.log("ðŸ“ Request params:",X.toString());try{console.log("ðŸ”„ Attempting to fetch with useApi composable...");const{data:K}=await Bt(`/inventory?${X}`).get().json();if(K.value&&K.value.success){console.log("âœ… Successfully fetched with useApi:",((_=K.value.data.data)==null?void 0:_.length)||0,"items");const f=(K.value.data.data||[]).filter((d,A,U)=>A===U.findIndex(W=>W.id_inventory===d.id_inventory));return console.log("ðŸ” After deduplication:",f.length,"unique items"),f}else throw console.log("âŒ useApi response not successful:",K.value),new Error(((e=K.value)==null?void 0:e.message)||"useApi failed")}catch(K){console.warn("âŒ useApi failed, trying manual fetch:",K);const o=tt();console.log("ðŸ” Token for manual fetch:",o?`Token available (${o.substring(0,20)}...)`:"No token");const f={"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest",...o&&{Authorization:`Bearer ${o}`}};console.log("ðŸ“‹ Request headers:",{...f,Authorization:f.Authorization?f.Authorization.substring(0,30)+"...":"Not set"});const d=await fetch(`/api/inventory?${X}`,{method:"GET",headers:f});if(console.log("ðŸ“Š Response status:",d.status,d.statusText),console.log("ðŸ“‹ Response headers:",Object.fromEntries(d.headers.entries())),!d.ok){const U=await d.text();console.error("âŒ Manual fetch API Error Response:",U),console.error("ðŸ“Š Error details - Status:",d.status,"StatusText:",d.statusText);try{const W=JSON.parse(U);console.error("ðŸ“‹ Parsed error JSON:",W)}catch{console.error("ðŸ“‹ Error response is not JSON:",U)}throw new Error(`HTTP ${d.status}: ${d.statusText}`)}const A=await d.json();if(console.log("âœ… Manual fetch successful response:",{success:A.success,dataLength:((B=(I=A.data)==null?void 0:I.data)==null?void 0:B.length)||0,message:A.message}),A.success){const U=A.data.data||[],W=U.filter((we,ce,h)=>ce===h.findIndex(fe=>fe.id_inventory===we.id_inventory));return console.log("âœ… Successfully fetched with manual fetch:",U.length,"items"),console.log("ðŸ” After deduplication:",W.length,"unique items"),W}else throw console.error("âŒ Manual fetch response not successful:",A),new Error(A.message||"Failed to fetch inventory data")}}catch(X){throw console.error("ðŸ’¥ Fetch all inventory error:",X),new Error("Gagal mengambil data inventory lengkap: "+(X instanceof Error?X.message:"Unknown error"))}},at=v(!1),st=v([]),ot=v(!1),ze=v(1),He=v(10),lt=v(0),pt=async()=>{try{$.value=!0;const _=await Ct();console.log("ðŸ“Š Exporting",_.length,"inventory items to Excel");const e=await jt(()=>import("./xlsx-CfQreh1U.js"),[]),I=_.length,B=_.filter(h=>h.current_stock<=h.reorder_level).length,X=_.filter(h=>h.current_stock===0).length,K=_.reduce((h,fe)=>h+(fe.current_stock||0)*(fe.average_cost||0),0),o=_.map((h,fe)=>{var ft,kt,gt,yt,bt,ht,xt;return{No:fe+1,"Produk/Variant":((ft=h.item)==null?void 0:ft.name)||((kt=h.product)==null?void 0:kt.name)||"Unknown Item",SKU:((gt=h.item)==null?void 0:gt.item_code)||((yt=h.product)==null?void 0:yt.sku)||"-",Unit:((bt=h.item)==null?void 0:bt.unit)||"pcs","Stok Saat Ini":h.current_stock||0,"Stok Tersedia":h.available_stock||0,"Stok Minimum":h.reorder_level||0,Status:Ae(h),Kitchen:(ht=h.item)!=null&&ht.available_in_kitchen?"Ya":"Tidak",Bar:(xt=h.item)!=null&&xt.available_in_bar?"Ya":"Tidak","Harga Rata-rata":h.average_cost||0,"Nilai Stok":(h.current_stock||0)*(h.average_cost||0),Dibuat:h.created_at?new Date(h.created_at).toLocaleDateString("id-ID"):"-",Diperbarui:h.updated_at?new Date(h.updated_at).toLocaleDateString("id-ID"):"-"}}),f=e.utils.book_new(),d=[];if(l.value.search&&d.push(`Pencarian: "${l.value.search}"`),l.value.stock_status&&l.value.stock_status!=="all"&&d.push(`Status: ${l.value.stock_status}`),l.value.station&&l.value.station!=="all"){const h={kitchen:"Kitchen Only",bar:"Bar Only",both:"Kitchen & Bar"};d.push(`Station: ${h[l.value.station]||l.value.station}`)}const A=[["LAPORAN INVENTORY MANAGEMENT"],["Tanggal Export:",new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})],["Total Items:",I],["Total Nilai Stok:",`Rp ${K.toLocaleString("id-ID")}`],["Items Low Stock:",B],["Items Out of Stock:",X],["Filter Diterapkan:",d.length>0?d.join(", "):"Semua Data"],[]],U=e.utils.aoa_to_sheet(A);e.utils.sheet_add_json(U,o,{origin:"A9"});const W=[{wch:5},{wch:35},{wch:15},{wch:8},{wch:12},{wch:12},{wch:12},{wch:15},{wch:8},{wch:8},{wch:15},{wch:15},{wch:12},{wch:12}];U["!cols"]=W,e.utils.book_append_sheet(f,U,"Inventory Report");const ce=`inventory-report-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.xlsx`;e.writeFile(f,ce),console.log("âœ… Excel file generated successfully:",ce);try{await Et(_,{total_items:I,total_stock_value:K,low_stock_count:B,out_of_stock_count:X}),D.value=`Laporan berhasil di-export ke Excel dengan ${I} item lengkap dan data berhasil diupload ke server!`}catch(h){console.error("Upload error:",h),D.value=`Laporan berhasil di-export ke Excel dengan ${I} item lengkap, tetapi gagal upload data ke server: `+(h instanceof Error?h.message:"Unknown error")}}catch(_){console.error("Export error:",_),E.value="Gagal mengexport laporan: "+(_ instanceof Error?_.message:"Unknown error")}finally{$.value=!1}},Et=async(_,e)=>{try{const I=_||p.value,B=e||{total_items:y.value,total_stock_value:ye.value||0,low_stock_count:be.value,out_of_stock_count:ie.value},X={inventory_data:I.map(d=>{var A,U,W,we,ce,h,fe;return{id_inventory:d.id_inventory,id_product:d.id_product,id_item:d.id_item,current_stock:d.current_stock||0,available_stock:d.available_stock||0,reserved_stock:d.reserved_stock||0,reorder_level:d.reorder_level||0,max_stock_level:d.max_stock_level||null,average_cost:d.average_cost||0,product_name:((A=d.product)==null?void 0:A.name)||((U=d.item)==null?void 0:U.name)||"Unknown",product_sku:((W=d.product)==null?void 0:W.sku)||((we=d.item)==null?void 0:we.item_code)||null,unit:((ce=d.item)==null?void 0:ce.unit)||"pcs",category:((fe=(h=d.product)==null?void 0:h.category)==null?void 0:fe.name)||null,status:Ae(d),stock_value:(d.current_stock||0)*(d.average_cost||0),created_at:d.created_at,updated_at:d.updated_at}}),summary:{total_items:B.total_items,total_stock_value:B.total_stock_value,low_stock_count:B.low_stock_count,out_of_stock_count:B.out_of_stock_count,export_timestamp:new Date().toISOString(),filters_applied:{search:l.value.search||null,stock_status:l.value.stock_status!=="all"?l.value.stock_status:null}}},K=tt(),o=await fetch("/api/inventory/upload-data",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest",...K&&{Authorization:`Bearer ${K}`}},body:JSON.stringify(X)});if(!o.ok){const d=await o.json();throw new Error(d.message||`HTTP ${o.status}: ${o.statusText}`)}const f=await o.json();return console.log("Upload result:",f),f}catch(I){throw console.error("Upload inventory data error:",I),I}},_t=async()=>{var _;try{ot.value=!0;const e=tt(),I=await fetch(`/api/inventory/upload-history?page=${ze.value}&per_page=${He.value}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest",...e&&{Authorization:`Bearer ${e}`}}});if(!I.ok)throw new Error(`HTTP ${I.status}: ${I.statusText}`);const B=await I.json();if(B.success)st.value=B.data||[],lt.value=((_=B.pagination)==null?void 0:_.total)||0;else throw new Error(B.message||"Failed to fetch upload history")}catch(e){console.error("Fetch upload history error:",e),E.value="Gagal mengambil riwayat upload: "+(e instanceof Error?e.message:"Unknown error")}finally{ot.value=!1}},Pt=_=>{ze.value=_,_t()},vt=()=>{at.value=!1,st.value=[],ze.value=1};return Dt(y,(_,e)=>{},{immediate:!0}),(_,e)=>{var I,B,X,K;return g(),J("div",na,[n("div",ra,[e[38]||(e[38]=n("div",null,[n("h1",{class:"text-h4 font-weight-bold inventory-title"}," Kelola Inventory "),n("p",{class:"text-body-1 text-medium-emphasis inventory-subtitle"}," Kelola stok barang dan pergerakan inventory ")],-1)),n("div",ia,[t(w,{color:"primary","prepend-icon":"tabler-refresh",variant:"outlined",onClick:m},{default:s(()=>e[37]||(e[37]=[i(" Refresh Data ")])),_:1,__:[37]})])]),a(E)?(g(),S(se,{key:0,type:"error",variant:"outlined",class:"mb-4",text:a(E),closable:"","onClick:close":e[0]||(e[0]=o=>E.value="")},null,8,["text"])):x("",!0),a(D)?(g(),S(se,{key:1,type:"success",variant:"outlined",class:"mb-4",text:a(D),closable:"","onClick:close":e[1]||(e[1]=o=>D.value="")},null,8,["text"])):x("",!0),a(Ke)?(g(),S(se,{key:2,type:"success",variant:"outlined",class:"mb-4",text:a(Ke),closable:"","onClick:close":e[2]||(e[2]=o=>Ke.value="")},null,8,["text"])):x("",!0),t(ge,{class:"mb-6"},{default:s(()=>[t(j,{cols:"12",md:"3"},{default:s(()=>[t(O,{class:"stats-card"},{default:s(()=>[t(N,null,{default:s(()=>[n("div",ua,[n("div",null,[n("div",ca,u(mt.value.total_items||0),1),e[39]||(e[39]=n("div",{class:"text-caption text-medium-emphasis"}," Total Produk ",-1))]),t(T,{icon:"tabler-package",size:"48",class:"text-primary opacity-50"})])]),_:1})]),_:1})]),_:1}),t(j,{cols:"12",md:"3"},{default:s(()=>[t(O,{class:"stats-card"},{default:s(()=>[t(N,null,{default:s(()=>[n("div",da,[n("div",null,[n("div",ma,u(a(be)||0),1),e[40]||(e[40]=n("div",{class:"text-caption text-medium-emphasis"}," Stok Menipis ",-1))]),t(T,{icon:"tabler-alert-triangle",size:"48",class:"text-warning opacity-50"})])]),_:1})]),_:1})]),_:1}),t(j,{cols:"12",md:"3"},{default:s(()=>[t(O,{class:"stats-card"},{default:s(()=>[t(N,null,{default:s(()=>[n("div",pa,[n("div",null,[n("div",_a,u(a(ie)||0),1),e[41]||(e[41]=n("div",{class:"text-caption text-medium-emphasis"}," Stok Habis ",-1))]),t(T,{icon:"tabler-x-circle",size:"48",class:"text-error opacity-50"})])]),_:1})]),_:1})]),_:1}),t(j,{cols:"12",md:"3"},{default:s(()=>[t(O,{class:"stats-card"},{default:s(()=>[t(N,null,{default:s(()=>[n("div",va,[n("div",null,[n("div",fa,u(a(De)(a(ye)||0)),1),e[42]||(e[42]=n("div",{class:"text-caption text-medium-emphasis"}," Nilai Stok ",-1))]),t(T,{icon:"tabler-currency-dollar",size:"48",class:"text-success opacity-50"})])]),_:1})]),_:1})]),_:1})]),_:1}),t(O,{class:"mb-6 info-card",color:"info",variant:"tonal"},{default:s(()=>[t(N,null,{default:s(()=>[n("div",ka,[n("div",ga,[t(T,{icon:"tabler-info-circle",size:"32",class:"text-info"}),e[43]||(e[43]=n("div",null,[n("div",{class:"text-subtitle-1 font-weight-medium text-info"}," Sistem Stock Movement Otomatis "),n("div",{class:"text-body-2 text-medium-emphasis"},[i(" Stok akan bertambah otomatis saat purchasing dan berkurang saat penjualan POS. Gunakan tombol "),n("strong",null,"Penyesuaian"),i(" untuk koreksi manual jika diperlukan. ")])],-1))]),n("div",ya,[t(C,{color:"success",variant:"tonal",size:"small"},{default:s(()=>[t(T,{icon:"tabler-shopping-cart",class:"me-1"}),e[44]||(e[44]=i(" Purchase â†’ Stok + "))]),_:1,__:[44]}),t(C,{color:"error",variant:"tonal",size:"small"},{default:s(()=>[t(T,{icon:"tabler-cash",class:"me-1"}),e[45]||(e[45]=i(" POS Sale â†’ Stok - "))]),_:1,__:[45]})])])]),_:1})]),_:1}),a(R).length>0?(g(),S(O,{key:3,class:"mb-6 low-stock-alert"},{default:s(()=>[t(pe,{class:"d-flex align-center"},{default:s(()=>[t(T,{icon:"tabler-alert-triangle",class:"text-warning me-2"}),i(" Peringatan Stok Menipis ("+u(a(R).length)+" produk) ",1)]),_:1}),t(N,null,{default:s(()=>[n("div",ba,[(g(!0),J(At,null,$t(a(R).slice(0,10),o=>(g(),S(C,{key:o.id_inventory,color:"warning",variant:"outlined",size:"small"},{default:s(()=>{var f;return[i(u((f=o.product)==null?void 0:f.name)+" ("+u(o.current_stock)+"/"+u(o.reorder_level)+") ",1)]}),_:2},1024))),128)),a(R).length>10?(g(),S(C,{key:0,color:"warning",variant:"tonal",size:"small"},{default:s(()=>[i(" +"+u(a(R).length-10)+" lainnya ",1)]),_:1})):x("",!0)])]),_:1})]),_:1})):x("",!0),!a(V)&&a(p).length===0&&!a(E)&&!a(l).search&&a(l).stock_status==="all"?(g(),S(O,{key:4,class:"mb-6"},{default:s(()=>[t(N,{class:"text-center py-6"},{default:s(()=>[t(T,{icon:"tabler-info-circle",size:"48",class:"text-info mb-3"}),e[46]||(e[46]=n("div",{class:"text-h6 mb-2"}," Sistem Inventory Management Siap Digunakan ",-1)),e[47]||(e[47]=n("div",{class:"text-body-2 text-medium-emphasis"}," Buat produk dan variant terlebih dahulu untuk mulai melacak inventory. ",-1))]),_:1,__:[46,47]})]),_:1})):x("",!0),t(O,{class:"mb-6"},{default:s(()=>[t(N,null,{default:s(()=>[a(l).station!=="all"?(g(),S(se,{key:0,type:"info",variant:"tonal",class:"mb-4",density:"compact"},{text:s(()=>[n("div",ha,[t(T,{icon:"tabler-info-circle",size:"16"}),n("span",xa,u(r()),1)])]),_:1})):x("",!0),t(ge,null,{default:s(()=>[t(j,{cols:"12",md:"3"},{default:s(()=>[t(de,{modelValue:a(l).search,"onUpdate:modelValue":[e[3]||(e[3]=o=>a(l).search=o),e[4]||(e[4]=o=>a(xe)({search:o}))],label:"Cari inventory produk...",placeholder:"Nama produk, SKU, atau variant","prepend-inner-icon":"tabler-search",clearable:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(j,{cols:"12",md:"3"},{default:s(()=>[t(nt,{modelValue:a(l).stock_status,"onUpdate:modelValue":[e[5]||(e[5]=o=>a(l).stock_status=o),e[6]||(e[6]=o=>a(xe)({stock_status:o||"all"}))],items:a(Te),label:"Status Stok",variant:"outlined",clearable:""},null,8,["modelValue","items"])]),_:1}),t(j,{cols:"12",md:"3"},{default:s(()=>[t(nt,{modelValue:a(l).station,"onUpdate:modelValue":[e[7]||(e[7]=o=>a(l).station=o),e[8]||(e[8]=o=>a(xe)({station:o}))],items:[{title:"Semua station",value:"all"},{title:"Kitchen Only",value:"kitchen"},{title:"Bar Only",value:"bar"},{title:"Kitchen & Bar",value:"both"}],label:"Station",variant:"outlined",density:"compact","prepend-inner-icon":"tabler-building-store","hide-details":""},null,8,["modelValue"])]),_:1}),t(j,{cols:"12",md:"3",class:"d-flex align-center gap-2"},{default:s(()=>[t(w,{variant:"outlined","prepend-icon":"tabler-refresh",onClick:e[9]||(e[9]=o=>{a(_e)(),a(he)(),a(ue)()})},{default:s(()=>e[48]||(e[48]=[i(" Refresh ")])),_:1,__:[48]}),a(l).search||a(l).stock_status!=="all"||a(l).station!=="all"?(g(),S(w,{key:0,variant:"outlined",color:"warning","prepend-icon":"tabler-filter-off",onClick:e[10]||(e[10]=o=>a(xe)({search:"",stock_status:"all",station:"all"}))},{default:s(()=>e[49]||(e[49]=[i(" Clear ")])),_:1,__:[49]})):x("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),!a(V)&&a(p).length===0&&!a(E)&&!a(l).search&&a(l).stock_status==="all"?(g(),S(O,{key:5,class:"mb-6"},{default:s(()=>[t(N,{class:"text-center py-6"},{default:s(()=>[t(T,{icon:"tabler-package-off",size:"48",class:"text-disabled mb-3"}),e[50]||(e[50]=n("div",{class:"text-h6 mb-2"}," Sistem Inventory Management Siap Digunakan ",-1)),e[51]||(e[51]=n("div",{class:"text-body-2 text-medium-emphasis"}," Buat produk dan variant terlebih dahulu untuk mulai melacak inventory. ",-1))]),_:1,__:[50,51]})]),_:1})):x("",!0),t(O,{class:"products-inventory-table"},{default:s(()=>[t(pe,{class:"d-flex align-center gap-2 coffee-header"},{default:s(()=>[t(T,{icon:"tabler-package",class:"text-white"}),e[53]||(e[53]=n("span",{class:"text-white"},"Inventory Produk",-1)),t(Ve),t(w,{color:"success",variant:"elevated","prepend-icon":"tabler-file-spreadsheet",loading:$.value,onClick:Ie},{default:s(()=>e[52]||(e[52]=[i(" Export Excel ")])),_:1,__:[52]},8,["loading"]),t(C,{color:"black",size:"small",variant:"tonal"},{default:s(()=>[i(u(a(y))+" Produk ",1)]),_:1})]),_:1,__:[53]}),t(G),n("div",wa,[t(Ot,{headers:[{title:"Produk/Variant",key:"item_name",sortable:!1,width:"280px"},{title:"Stok Saat Ini",key:"current_stock",sortable:!1,width:"120px"},{title:"Stok Tersedia",key:"available_stock",sortable:!1,width:"120px"},{title:"Status",key:"status",sortable:!1,width:"120px"},{title:"Station",key:"station_availability",sortable:!1,width:"150px"},{title:"Reorder Level",key:"reorder_level",sortable:!1,width:"120px"},{title:"Harga Rata-rata",key:"average_cost",sortable:!1,width:"150px"},{title:"Nilai Stok",key:"stock_value",sortable:!1,width:"150px"},{title:"Aksi",key:"actions",sortable:!1,width:"200px",fixed:!0}],items:a(p),loading:a(V),"items-length":a(y),"items-per-page":a(b),page:a(P),"items-per-page-options":[10,15,25,50,100],"items-per-page-text":"Items per page:","page-text":"{0}-{1} of {2}","no-data-text":"Tidak ada data inventory",class:"text-no-wrap fixed-actions-table",id:"inventory-table","fixed-header":"",height:"500px","onUpdate:page":a(M),"onUpdate:itemsPerPage":a(qe)},{"item.item_name":s(({item:o})=>{var f,d,A,U,W,we,ce;return[n("div",Sa,[n("div",null,[n("div",Va,u(((f=o.item)==null?void 0:f.name)||((d=o.product)==null?void 0:d.name)||"Unknown Item"),1),n("div",Da,[n("small",Ma," SKU: "+u(((A=o.item)==null?void 0:A.item_code)||((U=o.product)==null?void 0:U.sku)||"-"),1),n("small",Ta,u(((W=o.item)==null?void 0:W.description)||((ce=(we=o.product)==null?void 0:we.category)==null?void 0:ce.name)||"-"),1)])])])]}),"item.sku":s(({item:o})=>[t(C,{variant:"outlined",size:"small",color:"primary"},{default:s(()=>{var f,d;return[i(u(((f=o.item)==null?void 0:f.item_code)||((d=o.product)==null?void 0:d.sku)||"N/A"),1)]}),_:2},1024)]),"item.current_stock":s(({item:o})=>[n("div",Ca,[n("div",Ea,u(o.current_stock),1),o.reserved_stock>0?(g(),J("small",Pa," ("+u(o.reserved_stock)+" reserved) ",1)):x("",!0)])]),"item.available_stock":s(({item:o})=>[n("div",Ua,[t(C,{color:o.available_stock>0?"success":"error",variant:"tonal",size:"small"},{default:s(()=>[i(u(o.available_stock),1)]),_:2},1032,["color"])])]),"item.status":s(({item:o})=>[t(C,{color:a(Ye)(o),variant:"tonal",size:"small"},{default:s(()=>[i(u(a(Ae)(o)),1)]),_:2},1032,["color"])]),"item.station_availability":s(({item:o})=>{var f,d,A,U;return[n("div",Ia,[(f=o.item)!=null&&f.available_in_kitchen?(g(),S(C,{key:0,color:"warning",variant:"tonal",size:"x-small","prepend-icon":"tabler-chef-hat"},{default:s(()=>e[54]||(e[54]=[i(" Kitchen ")])),_:1,__:[54]})):x("",!0),(d=o.item)!=null&&d.available_in_bar?(g(),S(C,{key:1,color:"info",variant:"tonal",size:"x-small","prepend-icon":"tabler-glass-cocktail"},{default:s(()=>e[55]||(e[55]=[i(" Bar ")])),_:1,__:[55]})):x("",!0),!((A=o.item)!=null&&A.available_in_kitchen)&&!((U=o.item)!=null&&U.available_in_bar)?(g(),J("span",Aa," Tidak tersedia ")):x("",!0)])]}),"item.reorder_level":s(({item:o})=>[n("div",$a,u(o.reorder_level||"-"),1)]),"item.average_cost":s(({item:o})=>[n("div",ja,u(a(De)(o.average_cost)),1)]),"item.stock_value":s(({item:o})=>[n("div",Ra,u(a(De)(o.current_stock*o.average_cost)),1)]),"item.actions":s(({item:o})=>[n("div",za,[t(Xe,{text:"Penyesuaian Stok"},{activator:s(({props:f})=>[t(w,Ge(f,{icon:"tabler-adjustments",color:"warning",variant:"text",size:"small",disabled:!o.item,onClick:d=>dt(o)}),null,16,["disabled","onClick"])]),_:2},1024),t(Xe,{text:"Update Stok"},{activator:s(({props:f})=>[t(w,Ge(f,{icon:"tabler-edit",color:"primary",variant:"text",size:"small",onClick:d=>a(Pe)(o)}),null,16,["onClick"])]),_:2},1024),t(Xe,{text:"Set Reorder Level"},{activator:s(({props:f})=>[t(w,Ge(f,{icon:"tabler-settings",color:"info",variant:"text",size:"small",onClick:d=>a(Be)(o)}),null,16,["onClick"])]),_:2},1024),t(Xe,{text:"Lihat Riwayat"},{activator:s(({props:f})=>[t(w,Ge(f,{icon:"tabler-history",color:"secondary",variant:"text",size:"small",onClick:d=>a(Oe)(o)}),null,16,["onClick"])]),_:2},1024)])]),"no-data":s(()=>{var o;return[n("div",La,[t(T,{icon:a(l).search||a(l).stock_status!=="all"?"tabler-search-off":"tabler-package-off",size:"64",class:"text-medium-emphasis mb-4"},null,8,["icon"]),n("div",Ba,u(a(l).search||a(l).stock_status!=="all"?"Tidak Ada Hasil Pencarian":"Belum Ada Data Inventory"),1),n("div",Oa,[a(l).search||a(l).stock_status!=="all"?(g(),J("span",Fa,[a(l).search?(g(),J("span",qa,[e[56]||(e[56]=i(' Tidak ditemukan inventory dengan kata kunci "')),n("strong",null,u(a(l).search),1),e[57]||(e[57]=i('" '))])):x("",!0),a(l).search&&a(l).stock_status!=="all"?(g(),J("span",Ka," dan ")):x("",!0),a(l).stock_status!=="all"?(g(),J("span",Na,[e[58]||(e[58]=i(' status stok "')),n("strong",null,u(((o=a(Te).find(f=>f.value===a(l).stock_status))==null?void 0:o.title)||a(l).stock_status),1),e[59]||(e[59]=i('" '))])):x("",!0),e[60]||(e[60]=n("br",null,null,-1)),e[61]||(e[61]=i("Coba kata kunci yang berbeda atau hapus filter. "))])):(g(),J("span",Ha,e[62]||(e[62]=[i(" Data inventory akan muncul setelah produk dan variant dibuat."),n("br",null,null,-1),i(" Silakan buat produk terlebih dahulu di menu "),n("strong",null,"Kelola Produk",-1),i(". ")])))]),n("div",Ga,[a(l).search||a(l).stock_status!=="all"?(g(),S(w,{key:0,color:"warning",variant:"outlined","prepend-icon":"tabler-filter-off",onClick:e[11]||(e[11]=f=>a(xe)({search:"",stock_status:"all"}))},{default:s(()=>e[63]||(e[63]=[i(" Hapus Filter ")])),_:1,__:[63]})):(g(),S(w,{key:1,color:"primary","prepend-icon":"tabler-plus",to:"/products-management"},{default:s(()=>e[64]||(e[64]=[i(" Buat Produk Baru ")])),_:1,__:[64]})),t(w,{variant:"outlined","prepend-icon":"tabler-refresh",onClick:e[12]||(e[12]=f=>{a(_e)(),a(he)(),a(ue)()})},{default:s(()=>e[65]||(e[65]=[i(" Refresh Data ")])),_:1,__:[65]})])])]}),loading:s(()=>[n("div",Ja,[t(it,{indeterminate:"",color:"primary",size:"40"}),e[66]||(e[66]=n("div",{class:"mt-4 text-medium-emphasis"}," Memuat data inventory... ",-1))])]),_:1},8,["items","loading","items-length","items-per-page","page","onUpdate:page","onUpdate:itemsPerPage"])])]),_:1}),t(Se,{modelValue:a(ee),"onUpdate:modelValue":e[19]||(e[19]=o=>Le(ee)?ee.value=o:null),"max-width":"800px",fullscreen:a(c),persistent:"",class:"stock-dialog"},{default:s(()=>[t(O,null,{default:s(()=>[t(pe,null,{default:s(()=>{var o,f;return[i(" Update Stok - "+u((f=(o=a(Z))==null?void 0:o.product)==null?void 0:f.name),1)]}),_:1}),t(G),t(We,{onSubmit:Je(a(Ce),["prevent"])},{default:s(()=>[t(N,null,{default:s(()=>[a(re)?(g(),S(se,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4","onClick:close":a(q)},{default:s(()=>[i(u(a(re)),1)]),_:1},8,["onClick:close"])):x("",!0),t(ge,null,{default:s(()=>[t(j,{cols:"12",md:"6"},{default:s(()=>[t(nt,{modelValue:a(z).movement_type,"onUpdate:modelValue":e[13]||(e[13]=o=>a(z).movement_type=o),label:"Jenis Pergerakan *",items:[{title:"Stock Masuk",value:"stock_in"},{title:"Stock Keluar",value:"stock_out"},{title:"Penyesuaian",value:"adjustment"},{title:"Transfer",value:"transfer"},{title:"Retur",value:"return"}],variant:"outlined"},null,8,["modelValue"])]),_:1}),t(j,{cols:"12",md:"6"},{default:s(()=>[t(de,{modelValue:a(z).quantity,"onUpdate:modelValue":e[14]||(e[14]=o=>a(z).quantity=o),modelModifiers:{number:!0},label:"Kuantitas *",type:"number",min:"1",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(ge,null,{default:s(()=>[t(j,{cols:"12"},{default:s(()=>[t(de,{modelValue:a(z).reason,"onUpdate:modelValue":e[15]||(e[15]=o=>a(z).reason=o),label:"Alasan *",placeholder:"Contoh: Pembelian dari supplier, Penjualan, dll",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(ge,null,{default:s(()=>[t(j,{cols:"12",md:"6"},{default:s(()=>[t(de,{modelValue:a(z).reference_number,"onUpdate:modelValue":e[16]||(e[16]=o=>a(z).reference_number=o),label:"Nomor Referensi",placeholder:"PO-001, SO-001, dll",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(j,{cols:"12",md:"6"},{default:s(()=>[t(de,{modelValue:a(z).cost_per_unit,"onUpdate:modelValue":e[17]||(e[17]=o=>a(z).cost_per_unit=o),modelModifiers:{number:!0},label:"Harga per Unit",type:"number",min:"0",step:"0.01",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(ge,null,{default:s(()=>[t(j,{cols:"12"},{default:s(()=>[t(rt,{modelValue:a(z).notes,"onUpdate:modelValue":e[18]||(e[18]=o=>a(z).notes=o),label:"Catatan",rows:"2",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(G),t(Me,{class:"pa-4"},{default:s(()=>[t(Ve),t(w,{variant:"outlined",onClick:a(Fe)},{default:s(()=>e[67]||(e[67]=[i(" Batal ")])),_:1,__:[67]},8,["onClick"]),t(w,{type:"submit",color:"primary",loading:a(Y)},{default:s(()=>e[68]||(e[68]=[i(" Update Stok ")])),_:1,__:[68]},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","fullscreen"]),t(Se,{modelValue:a(le),"onUpdate:modelValue":e[22]||(e[22]=o=>Le(le)?le.value=o:null),"max-width":"600px",fullscreen:a(c),persistent:"",class:"stock-dialog"},{default:s(()=>[t(O,null,{default:s(()=>[t(pe,null,{default:s(()=>{var o,f;return[i(" Set Reorder Level - "+u((f=(o=a(Z))==null?void 0:o.product)==null?void 0:f.name),1)]}),_:1}),t(G),t(We,{onSubmit:Je(a(Ee),["prevent"])},{default:s(()=>[t(N,null,{default:s(()=>[a(re)?(g(),S(se,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4","onClick:close":a(q)},{default:s(()=>[i(u(a(re)),1)]),_:1},8,["onClick:close"])):x("",!0),t(ge,null,{default:s(()=>[t(j,{cols:"12"},{default:s(()=>[t(de,{modelValue:a(F).reorder_level,"onUpdate:modelValue":e[20]||(e[20]=o=>a(F).reorder_level=o),modelModifiers:{number:!0},label:"Reorder Level *",type:"number",min:"0",hint:"Stok minimum sebelum perlu restock","persistent-hint":"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(ge,null,{default:s(()=>[t(j,{cols:"12"},{default:s(()=>[t(de,{modelValue:a(F).max_stock_level,"onUpdate:modelValue":e[21]||(e[21]=o=>a(F).max_stock_level=o),modelModifiers:{number:!0},label:"Max Stock Level",type:"number",min:"0",hint:"Stok maksimum yang diizinkan","persistent-hint":"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(G),t(Me,{class:"pa-4"},{default:s(()=>[t(Ve),t(w,{variant:"outlined",onClick:a(k)},{default:s(()=>e[69]||(e[69]=[i(" Batal ")])),_:1,__:[69]},8,["onClick"]),t(w,{type:"submit",color:"primary",loading:a(Y)},{default:s(()=>e[70]||(e[70]=[i(" Simpan ")])),_:1,__:[70]},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","fullscreen"]),t(sa,{modelValue:a(Q),"onUpdate:modelValue":e[23]||(e[23]=o=>Le(Q)?Q.value=o:null),"inventory-id":(B=(I=a(Z))==null?void 0:I.id_inventory)==null?void 0:B.toString(),"inventory-name":(K=(X=a(Z))==null?void 0:X.item)==null?void 0:K.name},null,8,["modelValue","inventory-id","inventory-name"]),t(Se,{modelValue:a(Ue),"onUpdate:modelValue":e[26]||(e[26]=o=>Le(Ue)?Ue.value=o:null),"max-width":"600px",fullscreen:a(c),persistent:"",class:"stock-dialog"},{default:s(()=>[t(O,{class:"stock-movement-dialog coffee-dialog"},{default:s(()=>[t(pe,{class:"d-flex align-center justify-space-between coffee-header"},{default:s(()=>[n("div",Xa,[t(T,{icon:"tabler-adjustments",class:"text-white"}),e[71]||(e[71]=n("span",{class:"text-white"}," Penyesuaian Stok ",-1))]),t(w,{icon:"tabler-x",variant:"text",color:"white",onClick:a(Re)},null,8,["onClick"])]),_:1}),t(G),t(N,{class:"pa-6"},{default:s(()=>[t(We,{onSubmit:Je(a($e),["prevent"])},{default:s(()=>{var o;return[a(te)?(g(),S(se,{key:0,color:"info",variant:"tonal",class:"mb-4"},{default:s(()=>[n("div",Wa,[t(T,{icon:"tabler-package"}),n("div",null,[n("div",Ya,u(a(te).name),1),n("div",Qa,u(a(te).item_code),1),n("div",Za,"Stok Saat Ini: "+u(a(te).current_stock)+" "+u(a(te).unit),1)])])]),_:1})):x("",!0),a(et)?(g(),S(se,{key:1,type:"error",variant:"outlined",class:"mb-4",text:a(et),closable:"","onClick:close":a(ut)},null,8,["text","onClick:close"])):x("",!0),t(de,{modelValue:a(L).quantity,"onUpdate:modelValue":e[24]||(e[24]=f=>a(L).quantity=f),modelModifiers:{number:!0},label:"Stok Baru",type:"number",min:"0",step:"0.001",variant:"outlined",suffix:(o=a(te))==null?void 0:o.unit,class:"mb-4",required:""},null,8,["modelValue","suffix"]),t(rt,{modelValue:a(L).notes,"onUpdate:modelValue":e[25]||(e[25]=f=>a(L).notes=f),label:"Catatan (opsional)",variant:"outlined",rows:"3",class:"mb-4"},null,8,["modelValue"]),n("div",es,[t(w,{variant:"outlined",onClick:a(Re)},{default:s(()=>e[72]||(e[72]=[i(" Batal ")])),_:1,__:[72]},8,["onClick"]),t(w,{type:"submit",color:"primary",class:"coffee-primary",loading:a(Ze)},{default:s(()=>e[73]||(e[73]=[i(" Simpan Penyesuaian ")])),_:1,__:[73]},8,["loading"])])]}),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"]),t(Se,{modelValue:a(je),"onUpdate:modelValue":e[30]||(e[30]=o=>Le(je)?je.value=o:null),"max-width":"800px",fullscreen:a(c),persistent:"",class:"stock-dialog"},{default:s(()=>[t(O,{class:"stock-movement-dialog coffee-dialog"},{default:s(()=>[t(pe,{class:"d-flex align-center justify-space-between coffee-header"},{default:s(()=>[n("div",ts,[t(T,{icon:a(L).type==="in"?"tabler-plus":"tabler-minus",class:"text-white"},null,8,["icon"]),n("span",as,u(a(L).type==="in"?"Stok Masuk":a(L).type==="out"?"Stok Keluar":"Penyesuaian Stok"),1)]),t(w,{icon:"tabler-x",variant:"text",color:"white",onClick:a(Re)},null,8,["onClick"])]),_:1}),t(G),t(N,{class:"pa-6"},{default:s(()=>[t(We,{onSubmit:Je(a($e),["prevent"])},{default:s(()=>[a(te)?(g(),S(se,{key:0,color:"info",variant:"tonal",class:"mb-4"},{default:s(()=>[n("div",ss,[t(St,{color:"primary",size:"40",variant:"tonal"},{default:s(()=>[t(T,{icon:"tabler-package"})]),_:1}),n("div",null,[n("div",os,u(a(te).name),1),n("div",ls," Stok saat ini: "+u(a(te).current_stock)+" "+u(a(te).unit),1)])])]),_:1})):x("",!0),t(ge,null,{default:s(()=>[t(j,{cols:"12",md:"6"},{default:s(()=>[t(de,{modelValue:a(L).quantity,"onUpdate:modelValue":e[27]||(e[27]=o=>a(L).quantity=o),modelModifiers:{number:!0},label:`Jumlah ${a(L).type==="in"?"Masuk":a(L).type==="out"?"Keluar":"Akhir"}`,type:"number",variant:"outlined",required:"",min:a(L).type==="adjustment"?0:1,rules:[o=>o>0||"Jumlah harus lebih dari 0"]},null,8,["modelValue","label","min","rules"])]),_:1}),t(j,{cols:"12",md:"6"},{default:s(()=>[t(de,{modelValue:a(L).cost_per_unit,"onUpdate:modelValue":e[28]||(e[28]=o=>a(L).cost_per_unit=o),modelModifiers:{number:!0},label:"Harga per Unit",type:"number",variant:"outlined",prefix:"Rp",readonly:a(L).type!=="in"},null,8,["modelValue","readonly"])]),_:1}),t(j,{cols:"12"},{default:s(()=>[t(rt,{modelValue:a(L).notes,"onUpdate:modelValue":e[29]||(e[29]=o=>a(L).notes=o),label:"Catatan",placeholder:"Masukkan catatan untuk pergerakan stok...",rows:"3",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),t(G),t(Me,{class:"pa-6"},{default:s(()=>[t(Ve),t(w,{variant:"outlined",class:"coffee-secondary",onClick:a(Re)},{default:s(()=>e[74]||(e[74]=[i(" Batal ")])),_:1,__:[74]},8,["onClick"]),t(w,{color:"primary",class:"coffee-primary",loading:a(Ze),onClick:a($e)},{default:s(()=>e[75]||(e[75]=[i(" Simpan ")])),_:1,__:[75]},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"]),t(Se,{modelValue:at.value,"onUpdate:modelValue":e[32]||(e[32]=o=>at.value=o),"max-width":"1200px",fullscreen:a(c),persistent:"",class:"upload-history-dialog"},{default:s(()=>[t(O,null,{default:s(()=>[t(pe,{class:"d-flex align-center justify-space-between coffee-header"},{default:s(()=>[n("div",ns,[t(T,{icon:"tabler-history",class:"text-white"}),e[76]||(e[76]=n("span",{class:"text-white"},"Riwayat Upload Data Inventory",-1))]),t(w,{icon:"tabler-x",variant:"text",color:"white",onClick:vt})]),_:1}),t(G),t(N,{class:"pa-6"},{default:s(()=>[ot.value?(g(),J("div",rs,[t(it,{indeterminate:"",color:"primary",size:"40"}),e[77]||(e[77]=n("div",{class:"mt-4 text-medium-emphasis"}," Memuat riwayat upload... ",-1))])):(g(),J("div",is,[t(Tt,{headers:[{title:"Tanggal Upload",key:"created_at",sortable:!1},{title:"User",key:"user_name",sortable:!1},{title:"Total Items",key:"total_items_processed",sortable:!1},{title:"Berhasil Update",key:"total_items_updated",sortable:!1},{title:"Dilewati",key:"total_items_skipped",sortable:!1},{title:"Total Nilai Stok",key:"total_stock_value",sortable:!1},{title:"Status",key:"upload_status",sortable:!1}],items:st.value,"items-per-page":He.value,class:"elevation-1"},{"item.created_at":s(({item:o})=>[n("div",us,u(new Date(o.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),"item.user_name":s(({item:o})=>[n("div",cs,[t(St,{size:"32",color:"primary",variant:"tonal"},{default:s(()=>[t(T,{icon:"tabler-user"})]),_:1}),n("div",null,[n("div",ds,u(o.user_name||"Unknown User"),1),n("div",ms,u(o.user_email||"-"),1)])])]),"item.total_items_processed":s(({item:o})=>[t(C,{color:"info",variant:"tonal",size:"small"},{default:s(()=>[i(u(o.total_items_processed),1)]),_:2},1024)]),"item.total_items_updated":s(({item:o})=>[t(C,{color:"success",variant:"tonal",size:"small"},{default:s(()=>[i(u(o.total_items_updated),1)]),_:2},1024)]),"item.total_items_skipped":s(({item:o})=>[t(C,{color:o.total_items_skipped>0?"warning":"success",variant:"tonal",size:"small"},{default:s(()=>[i(u(o.total_items_skipped),1)]),_:2},1032,["color"])]),"item.total_stock_value":s(({item:o})=>[n("div",ps,u(a(De)(o.total_stock_value||0)),1)]),"item.upload_status":s(({item:o})=>[t(C,{color:o.upload_status==="success"?"success":o.upload_status==="failed"?"error":"warning",variant:"tonal",size:"small"},{default:s(()=>[i(u(o.upload_status==="success"?"Berhasil":o.upload_status==="failed"?"Gagal":"Sebagian"),1)]),_:2},1032,["color"])]),"no-data":s(()=>[n("div",_s,[t(T,{icon:"tabler-database-off",size:"64",class:"text-medium-emphasis mb-4"}),e[78]||(e[78]=n("div",{class:"text-h6 text-medium-emphasis mb-2"}," Belum Ada Riwayat Upload ",-1)),e[79]||(e[79]=n("div",{class:"text-body-2 text-medium-emphasis"}," Riwayat upload akan muncul setelah Anda melakukan export data inventory. ",-1))])]),_:1},8,["items","items-per-page"]),lt.value>He.value?(g(),J("div",vs,[t(zt,{modelValue:ze.value,"onUpdate:modelValue":[e[31]||(e[31]=o=>ze.value=o),Pt],length:Math.ceil(lt.value/He.value),"total-visible":7},null,8,["modelValue","length"])])):x("",!0)]))]),_:1}),t(G),t(Me,{class:"pa-4"},{default:s(()=>[t(Ve),t(w,{variant:"outlined",onClick:vt},{default:s(()=>e[80]||(e[80]=[i(" Tutup ")])),_:1,__:[80]}),t(w,{color:"primary","prepend-icon":"tabler-refresh",onClick:_t},{default:s(()=>e[81]||(e[81]=[i(" Refresh ")])),_:1,__:[81]})]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"]),t(Se,{modelValue:ve.value,"onUpdate:modelValue":e[34]||(e[34]=o=>ve.value=o),"max-width":"500",persistent:""},{default:s(()=>[t(O,null,{default:s(()=>[t(pe,{class:"d-flex align-center gap-2"},{default:s(()=>[t(T,{icon:"tabler-file-spreadsheet",color:"success"}),e[82]||(e[82]=i(" Export Inventory ke Excel "))]),_:1,__:[82]}),t(G),t(N,null,{default:s(()=>[n("div",fs,[e[84]||(e[84]=n("h6",{class:"text-h6 mb-2"},"Filter yang akan diterapkan:",-1)),n("div",ks,[a(l).search?(g(),S(C,{key:0,color:"primary",variant:"tonal",size:"small","prepend-icon":"tabler-search"},{default:s(()=>[i(' Pencarian: "'+u(a(l).search)+'" ',1)]),_:1})):x("",!0),a(l).stock_status&&a(l).stock_status!=="all"?(g(),S(C,{key:1,color:"info",variant:"tonal",size:"small","prepend-icon":"tabler-package"},{default:s(()=>[i(" Status: "+u(a(l).stock_status),1)]),_:1})):x("",!0),a(l).station&&a(l).station!=="all"?(g(),S(C,{key:2,color:"primary",variant:"tonal",size:"small","prepend-icon":"tabler-building-store"},{default:s(()=>[i(" Station: "+u(a(l).station==="kitchen"?"Kitchen Only":a(l).station==="bar"?"Bar Only":"Kitchen & Bar"),1)]),_:1})):x("",!0),!a(l).search&&(!a(l).stock_status||a(l).stock_status==="all")&&(!a(l).station||a(l).station==="all")?(g(),S(C,{key:3,color:"success",variant:"tonal",size:"small","prepend-icon":"tabler-check"},{default:s(()=>e[83]||(e[83]=[i(" Semua Data (Tanpa Filter) ")])),_:1,__:[83]})):x("",!0)])]),t(se,{type:"info",variant:"tonal",class:"mb-4"},{default:s(()=>e[85]||(e[85]=[i(" Data yang akan di-export akan mengikuti filter yang sedang aktif. File Excel akan berisi kolom Station (Kitchen & Bar) untuk setiap item. ")])),_:1,__:[85]})]),_:1}),t(G),t(Me,null,{default:s(()=>[t(Ve),t(w,{variant:"outlined",onClick:Ne,disabled:$.value},{default:s(()=>e[86]||(e[86]=[i(" Batal ")])),_:1,__:[86]},8,["disabled"]),t(w,{color:"success","prepend-icon":"tabler-file-spreadsheet",loading:$.value,onClick:e[33]||(e[33]=o=>{pt(),Ne()})},{default:s(()=>e[87]||(e[87]=[i(" Export ke Excel ")])),_:1,__:[87]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Se,{modelValue:ve.value,"onUpdate:modelValue":e[36]||(e[36]=o=>ve.value=o),"max-width":"500",persistent:""},{default:s(()=>[t(O,null,{default:s(()=>[t(pe,{class:"d-flex align-center gap-2"},{default:s(()=>[t(T,{icon:"tabler-file-spreadsheet",color:"success"}),e[88]||(e[88]=i(" Export Data ke Excel "))]),_:1,__:[88]}),t(G),t(N,null,{default:s(()=>[n("div",gs,[e[90]||(e[90]=n("h6",{class:"text-h6 mb-2"},"Filter yang akan diterapkan:",-1)),n("div",ys,[a(l).search?(g(),S(C,{key:0,color:"primary",variant:"tonal",size:"small","prepend-icon":"tabler-search"},{default:s(()=>[i(' Pencarian: "'+u(a(l).search)+'" ',1)]),_:1})):x("",!0),a(l).stock_status&&a(l).stock_status!=="all"?(g(),S(C,{key:1,color:"info",variant:"tonal",size:"small","prepend-icon":"tabler-package"},{default:s(()=>[i(" Status: "+u(a(l).stock_status),1)]),_:1})):x("",!0),a(l).station&&a(l).station!=="all"?(g(),S(C,{key:2,color:"primary",variant:"tonal",size:"small","prepend-icon":"tabler-building-store"},{default:s(()=>[i(" Station: "+u(a(l).station==="kitchen"?"Kitchen Only":a(l).station==="bar"?"Bar Only":"Kitchen & Bar"),1)]),_:1})):x("",!0),!a(l).search&&(!a(l).stock_status||a(l).stock_status==="all")&&(!a(l).station||a(l).station==="all")?(g(),S(C,{key:3,color:"success",variant:"tonal",size:"small","prepend-icon":"tabler-database"},{default:s(()=>e[89]||(e[89]=[i(" Semua Data ")])),_:1,__:[89]})):x("",!0)])]),t(se,{type:"info",variant:"tonal",class:"mb-4"},{default:s(()=>e[91]||(e[91]=[i(" Data yang akan di-export sesuai dengan filter yang aktif saat ini. File Excel akan mencakup kolom Station (Kitchen/Bar) untuk setiap item. ")])),_:1,__:[91]})]),_:1}),t(G),t(Me,null,{default:s(()=>[t(Ve),t(w,{variant:"outlined",onClick:Ne},{default:s(()=>e[92]||(e[92]=[i(" Batal ")])),_:1,__:[92]}),t(w,{color:"success",variant:"elevated","prepend-icon":"tabler-download",loading:$.value,onClick:e[35]||(e[35]=o=>{pt(),Ne()})},{default:s(()=>e[93]||(e[93]=[i(" Export Excel ")])),_:1,__:[93]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),Js=Mt(bs,[["__scopeId","data-v-67c6c270"]]);export{Js as default};

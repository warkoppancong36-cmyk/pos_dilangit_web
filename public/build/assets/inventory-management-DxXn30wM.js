import{aA as oe,d as We,r as p,V as ae,w as et,g as I,f as a,b as e,s as v,X as j,t as c,l as T,c as de,e as l,aw as Ze,a0 as V,o as x,ax as Xe,aW as tt,D as at,m as t,a5 as be,F as st,i as ot,p as Pe,$ as je}from"./main-D7EKKSaU.js";import{V as xe}from"./VDialog-D6qwpw2K.js";import{b as ce,c as $e,V as L}from"./VCard-BzXwGSJ2.js";import{V as W}from"./VDivider-DmN9-FgL.js";import{V as O}from"./VCardText-DxqBVUQu.js";import{V as te}from"./VAlert-javAAFV1.js";import{V as Qe}from"./VDataTable-Bpr6-jdN.js";import{V as Z}from"./VChip-CPrwum5U.js";import{V as he}from"./VSpacer-BEuS36Vp.js";import{_ as Ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as lt}from"./ItemsApi-CUVhNWnH.js";import{V as Y,a as w}from"./VRow-Cq2el3qT.js";import{V as X}from"./VTextField-nxD0wP6S.js";import{V as Te}from"./VSelect-DCj3-hyF.js";import{V as Ee}from"./VTooltip-dq-Yc3Y_.js";import{V as Re}from"./VForm-BhgUa4OT.js";import{V as Fe}from"./VTextarea-CRzQKObN.js";import{V as rt}from"./VAvatar-BELEh2-i.js";import"./VOverlay-D64Y_lks.js";import"./forwardRefs-B931MWyl.js";import"./VImg-BCTV9yom.js";import"./VCheckboxBtn-BQoax56w.js";import"./VTable-CKtT03N3.js";import"./filter-CXsHdo-F.js";/* empty css              */import"./VList-B_lIK830.js";import"./VMenu-D36yWlvn.js";const ee="/api/inventory";class G{static async getAll(i){var u;try{return(await oe.get(ee,{params:i})).data}catch(m){throw((u=m.response)==null?void 0:u.data)||this.handleError(m)}}static async getById(i){var u;try{return(await oe.get(`${ee}/${i}`)).data}catch(m){throw((u=m.response)==null?void 0:u.data)||this.handleError(m)}}static async getStats(){var i;try{return(await oe.get(`${ee}/stats`)).data}catch(u){throw((i=u.response)==null?void 0:i.data)||this.handleError(u)}}static async getLowStockAlerts(){var i;try{return(await oe.get(`${ee}/low-stock-alerts`)).data}catch(u){throw((i=u.response)==null?void 0:i.data)||this.handleError(u)}}static async updateStock(i,u){var m;try{return(await oe.post(`${ee}/${i}/update-stock`,u)).data}catch(k){throw((m=k.response)==null?void 0:m.data)||this.handleError(k)}}static async bulkUpdateStock(i){var u;try{return(await oe.post(`${ee}/bulk-update-stock`,i)).data}catch(m){throw((u=m.response)==null?void 0:u.data)||this.handleError(m)}}static async setReorderLevel(i,u){var m;try{return(await oe.post(`${ee}/${i}/reorder-level`,u)).data}catch(k){throw((m=k.response)==null?void 0:m.data)||this.handleError(k)}}static async getMovements(i){var u;try{const m=i!=null&&i.id_inventory?`${ee}/${i.id_inventory}/movements`:`${ee}/movements`;return(await oe.get(m,{params:i})).data}catch(m){throw((u=m.response)==null?void 0:u.data)||this.handleError(m)}}static handleError(i){var u,m;return i.response?{message:((u=i.response.data)==null?void 0:u.message)||"Terjadi kesalahan pada server",success:!1,errors:(m=i.response.data)==null?void 0:m.errors}:i.request?{message:"Tidak dapat terhubung ke server",success:!1}:{message:i.message||"Terjadi kesalahan yang tidak diketahui",success:!1}}static formatError(i){return i.errors?Object.values(i.errors).flat().join(", "):i.message||"Terjadi kesalahan yang tidak diketahui"}static isValidationError(i){return i.errors&&typeof i.errors=="object"}static getFieldError(i,u){return i.errors&&i.errors[u]?Array.isArray(i.errors[u])?i.errors[u][0]:i.errors[u]:null}static getMovementTypes(){return[{value:"stock_in",label:"Stock Masuk",color:"success"},{value:"stock_out",label:"Stock Keluar",color:"warning"},{value:"adjustment",label:"Penyesuaian",color:"info"},{value:"transfer",label:"Transfer",color:"primary"},{value:"return",label:"Retur",color:"success"},{value:"damaged",label:"Rusak",color:"error"},{value:"expired",label:"Kadaluarsa",color:"error"}]}static getStockStatusOptions(){return[{value:"all",label:"Semua Status"},{value:"in_stock",label:"Tersedia"},{value:"low_stock",label:"Stok Menipis"},{value:"out_of_stock",label:"Habis"},{value:"overstock",label:"Stok Berlebih"}]}}const nt={key:1,class:"text-center py-8"},it={class:"font-weight-medium"},ut={class:"text-medium-emphasis"},ct={class:"text-center"},dt={class:"text-center font-weight-medium"},mt={class:"text-center font-weight-bold text-primary"},pt={class:"text-end"},vt={class:"text-end font-weight-medium text-success"},_t={class:"max-width-200"},ft={class:"font-weight-medium"},kt={key:0,class:"text-medium-emphasis"},gt={key:1,class:"d-block text-caption"},yt={key:2,class:"text-info d-block"},bt={class:"text-center py-8"},xt=We({__name:"InventoryMovementsDialog",props:{modelValue:{type:Boolean},inventoryId:{},inventoryName:{}},emits:["update:modelValue"],setup(B,{emit:i}){const u=B,m=i,k=p([]),E=p(!1),A=p(""),U=ae({get:()=>u.modelValue,set:g=>m("update:modelValue",g)}),q=async()=>{var g,_,n,K;if(u.inventoryId)try{E.value=!0,A.value="";const b=await G.getMovements({id_inventory:parseInt(u.inventoryId),page:1,per_page:50});b.data&&Array.isArray(b.data)?k.value=b.data:b.data&&((g=b==null?void 0:b.data)!=null&&g.data)&&Array.isArray((_=b==null?void 0:b.data)==null?void 0:_.data)?k.value=b.data.data:k.value=[]}catch(b){console.error("Error fetching movements:",b),A.value=((K=(n=b.response)==null?void 0:n.data)==null?void 0:K.message)||"Gagal memuat riwayat pergerakan"}finally{E.value=!1}},z=g=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(g),F=g=>({in:"success",out:"error",stock_in:"success",stock_out:"error",adjustment:"warning",transfer:"info",return:"secondary"})[g]||"primary",R=g=>({in:"Stock Masuk",out:"Stock Keluar",stock_in:"Stock Masuk",stock_out:"Stock Keluar",adjustment:"Penyesuaian",transfer:"Transfer",return:"Retur"})[g]||g,f=g=>({in:"tabler-plus",out:"tabler-minus",stock_in:"tabler-plus",stock_out:"tabler-minus",adjustment:"tabler-edit",transfer:"tabler-arrows-exchange",return:"tabler-arrow-back"})[g]||"tabler-package";return et(U,g=>{g&&u.inventoryId?q():(k.value=[],A.value="")}),(g,_)=>(x(),I(xe,{modelValue:U.value,"onUpdate:modelValue":_[1]||(_[1]=n=>U.value=n),"max-width":"900px",scrollable:""},{default:a(()=>[e(L,null,{default:a(()=>[e(ce,{class:"d-flex align-center"},{default:a(()=>[e(j,{icon:"tabler-history",class:"me-2"}),v(" Riwayat Pergerakan - "+c(g.inventoryName),1)]),_:1}),e(W),e(O,{class:"pa-0"},{default:a(()=>[A.value?(x(),I(te,{key:0,type:"error",variant:"tonal",class:"ma-4"},{default:a(()=>[v(c(A.value),1)]),_:1})):T("",!0),E.value?(x(),de("div",nt,[e(Ze,{indeterminate:"",color:"primary",size:"40"}),_[2]||(_[2]=l("div",{class:"mt-4 text-medium-emphasis"}," Memuat riwayat pergerakan... ",-1))])):(x(),I(Qe,{key:2,headers:[{title:"Tanggal",key:"created_at",sortable:!1},{title:"Jenis",key:"movement_type",sortable:!1},{title:"Kuantitas",key:"quantity",sortable:!1},{title:"Stok Sebelum",key:"stock_before",sortable:!1},{title:"Stok Sesudah",key:"stock_after",sortable:!1},{title:"Harga/Unit",key:"unit_cost",sortable:!1},{title:"Total Nilai",key:"total_cost",sortable:!1},{title:"Catatan",key:"notes",sortable:!1}],items:k.value,loading:E.value,class:"text-no-wrap","items-per-page":"15",height:"500","fixed-header":""},{"item.created_at":a(({item:n})=>[l("div",null,[l("div",it,c(new Date(n.created_at).toLocaleDateString("id-ID")),1),l("small",ut,c(new Date(n.created_at).toLocaleTimeString("id-ID")),1)])]),"item.movement_type":a(({item:n})=>[e(Z,{color:F(n.movement_type),variant:"tonal",size:"small","prepend-icon":f(n.movement_type)},{default:a(()=>[v(c(R(n.movement_type)),1)]),_:2},1032,["color","prepend-icon"])]),"item.quantity":a(({item:n})=>[l("div",ct,[e(Z,{color:n.movement_type==="in"||n.movement_type==="stock_in"?"success":"error",variant:"outlined",size:"small"},{default:a(()=>[v(c(n.movement_type==="in"||n.movement_type==="stock_in"?"+":"-")+c(Math.abs(n.quantity)),1)]),_:2},1032,["color"])])]),"item.stock_before":a(({item:n})=>[l("div",dt,c(n.stock_before),1)]),"item.stock_after":a(({item:n})=>[l("div",mt,c(n.stock_after),1)]),"item.unit_cost":a(({item:n})=>[l("div",pt,c(n.unit_cost?z(n.unit_cost):"-"),1)]),"item.total_cost":a(({item:n})=>[l("div",vt,c(n.total_cost?z(n.total_cost):"-"),1)]),"item.notes":a(({item:n})=>[l("div",_t,[l("div",ft,c(n.notes||"-"),1),n.reference_type&&n.reference_id?(x(),de("small",kt," Ref: "+c(n.reference_type)+"-"+c(n.reference_id),1)):T("",!0),n.batch_number?(x(),de("small",gt," Batch: "+c(n.batch_number),1)):T("",!0),n.user?(x(),de("small",yt," oleh: "+c(n.user.name),1)):T("",!0)])]),"no-data":a(()=>[l("div",bt,[e(j,{icon:"tabler-history-off",size:"48",class:"text-medium-emphasis mb-4"}),_[3]||(_[3]=l("div",{class:"text-h6 text-medium-emphasis mb-2"}," Belum ada riwayat pergerakan ",-1)),_[4]||(_[4]=l("div",{class:"text-body-2 text-medium-emphasis"}," Riwayat akan muncul setelah ada pergerakan stok ",-1))])]),_:1},8,["items","loading"]))]),_:1}),e(W),e($e,{class:"pa-4"},{default:a(()=>[e(he),e(V,{variant:"outlined",onClick:_[0]||(_[0]=n=>U.value=!1)},{default:a(()=>_[5]||(_[5]=[v(" Tutup ")])),_:1,__:[5]}),e(V,{color:"primary","prepend-icon":"tabler-refresh",onClick:q},{default:a(()=>_[6]||(_[6]=[v(" Refresh ")])),_:1,__:[6]})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ht=Ye(xt,[["__scopeId","data-v-ca0277a4"]]),St=()=>{const B=p([]),i=p(!1),u=p(!1),m=p({total_items:0,low_stock_items:0,out_of_stock_items:0,overstock_items:0,total_stock_value:0,total_stock_quantity:0,total_reserved_stock:0,items_need_restock:0}),k=p([]),E=p(!1),A=p([]),U=p(!1),q=p(!1),z=p(!1),F=p(!1),R=p(!1),f=p(null),g=p([]),_=p(1),n=p(0),K=p(15),b=p({search:"",stock_status:"all",category_id:void 0,supplier_id:void 0,sort_by:"current_stock",sort_order:"asc"}),J=p(""),C=p(""),P=p(""),le=p({movement_type:"stock_in",quantity:0,reason:"",reference_number:"",cost_per_unit:void 0,notes:""}),N=p({reorder_level:0,max_stock_level:0}),fe=ae(()=>g.value.length>0),me=ae(()=>m.value.total_stock_value),re=ae(()=>m.value.low_stock_items),ne=ae(()=>m.value.out_of_stock_items),ie=[r=>r>0||"Kuantitas harus lebih dari 0",r=>Number.isInteger(r)||"Kuantitas harus berupa bilangan bulat"],ke=[r=>!!r||"Alasan wajib diisi",r=>r&&r.length>=3||"Alasan minimal 3 karakter"],pe=[r=>!r||r>=0||"Harga harus lebih dari atau sama dengan 0"],Se=[{title:"Stock Masuk",value:"stock_in",color:"success"},{title:"Stock Keluar",value:"stock_out",color:"warning"},{title:"Penyesuaian",value:"adjustment",color:"info"},{title:"Transfer",value:"transfer",color:"primary"},{title:"Retur",value:"return",color:"success"}],we=[{title:"Semua Status",value:"all"},{title:"Tersedia",value:"in_stock"},{title:"Stok Menipis",value:"low_stock"},{title:"Habis",value:"out_of_stock"},{title:"Stok Berlebih",value:"overstock"}],se=async()=>{i.value=!0,J.value="";try{const r={...b.value,page:_.value,per_page:K.value};Object.keys(r).forEach(Ue=>{const _e=r[Ue];(_e===""||_e===void 0||_e===null||_e==="all")&&delete r[Ue]});const $=await G.getAll(r);if($.success)B.value=$.data.data,n.value=$.data.total,_.value=$.data.current_page,console.log("Inventory data loaded:",{total:$.data.total,items:$.data.data.length,currentPage:$.data.current_page,structure:"Laravel paginated response"});else throw new Error($.message||"Gagal mengambil data inventory")}catch(r){console.error("Error fetching inventory:",r),J.value=G.formatError(r)||"Gagal mengambil data inventory",B.value=[],n.value=0}finally{i.value=!1}},d=async()=>{try{const r=await G.getStats();r.success&&(m.value=r.data)}catch(r){console.error("Error fetching inventory stats:",r)}},M=async()=>{U.value=!0;try{const r=await G.getLowStockAlerts();r.success&&(A.value=r.data.data||[])}catch(r){console.error("Error fetching low stock alerts:",r),A.value=[]}finally{U.value=!1}},h=async r=>{E.value=!0;try{const $=await G.getMovements({id_inventory:r,page:1,per_page:20});$.success&&(k.value=$.data)}catch($){console.error("Error fetching movements:",$)}finally{E.value=!1}},Ie=async()=>{if(f.value){u.value=!0,P.value="";try{const r=await G.updateStock(f.value.id_inventory,le.value);if(r.success)C.value="Stock berhasil diperbarui",ve(),await se(),await d(),await M();else throw new Error(r.message||"Gagal memperbarui stock")}catch(r){console.error("Error updating stock:",r),P.value=G.formatError(r)||"Gagal memperbarui stock"}finally{u.value=!1}}},ue=async()=>{if(f.value){u.value=!0,P.value="";try{const r=await G.setReorderLevel(f.value.id_inventory,N.value);if(r.success)C.value="Reorder level berhasil diperbarui",Ve(),await se();else throw new Error(r.message||"Gagal memperbarui reorder level")}catch(r){console.error("Error setting reorder level:",r),P.value=G.formatError(r)||"Gagal memperbarui reorder level"}finally{u.value=!1}}},ge=r=>{f.value=r,le.value={movement_type:"stock_in",quantity:0,reason:"",reference_number:"",cost_per_unit:r.average_cost||void 0,notes:""},P.value="",q.value=!0},Ae=r=>{f.value=r,N.value={reorder_level:r.reorder_level||0,max_stock_level:r.max_stock_level||0},P.value="",R.value=!0},Le=r=>{f.value=r,h(r.id_inventory),F.value=!0},ve=()=>{q.value=!1,setTimeout(()=>{f.value=null,P.value=""},300)},Ve=()=>{R.value=!1,setTimeout(()=>{f.value=null,P.value=""},300)};return{inventoryList:B,loading:i,saveLoading:u,stats:m,movementsList:k,movementsLoading:E,lowStockItems:A,alertsLoading:U,stockUpdateDialog:q,bulkUpdateDialog:z,movementsDialog:F,reorderDialog:R,selectedInventory:f,selectedItems:g,currentPage:_,totalItems:n,itemsPerPage:K,filters:b,errorMessage:J,successMessage:C,modalErrorMessage:P,stockUpdateForm:le,reorderForm:N,hasSelectedItems:fe,totalStockValue:me,lowStockCount:re,outOfStockCount:ne,quantityRules:ie,reasonRules:ke,costRules:pe,movementTypeOptions:Se,stockStatusOptions:we,fetchInventoryList:se,fetchStats:d,fetchLowStockAlerts:M,fetchMovements:h,updateStock:Ie,setReorderLevel:ue,openStockUpdateDialog:ge,openReorderDialog:Ae,openMovementsDialog:Le,closeStockUpdateDialog:ve,closeReorderDialog:Ve,closeMovementsDialog:()=>{F.value=!1,setTimeout(()=>{f.value=null,k.value=[]},300)},clearModalError:()=>{P.value=""},onPageChange:r=>{_.value=r,se()},handleFiltersUpdate:r=>{b.value={...b.value,...r},_.value=1,se()},formatCurrency:r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),getStockStatusColor:r=>r.current_stock===0?"error":r.is_low_stock?"warning":"success",getStockStatusText:r=>r.current_stock===0?"Habis":r.reorder_level>0&&r.current_stock<=r.reorder_level?"Menipis":r.max_stock_level&&r.current_stock>r.max_stock_level?"Berlebih":"Tersedia",getMovementTypeColor:r=>({stock_in:"success",stock_out:"warning",adjustment:"info",transfer:"primary",return:"success",damaged:"error",expired:"error"})[r]||"grey"}};function wt(){const B=p([]),i=p([]),u=p(!1),m=p(!1),k=p({total_items:0,total_value:0,low_stock_items:0,out_of_stock_items:0,movements_today:0,movements_this_month:0,top_consumed_items:[],recent_movements:[]}),E=p(1),A=p(0),U=p(10),q=Xe({search:"",stock_status:"all",movement_type:"",date_from:"",date_to:"",item_id:void 0}),z=p(!1),F=p(!1),R=p(null),f=Xe({item_id:0,type:"in",quantity:0,notes:"",cost_per_unit:0}),g=p(""),_=p(""),n=p(""),K=ae(()=>!0),b=[{title:"Semua Status",value:"all"},{title:"Tersedia",value:"in_stock"},{title:"Stok Rendah",value:"low_stock"},{title:"Habis",value:"out_of_stock"}],J=[{title:"Masuk",value:"in",color:"success",icon:"tabler-plus"},{title:"Keluar",value:"out",color:"error",icon:"tabler-minus"},{title:"Penyesuaian",value:"adjustment",color:"warning",icon:"tabler-adjustments"}],C=[{title:"Pembelian",value:"purchase"},{title:"Penjualan",value:"sale"},{title:"Produksi",value:"production"},{title:"Penyesuaian",value:"adjustment"},{title:"Kerusakan",value:"waste"}],P=d=>d.current_stock<=0?{status:"out_of_stock",color:"error",text:"Habis",icon:"tabler-x"}:d.current_stock<=d.minimum_stock?{status:"low_stock",color:"warning",text:"Rendah",icon:"tabler-alert-triangle"}:{status:"in_stock",color:"success",text:"Tersedia",icon:"tabler-check"},le=d=>!d.maximum_stock||d.maximum_stock<=0?100:Math.round(d.current_stock/d.maximum_stock*100),N=async()=>{u.value=!0;try{await new Promise(d=>setTimeout(d,1e3)),B.value=await lt.getAll(),A.value=B.value.length,_.value=""}catch{g.value="Gagal memuat data items"}finally{u.value=!1}},fe=async d=>{u.value=!0;try{const M=await G.getMovements({id_inventory:d,page:E.value,per_page:U.value});i.value=M.data.map(h=>({id:h.id_movement,item_id:h.id_inventory,type:h.movement_type,quantity:h.quantity,unit:"pcs",reference_id:h.reference_number?parseInt(h.reference_number):void 0,reference_type:h.reason,notes:h.notes,cost_per_unit:h.cost_per_unit,total_cost:h.total_cost,created_by:h.created_by,created_at:h.created_at,creator:h.user})),A.value=M.total}catch(M){console.error("Failed to fetch stock movements:",M),i.value=[]}finally{u.value=!1}},me=async()=>{try{await N();const d=B.value;k.value={total_items:d.length,total_value:d.reduce((M,h)=>M+h.current_stock*h.cost_per_unit,0),low_stock_items:d.filter(M=>M.current_stock<=M.minimum_stock&&M.current_stock>0).length,out_of_stock_items:d.filter(M=>M.current_stock<=0).length,movements_today:0,movements_this_month:0,top_consumed_items:[],recent_movements:[]}}catch(d){console.error("Failed to fetch stats:",d)}},re=async()=>{m.value=!0,n.value="";try{const d=await fetch("/api/inventory/movement",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({item_id:f.item_id,movement_type:f.type,quantity:f.quantity,notes:f.notes,cost_per_unit:f.cost_per_unit})});if(!d.ok){const M=await d.json();throw new Error(M.message||"Gagal mencatat pergerakan stok")}_.value=`Stock ${f.type==="in"?"masuk":f.type==="out"?"keluar":"disesuaikan"} berhasil dicatat`,pe(),await N(),await me()}catch(d){n.value=d.message||"Gagal mencatat pergerakan stok"}finally{m.value=!1}},ne=d=>{R.value=d,Object.assign(f,{item_id:d.id_item,type:"in",quantity:0,notes:"",cost_per_unit:d.cost_per_unit}),z.value=!0},ie=d=>{R.value=d,Object.assign(f,{item_id:d.id_item,type:"out",quantity:0,notes:"",cost_per_unit:d.cost_per_unit}),z.value=!0},ke=d=>{R.value=d,Object.assign(f,{item_id:d.id_item,type:"adjustment",quantity:d.current_stock,notes:"",cost_per_unit:d.cost_per_unit}),F.value=!0},pe=()=>{z.value=!1,F.value=!1,n.value="",R.value=null};return{itemsList:B,stockMovements:i,loading:u,saveLoading:m,stats:k,currentPage:E,totalItems:A,itemsPerPage:U,filters:q,movementDialog:z,adjustmentDialog:F,selectedItem:R,movementFormData:f,errorMessage:g,successMessage:_,modalErrorMessage:n,canManageStock:K,stockStatusOptions:b,movementTypeOptions:J,referenceTypeOptions:C,getStockStatus:P,getStockPercentage:le,fetchItems:N,fetchStockMovements:fe,fetchStats:me,recordStockMovement:re,openStockInDialog:ne,openStockOutDialog:ie,openAdjustmentDialog:ke,closeMovementDialog:pe,clearModalError:()=>{n.value=""},onPageChange:d=>{E.value=d,N()},handleFiltersUpdate:d=>{Object.assign(q,d),E.value=1,N()}}}const Vt={class:"inventory-management"},Mt={class:"d-flex justify-space-between align-center mb-6"},Ct={class:"d-flex gap-3 align-center"},Dt={class:"d-flex align-center justify-space-between"},Ut={class:"text-h4 font-weight-bold text-primary"},Pt={class:"d-flex align-center justify-space-between"},jt={class:"text-h4 font-weight-bold text-warning"},Tt={class:"d-flex align-center justify-space-between"},Et={class:"text-h4 font-weight-bold text-error"},Rt={class:"d-flex align-center justify-space-between"},$t={class:"text-h4 font-weight-bold text-success"},It={class:"d-flex align-center justify-space-between"},At={class:"d-flex align-center gap-3"},Lt={class:"d-flex gap-2"},qt={class:"d-flex flex-wrap gap-2"},zt={class:"d-flex align-center"},Ft={class:"font-weight-medium"},Ot={class:"text-medium-emphasis"},Bt={class:"text-center"},Kt={class:"text-h6 font-weight-bold"},Nt={key:0,class:"text-warning"},Ht={class:"text-center"},Gt={class:"text-center"},Jt={class:"text-end"},Xt={class:"text-end font-weight-medium text-success"},Wt={class:"d-flex align-center gap-1"},Zt={class:"text-center py-12"},Qt={class:"d-flex justify-center gap-3"},Yt={class:"text-center py-8"},ea={class:"d-flex align-center gap-2"},ta={class:"d-flex align-center gap-3"},aa={class:"font-weight-bold"},sa={class:"text-caption"},oa={class:"text-caption"},la={class:"d-flex gap-3 justify-end"},ra={class:"d-flex align-center gap-2"},na={class:"text-white"},ia={class:"d-flex align-center gap-3"},ua={class:"font-weight-bold"},ca={class:"text-caption"},da=We({__name:"inventory-management",setup(B){const{xs:i}=tt(),u=()=>{re(),ne(),ie()},{inventoryList:m,loading:k,saveLoading:E,stats:A,lowStockItems:U,stockUpdateDialog:q,reorderDialog:z,movementsDialog:F,selectedInventory:R,currentPage:f,totalItems:g,itemsPerPage:_,filters:n,errorMessage:K,successMessage:b,modalErrorMessage:J,stockUpdateForm:C,reorderForm:P,totalStockValue:le,lowStockCount:N,outOfStockCount:fe,stockStatusOptions:me,fetchInventoryList:re,fetchStats:ne,fetchLowStockAlerts:ie,updateStock:ke,setReorderLevel:pe,openStockUpdateDialog:Se,openReorderDialog:we,openMovementsDialog:se,closeStockUpdateDialog:d,closeReorderDialog:M,clearModalError:h,onPageChange:Ie,handleFiltersUpdate:ue,formatCurrency:ge,getStockStatusColor:Ae,getStockStatusText:Le}=St(),{recordStockMovement:ve,openAdjustmentDialog:Ve,movementDialog:Me,adjustmentDialog:Ce,selectedItem:H,movementFormData:D,saveLoading:qe,closeMovementDialog:ye,successMessage:De,modalErrorMessage:ze,clearModalError:r}=wt(),$=S=>S.item?{id_item:S.item.id_item,item_code:S.item.item_code,name:S.item.name,description:S.item.description||"",unit:S.item.unit,cost_per_unit:parseFloat(S.item.cost_per_unit),current_stock:S.current_stock,minimum_stock:S.reorder_level||0,active:!0,storage_location:S.item.storage_location||"",expiry_date:S.item.expiry_date||null,properties:S.item.properties||null,created_by:S.item.created_by||null,updated_by:S.item.updated_by||null,created_at:S.item.created_at,updated_at:S.item.updated_at,deleted_at:S.item.deleted_at||null}:null,Ue=S=>{const s=$(S);s&&Ve(s)},_e=ae(()=>A.value);return ae(()=>m.value),ae(()=>k.value),at(()=>{re(),ne(),ie()}),(S,s)=>{var Oe,Be,Ke,Ne;return x(),de("div",Vt,[l("div",Mt,[s[32]||(s[32]=l("div",null,[l("h1",{class:"text-h4 font-weight-bold inventory-title"}," Kelola Inventory "),l("p",{class:"text-body-1 text-medium-emphasis inventory-subtitle"}," Kelola stok barang dan pergerakan inventory ")],-1)),l("div",Ct,[e(V,{color:"primary","prepend-icon":"tabler-refresh",variant:"outlined",onClick:u},{default:a(()=>s[31]||(s[31]=[v(" Refresh Data ")])),_:1,__:[31]})])]),t(K)?(x(),I(te,{key:0,type:"error",variant:"outlined",class:"mb-4",text:t(K),closable:"","onClick:close":s[0]||(s[0]=o=>K.value="")},null,8,["text"])):T("",!0),t(b)?(x(),I(te,{key:1,type:"success",variant:"outlined",class:"mb-4",text:t(b),closable:"","onClick:close":s[1]||(s[1]=o=>b.value="")},null,8,["text"])):T("",!0),t(De)?(x(),I(te,{key:2,type:"success",variant:"outlined",class:"mb-4",text:t(De),closable:"","onClick:close":s[2]||(s[2]=o=>De.value="")},null,8,["text"])):T("",!0),e(Y,{class:"mb-6"},{default:a(()=>[e(w,{cols:"12",md:"3"},{default:a(()=>[e(L,{class:"stats-card"},{default:a(()=>[e(O,null,{default:a(()=>[l("div",Dt,[l("div",null,[l("div",Ut,c(_e.value.total_items||0),1),s[33]||(s[33]=l("div",{class:"text-caption text-medium-emphasis"}," Total Produk ",-1))]),e(j,{icon:"tabler-package",size:"48",class:"text-primary opacity-50"})])]),_:1})]),_:1})]),_:1}),e(w,{cols:"12",md:"3"},{default:a(()=>[e(L,{class:"stats-card"},{default:a(()=>[e(O,null,{default:a(()=>[l("div",Pt,[l("div",null,[l("div",jt,c(t(N)||0),1),s[34]||(s[34]=l("div",{class:"text-caption text-medium-emphasis"}," Stok Menipis ",-1))]),e(j,{icon:"tabler-alert-triangle",size:"48",class:"text-warning opacity-50"})])]),_:1})]),_:1})]),_:1}),e(w,{cols:"12",md:"3"},{default:a(()=>[e(L,{class:"stats-card"},{default:a(()=>[e(O,null,{default:a(()=>[l("div",Tt,[l("div",null,[l("div",Et,c(t(fe)||0),1),s[35]||(s[35]=l("div",{class:"text-caption text-medium-emphasis"}," Stok Habis ",-1))]),e(j,{icon:"tabler-x-circle",size:"48",class:"text-error opacity-50"})])]),_:1})]),_:1})]),_:1}),e(w,{cols:"12",md:"3"},{default:a(()=>[e(L,{class:"stats-card"},{default:a(()=>[e(O,null,{default:a(()=>[l("div",Rt,[l("div",null,[l("div",$t,c(t(ge)(t(le)||0)),1),s[36]||(s[36]=l("div",{class:"text-caption text-medium-emphasis"}," Nilai Stok ",-1))]),e(j,{icon:"tabler-currency-dollar",size:"48",class:"text-success opacity-50"})])]),_:1})]),_:1})]),_:1})]),_:1}),e(L,{class:"mb-6 info-card",color:"info",variant:"tonal"},{default:a(()=>[e(O,null,{default:a(()=>[l("div",It,[l("div",At,[e(j,{icon:"tabler-info-circle",size:"32",class:"text-info"}),s[37]||(s[37]=l("div",null,[l("div",{class:"text-subtitle-1 font-weight-medium text-info"}," Sistem Stock Movement Otomatis "),l("div",{class:"text-body-2 text-medium-emphasis"},[v(" Stok akan bertambah otomatis saat purchasing dan berkurang saat penjualan POS. Gunakan tombol "),l("strong",null,"Penyesuaian"),v(" untuk koreksi manual jika diperlukan. ")])],-1))]),l("div",Lt,[e(Z,{color:"success",variant:"tonal",size:"small"},{default:a(()=>[e(j,{icon:"tabler-shopping-cart",class:"me-1"}),s[38]||(s[38]=v(" Purchase → Stok + "))]),_:1,__:[38]}),e(Z,{color:"error",variant:"tonal",size:"small"},{default:a(()=>[e(j,{icon:"tabler-cash",class:"me-1"}),s[39]||(s[39]=v(" POS Sale → Stok - "))]),_:1,__:[39]})])])]),_:1})]),_:1}),t(U).length>0?(x(),I(L,{key:3,class:"mb-6 low-stock-alert"},{default:a(()=>[e(ce,{class:"d-flex align-center"},{default:a(()=>[e(j,{icon:"tabler-alert-triangle",class:"text-warning me-2"}),v(" Peringatan Stok Menipis ("+c(t(U).length)+" produk) ",1)]),_:1}),e(O,null,{default:a(()=>[l("div",qt,[(x(!0),de(st,null,ot(t(U).slice(0,10),o=>(x(),I(Z,{key:o.id_inventory,color:"warning",variant:"outlined",size:"small"},{default:a(()=>{var y;return[v(c((y=o.product)==null?void 0:y.name)+" ("+c(o.current_stock)+"/"+c(o.reorder_level)+") ",1)]}),_:2},1024))),128)),t(U).length>10?(x(),I(Z,{key:0,color:"warning",variant:"tonal",size:"small"},{default:a(()=>[v(" +"+c(t(U).length-10)+" lainnya ",1)]),_:1})):T("",!0)])]),_:1})]),_:1})):T("",!0),!t(k)&&t(m).length===0&&!t(K)?(x(),I(L,{key:4,class:"mb-6"},{default:a(()=>[e(O,{class:"text-center py-6"},{default:a(()=>[e(j,{icon:"tabler-info-circle",size:"48",class:"text-info mb-3"}),s[40]||(s[40]=l("div",{class:"text-h6 mb-2"}," Sistem Inventory Management Siap Digunakan ",-1)),s[41]||(s[41]=l("div",{class:"text-body-2 text-medium-emphasis"}," Buat produk dan variant terlebih dahulu untuk mulai melacak inventory. ",-1))]),_:1,__:[40,41]})]),_:1})):T("",!0),t(k)||t(m).length>0?(x(),I(L,{key:5,class:"mb-6"},{default:a(()=>[e(O,null,{default:a(()=>[e(Y,null,{default:a(()=>[e(w,{cols:"12",md:"4"},{default:a(()=>[e(X,{modelValue:t(n).search,"onUpdate:modelValue":[s[3]||(s[3]=o=>t(n).search=o),s[4]||(s[4]=o=>t(ue)({search:o}))],label:"Cari inventory produk...",placeholder:"Nama produk, SKU, atau variant","prepend-inner-icon":"tabler-search",clearable:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(w,{cols:"12",md:"3"},{default:a(()=>[e(Te,{modelValue:t(n).stock_status,"onUpdate:modelValue":[s[5]||(s[5]=o=>t(n).stock_status=o),s[6]||(s[6]=o=>t(ue)({stock_status:o}))],label:"Status Stok",items:t(me),clearable:"",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),e(w,{cols:"12",md:"2"},{default:a(()=>[e(Te,{modelValue:t(n).sort_by,"onUpdate:modelValue":[s[7]||(s[7]=o=>t(n).sort_by=o),s[8]||(s[8]=o=>t(ue)({sort_by:o}))],label:"Urutkan",items:[{title:"Stok Tersedia",value:"current_stock"},{title:"Nama Produk",value:"product_name"},{title:"Terakhir Diperbarui",value:"updated_at"}],variant:"outlined"},null,8,["modelValue"])]),_:1}),e(w,{cols:"12",md:"2"},{default:a(()=>[e(Te,{modelValue:t(n).sort_order,"onUpdate:modelValue":[s[9]||(s[9]=o=>t(n).sort_order=o),s[10]||(s[10]=o=>t(ue)({sort_order:o}))],label:"Urutan",items:[{title:"A-Z / 0-9",value:"asc"},{title:"Z-A / 9-0",value:"desc"}],variant:"outlined"},null,8,["modelValue"])]),_:1}),e(w,{cols:"12",md:"1"},{default:a(()=>[e(V,{variant:"outlined",color:"secondary",block:"",onClick:s[11]||(s[11]=o=>t(ue)({search:"",stock_status:"all",sort_by:"current_stock",sort_order:"asc"}))},{default:a(()=>s[42]||(s[42]=[v(" Reset ")])),_:1,__:[42]})]),_:1})]),_:1})]),_:1})]),_:1})):T("",!0),e(L,{class:"products-inventory-table"},{default:a(()=>[e(ce,{class:"d-flex align-center gap-2 coffee-header"},{default:a(()=>[e(j,{icon:"tabler-package",class:"text-white"}),s[43]||(s[43]=l("span",{class:"text-white"},"Inventory Produk",-1)),e(he),e(Z,{color:"white",size:"small",variant:"tonal"},{default:a(()=>[v(c(t(g))+" Produk ",1)]),_:1})]),_:1,__:[43]}),e(W),e(Qe,{headers:[{title:"Produk/Variant",key:"item_name",sortable:!1},{title:"SKU",key:"sku",sortable:!1},{title:"Stok Saat Ini",key:"current_stock",sortable:!1},{title:"Stok Tersedia",key:"available_stock",sortable:!1},{title:"Status",key:"status",sortable:!1},{title:"Reorder Level",key:"reorder_level",sortable:!1},{title:"Harga Rata-rata",key:"average_cost",sortable:!1},{title:"Nilai Stok",key:"stock_value",sortable:!1},{title:"Aksi",key:"actions",sortable:!1}],items:t(m),loading:t(k),"items-per-page":t(_),page:t(f),"server-items-length":t(g),class:"text-no-wrap","onUpdate:page":t(Ie)},{"item.item_name":a(({item:o})=>{var y,Q,He,Ge,Je;return[l("div",zt,[l("div",null,[l("div",Ft,c(((y=o.item)==null?void 0:y.name)||((Q=o.product)==null?void 0:Q.name)||"Unknown Item"),1),l("small",Ot,c(((He=o.item)==null?void 0:He.description)||((Je=(Ge=o.product)==null?void 0:Ge.category)==null?void 0:Je.name)||"-"),1)])])]}),"item.sku":a(({item:o})=>[e(Z,{variant:"outlined",size:"small",color:"primary"},{default:a(()=>{var y,Q;return[v(c(((y=o.item)==null?void 0:y.item_code)||((Q=o.product)==null?void 0:Q.sku)||"N/A"),1)]}),_:2},1024)]),"item.current_stock":a(({item:o})=>[l("div",Bt,[l("div",Kt,c(o.current_stock),1),o.reserved_stock>0?(x(),de("small",Nt," ("+c(o.reserved_stock)+" reserved) ",1)):T("",!0)])]),"item.available_stock":a(({item:o})=>[l("div",Ht,[e(Z,{color:o.available_stock>0?"success":"error",variant:"tonal",size:"small"},{default:a(()=>[v(c(o.available_stock),1)]),_:2},1032,["color"])])]),"item.status":a(({item:o})=>[e(Z,{color:t(Ae)(o),variant:"tonal",size:"small"},{default:a(()=>[v(c(t(Le)(o)),1)]),_:2},1032,["color"])]),"item.reorder_level":a(({item:o})=>[l("div",Gt,c(o.reorder_level||"-"),1)]),"item.average_cost":a(({item:o})=>[l("div",Jt,c(t(ge)(o.average_cost)),1)]),"item.stock_value":a(({item:o})=>[l("div",Xt,c(t(ge)(o.current_stock*o.average_cost)),1)]),"item.actions":a(({item:o})=>[l("div",Wt,[e(Ee,{text:"Penyesuaian Stok"},{activator:a(({props:y})=>[e(V,Pe(y,{icon:"tabler-adjustments",color:"warning",variant:"text",size:"small",disabled:!o.item,onClick:Q=>Ue(o)}),null,16,["disabled","onClick"])]),_:2},1024),e(Ee,{text:"Update Stok"},{activator:a(({props:y})=>[e(V,Pe(y,{icon:"tabler-edit",color:"primary",variant:"text",size:"small",onClick:Q=>t(Se)(o)}),null,16,["onClick"])]),_:2},1024),e(Ee,{text:"Set Reorder Level"},{activator:a(({props:y})=>[e(V,Pe(y,{icon:"tabler-settings",color:"info",variant:"text",size:"small",onClick:Q=>t(we)(o)}),null,16,["onClick"])]),_:2},1024),e(Ee,{text:"Lihat Riwayat"},{activator:a(({props:y})=>[e(V,Pe(y,{icon:"tabler-history",color:"secondary",variant:"text",size:"small",onClick:Q=>t(se)(o)}),null,16,["onClick"])]),_:2},1024)])]),"no-data":a(()=>[l("div",Zt,[e(j,{icon:"tabler-package-off",size:"64",class:"text-medium-emphasis mb-4"}),s[46]||(s[46]=l("div",{class:"text-h5 text-medium-emphasis mb-2"}," Belum Ada Data Inventory ",-1)),s[47]||(s[47]=l("div",{class:"text-body-1 text-medium-emphasis mb-4"},[v(" Data inventory akan muncul setelah produk dan variant dibuat."),l("br"),v(" Silakan buat produk terlebih dahulu di menu "),l("strong",null,"Kelola Produk"),v(". ")],-1)),l("div",Qt,[e(V,{color:"primary","prepend-icon":"tabler-plus",to:"/products-management"},{default:a(()=>s[44]||(s[44]=[v(" Buat Produk Baru ")])),_:1,__:[44]}),e(V,{variant:"outlined","prepend-icon":"tabler-refresh",onClick:s[12]||(s[12]=o=>{t(re)(),t(ne)(),t(ie)()})},{default:a(()=>s[45]||(s[45]=[v(" Refresh Data ")])),_:1,__:[45]})])])]),loading:a(()=>[l("div",Yt,[e(Ze,{indeterminate:"",color:"primary",size:"40"}),s[48]||(s[48]=l("div",{class:"mt-4 text-medium-emphasis"}," Memuat data inventory... ",-1))])]),_:1},8,["items","loading","items-per-page","page","server-items-length","onUpdate:page"])]),_:1}),e(xe,{modelValue:t(q),"onUpdate:modelValue":s[19]||(s[19]=o=>be(q)?q.value=o:null),"max-width":"800px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:a(()=>[e(L,null,{default:a(()=>[e(ce,null,{default:a(()=>{var o,y;return[v(" Update Stok - "+c((y=(o=t(R))==null?void 0:o.product)==null?void 0:y.name),1)]}),_:1}),e(W),e(Re,{onSubmit:je(t(ke),["prevent"])},{default:a(()=>[e(O,null,{default:a(()=>[t(J)?(x(),I(te,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4","onClick:close":t(h)},{default:a(()=>[v(c(t(J)),1)]),_:1},8,["onClick:close"])):T("",!0),e(Y,null,{default:a(()=>[e(w,{cols:"12",md:"6"},{default:a(()=>[e(Te,{modelValue:t(C).movement_type,"onUpdate:modelValue":s[13]||(s[13]=o=>t(C).movement_type=o),label:"Jenis Pergerakan *",items:[{title:"Stock Masuk",value:"stock_in"},{title:"Stock Keluar",value:"stock_out"},{title:"Penyesuaian",value:"adjustment"},{title:"Transfer",value:"transfer"},{title:"Retur",value:"return"}],variant:"outlined"},null,8,["modelValue"])]),_:1}),e(w,{cols:"12",md:"6"},{default:a(()=>[e(X,{modelValue:t(C).quantity,"onUpdate:modelValue":s[14]||(s[14]=o=>t(C).quantity=o),modelModifiers:{number:!0},label:"Kuantitas *",type:"number",min:"1",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(Y,null,{default:a(()=>[e(w,{cols:"12"},{default:a(()=>[e(X,{modelValue:t(C).reason,"onUpdate:modelValue":s[15]||(s[15]=o=>t(C).reason=o),label:"Alasan *",placeholder:"Contoh: Pembelian dari supplier, Penjualan, dll",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(Y,null,{default:a(()=>[e(w,{cols:"12",md:"6"},{default:a(()=>[e(X,{modelValue:t(C).reference_number,"onUpdate:modelValue":s[16]||(s[16]=o=>t(C).reference_number=o),label:"Nomor Referensi",placeholder:"PO-001, SO-001, dll",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(w,{cols:"12",md:"6"},{default:a(()=>[e(X,{modelValue:t(C).cost_per_unit,"onUpdate:modelValue":s[17]||(s[17]=o=>t(C).cost_per_unit=o),modelModifiers:{number:!0},label:"Harga per Unit",type:"number",min:"0",step:"0.01",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(Y,null,{default:a(()=>[e(w,{cols:"12"},{default:a(()=>[e(Fe,{modelValue:t(C).notes,"onUpdate:modelValue":s[18]||(s[18]=o=>t(C).notes=o),label:"Catatan",rows:"2",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(W),e($e,{class:"pa-4"},{default:a(()=>[e(he),e(V,{variant:"outlined",onClick:t(d)},{default:a(()=>s[49]||(s[49]=[v(" Batal ")])),_:1,__:[49]},8,["onClick"]),e(V,{type:"submit",color:"primary",loading:t(E)},{default:a(()=>s[50]||(s[50]=[v(" Update Stok ")])),_:1,__:[50]},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","fullscreen"]),e(xe,{modelValue:t(z),"onUpdate:modelValue":s[22]||(s[22]=o=>be(z)?z.value=o:null),"max-width":"600px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:a(()=>[e(L,null,{default:a(()=>[e(ce,null,{default:a(()=>{var o,y;return[v(" Set Reorder Level - "+c((y=(o=t(R))==null?void 0:o.product)==null?void 0:y.name),1)]}),_:1}),e(W),e(Re,{onSubmit:je(t(pe),["prevent"])},{default:a(()=>[e(O,null,{default:a(()=>[t(J)?(x(),I(te,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4","onClick:close":t(h)},{default:a(()=>[v(c(t(J)),1)]),_:1},8,["onClick:close"])):T("",!0),e(Y,null,{default:a(()=>[e(w,{cols:"12"},{default:a(()=>[e(X,{modelValue:t(P).reorder_level,"onUpdate:modelValue":s[20]||(s[20]=o=>t(P).reorder_level=o),modelModifiers:{number:!0},label:"Reorder Level *",type:"number",min:"0",hint:"Stok minimum sebelum perlu restock","persistent-hint":"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(Y,null,{default:a(()=>[e(w,{cols:"12"},{default:a(()=>[e(X,{modelValue:t(P).max_stock_level,"onUpdate:modelValue":s[21]||(s[21]=o=>t(P).max_stock_level=o),modelModifiers:{number:!0},label:"Max Stock Level",type:"number",min:"0",hint:"Stok maksimum yang diizinkan","persistent-hint":"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(W),e($e,{class:"pa-4"},{default:a(()=>[e(he),e(V,{variant:"outlined",onClick:t(M)},{default:a(()=>s[51]||(s[51]=[v(" Batal ")])),_:1,__:[51]},8,["onClick"]),e(V,{type:"submit",color:"primary",loading:t(E)},{default:a(()=>s[52]||(s[52]=[v(" Simpan ")])),_:1,__:[52]},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","fullscreen"]),e(ht,{modelValue:t(F),"onUpdate:modelValue":s[23]||(s[23]=o=>be(F)?F.value=o:null),"inventory-id":(Be=(Oe=t(R))==null?void 0:Oe.id_inventory)==null?void 0:Be.toString(),"inventory-name":(Ne=(Ke=t(R))==null?void 0:Ke.item)==null?void 0:Ne.name},null,8,["modelValue","inventory-id","inventory-name"]),e(xe,{modelValue:t(Ce),"onUpdate:modelValue":s[26]||(s[26]=o=>be(Ce)?Ce.value=o:null),"max-width":"600px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:a(()=>[e(L,{class:"stock-movement-dialog coffee-dialog"},{default:a(()=>[e(ce,{class:"d-flex align-center justify-space-between coffee-header"},{default:a(()=>[l("div",ea,[e(j,{icon:"tabler-adjustments",class:"text-white"}),s[53]||(s[53]=l("span",{class:"text-white"}," Penyesuaian Stok ",-1))]),e(V,{icon:"tabler-x",variant:"text",color:"white",onClick:t(ye)},null,8,["onClick"])]),_:1}),e(W),e(O,{class:"pa-6"},{default:a(()=>[e(Re,{onSubmit:je(t(ve),["prevent"])},{default:a(()=>{var o;return[t(H)?(x(),I(te,{key:0,color:"info",variant:"tonal",class:"mb-4"},{default:a(()=>[l("div",ta,[e(j,{icon:"tabler-package"}),l("div",null,[l("div",aa,c(t(H).name),1),l("div",sa,c(t(H).item_code),1),l("div",oa,"Stok Saat Ini: "+c(t(H).current_stock)+" "+c(t(H).unit),1)])])]),_:1})):T("",!0),t(ze)?(x(),I(te,{key:1,type:"error",variant:"outlined",class:"mb-4",text:t(ze),closable:"","onClick:close":t(r)},null,8,["text","onClick:close"])):T("",!0),e(X,{modelValue:t(D).quantity,"onUpdate:modelValue":s[24]||(s[24]=y=>t(D).quantity=y),modelModifiers:{number:!0},label:"Stok Baru",type:"number",min:"0",step:"0.001",variant:"outlined",suffix:(o=t(H))==null?void 0:o.unit,class:"mb-4",required:""},null,8,["modelValue","suffix"]),e(Fe,{modelValue:t(D).notes,"onUpdate:modelValue":s[25]||(s[25]=y=>t(D).notes=y),label:"Catatan (opsional)",variant:"outlined",rows:"3",class:"mb-4"},null,8,["modelValue"]),l("div",la,[e(V,{variant:"outlined",onClick:t(ye)},{default:a(()=>s[54]||(s[54]=[v(" Batal ")])),_:1,__:[54]},8,["onClick"]),e(V,{type:"submit",color:"primary",class:"coffee-primary",loading:t(qe)},{default:a(()=>s[55]||(s[55]=[v(" Simpan Penyesuaian ")])),_:1,__:[55]},8,["loading"])])]}),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"]),e(xe,{modelValue:t(Me),"onUpdate:modelValue":s[30]||(s[30]=o=>be(Me)?Me.value=o:null),"max-width":"800px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:a(()=>[e(L,{class:"stock-movement-dialog coffee-dialog"},{default:a(()=>[e(ce,{class:"d-flex align-center justify-space-between coffee-header"},{default:a(()=>[l("div",ra,[e(j,{icon:t(D).type==="in"?"tabler-plus":"tabler-minus",class:"text-white"},null,8,["icon"]),l("span",na,c(t(D).type==="in"?"Stok Masuk":t(D).type==="out"?"Stok Keluar":"Penyesuaian Stok"),1)]),e(V,{icon:"tabler-x",variant:"text",color:"white",onClick:t(ye)},null,8,["onClick"])]),_:1}),e(W),e(O,{class:"pa-6"},{default:a(()=>[e(Re,{onSubmit:je(t(ve),["prevent"])},{default:a(()=>[t(H)?(x(),I(te,{key:0,color:"info",variant:"tonal",class:"mb-4"},{default:a(()=>[l("div",ia,[e(rt,{color:"primary",size:"40",variant:"tonal"},{default:a(()=>[e(j,{icon:"tabler-package"})]),_:1}),l("div",null,[l("div",ua,c(t(H).name),1),l("div",ca," Stok saat ini: "+c(t(H).current_stock)+" "+c(t(H).unit),1)])])]),_:1})):T("",!0),e(Y,null,{default:a(()=>[e(w,{cols:"12",md:"6"},{default:a(()=>[e(X,{modelValue:t(D).quantity,"onUpdate:modelValue":s[27]||(s[27]=o=>t(D).quantity=o),modelModifiers:{number:!0},label:`Jumlah ${t(D).type==="in"?"Masuk":t(D).type==="out"?"Keluar":"Akhir"}`,type:"number",variant:"outlined",required:"",min:t(D).type==="adjustment"?0:1,rules:[o=>o>0||"Jumlah harus lebih dari 0"]},null,8,["modelValue","label","min","rules"])]),_:1}),e(w,{cols:"12",md:"6"},{default:a(()=>[e(X,{modelValue:t(D).cost_per_unit,"onUpdate:modelValue":s[28]||(s[28]=o=>t(D).cost_per_unit=o),modelModifiers:{number:!0},label:"Harga per Unit",type:"number",variant:"outlined",prefix:"Rp",readonly:t(D).type!=="in"},null,8,["modelValue","readonly"])]),_:1}),e(w,{cols:"12"},{default:a(()=>[e(Fe,{modelValue:t(D).notes,"onUpdate:modelValue":s[29]||(s[29]=o=>t(D).notes=o),label:"Catatan",placeholder:"Masukkan catatan untuk pergerakan stok...",rows:"3",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),e(W),e($e,{class:"pa-6"},{default:a(()=>[e(he),e(V,{variant:"outlined",class:"coffee-secondary",onClick:t(ye)},{default:a(()=>s[56]||(s[56]=[v(" Batal ")])),_:1,__:[56]},8,["onClick"]),e(V,{color:"primary",class:"coffee-primary",loading:t(qe),onClick:t(ve)},{default:a(()=>s[57]||(s[57]=[v(" Simpan ")])),_:1,__:[57]},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}}),qa=Ye(da,[["__scopeId","data-v-34a73f02"]]);export{qa as default};

import{g as A}from"./auth-CuuXRWj5.js";import{V as r,r as T}from"./main-C497BM6z.js";const e=T({assets:[],asset:null,loading:!1,error:null,pagination:{current_page:1,last_page:1,per_page:20,total:0,from:0,to:0},filters:{search:"",category:"",location:"",condition:"",status:"",department:"",assigned_to:"",sort_by:"asset_code",sort_order:"asc"}}),k=()=>{const o=r(()=>e.value.assets),d=r(()=>e.value.asset),l=r(()=>e.value.loading),p=r(()=>e.value.error),g=r(()=>e.value.pagination),_=r(()=>e.value.filters),u=r(()=>Array.isArray(o.value)&&o.value.length>0),m=r(()=>!l.value&&!u.value),v=r(()=>Array.isArray(o.value)?o.value.filter(a=>a.status==="active"):[]),f=r(()=>Array.isArray(o.value)?o.value.filter(a=>a.status==="maintenance"):[]),c=async(a=1)=>{e.value.loading=!0,e.value.error=null;try{const s=A(),i={"Content-Type":"application/json",Accept:"application/json"};s&&(i.Authorization=`Bearer ${s}`);const n=await fetch("http://localhost:8000/api/test-assets",{method:"GET",headers:i});if(!n.ok){const y=await n.text();throw new Error(`HTTP error! status: ${n.status} - ${y}`)}const t=await n.json();t.success&&t.data?t.data.data&&Array.isArray(t.data.data)?(e.value.assets=t.data.data,e.value.pagination={current_page:t.data.current_page||1,last_page:t.data.last_page||1,per_page:t.data.per_page||20,total:t.data.total||0,from:t.data.from||0,to:t.data.to||0}):Array.isArray(t.data)?e.value.assets=t.data:e.value.assets=[]:Array.isArray(t)?e.value.assets=t:e.value.assets=[]}catch(s){const i=s instanceof Error?s.message:"Failed to fetch assets";e.value.error=i;const n=h();e.value.assets=n,e.value.error=`API Error: ${i}. Showing sample data instead.`}finally{e.value.loading=!1}},h=()=>[{id:1,asset_code:"KIT-001",name:"Commercial Oven",category:"Kitchen Equipment",brand:"Rational",model:"SelfCookingCenter",serial_number:"RAT123456",purchase_date:"2024-01-15",purchase_price:15999.99,location:"Main Kitchen",condition:"excellent",status:"active",description:"Commercial combi oven for restaurant kitchen",supplier:"Restaurant Supply Co",warranty_until:"2027-01-15",assigned_to:"Head Chef",department:"Kitchen",image_url:void 0,created_at:"2024-01-15T10:00:00Z",updated_at:"2024-01-15T10:00:00Z"},{id:2,asset_code:"KIT-002",name:"Deep Fryer",category:"Kitchen Equipment",brand:"Henny Penny",model:"PFE-500",serial_number:"HP789012",purchase_date:"2024-02-01",purchase_price:8500,location:"Frying Station",condition:"good",status:"active",description:"Professional deep fryer for restaurant use",supplier:"Kitchen Pro Indonesia",warranty_until:"2026-02-01",assigned_to:"Fry Cook",department:"Kitchen",image_url:void 0,created_at:"2024-02-01T09:30:00Z",updated_at:"2024-02-01T09:30:00Z"},{id:3,asset_code:"POS-001",name:"POS Terminal",category:"Technology",brand:"Square",model:"Terminal",serial_number:"SQ345678",purchase_date:"2024-01-20",purchase_price:1200,location:"Front Counter",condition:"excellent",status:"active",description:"Point of sale terminal for order processing",supplier:"Tech Solutions",warranty_until:"2026-01-20",assigned_to:"Cashier",department:"Front of House",image_url:void 0,created_at:"2024-01-20T11:00:00Z",updated_at:"2024-01-20T11:00:00Z"},{id:4,asset_code:"FUR-001",name:"Dining Table Set",category:"Furniture",brand:"Restaurant Furniture Co",model:"Classic 4-Top",serial_number:"RFC901234",purchase_date:"2023-12-15",purchase_price:450,location:"Dining Area",condition:"good",status:"active",description:"Wooden dining table with 4 chairs",supplier:"Furniture Direct",warranty_until:"2025-12-15",assigned_to:"Floor Manager",department:"Front of House",image_url:void 0,created_at:"2023-12-15T14:00:00Z",updated_at:"2023-12-15T14:00:00Z"},{id:5,asset_code:"KIT-003",name:"Refrigerator",category:"Kitchen Equipment",brand:"True",model:"T-49-GC",serial_number:"TRUE567890",purchase_date:"2024-01-10",purchase_price:3200,location:"Cold Storage",condition:"excellent",status:"active",description:"Commercial refrigerator for food storage",supplier:"Cold Chain Solutions",warranty_until:"2027-01-10",assigned_to:"Kitchen Manager",department:"Kitchen",image_url:void 0,created_at:"2024-01-10T08:00:00Z",updated_at:"2024-01-10T08:00:00Z"}];return{assets:o,asset:d,loading:l,error:p,pagination:g,filters:_,hasAssets:u,isEmpty:m,activeAssets:v,maintenanceAssets:f,fetchAssets:c,searchAssets:async a=>{e.value.filters.search=a,await c()},filterAssets:async a=>{Object.assign(e.value.filters,a),await c()},resetFilters:()=>{e.value.filters={search:"",category:"",location:"",condition:"",status:"",department:"",assigned_to:"",sort_by:"asset_code",sort_order:"asc"}},deleteAsset:async a=>{e.value.assets=e.value.assets.filter(s=>s.id!==a)},bulkDeleteAssets:async a=>{e.value.assets=e.value.assets.filter(s=>!a.includes(s.id))},getCategories:async()=>[...new Set(e.value.assets.map(s=>s.category))],getLocations:async()=>[...new Set(e.value.assets.map(s=>s.location))]}};export{k as u};

import{D as Ke}from"./DeleteConfirmationDialog-Dfewvuyh.js";import{d as X,r as h,V as N,g as S,f as t,a3 as le,m as n,b as e,e as s,X as V,t as g,a1 as x,a0 as je,s as v,c as O,l as D,i as Le,F as Ge,o as y,_ as J,w as He,v as qe,az as ke,D as Xe,at as _e}from"./main-ty1KRTJn.js";import{V as Je}from"./VDialog-C4FhJAvV.js";import{b as de,c as Qe,V as $}from"./VCard-CsS9dD_V.js";import{V as se}from"./VDivider-Dlb0Lzdk.js";import{V as A}from"./VCardText-BeSJ0McA.js";import{V as We}from"./VForm-6RD1yNad.js";import{V as Q,a as c}from"./VRow-CoFMZBg0.js";import{V as j,a as te}from"./VTextField-CFY9BbUW.js";import{V as L}from"./VSelect-BKlBMAUD.js";import{V as Ye}from"./VTextarea-DQmlzOg6.js";import{V as ae}from"./VSwitch-ClSwC9qe.js";import{V as Ze}from"./VSpacer-xWkw0Z56.js";import{V as et}from"./VSnackbar-hRQs8Qob.js";import{f as be}from"./helpers-B-vn2Qqf.js";import{V as B}from"./VAvatar-B94a89PO.js";import{V as z}from"./VChip-jcZVzdQz.js";import{V as tt}from"./VDataTableServer-MhpLcQJw.js";import{I as G}from"./ItemsApi-BFZzSaWK.js";import"./VOverlay-B-Q2NSgi.js";import"./forwardRefs-B931MWyl.js";import"./VImg-DdMMVt4S.js";/* empty css              */import"./VList-C3HMFU6i.js";import"./VMenu-DdYP-ZrW.js";import"./VCheckboxBtn-BXCNf2fe.js";import"./VDataTable-yhkkcy80.js";import"./VTable-CCGYyhp1.js";import"./filter-IzpahQ_q.js";const at={class:"d-flex align-center gap-2"},lt={class:"text-white"},st={class:"text-h6 mb-4 d-flex align-center gap-2"},ot={class:"text-h6 mb-4 d-flex align-center gap-2"},it={class:"d-flex align-center"},nt={class:"text-h6 mb-4 d-flex align-center gap-2"},rt={class:"d-flex align-center"},dt={class:"d-flex align-center"},ut={class:"text-h6 mb-4 d-flex align-center gap-2"},mt={class:"d-flex align-center"},ct={class:"text-subtitle-1"},pt=X({__name:"ItemDialog",props:{modelValue:{type:Boolean},editMode:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},formData:{},errorMessage:{default:""}},emits:["update:modelValue","save","close","clear-error"],setup(a,{emit:_}){const r=a,u=_,p=h(),m=N({get:()=>r.modelValue,set:o=>{o||u("close"),u("update:modelValue",o)}}),f=["kg","gram","liter","ml","butir","pcs","pack","dus","meter","lembar"],i=["Gudang A - Rak 1","Gudang A - Rak 2","Gudang A - Rak 3","Gudang B - Rak 1","Gudang B - Rak 2","Gudang B - Rak 3","Kulkas - Rak 1","Kulkas - Rak 2","Freezer - Rak 1","Freezer - Rak 2"],b=async()=>{var o,l;if(console.log("handleSave called"),console.log("formData:",r.formData),!((o=r.formData.name)!=null&&o.trim())){console.log("Name is required");return}if(!((l=r.formData.unit)!=null&&l.trim())){console.log("Unit is required");return}if(p.value){const{valid:d}=await p.value.validate();if(!d){console.log("Form validation failed");return}}u("clear-error"),u("save")},U=()=>{r.formData.properties||(r.formData.properties={});const o=`property_${Date.now()}`;r.formData.properties[o]=""},C=o=>{r.formData.properties&&delete r.formData.properties[o]},R=(o,l)=>{if(r.formData.properties&&o!==l){const d=r.formData.properties[o];delete r.formData.properties[o],r.formData.properties[l]=d}};return(o,l)=>(y(),S(Je,{modelValue:n(m),"onUpdate:modelValue":l[12]||(l[12]=d=>le(m)?m.value=d:null),"max-width":"900px",persistent:"",scrollable:""},{default:t(()=>[e($,{class:"item-dialog coffee-dialog"},{default:t(()=>[e(de,{class:"d-flex align-center justify-space-between coffee-header"},{default:t(()=>[s("div",at,[e(V,{icon:o.editMode?"tabler-edit":"tabler-plus",class:"text-white"},null,8,["icon"]),s("span",lt,g(o.editMode?"Edit Item":"Tambah Item Baru"),1)]),e(x,{icon:"tabler-x",variant:"text",color:"white",onClick:l[0]||(l[0]=d=>m.value=!1)})]),_:1}),e(se),e(A,{class:"pa-6"},{default:t(()=>[e(We,{ref_key:"formRef",ref:p,onSubmit:je(b,["prevent"])},{default:t(()=>[e(Q,null,{default:t(()=>[e(c,{cols:"12"},{default:t(()=>[s("h6",st,[e(V,{icon:"tabler-info-circle",size:"20",class:"coffee-icon"}),l[13]||(l[13]=v(" Informasi Dasar "))])]),_:1}),e(c,{cols:"12",md:"8"},{default:t(()=>[e(j,{modelValue:o.formData.name,"onUpdate:modelValue":l[1]||(l[1]=d=>o.formData.name=d),label:"Nama Item",placeholder:"Masukkan nama item",variant:"outlined",required:"",rules:[d=>!!d||"Nama item harus diisi"]},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12",md:"4"},{default:t(()=>[e(L,{modelValue:o.formData.unit,"onUpdate:modelValue":l[2]||(l[2]=d=>o.formData.unit=d),items:f,label:"Satuan",placeholder:"Pilih satuan",variant:"outlined",required:"",rules:[d=>!!d||"Satuan harus dipilih"]},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12"},{default:t(()=>[e(Ye,{modelValue:o.formData.description,"onUpdate:modelValue":l[3]||(l[3]=d=>o.formData.description=d),label:"Deskripsi",placeholder:"Masukkan deskripsi item",rows:"3",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12"},{default:t(()=>[s("h6",ot,[e(V,{icon:"tabler-building-warehouse",size:"20",class:"coffee-icon"}),l[14]||(l[14]=v(" Lokasi & Tanggal "))])]),_:1}),e(c,{cols:"12",md:"6"},{default:t(()=>[e(L,{modelValue:o.formData.storage_location,"onUpdate:modelValue":l[4]||(l[4]=d=>o.formData.storage_location=d),items:i,label:"Lokasi Penyimpanan",placeholder:"Pilih lokasi",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:t(()=>[e(j,{modelValue:o.formData.expiry_date,"onUpdate:modelValue":l[5]||(l[5]=d=>o.formData.expiry_date=d),label:"Tanggal Kadaluwarsa",type:"date",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"6"},{default:t(()=>[s("div",it,[e(ae,{modelValue:o.formData.active,"onUpdate:modelValue":l[6]||(l[6]=d=>o.formData.active=d),color:"success",class:"me-3"},null,8,["modelValue"]),e(te,{class:"text-body-1"},{default:t(()=>l[15]||(l[15]=[v("Item Aktif")])),_:1,__:[15]})])]),_:1}),e(c,{cols:"12"},{default:t(()=>[s("h6",nt,[e(V,{icon:"tabler-tools-kitchen-2",size:"20",class:"coffee-icon"}),l[16]||(l[16]=v(" Ketersediaan Station "))])]),_:1}),e(c,{cols:"12",md:"6"},{default:t(()=>[s("div",rt,[e(ae,{modelValue:o.formData.available_in_kitchen,"onUpdate:modelValue":l[7]||(l[7]=d=>o.formData.available_in_kitchen=d),color:"warning",class:"me-3"},null,8,["modelValue"]),e(te,{class:"text-body-1"},{default:t(()=>[e(V,{icon:"tabler-chef-hat",class:"me-2",size:"18"}),l[17]||(l[17]=v(" Tersedia di Kitchen "))]),_:1,__:[17]})])]),_:1}),e(c,{cols:"12",md:"6"},{default:t(()=>[s("div",dt,[e(ae,{modelValue:o.formData.available_in_bar,"onUpdate:modelValue":l[8]||(l[8]=d=>o.formData.available_in_bar=d),color:"info",class:"me-3"},null,8,["modelValue"]),e(te,{class:"text-body-1"},{default:t(()=>[e(V,{icon:"tabler-glass-cocktail",class:"me-2",size:"18"}),l[18]||(l[18]=v(" Tersedia di Bar "))]),_:1,__:[18]})])]),_:1}),e(c,{cols:"12"},{default:t(()=>[s("h6",ut,[e(V,{icon:"tabler-settings",size:"20",class:"coffee-icon"}),l[19]||(l[19]=v(" Properti Tambahan "))])]),_:1}),e(c,{cols:"12"},{default:t(()=>[l[21]||(l[21]=s("div",{class:"text-caption text-medium-emphasis mb-3"}," Tambahkan informasi tambahan seperti kandungan, spesifikasi, dll. ",-1)),e(x,{variant:"outlined","prepend-icon":"tabler-plus",class:"coffee-secondary mb-3",onClick:U},{default:t(()=>l[20]||(l[20]=[v(" Tambah Properti ")])),_:1,__:[20]}),o.formData.properties?(y(!0),O(Ge,{key:0},Le(o.formData.properties,(d,w)=>(y(),O("div",{key:w,class:"mb-3"},[e(Q,{"no-gutters":""},{default:t(()=>[e(c,{cols:"4"},{default:t(()=>[e(j,{"model-value":w,"onUpdate:modelValue":P=>R(w,P),label:"Nama Properti",variant:"outlined",density:"compact"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),e(c,{cols:"7",class:"ps-2"},{default:t(()=>[e(j,{modelValue:o.formData.properties[w],"onUpdate:modelValue":P=>o.formData.properties[w]=P,label:"Nilai",variant:"outlined",density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(c,{cols:"1",class:"ps-2 d-flex align-center"},{default:t(()=>[e(x,{icon:"tabler-trash",color:"error",variant:"text",size:"small",onClick:P=>C(w)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)):D("",!0)]),_:1,__:[21]})]),_:1})]),_:1},512)]),_:1}),e(se),e(Qe,{class:"pa-6"},{default:t(()=>[e(Ze),e(x,{variant:"outlined",class:"coffee-secondary",onClick:l[9]||(l[9]=d=>m.value=!1)},{default:t(()=>l[22]||(l[22]=[v(" Batal ")])),_:1,__:[22]}),e(x,{color:"primary",class:"coffee-primary",loading:o.loading,onClick:b},{default:t(()=>[v(g(o.editMode?"Perbarui":"Simpan")+" Item ",1)]),_:1},8,["loading"])]),_:1})]),_:1}),e(et,{"model-value":!!o.errorMessage,"onUpdate:modelValue":l[11]||(l[11]=d=>!d&&u("clear-error")),color:"error",location:"top right",timeout:6e3,vertical:"","multi-line":"","min-width":"320","max-width":"500"},{actions:t(()=>[e(x,{icon:"tabler-x",size:"small",variant:"text",onClick:l[10]||(l[10]=d=>u("clear-error"))})]),default:t(()=>[s("div",mt,[e(V,{icon:"tabler-alert-circle",class:"me-3",size:"28"}),s("div",null,[l[23]||(l[23]=s("div",{class:"text-h6 font-weight-bold"},"Error!",-1)),s("div",ct,g(o.errorMessage),1)])])]),_:1},8,["model-value"])]),_:1},8,["modelValue"]))}}),ft=J(pt,[["__scopeId","data-v-28660074"]]),vt=X({__name:"ItemSearchFilters",props:{filters:{}},emits:["update:filters"],setup(a,{emit:_}){const r=a,u=_,p=h({...r.filters});He(()=>r.filters,R=>{p.value={...R}},{deep:!0});const m=[{title:"all",value:"all"},{title:"active",value:"active"},{title:"inactive",value:"inactive"}],f=[{title:"Semua Status",value:""},{title:"Stok Tersedia",value:"in_stock"},{title:"Stok Menipis",value:"low_stock"},{title:"Stok Habis",value:"out_of_stock"}],i=[{title:"Semua station",value:"all"},{title:"Kitchen Only",value:"kitchen"},{title:"Bar Only",value:"bar"},{title:"Kitchen & Bar",value:"both"}],b=()=>{console.log("ItemSearchFilters - onFilterChange called with:",p.value),u("update:filters",{...p.value})},U=()=>{p.value={search:"",active:"all",unit:"",stock_status:"",station:"all"},b()},C=N(()=>p.value.search||p.value.active!=="all"||p.value.unit||p.value.stock_status||p.value.station!=="all");return(R,o)=>(y(),S($,{class:"mb-6"},{default:t(()=>[e(de,{class:"d-flex align-center gap-2"},{default:t(()=>[e(V,{icon:"tabler-filter",class:"coffee-icon"}),o[5]||(o[5]=v(" Filter & Pencarian Item "))]),_:1,__:[5]}),e(A,null,{default:t(()=>[e(Q,null,{default:t(()=>[e(c,{cols:"12",md:"4"},{default:t(()=>[e(j,{modelValue:n(p).search,"onUpdate:modelValue":[o[0]||(o[0]=l=>n(p).search=l),b],label:"Cari item...",placeholder:"Nama, kode, atau deskripsi","prepend-inner-icon":"tabler-search",clearable:"",variant:"outlined","onClick:clear":o[1]||(o[1]=l=>{n(p).search="",b()})},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"2"},{default:t(()=>[e(L,{modelValue:n(p).active,"onUpdate:modelValue":[o[2]||(o[2]=l=>n(p).active=l),b],items:m,label:"Status","prepend-inner-icon":"tabler-toggle-left",clearable:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"2"},{default:t(()=>[e(L,{modelValue:n(p).stock_status,"onUpdate:modelValue":[o[3]||(o[3]=l=>n(p).stock_status=l),b],items:f,label:"Stok","prepend-inner-icon":"tabler-package",clearable:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"2"},{default:t(()=>[e(L,{modelValue:n(p).station,"onUpdate:modelValue":[o[4]||(o[4]=l=>n(p).station=l),b],items:i,label:"Station","prepend-inner-icon":"tabler-building-store",clearable:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(c,{cols:"12",md:"2",class:"d-flex align-center gap-3"},{default:t(()=>[e(x,{color:"primary",variant:"tonal","prepend-icon":"tabler-search",onClick:b},{default:t(()=>o[6]||(o[6]=[v(" Cari ")])),_:1,__:[6]}),n(C)?(y(),S(x,{key:0,color:"secondary",variant:"outlined","prepend-icon":"tabler-x",onClick:U},{default:t(()=>o[7]||(o[7]=[v(" Reset ")])),_:1,__:[7]})):D("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}}),gt=J(vt,[["__scopeId","data-v-57395173"]]),_t={class:"d-flex align-center gap-2"},kt={class:"text-h6"},bt={class:"d-flex align-center gap-2"},ht={class:"text-h6"},Vt={class:"d-flex align-center gap-2"},yt={class:"text-h6"},xt={class:"d-flex align-center gap-2"},It={class:"text-h6"},Dt={class:"d-flex align-center gap-2"},St={class:"text-h6"},Ct={class:"d-flex align-center gap-2"},wt={class:"text-h6"},$t=X({__name:"ItemStatsCards",props:{stats:{},loading:{type:Boolean,default:!1}},setup(a){return(_,r)=>(y(),S(Q,{class:"mb-6"},{default:t(()=>[e(c,{cols:"12",sm:"6",lg:"3"},{default:t(()=>[e($,{class:"stats-card"},{default:t(()=>[e(A,{class:"d-flex align-center"},{default:t(()=>{var u;return[e(B,{size:"44",rounded:"",color:"primary",variant:"tonal",class:"me-3"},{default:t(()=>[e(V,{icon:"tabler-package"})]),_:1}),s("div",null,[r[0]||(r[0]=s("span",{class:"text-sm text-medium-emphasis"},"Total Item",-1)),s("div",_t,[s("h6",kt,g(((u=_.stats)==null?void 0:u.total_items)||0),1)])])]}),_:1})]),_:1})]),_:1}),e(c,{cols:"12",sm:"6",lg:"3"},{default:t(()=>[e($,{class:"stats-card"},{default:t(()=>[e(A,{class:"d-flex align-center"},{default:t(()=>{var u;return[e(B,{size:"44",rounded:"",color:"success",variant:"tonal",class:"me-3"},{default:t(()=>[e(V,{icon:"tabler-check"})]),_:1}),s("div",null,[r[1]||(r[1]=s("span",{class:"text-sm text-medium-emphasis"},"Item Aktif",-1)),s("div",bt,[s("h6",ht,g(((u=_.stats)==null?void 0:u.active_items)||0),1)])])]}),_:1})]),_:1})]),_:1}),e(c,{cols:"12",sm:"6",lg:"3"},{default:t(()=>[e($,{class:"stats-card"},{default:t(()=>[e(A,{class:"d-flex align-center"},{default:t(()=>{var u;return[e(B,{size:"44",rounded:"",color:"warning",variant:"tonal",class:"me-3"},{default:t(()=>[e(V,{icon:"tabler-alert-triangle"})]),_:1}),s("div",null,[r[2]||(r[2]=s("span",{class:"text-sm text-medium-emphasis"},"Stok Rendah",-1)),s("div",Vt,[s("h6",yt,g(((u=_.stats)==null?void 0:u.low_stock_items)||0),1)])])]}),_:1})]),_:1})]),_:1}),e(c,{cols:"12",sm:"6",lg:"3"},{default:t(()=>[e($,{class:"stats-card"},{default:t(()=>[e(A,{class:"d-flex align-center"},{default:t(()=>{var u;return[e(B,{size:"44",rounded:"",color:"error",variant:"tonal",class:"me-3"},{default:t(()=>[e(V,{icon:"tabler-x"})]),_:1}),s("div",null,[r[3]||(r[3]=s("span",{class:"text-sm text-medium-emphasis"},"Stok Habis",-1)),s("div",xt,[s("h6",It,g(((u=_.stats)==null?void 0:u.out_of_stock_items)||0),1)])])]}),_:1})]),_:1})]),_:1}),e(c,{cols:"12",sm:"6",lg:"3"},{default:t(()=>[e($,{class:"stats-card"},{default:t(()=>[e(A,{class:"d-flex align-center"},{default:t(()=>{var u;return[e(B,{size:"44",rounded:"",color:"info",variant:"tonal",class:"me-3"},{default:t(()=>[e(V,{icon:"tabler-currency-dollar"})]),_:1}),s("div",null,[r[4]||(r[4]=s("span",{class:"text-sm text-medium-emphasis"},"Nilai Stok",-1)),s("div",Dt,[s("h6",St,g(n(be)(((u=_.stats)==null?void 0:u.total_value)||0)),1)])])]}),_:1})]),_:1})]),_:1}),e(c,{cols:"12",sm:"6",lg:"3"},{default:t(()=>[e($,{class:"stats-card"},{default:t(()=>[e(A,{class:"d-flex align-center"},{default:t(()=>{var u;return[e(B,{size:"44",rounded:"",color:"secondary",variant:"tonal",class:"me-3"},{default:t(()=>[e(V,{icon:"tabler-pause"})]),_:1}),s("div",null,[r[5]||(r[5]=s("span",{class:"text-sm text-medium-emphasis"},"Item Nonaktif",-1)),s("div",Ct,[s("h6",wt,g(((u=_.stats)==null?void 0:u.inactive_items)||0),1)])])]}),_:1})]),_:1})]),_:1})]),_:1}))}}),Tt=J($t,[["__scopeId","data-v-1e00df2a"]]),Ut={class:"d-flex align-center gap-2"},Pt={class:"d-flex align-center gap-2"},zt={class:"d-flex flex-column"},At={class:"font-weight-medium text-high-emphasis"},Mt={key:0,class:"text-caption text-medium-emphasis mt-1"},Ft={class:"text-end"},Et={class:"font-weight-medium"},Rt={class:"text-center"},Bt={class:"d-flex align-center justify-center gap-1"},Ot={class:"text-medium-emphasis"},Nt={class:"text-center"},Kt={class:"font-weight-medium"},jt={class:"text-medium-emphasis"},Lt={class:"d-flex align-center justify-center gap-1"},Gt={class:"text-sm"},Ht={class:"d-flex flex-column gap-1"},qt={key:2,class:"text-caption text-medium-emphasis"},Xt={class:"d-flex gap-1 justify-center"},Jt=X({__name:"ItemTable",props:{items:{},loading:{type:Boolean,default:!1},selectedItems:{default:()=>[]},currentPage:{default:1},itemsPerPage:{default:15},totalItems:{default:0}},emits:["update:selected-items","add-item","edit-item","delete-item","update:page","update:items-per-page"],setup(a,{emit:_}){const r=[{title:"ITEM",key:"item_info",align:"start"},{title:"SATUAN",key:"unit",align:"center"},{title:"HARGA/UNIT",key:"cost_per_unit",align:"end"},{title:"STOK",key:"current_stock",align:"center"},{title:"MIN. STOK",key:"minimum_stock",align:"center"},{title:"STATUS STOK",key:"stock_status",align:"center"},{title:"LOKASI",key:"storage_location",align:"center"},{title:"STATUS",key:"active",align:"center"},{title:"STATION",key:"station_availability",align:"center"},{title:"AKSI",key:"actions",align:"center",sortable:!1}],u=m=>{switch(m){case"in_stock":return"success";case"low_stock":return"warning";case"out_of_stock":return"error";default:return"success"}},p=m=>{switch(m){case"in_stock":return"Tersedia";case"low_stock":return"Stok Rendah";case"out_of_stock":return"Stok Habis";default:return"Tersedia"}};return(m,f)=>(y(),S($,null,{default:t(()=>[e(de,{class:"d-flex align-center justify-space-between"},{default:t(()=>[s("div",Ut,[e(V,{icon:"tabler-list",class:"coffee-icon"}),f[4]||(f[4]=v(" Data Item ")),m.totalItems?(y(),S(z,{key:0,size:"small",color:"primary",variant:"tonal"},{default:t(()=>[v(g(m.totalItems)+" item ",1)]),_:1})):D("",!0)]),s("div",Pt,[e(x,{"prepend-icon":"tabler-plus",color:"primary",onClick:f[0]||(f[0]=i=>m.$emit("add-item"))},{default:t(()=>f[5]||(f[5]=[v(" Tambah Item ")])),_:1,__:[5]})])]),_:1}),e(se),e(tt,{"model-value":m.selectedItems,"onUpdate:modelValue":f[1]||(f[1]=i=>m.$emit("update:selected-items",i)),headers:r,items:m.items,loading:m.loading,"items-length":m.totalItems,"items-per-page":m.itemsPerPage,page:m.currentPage,"item-value":"id_item","show-select":"","onUpdate:page":f[2]||(f[2]=i=>m.$emit("update:page",i)),"onUpdate:itemsPerPage":f[3]||(f[3]=i=>m.$emit("update:items-per-page",i)),class:"text-no-wrap"},{"item.item_info":t(({item:i})=>[s("div",zt,[s("div",At,g(i.name),1),e(z,{color:"primary",variant:"outlined",size:"small",class:"font-mono mt-1 align-self-start"},{default:t(()=>[v(g(i.item_code),1)]),_:2},1024),i.description?(y(),O("div",Mt,g(i.description),1)):D("",!0)])]),"item.unit":t(({item:i})=>[e(z,{color:"info",variant:"tonal",size:"small"},{default:t(()=>[v(g(i.unit),1)]),_:2},1024)]),"item.cost_per_unit":t(({item:i})=>[s("div",Ft,[s("div",Et,g(n(be)(i.cost_per_unit)),1)])]),"item.current_stock":t(({item:i})=>{var b,U,C;return[s("div",Rt,[s("div",Bt,[s("span",{class:qe(["font-weight-bold",(((b=i.inventory)==null?void 0:b.current_stock)||0)<=(((U=i.inventory)==null?void 0:U.reorder_level)||0)?"text-error":"text-success"])},g(((C=i.inventory)==null?void 0:C.current_stock)||0),3),s("small",Ot,g(i.unit),1)])])]}),"item.minimum_stock":t(({item:i})=>{var b;return[s("div",Nt,[s("span",Kt,g(((b=i.inventory)==null?void 0:b.reorder_level)||0),1),s("small",jt,g(i.unit),1)])]}),"item.stock_status":t(({item:i})=>[e(z,{color:u(i.stock_status||"in_stock"),variant:"tonal",size:"small"},{default:t(()=>[v(g(p(i.stock_status||"in_stock")),1)]),_:2},1032,["color"])]),"item.storage_location":t(({item:i})=>[s("div",Lt,[e(V,{icon:"tabler-map-pin",size:"16",class:"text-medium-emphasis"}),s("span",Gt,g(i.storage_location||"Gudang A-Rak 1"),1)])]),"item.active":t(({item:i})=>[e(z,{color:i.active?"success":"error",variant:"tonal",size:"small"},{default:t(()=>[v(g(i.active?"Aktif":"Nonaktif"),1)]),_:2},1032,["color"])]),"item.station_availability":t(({item:i})=>[s("div",Ht,[i.available_in_kitchen?(y(),S(z,{key:0,color:"warning",variant:"tonal",size:"x-small","prepend-icon":"tabler-chef-hat"},{default:t(()=>f[6]||(f[6]=[v(" Kitchen ")])),_:1,__:[6]})):D("",!0),i.available_in_bar?(y(),S(z,{key:1,color:"info",variant:"tonal",size:"x-small","prepend-icon":"tabler-glass-cocktail"},{default:t(()=>f[7]||(f[7]=[v(" Bar ")])),_:1,__:[7]})):D("",!0),!i.available_in_kitchen&&!i.available_in_bar?(y(),O("span",qt," Tidak tersedia ")):D("",!0)])]),"item.actions":t(({item:i})=>[s("div",Xt,[e(x,{icon:"tabler-edit",size:"small",variant:"text",color:"primary",onClick:b=>m.$emit("edit-item",i)},null,8,["onClick"]),e(x,{icon:"tabler-trash",size:"small",variant:"text",color:"error",onClick:b=>m.$emit("delete-item",i)},null,8,["onClick"])])]),_:1},8,["model-value","items","loading","items-length","items-per-page","page"])]),_:1}))}}),Qt=J(Jt,[["__scopeId","data-v-50e5930a"]]),W=h([]),oe=h(!1),ie=h(!1),ne=h(!1),he=h({total_items:0,active_items:0,inactive_items:0,low_stock_items:0,out_of_stock_items:0,total_value:0}),Z=h(!1),ue=h(!1),H=h(!1),T=h(null),Ve=h([]),F=h(1),re=h(0),Y=h(15),Wt={search:"",active:!0,unit:"",stock_status:"",station:"all"},ee=ke({...Wt}),q=h(""),me=h(""),M=h(""),E=ke({name:"",description:"",unit:"",cost_per_unit:0,current_stock:0,minimum_stock:0,storage_location:"",expiry_date:void 0,active:!0,available_in_kitchen:!0,available_in_bar:!0,properties:{}}),Yt=N(()=>!0),Zt=N(()=>Ve.value.length>0),ea=N(()=>[{title:"Semua Status",value:"all"},{title:"Stok Tersedia",value:"in_stock"},{title:"Stok Rendah",value:"low_stock"},{title:"Stok Habis",value:"out_of_stock"}]),ta=N(()=>{const a=new Set(W.value.map(_=>_.unit));return Array.from(a).map(_=>({title:_,value:_}))}),K=async()=>{oe.value=!0,q.value="";try{const a={page:F.value,per_page:Y.value,...ee};Object.keys(a).forEach(r=>{(a[r]===void 0||a[r]==="all")&&delete a[r],a[r]===""&&r!=="search"&&delete a[r]});const _=await G.getAll(a);if(_.success&&_.data){const r=_.data;W.value=r.data||[],re.value=r.total||0,F.value=r.current_page||1}}catch(a){console.error("Error fetching items:",a),q.value=a.message||"Failed to fetch items",W.value=[],re.value=0}finally{oe.value=!1}},ce=async()=>{try{const a=await G.getStats();a.success&&a.data&&(he.value=a.data)}catch(a){console.error("Error fetching stats:",a)}},aa=async()=>{if(sa()){ie.value=!0,M.value="";try{let a;H.value&&T.value?a=await G.update(T.value.id_item,E):a=await G.create(E),a.success?(me.value=H.value?"Item berhasil diperbarui!":"Item berhasil ditambahkan!",ye(),await K(),await ce()):M.value=a.message||"Terjadi kesalahan saat menyimpan item"}catch(a){console.error("Error saving item:",a),M.value=a.message||"Terjadi kesalahan saat menyimpan item"}finally{ie.value=!1}}},la=async()=>{if(T.value){ne.value=!0;try{const a=await G.delete(T.value.id_item);a.success?(me.value="Item berhasil dihapus!",xe(),await K(),await ce()):q.value=a.message||"Gagal menghapus item"}catch(a){console.error("Error deleting item:",a),q.value=a.message||"Terjadi kesalahan saat menghapus item"}finally{ne.value=!1}}},sa=()=>E.name.trim()?E.unit.trim()?!0:(M.value="Satuan harus diisi",!1):(M.value="Nama item harus diisi",!1),oa=()=>{H.value=!1,T.value=null,Ie(),Z.value=!0},ia=a=>{H.value=!0,T.value=a,ra(a),Z.value=!0},na=a=>{T.value=a,ue.value=!0},ye=()=>{Z.value=!1,De(),Ie()},xe=()=>{ue.value=!1,T.value=null},Ie=()=>{Object.assign(E,{name:"",description:"",unit:"",cost_per_unit:0,current_stock:0,minimum_stock:0,storage_location:"",expiry_date:void 0,active:!0,available_in_kitchen:!0,available_in_bar:!0,properties:{}})},ra=a=>{Object.assign(E,{name:a.name,description:a.description||"",unit:a.unit,cost_per_unit:a.cost_per_unit||0,current_stock:a.current_stock||0,minimum_stock:a.minimum_stock||0,storage_location:a.storage_location||"",expiry_date:a.expiry_date,active:a.active,available_in_kitchen:a.available_in_kitchen??!0,available_in_bar:a.available_in_bar??!0,properties:a.properties||{}})},De=()=>{M.value=""},da=a=>{a!==F.value&&(F.value=a,K())},ua=a=>{a!==Y.value&&(Y.value=a,F.value=1,K())},Se=a=>{a&&Object.assign(ee,a),F.value=1,K()},ma=()=>{Object.assign(ee,{search:"",active:"all",unit:"",stock_status:"all",station:"all"}),Se()},ca=()=>({itemsList:W,loading:oe,saveLoading:ie,deleteLoading:ne,stats:he,dialog:Z,deleteDialog:ue,editMode:H,selectedItem:T,selectedItems:Ve,currentPage:F,totalItems:re,itemsPerPage:Y,filters:ee,errorMessage:q,successMessage:me,modalErrorMessage:M,formData:E,canCreateEdit:Yt,hasSelectedItems:Zt,stockStatusOptions:ea,unitOptions:ta,fetchItemsList:K,fetchStats:ce,saveItem:aa,deleteItem:la,openCreateDialog:oa,openEditDialog:ia,openDeleteDialog:na,closeDialog:ye,closeDeleteDialog:xe,clearModalError:De,onPageChange:da,onItemsPerPageChange:ua,handleFiltersUpdate:Se,clearFilters:ma}),pa={class:"item-management"},fa={class:"d-flex justify-space-between align-center mb-6"},va={class:"d-flex gap-3 align-center"},ga={key:0,class:"d-flex gap-2"},_a=X({__name:"items-management",setup(a){const{itemsList:_,loading:r,saveLoading:u,deleteLoading:p,stats:m,dialog:f,deleteDialog:i,editMode:b,selectedItem:U,selectedItems:C,currentPage:R,totalItems:o,itemsPerPage:l,filters:d,errorMessage:w,successMessage:P,modalErrorMessage:Ce,formData:pe,canCreateEdit:we,hasSelectedItems:$e,fetchItemsList:Te,fetchStats:Ue,saveItem:Pe,deleteItem:ze,openCreateDialog:fe,openEditDialog:Ae,openDeleteDialog:ve,closeDialog:Me,clearModalError:Fe,onPageChange:Ee,onItemsPerPageChange:Re,handleFiltersUpdate:Be}=ca(),Oe=async()=>{await ze()};return Xe(()=>{Te(),Ue()}),(ka,k)=>{var ge;return y(),O("div",pa,[s("div",fa,[k[10]||(k[10]=s("div",null,[s("h1",{class:"text-h4 font-weight-bold coffee-title"},"Kelola Item"),s("p",{class:"text-body-1 text-medium-emphasis coffee-subtitle"},"Kelola bahan baku dan item untuk operasional coffee shop Anda")],-1)),s("div",va,[n($e)?(y(),O("div",ga,[e(z,{color:"primary",size:"small"},{default:t(()=>[v(g(n(C).length)+" dipilih ",1)]),_:1}),e(x,{color:"error",variant:"outlined",size:"small","prepend-icon":"mdi-delete",onClick:n(ve)},{default:t(()=>k[8]||(k[8]=[v(" Hapus Terpilih ")])),_:1,__:[8]},8,["onClick"])])):D("",!0),n(we)?(y(),S(x,{key:1,color:"primary","prepend-icon":"mdi-plus",class:"coffee-btn",onClick:n(fe)},{default:t(()=>k[9]||(k[9]=[v(" Tambah Item ")])),_:1,__:[9]},8,["onClick"])):D("",!0)])]),n(w)?(y(),S(_e,{key:0,type:"error",variant:"outlined",class:"mb-4",text:n(w),closable:"","onClick:close":k[0]||(k[0]=I=>w.value="")},null,8,["text"])):D("",!0),n(P)?(y(),S(_e,{key:1,type:"success",variant:"outlined",class:"mb-4",text:n(P),closable:"","onClick:close":k[1]||(k[1]=I=>P.value="")},null,8,["text"])):D("",!0),e(Tt,{stats:n(m)},null,8,["stats"]),e(gt,{filters:n(d),"onUpdate:filters":n(Be)},null,8,["filters","onUpdate:filters"]),e(Qt,{items:n(_),loading:n(r),"current-page":n(R),"total-items":n(o),"items-per-page":n(l),"selected-items":n(C),"onUpdate:page":n(Ee),"onUpdate:itemsPerPage":n(Re),onAddItem:n(fe),onEditItem:n(Ae),onDeleteItem:n(ve),"onUpdate:selectedItems":k[2]||(k[2]=I=>C.value=I)},null,8,["items","loading","current-page","total-items","items-per-page","selected-items","onUpdate:page","onUpdate:itemsPerPage","onAddItem","onEditItem","onDeleteItem"]),e(ft,{modelValue:n(f),"onUpdate:modelValue":[k[3]||(k[3]=I=>le(f)?f.value=I:null),k[4]||(k[4]=I=>f.value=I)],"edit-mode":n(b),"form-data":n(pe),loading:n(u),"error-message":n(Ce),onClose:n(Me),onSave:n(Pe),onClearError:n(Fe),onUpdateForm:k[5]||(k[5]=(I,Ne)=>n(pe)[I]=Ne)},null,8,["modelValue","edit-mode","form-data","loading","error-message","onClose","onSave","onClearError"]),e(Ke,{modelValue:n(i),"onUpdate:modelValue":k[6]||(k[6]=I=>le(i)?i.value=I:null),title:"Konfirmasi Hapus Item","item-name":(ge=n(U))==null?void 0:ge.name,loading:n(p),"confirm-text":"Hapus Item",onConfirm:Oe,onCancel:k[7]||(k[7]=I=>i.value=!1)},null,8,["modelValue","item-name","loading"])])}}}),Xa=J(_a,[["__scopeId","data-v-88f2c338"]]);export{Xa as default};

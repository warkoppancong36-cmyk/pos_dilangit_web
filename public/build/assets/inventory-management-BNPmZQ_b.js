import{ay as ae,d as Qe,r as v,V as B,w as Ye,g as M,f as s,b as e,s as p,X as T,t as c,l as V,c as K,e as r,aw as Ze,a0 as x,o as k,ax as We,aW as tt,D as at,m as t,a5 as he,F as st,i as ot,p as De,$ as Ue}from"./main-CBR4jTXu.js";import{V as xe}from"./VDialog-CntyCyQG.js";import{b as ce,c as Ie,V as E}from"./VCard-BZ85ZToB.js";import{V as Q}from"./VDivider-Ce2DWQcU.js";import{V as z}from"./VCardText-DIbcaqwZ.js";import{V as oe}from"./VAlert-EYymHrjs.js";import{V as lt}from"./VDataTable-Dm2D1NAL.js";import{V as Y}from"./VChip-C8qjNXHJ.js";import{V as we}from"./VSpacer-B9Iu4CY5.js";import{_ as et}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as rt}from"./ItemsApi-DvbXyR0Q.js";import{V as se,a as U}from"./VRow-BvX6hVGd.js";import{V as W}from"./VTextField-BDzcFk7W.js";import{V as Xe}from"./VSelect-BUYMwTSy.js";import{V as nt}from"./VDataTableServer-Btt__bJK.js";import{V as Te}from"./VTooltip-CeTns7F7.js";import{V as je}from"./VForm-NSQBv1fj.js";import{V as ze}from"./VTextarea-DqwnVQuG.js";import{V as it}from"./VAvatar-BKu1T0F6.js";import"./VOverlay-CrqAA8qH.js";import"./forwardRefs-B931MWyl.js";import"./VImg-NdUGtW6P.js";import"./VCheckboxBtn-BH_PEibv.js";import"./VTable-BPs_UXLE.js";import"./filter-BejuXJpq.js";/* empty css              */import"./VList-qKqRMVG0.js";import"./VMenu-ChfD8Ulr.js";const X="/api/inventory";class O{static async getAll(i){var u;try{return(await ae.get(X,{params:i})).data}catch(d){throw((u=d.response)==null?void 0:u.data)||this.handleError(d)}}static async getById(i){var u;try{return(await ae.get(`${X}/${i}`)).data}catch(d){throw((u=d.response)==null?void 0:u.data)||this.handleError(d)}}static async getStats(){var i;try{return(await ae.get(`${X}/stats`)).data}catch(u){throw((i=u.response)==null?void 0:i.data)||this.handleError(u)}}static async getLowStockAlerts(){var i;try{return(await ae.get(`${X}/low-stock-alerts`)).data}catch(u){throw((i=u.response)==null?void 0:i.data)||this.handleError(u)}}static async updateStock(i,u){var d;try{return(await ae.post(`${X}/${i}/update-stock`,u)).data}catch(y){throw((d=y.response)==null?void 0:d.data)||this.handleError(y)}}static async bulkUpdateStock(i){var u;try{return(await ae.post(`${X}/bulk-update-stock`,i)).data}catch(d){throw((u=d.response)==null?void 0:u.data)||this.handleError(d)}}static async setReorderLevel(i,u){var d;try{return(await ae.post(`${X}/${i}/reorder-level`,u)).data}catch(y){throw((d=y.response)==null?void 0:d.data)||this.handleError(y)}}static async getMovements(i){var u;try{const d=i!=null&&i.id_inventory?`${X}/${i.id_inventory}/movements`:`${X}/movements`;return(await ae.get(d,{params:i})).data}catch(d){throw((u=d.response)==null?void 0:u.data)||this.handleError(d)}}static async recordMovement(i){var u;try{return(await ae.post(`${X}/movement`,i)).data}catch(d){throw((u=d.response)==null?void 0:u.data)||this.handleError(d)}}static handleError(i){var u,d;return i.response?{message:((u=i.response.data)==null?void 0:u.message)||"Terjadi kesalahan pada server",success:!1,errors:(d=i.response.data)==null?void 0:d.errors}:i.request?{message:"Tidak dapat terhubung ke server",success:!1}:{message:i.message||"Terjadi kesalahan yang tidak diketahui",success:!1}}static formatError(i){return i.errors?Object.values(i.errors).flat().join(", "):i.message||"Terjadi kesalahan yang tidak diketahui"}static isValidationError(i){return i.errors&&typeof i.errors=="object"}static getFieldError(i,u){return i.errors&&i.errors[u]?Array.isArray(i.errors[u])?i.errors[u][0]:i.errors[u]:null}static getMovementTypes(){return[{value:"stock_in",label:"Stock Masuk",color:"success"},{value:"stock_out",label:"Stock Keluar",color:"warning"},{value:"adjustment",label:"Penyesuaian",color:"info"},{value:"transfer",label:"Transfer",color:"primary"},{value:"return",label:"Retur",color:"success"},{value:"damaged",label:"Rusak",color:"error"},{value:"expired",label:"Kadaluarsa",color:"error"}]}static getStockStatusOptions(){return[{value:"all",label:"Semua Status"},{value:"in_stock",label:"Tersedia"},{value:"low_stock",label:"Stok Menipis"},{value:"out_of_stock",label:"Habis"},{value:"overstock",label:"Stok Berlebih"}]}}const ut={key:1,class:"text-center py-8"},ct={class:"font-weight-medium"},dt={class:"text-medium-emphasis"},mt={class:"text-center"},pt={class:"text-center font-weight-medium"},vt={class:"text-center font-weight-bold text-primary"},_t={class:"text-end"},ft={class:"text-end font-weight-medium text-success"},kt={class:"max-width-200"},gt={class:"font-weight-medium"},yt={key:0,class:"text-medium-emphasis"},bt={key:1,class:"d-block text-caption"},ht={key:2,class:"text-info d-block"},xt={class:"text-center py-8"},wt=Qe({__name:"InventoryMovementsDialog",props:{modelValue:{type:Boolean},inventoryId:{},inventoryName:{}},emits:["update:modelValue"],setup(H,{emit:i}){const u=H,d=i,y=v([]),R=v(!1),$=v(""),C=B({get:()=>u.modelValue,set:_=>d("update:modelValue",_)}),F=async()=>{var _,f,n,S;if(u.inventoryId)try{R.value=!0,$.value="";const b=await O.getMovements({id_inventory:parseInt(u.inventoryId),page:1,per_page:50});b.data&&Array.isArray(b.data)?y.value=b.data:b.data&&((_=b==null?void 0:b.data)!=null&&_.data)&&Array.isArray((f=b==null?void 0:b.data)==null?void 0:f.data)?y.value=b.data.data:y.value=[]}catch(b){console.error("Error fetching movements:",b),$.value=((S=(n=b.response)==null?void 0:n.data)==null?void 0:S.message)||"Gagal memuat riwayat pergerakan"}finally{R.value=!1}},N=_=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(_),A=_=>({in:"success",out:"error",stock_in:"success",stock_out:"error",adjustment:"warning",transfer:"info",return:"secondary"})[_]||"primary",L=_=>({in:"Stock Masuk",out:"Stock Keluar",stock_in:"Stock Masuk",stock_out:"Stock Keluar",adjustment:"Penyesuaian",transfer:"Transfer",return:"Retur"})[_]||_,w=_=>({in:"tabler-plus",out:"tabler-minus",stock_in:"tabler-plus",stock_out:"tabler-minus",adjustment:"tabler-edit",transfer:"tabler-arrows-exchange",return:"tabler-arrow-back"})[_]||"tabler-package";return Ye(C,_=>{_&&u.inventoryId?F():(y.value=[],$.value="")}),(_,f)=>(k(),M(xe,{modelValue:C.value,"onUpdate:modelValue":f[1]||(f[1]=n=>C.value=n),"max-width":"900px",scrollable:""},{default:s(()=>[e(E,null,{default:s(()=>[e(ce,{class:"d-flex align-center"},{default:s(()=>[e(T,{icon:"tabler-history",class:"me-2"}),p(" Riwayat Pergerakan - "+c(_.inventoryName),1)]),_:1}),e(Q),e(z,{class:"pa-0"},{default:s(()=>[$.value?(k(),M(oe,{key:0,type:"error",variant:"tonal",class:"ma-4"},{default:s(()=>[p(c($.value),1)]),_:1})):V("",!0),R.value?(k(),K("div",ut,[e(Ze,{indeterminate:"",color:"primary",size:"40"}),f[2]||(f[2]=r("div",{class:"mt-4 text-medium-emphasis"}," Memuat riwayat pergerakan... ",-1))])):(k(),M(lt,{key:2,headers:[{title:"Tanggal",key:"created_at",sortable:!1},{title:"Jenis",key:"movement_type",sortable:!1},{title:"Kuantitas",key:"quantity",sortable:!1},{title:"Stok Sebelum",key:"stock_before",sortable:!1},{title:"Stok Sesudah",key:"stock_after",sortable:!1},{title:"Harga/Unit",key:"unit_cost",sortable:!1},{title:"Total Nilai",key:"total_cost",sortable:!1},{title:"Catatan",key:"notes",sortable:!1}],items:y.value,loading:R.value,class:"text-no-wrap","items-per-page":"15",height:"500","fixed-header":""},{"item.created_at":s(({item:n})=>[r("div",null,[r("div",ct,c(new Date(n.created_at).toLocaleDateString("id-ID")),1),r("small",dt,c(new Date(n.created_at).toLocaleTimeString("id-ID")),1)])]),"item.movement_type":s(({item:n})=>[e(Y,{color:A(n.movement_type),variant:"tonal",size:"small","prepend-icon":w(n.movement_type)},{default:s(()=>[p(c(L(n.movement_type)),1)]),_:2},1032,["color","prepend-icon"])]),"item.quantity":s(({item:n})=>[r("div",mt,[e(Y,{color:n.movement_type==="in"||n.movement_type==="stock_in"?"success":"error",variant:"outlined",size:"small"},{default:s(()=>[p(c(n.movement_type==="in"||n.movement_type==="stock_in"?"+":"-")+c(Math.abs(n.quantity)),1)]),_:2},1032,["color"])])]),"item.stock_before":s(({item:n})=>[r("div",pt,c(n.stock_before),1)]),"item.stock_after":s(({item:n})=>[r("div",vt,c(n.stock_after),1)]),"item.unit_cost":s(({item:n})=>[r("div",_t,c(n.unit_cost?N(n.unit_cost):"-"),1)]),"item.total_cost":s(({item:n})=>[r("div",ft,c(n.total_cost?N(n.total_cost):"-"),1)]),"item.notes":s(({item:n})=>[r("div",kt,[r("div",gt,c(n.notes||"-"),1),n.reference_type&&n.reference_id?(k(),K("small",yt," Ref: "+c(n.reference_type)+"-"+c(n.reference_id),1)):V("",!0),n.batch_number?(k(),K("small",bt," Batch: "+c(n.batch_number),1)):V("",!0),n.user?(k(),K("small",ht," oleh: "+c(n.user.name),1)):V("",!0)])]),"no-data":s(()=>[r("div",xt,[e(T,{icon:"tabler-history-off",size:"48",class:"text-medium-emphasis mb-4"}),f[3]||(f[3]=r("div",{class:"text-h6 text-medium-emphasis mb-2"}," Belum ada riwayat pergerakan ",-1)),f[4]||(f[4]=r("div",{class:"text-body-2 text-medium-emphasis"}," Riwayat akan muncul setelah ada pergerakan stok ",-1))])]),_:1},8,["items","loading"]))]),_:1}),e(Q),e(Ie,{class:"pa-4"},{default:s(()=>[e(we),e(x,{variant:"outlined",onClick:f[0]||(f[0]=n=>C.value=!1)},{default:s(()=>f[5]||(f[5]=[p(" Tutup ")])),_:1,__:[5]}),e(x,{color:"primary","prepend-icon":"tabler-refresh",onClick:F},{default:s(()=>f[6]||(f[6]=[p(" Refresh ")])),_:1,__:[6]})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),St=et(wt,[["__scopeId","data-v-ca0277a4"]]),Vt=()=>{const H=v([]),i=v(!1),u=v(!1),d=v({total_items:0,low_stock_items:0,out_of_stock_items:0,overstock_items:0,total_stock_value:0,total_stock_quantity:0,total_reserved_stock:0,items_need_restock:0}),y=v([]),R=v(!1),$=v([]),C=v(!1),F=v(!1),N=v(!1),A=v(!1),L=v(!1),w=v(null),_=v([]),f=v(1),n=v(0),S=v(15),b=v({search:"",stock_status:"all",category_id:void 0,supplier_id:void 0,sort_by:"current_stock",sort_order:"asc"}),G=v(""),P=v(""),j=v(""),re=v({movement_type:"stock_in",quantity:0,reason:"",reference_number:"",cost_per_unit:void 0,notes:""}),ne=v({reorder_level:0,max_stock_level:0}),Z=B(()=>_.value.length>0),de=B(()=>d.value.total_stock_value),ee=B(()=>d.value.low_stock_items),le=B(()=>d.value.out_of_stock_items),J=B(()=>Math.ceil(n.value/S.value)),me=B(()=>f.value<J.value),pe=B(()=>f.value>1),ve=B(()=>({currentPage:f.value,totalPages:J.value,totalItems:n.value,itemsPerPage:S.value,hasNext:me.value,hasPrev:pe.value})),Se=[o=>o>0||"Kuantitas harus lebih dari 0",o=>Number.isInteger(o)||"Kuantitas harus berupa bilangan bulat"],Ve=[o=>!!o||"Alasan wajib diisi",o=>o&&o.length>=3||"Alasan minimal 3 karakter"],Me=[o=>!o||o>=0||"Harga harus lebih dari atau sama dengan 0"],m=[{title:"Stock Masuk",value:"stock_in",color:"success"},{title:"Stock Keluar",value:"stock_out",color:"warning"},{title:"Penyesuaian",value:"adjustment",color:"info"},{title:"Transfer",value:"transfer",color:"primary"},{title:"Retur",value:"return",color:"success"}],I=[{title:"Semua Status",value:"all"},{title:"Tersedia",value:"in_stock"},{title:"Stok Menipis",value:"low_stock"},{title:"Habis",value:"out_of_stock"},{title:"Stok Berlebih",value:"overstock"}],h=async()=>{i.value=!0,G.value="";try{const o={...b.value,page:f.value,per_page:S.value};Object.keys(o).forEach(be=>{const ue=o[be];(ue===""||ue===void 0||ue===null||ue==="all")&&delete o[be]});const a=await O.getAll(o);if(a.success)H.value=a.data.data||[],n.value=a.data.total||0,a.data.current_page&&(f.value=a.data.current_page);else throw new Error(a.message||"Gagal mengambil data inventory")}catch(o){console.error("Error fetching inventory:",o),G.value=O.formatError(o)||"Gagal mengambil data inventory",H.value=[],n.value=0}finally{i.value=!1}},Ce=async()=>{try{const o=await O.getStats();o.success&&(d.value=o.data)}catch(o){console.error("Error fetching inventory stats:",o)}},ie=async()=>{C.value=!0;try{const o=await O.getLowStockAlerts();o.success&&($.value=o.data.data||[])}catch(o){console.error("Error fetching low stock alerts:",o),$.value=[]}finally{C.value=!1}},_e=async o=>{R.value=!0;try{const a=await O.getMovements({id_inventory:o,page:1,per_page:20});a.success&&(y.value=a.data)}catch(a){console.error("Error fetching movements:",a)}finally{R.value=!1}},$e=async()=>{if(w.value){u.value=!0,j.value="";try{const o=await O.updateStock(w.value.id_inventory,re.value);if(o.success)P.value="Stock berhasil diperbarui",fe(),await h(),await Ce(),await ie();else throw new Error(o.message||"Gagal memperbarui stock")}catch(o){console.error("Error updating stock:",o),j.value=O.formatError(o)||"Gagal memperbarui stock"}finally{u.value=!1}}},Ee=async()=>{if(w.value){u.value=!0,j.value="";try{const o=await O.setReorderLevel(w.value.id_inventory,ne.value);if(o.success)P.value="Reorder level berhasil diperbarui",q(),await h();else throw new Error(o.message||"Gagal memperbarui reorder level")}catch(o){console.error("Error setting reorder level:",o),j.value=O.formatError(o)||"Gagal memperbarui reorder level"}finally{u.value=!1}}},ke=o=>{w.value=o,re.value={movement_type:"stock_in",quantity:0,reason:"",reference_number:"",cost_per_unit:o.average_cost||void 0,notes:""},j.value="",F.value=!0},Re=o=>{w.value=o,ne.value={reorder_level:o.reorder_level||0,max_stock_level:o.max_stock_level||0},j.value="",L.value=!0},ge=o=>{w.value=o,_e(o.id_inventory),A.value=!0},fe=()=>{F.value=!1,setTimeout(()=>{w.value=null,j.value=""},300)},q=()=>{L.value=!1,setTimeout(()=>{w.value=null,j.value=""},300)};return{inventoryList:H,loading:i,saveLoading:u,stats:d,movementsList:y,movementsLoading:R,lowStockItems:$,alertsLoading:C,stockUpdateDialog:F,bulkUpdateDialog:N,movementsDialog:A,reorderDialog:L,selectedInventory:w,selectedItems:_,currentPage:f,totalItems:n,itemsPerPage:S,filters:b,errorMessage:G,successMessage:P,modalErrorMessage:j,stockUpdateForm:re,reorderForm:ne,hasSelectedItems:Z,totalStockValue:de,lowStockCount:ee,outOfStockCount:le,quantityRules:Se,reasonRules:Ve,costRules:Me,movementTypeOptions:m,stockStatusOptions:I,fetchInventoryList:h,fetchStats:Ce,fetchLowStockAlerts:ie,fetchMovements:_e,updateStock:$e,setReorderLevel:Ee,openStockUpdateDialog:ke,openReorderDialog:Re,openMovementsDialog:ge,closeStockUpdateDialog:fe,closeReorderDialog:q,closeMovementsDialog:()=>{A.value=!1,setTimeout(()=>{w.value=null,y.value=[]},300)},clearModalError:()=>{j.value=""},onPageChange:o=>{o!==f.value&&(f.value=o,h())},onItemsPerPageChange:o=>{o!==S.value&&(S.value=o,f.value=1,h())},handleFiltersUpdate:o=>{b.value={...b.value,...o},f.value=1,h()},formatCurrency:o=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(o),getStockStatusColor:o=>o.current_stock===0?"error":o.is_low_stock?"warning":"success",getStockStatusText:o=>o.current_stock===0?"Habis":o.reorder_level>0&&o.current_stock<=o.reorder_level?"Menipis":o.max_stock_level&&o.current_stock>o.max_stock_level?"Berlebih":"Tersedia",getMovementTypeColor:o=>({stock_in:"success",stock_out:"warning",adjustment:"info",transfer:"primary",return:"success",damaged:"error",expired:"error"})[o]||"grey",totalPages:J,hasNextPage:me,hasPrevPage:pe,paginationInfo:ve}};function Mt(H){const i=v([]),u=v([]),d=v(!1),y=v(!1),R=v({total_items:0,total_value:0,low_stock_items:0,out_of_stock_items:0,movements_today:0,movements_this_month:0,top_consumed_items:[],recent_movements:[]}),$=v(1),C=v(0),F=v(10),N=We({search:"",stock_status:"all",movement_type:"",date_from:"",date_to:"",item_id:void 0}),A=v(!1),L=v(!1),w=v(null),_=We({item_id:0,type:"in",quantity:0,notes:"",cost_per_unit:0}),f=v(""),n=v(""),S=v(""),b=B(()=>!0),G=[{title:"Semua Status",value:"all"},{title:"Tersedia",value:"in_stock"},{title:"Stok Rendah",value:"low_stock"},{title:"Habis",value:"out_of_stock"}],P=[{title:"Masuk",value:"in",color:"success",icon:"tabler-plus"},{title:"Keluar",value:"out",color:"error",icon:"tabler-minus"},{title:"Penyesuaian",value:"adjustment",color:"warning",icon:"tabler-adjustments"}],j=[{title:"Pembelian",value:"purchase"},{title:"Penjualan",value:"sale"},{title:"Produksi",value:"production"},{title:"Penyesuaian",value:"adjustment"},{title:"Kerusakan",value:"waste"}],re=m=>m.current_stock<=0?{status:"out_of_stock",color:"error",text:"Habis",icon:"tabler-x"}:m.current_stock<=m.minimum_stock?{status:"low_stock",color:"warning",text:"Rendah",icon:"tabler-alert-triangle"}:{status:"in_stock",color:"success",text:"Tersedia",icon:"tabler-check"},ne=m=>!m.maximum_stock||m.maximum_stock<=0?100:Math.round(m.current_stock/m.maximum_stock*100),Z=async()=>{d.value=!0;try{await new Promise(m=>setTimeout(m,1e3)),i.value=await rt.getAll(),C.value=i.value.length,n.value=""}catch{f.value="Gagal memuat data items"}finally{d.value=!1}},de=async m=>{d.value=!0;try{const I=await O.getMovements({id_inventory:m,page:$.value,per_page:F.value});u.value=I.data.map(h=>({id:h.id_movement,item_id:h.id_inventory,type:h.movement_type,quantity:h.quantity,unit:"pcs",reference_id:h.reference_number?parseInt(h.reference_number):void 0,reference_type:h.reason,notes:h.notes,cost_per_unit:h.cost_per_unit,total_cost:h.total_cost,created_by:h.created_by,created_at:h.created_at,creator:h.user})),C.value=I.total}catch(I){console.error("Failed to fetch stock movements:",I),u.value=[]}finally{d.value=!1}},ee=async()=>{try{await Z();const m=i.value;R.value={total_items:m.length,total_value:m.reduce((I,h)=>I+h.current_stock*h.cost_per_unit,0),low_stock_items:m.filter(I=>I.current_stock<=I.minimum_stock&&I.current_stock>0).length,out_of_stock_items:m.filter(I=>I.current_stock<=0).length,movements_today:0,movements_this_month:0,top_consumed_items:[],recent_movements:[]}}catch(m){console.error("Failed to fetch stats:",m)}},le=async()=>{y.value=!0,S.value="";try{const m=await O.recordMovement({item_id:_.item_id,movement_type:_.type,quantity:_.quantity,notes:_.notes,cost_per_unit:_.cost_per_unit});if(m.success)n.value=`Stock ${_.type==="in"?"masuk":_.type==="out"?"keluar":"disesuaikan"} berhasil dicatat`,ve(),await Z(),await ee(),H&&H();else throw new Error(m.message||"Gagal mencatat pergerakan stok")}catch(m){S.value=m.message||"Gagal mencatat pergerakan stok"}finally{y.value=!1}},J=m=>{w.value=m,Object.assign(_,{item_id:m.id_item,type:"in",quantity:0,notes:"",cost_per_unit:m.cost_per_unit}),A.value=!0},me=m=>{w.value=m,Object.assign(_,{item_id:m.id_item,type:"out",quantity:0,notes:"",cost_per_unit:m.cost_per_unit}),A.value=!0},pe=m=>{w.value=m,Object.assign(_,{item_id:m.id_item,type:"adjustment",quantity:m.current_stock,notes:"",cost_per_unit:m.cost_per_unit}),L.value=!0},ve=()=>{A.value=!1,L.value=!1,S.value="",w.value=null};return{itemsList:i,stockMovements:u,loading:d,saveLoading:y,stats:R,currentPage:$,totalItems:C,itemsPerPage:F,filters:N,movementDialog:A,adjustmentDialog:L,selectedItem:w,movementFormData:_,errorMessage:f,successMessage:n,modalErrorMessage:S,canManageStock:b,stockStatusOptions:G,movementTypeOptions:P,referenceTypeOptions:j,getStockStatus:re,getStockPercentage:ne,fetchItems:Z,fetchStockMovements:de,fetchStats:ee,recordStockMovement:le,openStockInDialog:J,openStockOutDialog:me,openAdjustmentDialog:pe,closeMovementDialog:ve,clearModalError:()=>{S.value=""},onPageChange:m=>{$.value=m,Z()},handleFiltersUpdate:m=>{Object.assign(N,m),$.value=1,Z()}}}const Ct={class:"inventory-management"},Pt={class:"d-flex justify-space-between align-center mb-6"},Dt={class:"d-flex gap-3 align-center"},Ut={class:"d-flex align-center justify-space-between"},Tt={class:"text-h4 font-weight-bold text-primary"},jt={class:"d-flex align-center justify-space-between"},It={class:"text-h4 font-weight-bold text-warning"},$t={class:"d-flex align-center justify-space-between"},Et={class:"text-h4 font-weight-bold text-error"},Rt={class:"d-flex align-center justify-space-between"},At={class:"text-h4 font-weight-bold text-success"},Lt={class:"d-flex align-center justify-space-between"},zt={class:"d-flex align-center gap-3"},Ft={class:"d-flex gap-2"},qt={class:"d-flex flex-wrap gap-2"},Bt={class:"d-flex align-center"},Ot={class:"font-weight-medium"},Kt={class:"text-medium-emphasis"},Nt={class:"text-center"},Ht={class:"text-h6 font-weight-bold"},Gt={key:0,class:"text-warning"},Jt={class:"text-center"},Wt={class:"text-center"},Xt={class:"text-end"},Qt={class:"text-end font-weight-medium text-success"},Yt={class:"d-flex align-center gap-1"},Zt={class:"text-center py-12"},ea={class:"text-h5 text-medium-emphasis mb-2"},ta={class:"text-body-1 text-medium-emphasis mb-4"},aa={key:0},sa={key:0},oa={key:1},la={key:2},ra={key:1},na={class:"d-flex justify-center gap-3"},ia={class:"text-center py-8"},ua={class:"d-flex align-center gap-2"},ca={class:"d-flex align-center gap-3"},da={class:"font-weight-bold"},ma={class:"text-caption"},pa={class:"text-caption"},va={class:"d-flex gap-3 justify-end"},_a={class:"d-flex align-center gap-2"},fa={class:"text-white"},ka={class:"d-flex align-center gap-3"},ga={class:"font-weight-bold"},ya={class:"text-caption"},ba=Qe({__name:"inventory-management",setup(H){const{xs:i}=tt(),u=()=>{ee(),le(),J()},{inventoryList:d,loading:y,saveLoading:R,stats:$,lowStockItems:C,stockUpdateDialog:F,reorderDialog:N,movementsDialog:A,selectedInventory:L,currentPage:w,totalItems:_,itemsPerPage:f,filters:n,errorMessage:S,successMessage:b,modalErrorMessage:G,stockUpdateForm:P,reorderForm:j,totalStockValue:re,lowStockCount:ne,outOfStockCount:Z,stockStatusOptions:de,fetchInventoryList:ee,fetchStats:le,fetchLowStockAlerts:J,updateStock:me,setReorderLevel:pe,openStockUpdateDialog:ve,openReorderDialog:Se,openMovementsDialog:Ve,closeStockUpdateDialog:Me,closeReorderDialog:m,clearModalError:I,onPageChange:h,onItemsPerPageChange:Ce,handleFiltersUpdate:ie,formatCurrency:_e,getStockStatusColor:$e,getStockStatusText:Ee}=Vt(),{recordStockMovement:ke,openAdjustmentDialog:Re,movementDialog:ge,adjustmentDialog:fe,selectedItem:q,movementFormData:D,saveLoading:Ae,closeMovementDialog:ye,successMessage:Pe,modalErrorMessage:Le,clearModalError:Fe}=Mt(u),qe=o=>o.item?{id_item:o.item.id_item,item_code:o.item.item_code,name:o.item.name,description:o.item.description||"",unit:o.item.unit,cost_per_unit:parseFloat(o.item.cost_per_unit),current_stock:o.current_stock,minimum_stock:o.reorder_level||0,active:!0,storage_location:o.item.storage_location||"",expiry_date:o.item.expiry_date||null,properties:o.item.properties||null,created_by:o.item.created_by||null,updated_by:o.item.updated_by||null,created_at:o.item.created_at,updated_at:o.item.updated_at,deleted_at:o.item.deleted_at||null}:null,Be=o=>{const a=qe(o);a&&Re(a)},Oe=B(()=>$.value);return B(()=>d.value),B(()=>y.value),at(()=>{ee(),le(),J()}),Ye(_,(o,a)=>{},{immediate:!0}),(o,a)=>{var be,ue,Ke,Ne;return k(),K("div",Ct,[r("div",Pt,[a[30]||(a[30]=r("div",null,[r("h1",{class:"text-h4 font-weight-bold inventory-title"}," Kelola Inventory "),r("p",{class:"text-body-1 text-medium-emphasis inventory-subtitle"}," Kelola stok barang dan pergerakan inventory ")],-1)),r("div",Dt,[e(x,{color:"primary","prepend-icon":"tabler-refresh",variant:"outlined",onClick:u},{default:s(()=>a[29]||(a[29]=[p(" Refresh Data ")])),_:1,__:[29]})])]),t(S)?(k(),M(oe,{key:0,type:"error",variant:"outlined",class:"mb-4",text:t(S),closable:"","onClick:close":a[0]||(a[0]=l=>S.value="")},null,8,["text"])):V("",!0),t(b)?(k(),M(oe,{key:1,type:"success",variant:"outlined",class:"mb-4",text:t(b),closable:"","onClick:close":a[1]||(a[1]=l=>b.value="")},null,8,["text"])):V("",!0),t(Pe)?(k(),M(oe,{key:2,type:"success",variant:"outlined",class:"mb-4",text:t(Pe),closable:"","onClick:close":a[2]||(a[2]=l=>Pe.value="")},null,8,["text"])):V("",!0),e(se,{class:"mb-6"},{default:s(()=>[e(U,{cols:"12",md:"3"},{default:s(()=>[e(E,{class:"stats-card"},{default:s(()=>[e(z,null,{default:s(()=>[r("div",Ut,[r("div",null,[r("div",Tt,c(Oe.value.total_items||0),1),a[31]||(a[31]=r("div",{class:"text-caption text-medium-emphasis"}," Total Produk ",-1))]),e(T,{icon:"tabler-package",size:"48",class:"text-primary opacity-50"})])]),_:1})]),_:1})]),_:1}),e(U,{cols:"12",md:"3"},{default:s(()=>[e(E,{class:"stats-card"},{default:s(()=>[e(z,null,{default:s(()=>[r("div",jt,[r("div",null,[r("div",It,c(t(ne)||0),1),a[32]||(a[32]=r("div",{class:"text-caption text-medium-emphasis"}," Stok Menipis ",-1))]),e(T,{icon:"tabler-alert-triangle",size:"48",class:"text-warning opacity-50"})])]),_:1})]),_:1})]),_:1}),e(U,{cols:"12",md:"3"},{default:s(()=>[e(E,{class:"stats-card"},{default:s(()=>[e(z,null,{default:s(()=>[r("div",$t,[r("div",null,[r("div",Et,c(t(Z)||0),1),a[33]||(a[33]=r("div",{class:"text-caption text-medium-emphasis"}," Stok Habis ",-1))]),e(T,{icon:"tabler-x-circle",size:"48",class:"text-error opacity-50"})])]),_:1})]),_:1})]),_:1}),e(U,{cols:"12",md:"3"},{default:s(()=>[e(E,{class:"stats-card"},{default:s(()=>[e(z,null,{default:s(()=>[r("div",Rt,[r("div",null,[r("div",At,c(t(_e)(t(re)||0)),1),a[34]||(a[34]=r("div",{class:"text-caption text-medium-emphasis"}," Nilai Stok ",-1))]),e(T,{icon:"tabler-currency-dollar",size:"48",class:"text-success opacity-50"})])]),_:1})]),_:1})]),_:1})]),_:1}),e(E,{class:"mb-6 info-card",color:"info",variant:"tonal"},{default:s(()=>[e(z,null,{default:s(()=>[r("div",Lt,[r("div",zt,[e(T,{icon:"tabler-info-circle",size:"32",class:"text-info"}),a[35]||(a[35]=r("div",null,[r("div",{class:"text-subtitle-1 font-weight-medium text-info"}," Sistem Stock Movement Otomatis "),r("div",{class:"text-body-2 text-medium-emphasis"},[p(" Stok akan bertambah otomatis saat purchasing dan berkurang saat penjualan POS. Gunakan tombol "),r("strong",null,"Penyesuaian"),p(" untuk koreksi manual jika diperlukan. ")])],-1))]),r("div",Ft,[e(Y,{color:"success",variant:"tonal",size:"small"},{default:s(()=>[e(T,{icon:"tabler-shopping-cart",class:"me-1"}),a[36]||(a[36]=p(" Purchase → Stok + "))]),_:1,__:[36]}),e(Y,{color:"error",variant:"tonal",size:"small"},{default:s(()=>[e(T,{icon:"tabler-cash",class:"me-1"}),a[37]||(a[37]=p(" POS Sale → Stok - "))]),_:1,__:[37]})])])]),_:1})]),_:1}),t(C).length>0?(k(),M(E,{key:3,class:"mb-6 low-stock-alert"},{default:s(()=>[e(ce,{class:"d-flex align-center"},{default:s(()=>[e(T,{icon:"tabler-alert-triangle",class:"text-warning me-2"}),p(" Peringatan Stok Menipis ("+c(t(C).length)+" produk) ",1)]),_:1}),e(z,null,{default:s(()=>[r("div",qt,[(k(!0),K(st,null,ot(t(C).slice(0,10),l=>(k(),M(Y,{key:l.id_inventory,color:"warning",variant:"outlined",size:"small"},{default:s(()=>{var g;return[p(c((g=l.product)==null?void 0:g.name)+" ("+c(l.current_stock)+"/"+c(l.reorder_level)+") ",1)]}),_:2},1024))),128)),t(C).length>10?(k(),M(Y,{key:0,color:"warning",variant:"tonal",size:"small"},{default:s(()=>[p(" +"+c(t(C).length-10)+" lainnya ",1)]),_:1})):V("",!0)])]),_:1})]),_:1})):V("",!0),!t(y)&&t(d).length===0&&!t(S)&&!t(n).search&&t(n).stock_status==="all"?(k(),M(E,{key:4,class:"mb-6"},{default:s(()=>[e(z,{class:"text-center py-6"},{default:s(()=>[e(T,{icon:"tabler-info-circle",size:"48",class:"text-info mb-3"}),a[38]||(a[38]=r("div",{class:"text-h6 mb-2"}," Sistem Inventory Management Siap Digunakan ",-1)),a[39]||(a[39]=r("div",{class:"text-body-2 text-medium-emphasis"}," Buat produk dan variant terlebih dahulu untuk mulai melacak inventory. ",-1))]),_:1,__:[38,39]})]),_:1})):V("",!0),e(E,{class:"mb-6"},{default:s(()=>[e(z,null,{default:s(()=>[e(se,null,{default:s(()=>[e(U,{cols:"12",md:"4"},{default:s(()=>[e(W,{modelValue:t(n).search,"onUpdate:modelValue":[a[3]||(a[3]=l=>t(n).search=l),a[4]||(a[4]=l=>t(ie)({search:l}))],label:"Cari inventory produk...",placeholder:"Nama produk, SKU, atau variant","prepend-inner-icon":"tabler-search",clearable:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(U,{cols:"12",md:"4"},{default:s(()=>[e(Xe,{modelValue:t(n).stock_status,"onUpdate:modelValue":[a[5]||(a[5]=l=>t(n).stock_status=l),a[6]||(a[6]=l=>t(ie)({stock_status:l||"all"}))],items:t(de),label:"Status Stok",variant:"outlined",clearable:""},null,8,["modelValue","items"])]),_:1}),e(U,{cols:"12",md:"4",class:"d-flex align-center gap-2"},{default:s(()=>[e(x,{variant:"outlined","prepend-icon":"tabler-refresh",onClick:a[7]||(a[7]=l=>{t(ee)(),t(le)(),t(J)()})},{default:s(()=>a[40]||(a[40]=[p(" Refresh ")])),_:1,__:[40]}),t(n).search||t(n).stock_status!=="all"?(k(),M(x,{key:0,variant:"outlined",color:"warning","prepend-icon":"tabler-filter-off",onClick:a[8]||(a[8]=l=>t(ie)({search:"",stock_status:"all"}))},{default:s(()=>a[41]||(a[41]=[p(" Clear ")])),_:1,__:[41]})):V("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),!t(y)&&t(d).length===0&&!t(S)&&!t(n).search&&t(n).stock_status==="all"?(k(),M(E,{key:5,class:"mb-6"},{default:s(()=>[e(z,{class:"text-center py-6"},{default:s(()=>[e(T,{icon:"tabler-package-off",size:"48",class:"text-disabled mb-3"}),a[42]||(a[42]=r("div",{class:"text-h6 mb-2"}," Sistem Inventory Management Siap Digunakan ",-1)),a[43]||(a[43]=r("div",{class:"text-body-2 text-medium-emphasis"}," Buat produk dan variant terlebih dahulu untuk mulai melacak inventory. ",-1))]),_:1,__:[42,43]})]),_:1})):V("",!0),e(E,{class:"products-inventory-table"},{default:s(()=>[e(ce,{class:"d-flex align-center gap-2 coffee-header"},{default:s(()=>[e(T,{icon:"tabler-package",class:"text-white"}),a[44]||(a[44]=r("span",{class:"text-white"},"Inventory Produk",-1)),e(we),e(Y,{color:"white",size:"small",variant:"tonal"},{default:s(()=>[p(c(t(_))+" Produk ",1)]),_:1})]),_:1,__:[44]}),e(Q),e(nt,{headers:[{title:"Produk/Variant",key:"item_name",sortable:!1},{title:"SKU",key:"sku",sortable:!1},{title:"Stok Saat Ini",key:"current_stock",sortable:!1},{title:"Stok Tersedia",key:"available_stock",sortable:!1},{title:"Status",key:"status",sortable:!1},{title:"Reorder Level",key:"reorder_level",sortable:!1},{title:"Harga Rata-rata",key:"average_cost",sortable:!1},{title:"Nilai Stok",key:"stock_value",sortable:!1},{title:"Aksi",key:"actions",sortable:!1}],items:t(d),loading:t(y),"items-length":t(_),"items-per-page":t(f),page:t(w),"items-per-page-options":[10,15,25,50,100],"items-per-page-text":"Items per page:","page-text":"{0}-{1} of {2}","no-data-text":"Tidak ada data inventory",class:"text-no-wrap","onUpdate:page":t(h),"onUpdate:itemsPerPage":t(Ce)},{"item.item_name":s(({item:l})=>{var g,te,He,Ge,Je;return[r("div",Bt,[r("div",null,[r("div",Ot,c(((g=l.item)==null?void 0:g.name)||((te=l.product)==null?void 0:te.name)||"Unknown Item"),1),r("small",Kt,c(((He=l.item)==null?void 0:He.description)||((Je=(Ge=l.product)==null?void 0:Ge.category)==null?void 0:Je.name)||"-"),1)])])]}),"item.sku":s(({item:l})=>[e(Y,{variant:"outlined",size:"small",color:"primary"},{default:s(()=>{var g,te;return[p(c(((g=l.item)==null?void 0:g.item_code)||((te=l.product)==null?void 0:te.sku)||"N/A"),1)]}),_:2},1024)]),"item.current_stock":s(({item:l})=>[r("div",Nt,[r("div",Ht,c(l.current_stock),1),l.reserved_stock>0?(k(),K("small",Gt," ("+c(l.reserved_stock)+" reserved) ",1)):V("",!0)])]),"item.available_stock":s(({item:l})=>[r("div",Jt,[e(Y,{color:l.available_stock>0?"success":"error",variant:"tonal",size:"small"},{default:s(()=>[p(c(l.available_stock),1)]),_:2},1032,["color"])])]),"item.status":s(({item:l})=>[e(Y,{color:t($e)(l),variant:"tonal",size:"small"},{default:s(()=>[p(c(t(Ee)(l)),1)]),_:2},1032,["color"])]),"item.reorder_level":s(({item:l})=>[r("div",Wt,c(l.reorder_level||"-"),1)]),"item.average_cost":s(({item:l})=>[r("div",Xt,c(t(_e)(l.average_cost)),1)]),"item.stock_value":s(({item:l})=>[r("div",Qt,c(t(_e)(l.current_stock*l.average_cost)),1)]),"item.actions":s(({item:l})=>[r("div",Yt,[e(Te,{text:"Penyesuaian Stok"},{activator:s(({props:g})=>[e(x,De(g,{icon:"tabler-adjustments",color:"warning",variant:"text",size:"small",disabled:!l.item,onClick:te=>Be(l)}),null,16,["disabled","onClick"])]),_:2},1024),e(Te,{text:"Update Stok"},{activator:s(({props:g})=>[e(x,De(g,{icon:"tabler-edit",color:"primary",variant:"text",size:"small",onClick:te=>t(ve)(l)}),null,16,["onClick"])]),_:2},1024),e(Te,{text:"Set Reorder Level"},{activator:s(({props:g})=>[e(x,De(g,{icon:"tabler-settings",color:"info",variant:"text",size:"small",onClick:te=>t(Se)(l)}),null,16,["onClick"])]),_:2},1024),e(Te,{text:"Lihat Riwayat"},{activator:s(({props:g})=>[e(x,De(g,{icon:"tabler-history",color:"secondary",variant:"text",size:"small",onClick:te=>t(Ve)(l)}),null,16,["onClick"])]),_:2},1024)])]),"no-data":s(()=>{var l;return[r("div",Zt,[e(T,{icon:t(n).search||t(n).stock_status!=="all"?"tabler-search-off":"tabler-package-off",size:"64",class:"text-medium-emphasis mb-4"},null,8,["icon"]),r("div",ea,c(t(n).search||t(n).stock_status!=="all"?"Tidak Ada Hasil Pencarian":"Belum Ada Data Inventory"),1),r("div",ta,[t(n).search||t(n).stock_status!=="all"?(k(),K("span",aa,[t(n).search?(k(),K("span",sa,[a[45]||(a[45]=p(' Tidak ditemukan inventory dengan kata kunci "')),r("strong",null,c(t(n).search),1),a[46]||(a[46]=p('" '))])):V("",!0),t(n).search&&t(n).stock_status!=="all"?(k(),K("span",oa," dan ")):V("",!0),t(n).stock_status!=="all"?(k(),K("span",la,[a[47]||(a[47]=p(' status stok "')),r("strong",null,c(((l=t(de).find(g=>g.value===t(n).stock_status))==null?void 0:l.title)||t(n).stock_status),1),a[48]||(a[48]=p('" '))])):V("",!0),a[49]||(a[49]=r("br",null,null,-1)),a[50]||(a[50]=p("Coba kata kunci yang berbeda atau hapus filter. "))])):(k(),K("span",ra,a[51]||(a[51]=[p(" Data inventory akan muncul setelah produk dan variant dibuat."),r("br",null,null,-1),p(" Silakan buat produk terlebih dahulu di menu "),r("strong",null,"Kelola Produk",-1),p(". ")])))]),r("div",na,[t(n).search||t(n).stock_status!=="all"?(k(),M(x,{key:0,color:"warning",variant:"outlined","prepend-icon":"tabler-filter-off",onClick:a[9]||(a[9]=g=>t(ie)({search:"",stock_status:"all"}))},{default:s(()=>a[52]||(a[52]=[p(" Hapus Filter ")])),_:1,__:[52]})):(k(),M(x,{key:1,color:"primary","prepend-icon":"tabler-plus",to:"/products-management"},{default:s(()=>a[53]||(a[53]=[p(" Buat Produk Baru ")])),_:1,__:[53]})),e(x,{variant:"outlined","prepend-icon":"tabler-refresh",onClick:a[10]||(a[10]=g=>{t(ee)(),t(le)(),t(J)()})},{default:s(()=>a[54]||(a[54]=[p(" Refresh Data ")])),_:1,__:[54]})])])]}),loading:s(()=>[r("div",ia,[e(Ze,{indeterminate:"",color:"primary",size:"40"}),a[55]||(a[55]=r("div",{class:"mt-4 text-medium-emphasis"}," Memuat data inventory... ",-1))])]),_:1},8,["items","loading","items-length","items-per-page","page","onUpdate:page","onUpdate:itemsPerPage"])]),_:1}),e(xe,{modelValue:t(F),"onUpdate:modelValue":a[17]||(a[17]=l=>he(F)?F.value=l:null),"max-width":"800px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:s(()=>[e(E,null,{default:s(()=>[e(ce,null,{default:s(()=>{var l,g;return[p(" Update Stok - "+c((g=(l=t(L))==null?void 0:l.product)==null?void 0:g.name),1)]}),_:1}),e(Q),e(je,{onSubmit:Ue(t(me),["prevent"])},{default:s(()=>[e(z,null,{default:s(()=>[t(G)?(k(),M(oe,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4","onClick:close":t(I)},{default:s(()=>[p(c(t(G)),1)]),_:1},8,["onClick:close"])):V("",!0),e(se,null,{default:s(()=>[e(U,{cols:"12",md:"6"},{default:s(()=>[e(Xe,{modelValue:t(P).movement_type,"onUpdate:modelValue":a[11]||(a[11]=l=>t(P).movement_type=l),label:"Jenis Pergerakan *",items:[{title:"Stock Masuk",value:"stock_in"},{title:"Stock Keluar",value:"stock_out"},{title:"Penyesuaian",value:"adjustment"},{title:"Transfer",value:"transfer"},{title:"Retur",value:"return"}],variant:"outlined"},null,8,["modelValue"])]),_:1}),e(U,{cols:"12",md:"6"},{default:s(()=>[e(W,{modelValue:t(P).quantity,"onUpdate:modelValue":a[12]||(a[12]=l=>t(P).quantity=l),modelModifiers:{number:!0},label:"Kuantitas *",type:"number",min:"1",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(se,null,{default:s(()=>[e(U,{cols:"12"},{default:s(()=>[e(W,{modelValue:t(P).reason,"onUpdate:modelValue":a[13]||(a[13]=l=>t(P).reason=l),label:"Alasan *",placeholder:"Contoh: Pembelian dari supplier, Penjualan, dll",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(se,null,{default:s(()=>[e(U,{cols:"12",md:"6"},{default:s(()=>[e(W,{modelValue:t(P).reference_number,"onUpdate:modelValue":a[14]||(a[14]=l=>t(P).reference_number=l),label:"Nomor Referensi",placeholder:"PO-001, SO-001, dll",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(U,{cols:"12",md:"6"},{default:s(()=>[e(W,{modelValue:t(P).cost_per_unit,"onUpdate:modelValue":a[15]||(a[15]=l=>t(P).cost_per_unit=l),modelModifiers:{number:!0},label:"Harga per Unit",type:"number",min:"0",step:"0.01",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(se,null,{default:s(()=>[e(U,{cols:"12"},{default:s(()=>[e(ze,{modelValue:t(P).notes,"onUpdate:modelValue":a[16]||(a[16]=l=>t(P).notes=l),label:"Catatan",rows:"2",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(Q),e(Ie,{class:"pa-4"},{default:s(()=>[e(we),e(x,{variant:"outlined",onClick:t(Me)},{default:s(()=>a[56]||(a[56]=[p(" Batal ")])),_:1,__:[56]},8,["onClick"]),e(x,{type:"submit",color:"primary",loading:t(R)},{default:s(()=>a[57]||(a[57]=[p(" Update Stok ")])),_:1,__:[57]},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","fullscreen"]),e(xe,{modelValue:t(N),"onUpdate:modelValue":a[20]||(a[20]=l=>he(N)?N.value=l:null),"max-width":"600px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:s(()=>[e(E,null,{default:s(()=>[e(ce,null,{default:s(()=>{var l,g;return[p(" Set Reorder Level - "+c((g=(l=t(L))==null?void 0:l.product)==null?void 0:g.name),1)]}),_:1}),e(Q),e(je,{onSubmit:Ue(t(pe),["prevent"])},{default:s(()=>[e(z,null,{default:s(()=>[t(G)?(k(),M(oe,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4","onClick:close":t(I)},{default:s(()=>[p(c(t(G)),1)]),_:1},8,["onClick:close"])):V("",!0),e(se,null,{default:s(()=>[e(U,{cols:"12"},{default:s(()=>[e(W,{modelValue:t(j).reorder_level,"onUpdate:modelValue":a[18]||(a[18]=l=>t(j).reorder_level=l),modelModifiers:{number:!0},label:"Reorder Level *",type:"number",min:"0",hint:"Stok minimum sebelum perlu restock","persistent-hint":"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(se,null,{default:s(()=>[e(U,{cols:"12"},{default:s(()=>[e(W,{modelValue:t(j).max_stock_level,"onUpdate:modelValue":a[19]||(a[19]=l=>t(j).max_stock_level=l),modelModifiers:{number:!0},label:"Max Stock Level",type:"number",min:"0",hint:"Stok maksimum yang diizinkan","persistent-hint":"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(Q),e(Ie,{class:"pa-4"},{default:s(()=>[e(we),e(x,{variant:"outlined",onClick:t(m)},{default:s(()=>a[58]||(a[58]=[p(" Batal ")])),_:1,__:[58]},8,["onClick"]),e(x,{type:"submit",color:"primary",loading:t(R)},{default:s(()=>a[59]||(a[59]=[p(" Simpan ")])),_:1,__:[59]},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","fullscreen"]),e(St,{modelValue:t(A),"onUpdate:modelValue":a[21]||(a[21]=l=>he(A)?A.value=l:null),"inventory-id":(ue=(be=t(L))==null?void 0:be.id_inventory)==null?void 0:ue.toString(),"inventory-name":(Ne=(Ke=t(L))==null?void 0:Ke.item)==null?void 0:Ne.name},null,8,["modelValue","inventory-id","inventory-name"]),e(xe,{modelValue:t(fe),"onUpdate:modelValue":a[24]||(a[24]=l=>he(fe)?fe.value=l:null),"max-width":"600px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:s(()=>[e(E,{class:"stock-movement-dialog coffee-dialog"},{default:s(()=>[e(ce,{class:"d-flex align-center justify-space-between coffee-header"},{default:s(()=>[r("div",ua,[e(T,{icon:"tabler-adjustments",class:"text-white"}),a[60]||(a[60]=r("span",{class:"text-white"}," Penyesuaian Stok ",-1))]),e(x,{icon:"tabler-x",variant:"text",color:"white",onClick:t(ye)},null,8,["onClick"])]),_:1}),e(Q),e(z,{class:"pa-6"},{default:s(()=>[e(je,{onSubmit:Ue(t(ke),["prevent"])},{default:s(()=>{var l;return[t(q)?(k(),M(oe,{key:0,color:"info",variant:"tonal",class:"mb-4"},{default:s(()=>[r("div",ca,[e(T,{icon:"tabler-package"}),r("div",null,[r("div",da,c(t(q).name),1),r("div",ma,c(t(q).item_code),1),r("div",pa,"Stok Saat Ini: "+c(t(q).current_stock)+" "+c(t(q).unit),1)])])]),_:1})):V("",!0),t(Le)?(k(),M(oe,{key:1,type:"error",variant:"outlined",class:"mb-4",text:t(Le),closable:"","onClick:close":t(Fe)},null,8,["text","onClick:close"])):V("",!0),e(W,{modelValue:t(D).quantity,"onUpdate:modelValue":a[22]||(a[22]=g=>t(D).quantity=g),modelModifiers:{number:!0},label:"Stok Baru",type:"number",min:"0",step:"0.001",variant:"outlined",suffix:(l=t(q))==null?void 0:l.unit,class:"mb-4",required:""},null,8,["modelValue","suffix"]),e(ze,{modelValue:t(D).notes,"onUpdate:modelValue":a[23]||(a[23]=g=>t(D).notes=g),label:"Catatan (opsional)",variant:"outlined",rows:"3",class:"mb-4"},null,8,["modelValue"]),r("div",va,[e(x,{variant:"outlined",onClick:t(ye)},{default:s(()=>a[61]||(a[61]=[p(" Batal ")])),_:1,__:[61]},8,["onClick"]),e(x,{type:"submit",color:"primary",class:"coffee-primary",loading:t(Ae)},{default:s(()=>a[62]||(a[62]=[p(" Simpan Penyesuaian ")])),_:1,__:[62]},8,["loading"])])]}),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"]),e(xe,{modelValue:t(ge),"onUpdate:modelValue":a[28]||(a[28]=l=>he(ge)?ge.value=l:null),"max-width":"800px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:s(()=>[e(E,{class:"stock-movement-dialog coffee-dialog"},{default:s(()=>[e(ce,{class:"d-flex align-center justify-space-between coffee-header"},{default:s(()=>[r("div",_a,[e(T,{icon:t(D).type==="in"?"tabler-plus":"tabler-minus",class:"text-white"},null,8,["icon"]),r("span",fa,c(t(D).type==="in"?"Stok Masuk":t(D).type==="out"?"Stok Keluar":"Penyesuaian Stok"),1)]),e(x,{icon:"tabler-x",variant:"text",color:"white",onClick:t(ye)},null,8,["onClick"])]),_:1}),e(Q),e(z,{class:"pa-6"},{default:s(()=>[e(je,{onSubmit:Ue(t(ke),["prevent"])},{default:s(()=>[t(q)?(k(),M(oe,{key:0,color:"info",variant:"tonal",class:"mb-4"},{default:s(()=>[r("div",ka,[e(it,{color:"primary",size:"40",variant:"tonal"},{default:s(()=>[e(T,{icon:"tabler-package"})]),_:1}),r("div",null,[r("div",ga,c(t(q).name),1),r("div",ya," Stok saat ini: "+c(t(q).current_stock)+" "+c(t(q).unit),1)])])]),_:1})):V("",!0),e(se,null,{default:s(()=>[e(U,{cols:"12",md:"6"},{default:s(()=>[e(W,{modelValue:t(D).quantity,"onUpdate:modelValue":a[25]||(a[25]=l=>t(D).quantity=l),modelModifiers:{number:!0},label:`Jumlah ${t(D).type==="in"?"Masuk":t(D).type==="out"?"Keluar":"Akhir"}`,type:"number",variant:"outlined",required:"",min:t(D).type==="adjustment"?0:1,rules:[l=>l>0||"Jumlah harus lebih dari 0"]},null,8,["modelValue","label","min","rules"])]),_:1}),e(U,{cols:"12",md:"6"},{default:s(()=>[e(W,{modelValue:t(D).cost_per_unit,"onUpdate:modelValue":a[26]||(a[26]=l=>t(D).cost_per_unit=l),modelModifiers:{number:!0},label:"Harga per Unit",type:"number",variant:"outlined",prefix:"Rp",readonly:t(D).type!=="in"},null,8,["modelValue","readonly"])]),_:1}),e(U,{cols:"12"},{default:s(()=>[e(ze,{modelValue:t(D).notes,"onUpdate:modelValue":a[27]||(a[27]=l=>t(D).notes=l),label:"Catatan",placeholder:"Masukkan catatan untuk pergerakan stok...",rows:"3",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),e(Q),e(Ie,{class:"pa-6"},{default:s(()=>[e(we),e(x,{variant:"outlined",class:"coffee-secondary",onClick:t(ye)},{default:s(()=>a[63]||(a[63]=[p(" Batal ")])),_:1,__:[63]},8,["onClick"]),e(x,{color:"primary",class:"coffee-primary",loading:t(Ae),onClick:t(ke)},{default:s(()=>a[64]||(a[64]=[p(" Simpan ")])),_:1,__:[64]},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}}),Wa=et(ba,[["__scopeId","data-v-e3092c7b"]]);export{Wa as default};

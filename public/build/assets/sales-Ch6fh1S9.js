import{d as Ve,r as A,D as Ee,c as m,e as r,b as e,m as Ne,a1 as W,f as s,ax as Me,g as O,l as $,X as v,au as K,av as je,j as Fe,o as u,s as g,t as n,F as E,i as N,as as Z,a5 as Le,_ as $e}from"./main-xnptf2TS.js";import{C as He}from"./auto-Cz6uSJnr.js";import{V as f,b as P}from"./VCard-OtdmNL9Q.js";import{V as T,a as p}from"./VRow-CBzhIdKk.js";import{V as h}from"./VCardText-BPTOC4_p.js";import{V as de}from"./VSelect-Df7PjOaS.js";import{V as ue}from"./VTextField-D1fuUSnH.js";import{V as H}from"./VChip-CznLCnP6.js";import{V as ze}from"./VDivider-_7qKKIdq.js";import{V as ee}from"./VDataTable-XC7AE1m2.js";import{b as ce}from"./route-block-B_A1xBdJ.js";import"./VAvatar-BWKse5Ys.js";import"./VImg-DieUwUB1.js";/* empty css              */import"./forwardRefs-B931MWyl.js";import"./VList-CRGSE_kw.js";import"./VOverlay-VQpNIzTh.js";import"./VMenu-CVgzTi3w.js";import"./VCheckboxBtn-D7c9WeBv.js";import"./VTable-OXifF_nr.js";import"./filter-Hb6Yguvo.js";const Be={class:"sales-report-page"},Je={class:"d-flex flex-column flex-md-row justify-space-between align-start align-md-center mb-6 ga-4"},Ke={class:"d-flex align-center mb-2"},Ue={key:0,class:"text-center py-8"},Ge={key:1},qe={class:"text-h5 font-weight-bold text-purple"},Ye={class:"text-caption text-medium-emphasis mt-1"},Xe={class:"text-h5 font-weight-bold text-indigo"},Qe={class:"text-caption text-medium-emphasis mt-1"},We={key:0},Ze={class:"d-flex align-center"},et={class:"text-body-2"},tt={class:"text-end"},at={class:"text-body-2 font-weight-bold"},st={class:"text-caption text-medium-emphasis"},lt={key:1,class:"text-center py-4"},ot={key:0},rt={class:"d-flex align-center"},nt={class:"text-body-2 text-capitalize"},it={class:"text-end"},dt={class:"text-body-2 font-weight-bold"},ut={class:"text-caption text-medium-emphasis"},ct={key:1,class:"text-center py-4"},mt={class:"text-h5 font-weight-bold text-success"},_t={key:0,class:"mt-1"},pt={class:"text-h5 font-weight-bold text-primary"},vt={class:"text-caption text-medium-emphasis mt-1"},yt={class:"text-h5 font-weight-bold text-info"},gt={class:"text-caption text-medium-emphasis mt-1"},ft={class:"text-h5 font-weight-bold text-warning"},ht={class:"text-caption text-medium-emphasis mt-1"},xt={key:0},bt={key:1,class:"text-center py-8"},wt={class:"top-products-container"},kt={class:"d-flex justify-space-between align-center"},At={class:"d-flex align-center"},Pt={class:"font-weight-medium"},Tt={class:"text-caption text-medium-emphasis"},St={class:"text-end"},Dt={class:"font-weight-bold text-success"},Rt={class:"font-weight-bold text-success"},Ct={class:"font-weight-bold text-success"},Ot={key:0},It={class:"d-flex justify-space-between align-center"},Vt={class:"d-flex align-center gap-2"},Et={class:"font-weight-medium"},Nt={class:"text-end"},Mt={class:"text-body-2 font-weight-bold"},jt={class:"text-caption text-success"},Ft={key:1,class:"text-center py-4"},Lt={key:0},$t={class:"d-flex justify-space-between align-center mb-1"},Ht={class:"d-flex align-center gap-2"},zt={class:"font-weight-medium"},Bt={class:"text-end"},Jt={class:"d-flex justify-space-between align-center"},Kt={class:"text-body-2"},Ut={class:"text-body-2 font-weight-bold text-success"},Gt={key:1,class:"text-center py-4"},qt={class:"text-center"},Yt={class:"text-h6 font-weight-bold text-primary"},Xt={class:"text-caption text-medium-emphasis mb-1"},Qt={class:"text-body-2 font-weight-medium text-success"},Wt={class:"d-flex align-center gap-2"},Zt={class:"font-weight-medium"},ea={class:"font-weight-bold"},ta={class:"font-weight-bold text-success"},aa={class:"text-body-2"},sa={key:2,class:"text-center py-12"},me=Ve({__name:"sales",setup(la){const _e=Fe(),S=A(!1),U=A(!1),a=A(null),z=A({total_sales:0,total_orders:0,avg_order_value:0}),M=A([]),j=A([]),D=A("month"),R=A(""),F=A(""),L=A(""),G=A();let q=null;const pe=[{title:"Filter per Bulan",value:"month"},{title:"Custom Range",value:"custom"}],w=new Date().getFullYear(),ve=[{title:"Januari",value:`${w}-01`},{title:"Februari",value:`${w}-02`},{title:"Maret",value:`${w}-03`},{title:"April",value:`${w}-04`},{title:"Mei",value:`${w}-05`},{title:"Juni",value:`${w}-06`},{title:"Juli",value:`${w}-07`},{title:"Agustus",value:`${w}-08`},{title:"September",value:`${w}-09`},{title:"Oktober",value:`${w}-10`},{title:"November",value:`${w}-11`},{title:"Desember",value:`${w}-12`}],ye=[{title:"Customer",key:"name",align:"start"},{title:"Total Order",key:"orders",align:"center"},{title:"Total Belanja",key:"revenue",align:"end"},{title:"AOV",key:"avg_order",align:"end"}],ge=[{title:"Tanggal",key:"date",align:"start"},{title:"Pendapatan",key:"total",align:"end"}],fe=[{title:"Kategori",key:"category",align:"start"},{title:"Order",key:"orders_count",align:"center"},{title:"Qty Terjual",key:"quantity_sold",align:"center"},{title:"Revenue",key:"revenue",align:"end"},{title:"Harga Rata2",key:"avg_price",align:"end"}],b=l=>typeof l=="string"?l.startsWith("Rp")?l:`Rp ${l}`:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(l),Y=l=>new Date(l).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),he=l=>["warning","success","info","secondary","primary"][l]||"primary",te=l=>l.sort((t,o)=>o.order_count-t.order_count).slice(0,5),xe=(l,t)=>{const o=Math.max(...t.map(i=>i.order_count));return o>0?l/o*100:0},be=(l,t)=>{const o=Math.max(...t.map(i=>i.order_count));return o>0?l/o*100:0},we=l=>l>=6&&l<12?"mdi-weather-sunny":l>=12&&l<18?"mdi-weather-partly-cloudy":(l>=18&&l<22,"mdi-weather-night"),ae=l=>{switch(l==null?void 0:l.toLowerCase()){case"cash":case"tunai":return"mdi-cash";case"card":case"kartu":return"mdi-credit-card";case"digital":case"e-wallet":return"mdi-cellphone";case"transfer":return"mdi-bank-transfer";default:return"mdi-credit-card-outline"}},B=l=>{switch(l==null?void 0:l.toLowerCase()){case"cash":return"Tunai";case"card":return"Kartu";case"digital":return"Digital";case"transfer":return"Transfer";default:return l||"Lainnya"}},ke=l=>{const t=["#1976D2","#388E3C","#F57C00","#7B1FA2","#D32F2F","#303F9F","#00796B","#F57F17","#5D4037","#616161"];return t[l%t.length]},Ae=l=>{const t=["#2E7D32","#1565C0","#E65100","#6A1B9A","#C62828","#283593","#00695C","#F9A825","#4E342E","#424242"];return t[l%t.length]},Pe=()=>{var o,i,C;if(((i=(o=a.value)==null?void 0:o.summary)==null?void 0:i.daily_average_sales)!==void 0)return a.value.summary.daily_average_sales;if(!((C=a.value)!=null&&C.daily_sales)||!Array.isArray(a.value.daily_sales))return 0;const l=a.value.daily_sales.filter(V=>parseFloat(V.revenue)>0);return l.length===0?0:l.reduce((V,J)=>V+(parseFloat(J.revenue)||0),0)/l.length},Te=()=>{var l,t,o;return((t=(l=a.value)==null?void 0:l.summary)==null?void 0:t.active_days_count)!==void 0?a.value.summary.active_days_count:!((o=a.value)!=null&&o.daily_sales)||!Array.isArray(a.value.daily_sales)?0:a.value.daily_sales.filter(i=>parseFloat(i.revenue)>0).length},Se=()=>{if(D.value==="month"){const l=new Date().toISOString().slice(0,7);R.value=l}I()},I=async()=>{if(!S.value){S.value=!0;try{let l={};if(D.value==="custom")if(F.value&&L.value)l.start_date=F.value,l.end_date=L.value;else{S.value=!1;return}else if(R.value)l.month=R.value;else{S.value=!1;return}const t=await K.get("/api/reports/sales",{params:l});t.data.success&&(a.value=t.data.data,await se(),await De(),await Re(),await je(),setTimeout(()=>{Ce()},100))}catch(l){console.error("Error loading sales report:",l)}finally{S.value=!1}}},se=async()=>{try{const l=await K.get("/api/reports/today-sales");l.data.success&&(z.value=l.data.data)}catch(l){console.error("Error loading today sales:",l),z.value={total_sales:0,total_orders:0,avg_order_value:0}}},De=async()=>{try{const l=await K.get("/api/reports/payment-methods");console.log("Payment Methods Response:",l.data),l.data.success?M.value=l.data.data||[]:M.value=[]}catch(l){console.error("Error loading payment method analytics:",l),M.value=[]}},Re=async()=>{try{const l=await K.get("/api/reports/order-types");console.log("Order Types Response:",l.data),l.data.success?j.value=l.data.data||[]:j.value=[]}catch(l){console.error("Error loading order type analytics:",l),j.value=[]}},Ce=()=>{if(!G.value||!a.value)return;q&&q.destroy();const l=G.value.getContext("2d");if(!l)return;const t=a.value.daily_sales.map(i=>Y(i.date)),o=a.value.daily_sales.map(i=>{if(typeof i.total=="string"&&i.total.includes("Rp")){const C=i.total.replace(/\D/g,"");return parseInt(C,10)||0}return typeof i.total=="number"?i.total:0});q=new He(l,{type:"line",data:{labels:t,datasets:[{label:"Pendapatan Harian",data:o,borderColor:"rgb(76, 175, 80)",backgroundColor:"rgba(76, 175, 80, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(i){return b(i)}}}}}})},Oe=async()=>{var t,o,i,C,V,J,le,oe;if(!a.value){console.warn("No data to export");return}U.value=!0;const l=c=>{if(!c&&c!==0)return"Rp 0";let y=0;try{if(typeof c=="string"&&c.includes("Rp")){const k=c.replace(/\D/g,"");y=parseInt(k,10)}else typeof c=="string"?y=parseFloat(c.replace(/[^\d]/g,"")):typeof c=="number"&&(y=c);return(isNaN(y)||!isFinite(y)||y<0)&&(y=0),`Rp ${y.toLocaleString("id-ID").replace(/,/g,".")}`}catch{return"Rp 0"}};try{const c=await Le(()=>import("./xlsx-CfQreh1U.js"),[]),y=D.value==="custom"?`${F.value} s/d ${L.value}`:`Bulan ${R.value}`,X=[["LAPORAN PENJUALAN ENHANCED"],["Periode:",y],["Tanggal Export:",new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})],[],["RINGKASAN PENJUALAN"],["Total Order:",a.value.summary.total_orders],["Total Pendapatan:",l(a.value.summary.total_revenue)],["Rata-rata Order (AOV):",l(a.value.summary.average_order)],["Total Item Terjual:",a.value.summary.total_items],["Order Selesai:",a.value.summary.completed_orders],["Order Dibatalkan:",a.value.summary.cancelled_orders],a.value.summary.growth_percentage!==void 0?["Growth vs Periode Sebelumnya:",`${a.value.summary.growth_percentage}%`]:[],[],["ANALISIS CUSTOMER"],["Customer Baru:",((t=a.value.customer_behavior)==null?void 0:t.new_customers)||0],["Returning Customer:",((o=a.value.customer_behavior)==null?void 0:o.returning_customers)||0],["One-time Customer:",((i=a.value.customer_behavior)==null?void 0:i.one_time_customers)||0],["Retention Rate:",`${((C=a.value.customer_behavior)==null?void 0:C.retention_rate)||0}%`],[]],k=c.utils.book_new(),re=c.utils.aoa_to_sheet(X);if(re["!cols"]=[{wch:20},{wch:25}],c.utils.book_append_sheet(k,re,"Ringkasan"),a.value.daily_sales&&a.value.daily_sales.length>0){const x=[["PENJUALAN HARIAN"],["Periode:",y],[],["Tanggal","Total Penjualan"],...a.value.daily_sales.map(d=>[new Date(d.date).toLocaleDateString("id-ID"),l(d.total)])],_=c.utils.aoa_to_sheet(x);_["!cols"]=[{wch:15},{wch:20}],c.utils.book_append_sheet(k,_,"Penjualan Harian")}if(a.value.top_products&&a.value.top_products.length>0){const x=[["PRODUK TERLARIS"],["Periode:",y],[],["No","Nama Produk","Jumlah Terjual","Total Pendapatan"],...a.value.top_products.map((d,Q)=>[Q+1,d.name,d.quantity,l(d.revenue)])],_=c.utils.aoa_to_sheet(x);_["!cols"]=[{wch:5},{wch:30},{wch:15},{wch:20}],c.utils.book_append_sheet(k,_,"Produk Terlaris")}if(a.value.top_customers&&a.value.top_customers.length>0){const x=[["CUSTOMER TERBAIK - ANALISIS LENGKAP"],["Periode:",y],[],["No","Nama Customer","Jumlah Order","Total Belanja","AOV","Customer Lifetime (hari)"],...a.value.top_customers.map((d,Q)=>[Q+1,d.name,d.orders,l(d.revenue),l(d.avg_order),d.customer_lifetime||0])],_=c.utils.aoa_to_sheet(x);_["!cols"]=[{wch:5},{wch:25},{wch:15},{wch:20},{wch:15},{wch:20}],c.utils.book_append_sheet(k,_,"Customer Analytics")}if(a.value.peak_hours&&a.value.peak_hours.length>0){const x=[["ANALISIS JAM RAMAI"],["Periode:",y],[],["Jam","Jumlah Order","Total Revenue","AOV"],...a.value.peak_hours.map(d=>[d.hour_display,d.order_count,l(d.revenue),l(d.avg_order)])],_=c.utils.aoa_to_sheet(x);_["!cols"]=[{wch:10},{wch:15},{wch:20},{wch:15}],c.utils.book_append_sheet(k,_,"Peak Hours")}if(a.value.sales_by_day&&a.value.sales_by_day.length>0){const x=[["ANALISIS PENJUALAN PER HARI"],["Periode:",y],[],["Hari","Jumlah Order","Total Revenue","AOV"],...a.value.sales_by_day.map(d=>[d.day_name,d.order_count,l(d.revenue),l(d.avg_order)])],_=c.utils.aoa_to_sheet(x);_["!cols"]=[{wch:15},{wch:15},{wch:20},{wch:15}],c.utils.book_append_sheet(k,_,"Sales by Day")}if(a.value.payment_methods&&a.value.payment_methods.length>0){const x=[["ANALISIS METODE PEMBAYARAN"],["Periode:",y],[],["Metode","Jumlah Order","Total Revenue","AOV","Persentase"],...a.value.payment_methods.map(d=>[B(d.method),d.order_count,l(d.revenue),l(d.avg_order),`${d.percentage}%`])],_=c.utils.aoa_to_sheet(x);_["!cols"]=[{wch:15},{wch:15},{wch:20},{wch:15},{wch:12}],c.utils.book_append_sheet(k,_,"Payment Methods")}if(a.value.category_performance&&a.value.category_performance.length>0){const x=[["PERFORMA KATEGORI PRODUK"],["Periode:",y],[],["Kategori","Order dengan Kategori","Qty Terjual","Total Revenue","Harga Rata-rata"],...a.value.category_performance.map(d=>[d.category,d.orders_count,d.quantity_sold,l(d.revenue),l(d.avg_price)])],_=c.utils.aoa_to_sheet(x);_["!cols"]=[{wch:20},{wch:18},{wch:15},{wch:20},{wch:18}],c.utils.book_append_sheet(k,_,"Category Performance")}const Ie=[["BUSINESS INSIGHTS & RECOMMENDATIONS"],["Periode:",y],[],["RINGKASAN PERFORMA"],["Growth Rate:",a.value.summary.growth_percentage!==void 0?`${a.value.summary.growth_percentage}%`:"N/A"],["Customer Retention:",`${((V=a.value.customer_behavior)==null?void 0:V.retention_rate)||0}%`],[],["TOP PERFORMERS"],["Jam Tersibuk:",a.value.peak_hours&&a.value.peak_hours.length>0?(J=te(a.value.peak_hours)[0])==null?void 0:J.hour_display:"N/A"],["Hari Terbaik:",a.value.sales_by_day&&a.value.sales_by_day.length>0?(le=a.value.sales_by_day.sort((x,_)=>_.order_count-x.order_count)[0])==null?void 0:le.day_name:"N/A"],["Metode Bayar Favorit:",a.value.payment_methods&&a.value.payment_methods.length>0?B((oe=a.value.payment_methods[0])==null?void 0:oe.method):"N/A"],[],["REKOMENDASI BISNIS"],["1. Optimasi Operasional:","Focus staff scheduling pada jam dan hari ramai"],["2. Customer Retention:","Implementasi loyalty program untuk meningkatkan retention"],["3. Product Strategy:","Push produk top-selling dan evaluasi slow-moving items"],["4. Payment Strategy:","Optimalkan metode pembayaran yang paling disukai customer"],["5. Marketing Time:","Jalankan promosi saat jam dan hari dengan traffic rendah"]],ne=c.utils.aoa_to_sheet(Ie);ne["!cols"]=[{wch:25},{wch:50}],c.utils.book_append_sheet(k,ne,"Business Insights");const ie=`laporan-penjualan-enhanced-analytics-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.xlsx`;c.writeFile(k,ie),console.log("✅ Enhanced Sales Analytics report exported successfully:",ie)}catch(c){console.error("Error exporting sales report:",c)}finally{U.value=!1}};return Ee(()=>{const l=new Date,t=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}`;R.value=t,I(),se()}),(l,t)=>(u(),m("div",Be,[r("div",Je,[r("div",null,[r("div",Ke,[e(W,{icon:"mdi-arrow-left",variant:"text",size:"small",onClick:t[0]||(t[0]=o=>Ne(_e).back()),class:"me-2"}),t[5]||(t[5]=r("h1",{class:"text-h4 font-weight-bold"},"Laporan Penjualan",-1))]),t[6]||(t[6]=r("p",{class:"text-body-1 text-medium-emphasis"}," Analisis lengkap penjualan dan performa produk ",-1))]),e(W,{color:"success","prepend-icon":"mdi-file-excel",onClick:Oe,loading:U.value},{default:s(()=>t[7]||(t[7]=[g(" Export Excel ")])),_:1,__:[7]},8,["loading"])]),e(f,{class:"mb-6"},{default:s(()=>[e(h,null,{default:s(()=>[e(T,null,{default:s(()=>[e(p,{cols:"12",md:"4"},{default:s(()=>[e(de,{modelValue:D.value,"onUpdate:modelValue":[t[1]||(t[1]=o=>D.value=o),Se],items:pe,label:"Pilih Periode",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),D.value==="custom"?(u(),O(p,{key:0,cols:"12",md:"3"},{default:s(()=>[e(ue,{modelValue:F.value,"onUpdate:modelValue":[t[2]||(t[2]=o=>F.value=o),I],type:"date",label:"Tanggal Mulai",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})):$("",!0),D.value==="custom"?(u(),O(p,{key:1,cols:"12",md:"3"},{default:s(()=>[e(ue,{modelValue:L.value,"onUpdate:modelValue":[t[3]||(t[3]=o=>L.value=o),I],type:"date",label:"Tanggal Akhir",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})):(u(),O(p,{key:2,cols:"12",md:"3"},{default:s(()=>[e(de,{modelValue:R.value,"onUpdate:modelValue":[t[4]||(t[4]=o=>R.value=o),I],items:ve,label:"Pilih Bulan",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})),e(p,{cols:"12",md:"2"},{default:s(()=>[e(W,{color:"primary",block:"",onClick:I,loading:S.value},{default:s(()=>t[8]||(t[8]=[g(" Refresh ")])),_:1,__:[8]},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1}),S.value?(u(),m("div",Ue,[e(Me,{indeterminate:"",color:"primary",size:"64"}),t[9]||(t[9]=r("p",{class:"text-body-1 mt-4"},"Memuat data laporan...",-1))])):a.value?(u(),m("div",Ge,[e(T,{class:"mb-6"},{default:s(()=>[e(p,{cols:"12",md:"6"},{default:s(()=>[e(f,null,{default:s(()=>[e(h,{class:"text-center"},{default:s(()=>[e(v,{icon:"mdi-calendar-today",size:"32",class:"text-purple mb-2"}),r("div",qe,n(b(z.value.total_sales)),1),t[10]||(t[10]=r("div",{class:"text-body-2 text-medium-emphasis"},"Penjualan Hari Ini",-1)),r("div",Ye,n(z.value.total_orders)+" order | "+n(Y(new Date)),1)]),_:1,__:[10]})]),_:1})]),_:1}),e(p,{cols:"12",md:"6"},{default:s(()=>[e(f,null,{default:s(()=>[e(h,{class:"text-center"},{default:s(()=>[e(v,{icon:"mdi-chart-bar",size:"32",class:"text-indigo mb-2"}),r("div",Xe,n(b(Pe())),1),t[11]||(t[11]=r("div",{class:"text-body-2 text-medium-emphasis"},"Rata-rata Penjualan Harian",-1)),r("div",Qe," Per "+n(Te())+" hari aktif ",1)]),_:1,__:[11]})]),_:1})]),_:1})]),_:1}),e(T,{class:"mb-6"},{default:s(()=>[e(p,{cols:"12",md:"6"},{default:s(()=>[e(f,null,{default:s(()=>[e(P,{class:"pb-2"},{default:s(()=>[e(v,{icon:"mdi-credit-card",class:"me-2"}),t[12]||(t[12]=g(" Metode Pembayaran "))]),_:1,__:[12]}),e(h,null,{default:s(()=>[M.value.length>0?(u(),m("div",We,[(u(!0),m(E,null,N(M.value,(o,i)=>(u(),m("div",{key:i,class:"d-flex justify-space-between align-center mb-3"},[r("div",Ze,[e(v,{icon:ae(o.payment_method),color:ke(i),class:"me-2"},null,8,["icon","color"]),r("span",et,n(B(o.payment_method)),1)]),r("div",tt,[r("div",at,n(o.total_amount_formatted),1),r("div",st,n(o.order_count)+" order",1)])]))),128))])):(u(),m("div",lt,[e(v,{icon:"mdi-cash-off",size:"48",class:"text-grey-lighten-1 mb-2"}),t[13]||(t[13]=r("div",{class:"text-body-2 text-medium-emphasis"},"Tidak ada pembayaran hari ini",-1)),t[14]||(t[14]=r("div",{class:"text-h6 font-weight-bold text-grey"},"Rp 0",-1))]))]),_:1})]),_:1})]),_:1}),e(p,{cols:"12",md:"6"},{default:s(()=>[e(f,null,{default:s(()=>[e(P,{class:"pb-2"},{default:s(()=>[e(v,{icon:"mdi-food",class:"me-2"}),t[15]||(t[15]=g(" Tipe Order "))]),_:1,__:[15]}),e(h,null,{default:s(()=>[j.value.length>0?(u(),m("div",ot,[(u(!0),m(E,null,N(j.value,(o,i)=>(u(),m("div",{key:i,class:"d-flex justify-space-between align-center mb-3"},[r("div",rt,[e(v,{icon:"mdi-food",color:Ae(i),class:"me-2"},null,8,["color"]),r("span",nt,n(o.order_type),1)]),r("div",it,[r("div",dt,n(o.total_amount_formatted),1),r("div",ut,n(o.order_count)+" order",1)])]))),128))])):(u(),m("div",ct,[e(v,{icon:"mdi-food-off",size:"48",class:"text-grey-lighten-1 mb-2"}),t[16]||(t[16]=r("div",{class:"text-body-2 text-medium-emphasis"},"Tidak ada pesanan hari ini",-1)),t[17]||(t[17]=r("div",{class:"text-h6 font-weight-bold text-grey"},"Rp 0",-1))]))]),_:1})]),_:1})]),_:1})]),_:1}),e(T,{class:"mb-6"},{default:s(()=>[e(p,{cols:"6",md:"3"},{default:s(()=>[e(f,null,{default:s(()=>[e(h,{class:"text-center"},{default:s(()=>[e(v,{icon:"mdi-currency-usd",size:"32",class:"text-success mb-2"}),r("div",mt,n(b(a.value.summary.total_revenue)),1),t[18]||(t[18]=r("div",{class:"text-body-2 text-medium-emphasis"},"Total Pendapatan",-1)),a.value.summary.growth_percentage!==void 0?(u(),m("div",_t,[e(H,{color:a.value.summary.growth_percentage>=0?"success":"error",size:"x-small",variant:"tonal"},{default:s(()=>[g(n(a.value.summary.growth_percentage>=0?"+":"")+n(a.value.summary.growth_percentage)+"% ",1)]),_:1},8,["color"])])):$("",!0)]),_:1,__:[18]})]),_:1})]),_:1}),e(p,{cols:"6",md:"3"},{default:s(()=>[e(f,null,{default:s(()=>[e(h,{class:"text-center"},{default:s(()=>[e(v,{icon:"mdi-cart",size:"32",class:"text-primary mb-2"}),r("div",pt,n(a.value.summary.total_orders),1),t[19]||(t[19]=r("div",{class:"text-body-2 text-medium-emphasis"},"Total Order",-1)),r("div",vt," AOV: "+n(b(a.value.summary.average_order)),1)]),_:1,__:[19]})]),_:1})]),_:1}),e(p,{cols:"6",md:"3"},{default:s(()=>[e(f,null,{default:s(()=>[e(h,{class:"text-center"},{default:s(()=>[e(v,{icon:"mdi-package",size:"32",class:"text-info mb-2"}),r("div",yt,n(a.value.summary.total_items),1),t[20]||(t[20]=r("div",{class:"text-body-2 text-medium-emphasis"},"Total Item",-1)),r("div",gt,n(a.value.summary.completed_orders)+" selesai ",1)]),_:1,__:[20]})]),_:1})]),_:1}),e(p,{cols:"6",md:"3"},{default:s(()=>[e(f,null,{default:s(()=>[e(h,{class:"text-center"},{default:s(()=>{var o,i;return[e(v,{icon:"mdi-account-group",size:"32",class:"text-warning mb-2"}),r("div",ft,n(((o=a.value.customer_behavior)==null?void 0:o.new_customers)||0),1),t[21]||(t[21]=r("div",{class:"text-body-2 text-medium-emphasis"},"Customer Baru",-1)),r("div",ht," Retention: "+n(((i=a.value.customer_behavior)==null?void 0:i.retention_rate)||0)+"% ",1)]}),_:1,__:[21]})]),_:1})]),_:1})]),_:1}),e(T,{class:"mb-6"},{default:s(()=>[e(p,{cols:"12"},{default:s(()=>[e(f,null,{default:s(()=>[e(P,null,{default:s(()=>t[22]||(t[22]=[g("Trend Penjualan Harian")])),_:1,__:[22]}),e(h,null,{default:s(()=>[a.value&&a.value.daily_sales&&a.value.daily_sales.length>0?(u(),m("div",xt,[r("canvas",{ref_key:"dailySalesChart",ref:G,class:"w-100",style:{"max-height":"300px"}},null,512)])):(u(),m("div",bt,[e(v,{icon:"mdi-chart-line",size:"48",class:"text-medium-emphasis mb-2"}),t[23]||(t[23]=r("p",{class:"text-body-2 text-medium-emphasis"},"Tidak ada data penjualan harian",-1))]))]),_:1})]),_:1})]),_:1})]),_:1}),e(T,{class:"mb-6"},{default:s(()=>[e(p,{cols:"12",md:"4"},{default:s(()=>[e(f,null,{default:s(()=>[e(P,null,{default:s(()=>t[24]||(t[24]=[g("Top 5 Produk")])),_:1,__:[24]}),e(h,null,{default:s(()=>[r("div",wt,[(u(!0),m(E,null,N(a.value.top_products,(o,i)=>(u(),m("div",{key:o.id,class:"mb-3"},[r("div",kt,[r("div",At,[e(H,{color:he(i),size:"small",class:"me-2"},{default:s(()=>[g(n(i+1),1)]),_:2},1032,["color"]),r("div",null,[r("div",Pt,n(o.name),1),r("div",Tt,n(o.quantity)+" terjual ",1)])]),r("div",St,[r("div",Dt,n(b(o.revenue)),1)])]),i<a.value.top_products.length-1?(u(),O(ze,{key:0,class:"mt-3"})):$("",!0)]))),128))])]),_:1})]),_:1})]),_:1}),e(p,{cols:"12",md:"4"},{default:s(()=>[e(f,null,{default:s(()=>[e(P,null,{default:s(()=>t[25]||(t[25]=[g("Top Customer")])),_:1,__:[25]}),e(h,null,{default:s(()=>[e(ee,{headers:ye,items:a.value.top_customers,"items-per-page":5,class:"elevation-0","no-data-text":"Tidak ada data customer"},{"item.orders":s(({item:o})=>[e(H,{size:"small",color:"primary",variant:"tonal"},{default:s(()=>[g(n(o.orders),1)]),_:2},1024)]),"item.revenue":s(({item:o})=>[r("span",Rt,n(b(o.revenue)),1)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1}),e(p,{cols:"12",md:"4"},{default:s(()=>[e(f,null,{default:s(()=>[e(P,null,{default:s(()=>t[26]||(t[26]=[g("Penjualan per Hari")])),_:1,__:[26]}),e(h,null,{default:s(()=>[e(ee,{headers:ge,items:a.value.daily_sales,"items-per-page":7,class:"elevation-0","no-data-text":"Tidak ada data penjualan"},{"item.date":s(({item:o})=>[g(n(Y(o.date)),1)]),"item.total":s(({item:o})=>[r("span",Ct,n(b(o.total)),1)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1}),e(T,{class:"mb-6"},{default:s(()=>[e(p,{cols:"12",md:"6"},{default:s(()=>[e(f,null,{default:s(()=>[e(P,{class:"d-flex align-center gap-2"},{default:s(()=>[e(v,{icon:"mdi-clock-outline"}),t[27]||(t[27]=g(" Jam Ramai (Peak Hours) "))]),_:1,__:[27]}),e(h,null,{default:s(()=>[a.value.peak_hours&&a.value.peak_hours.length>0?(u(),m("div",Ot,[(u(!0),m(E,null,N(te(a.value.peak_hours),o=>(u(),m("div",{key:o.hour,class:"mb-2"},[r("div",It,[r("div",Vt,[e(v,{icon:we(o.hour),size:"16"},null,8,["icon"]),r("span",Et,n(o.hour_display),1)]),r("div",Nt,[r("div",Mt,n(o.order_count)+" order",1),r("div",jt,n(b(o.revenue)),1)])]),e(Z,{"model-value":xe(o.order_count,a.value.peak_hours),color:"primary",height:"4",class:"mt-1"},null,8,["model-value"])]))),128))])):(u(),m("div",Ft,t[28]||(t[28]=[r("p",{class:"text-body-2 text-medium-emphasis"},"Tidak ada data jam ramai",-1)])))]),_:1})]),_:1})]),_:1}),e(p,{cols:"12",md:"6"},{default:s(()=>[e(f,null,{default:s(()=>[e(P,{class:"d-flex align-center gap-2"},{default:s(()=>[e(v,{icon:"mdi-credit-card-outline"}),t[29]||(t[29]=g(" Metode Pembayaran "))]),_:1,__:[29]}),e(h,null,{default:s(()=>[a.value.payment_methods&&a.value.payment_methods.length>0?(u(),m("div",Lt,[(u(!0),m(E,null,N(a.value.payment_methods,o=>(u(),m("div",{key:o.method,class:"mb-3"},[r("div",$t,[r("div",Ht,[e(v,{icon:ae(o.method),size:"16"},null,8,["icon"]),r("span",zt,n(B(o.method)),1)]),r("div",Bt,[e(H,{size:"small",color:"primary",variant:"tonal"},{default:s(()=>[g(n(o.percentage)+"% ",1)]),_:2},1024)])]),r("div",Jt,[r("span",Kt,n(o.order_count)+" transaksi",1),r("span",Ut,n(b(o.revenue)),1)]),e(Z,{"model-value":o.percentage,color:"success",height:"4",class:"mt-1"},null,8,["model-value"])]))),128))])):(u(),m("div",Gt,t[30]||(t[30]=[r("p",{class:"text-body-2 text-medium-emphasis"},"Tidak ada data metode pembayaran",-1)])))]),_:1})]),_:1})]),_:1})]),_:1}),a.value.sales_by_day&&a.value.sales_by_day.length>0?(u(),O(T,{key:0,class:"mb-6"},{default:s(()=>[e(p,{cols:"12"},{default:s(()=>[e(f,null,{default:s(()=>[e(P,{class:"d-flex align-center gap-2"},{default:s(()=>[e(v,{icon:"mdi-calendar-week"}),t[31]||(t[31]=g(" Performa Penjualan per Hari "))]),_:1,__:[31]}),e(h,null,{default:s(()=>[e(T,null,{default:s(()=>[(u(!0),m(E,null,N(a.value.sales_by_day,o=>(u(),O(p,{key:o.day_name,cols:"6",md:"1.7"},{default:s(()=>[r("div",qt,[r("div",Yt,n(o.order_count),1),r("div",Xt,n(o.day_name),1),r("div",Qt,n(b(o.revenue)),1),e(Z,{"model-value":be(o.order_count,a.value.sales_by_day),color:"primary",height:"3",class:"mt-1"},null,8,["model-value"])])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):$("",!0),a.value.category_performance&&a.value.category_performance.length>0?(u(),O(T,{key:1,class:"mb-6"},{default:s(()=>[e(p,{cols:"12"},{default:s(()=>[e(f,null,{default:s(()=>[e(P,{class:"d-flex align-center gap-2"},{default:s(()=>[e(v,{icon:"mdi-shape-outline"}),t[32]||(t[32]=g(" Performa Kategori Produk "))]),_:1,__:[32]}),e(h,null,{default:s(()=>[e(ee,{headers:fe,items:a.value.category_performance,"items-per-page":10,class:"elevation-0","no-data-text":"Tidak ada data kategori"},{"item.category":s(({item:o})=>[r("div",Wt,[e(v,{icon:"mdi-tag",size:"16",color:"primary"}),r("span",Zt,n(o.category),1)])]),"item.orders_count":s(({item:o})=>[e(H,{size:"small",color:"info",variant:"tonal"},{default:s(()=>[g(n(o.orders_count),1)]),_:2},1024)]),"item.quantity_sold":s(({item:o})=>[r("span",ea,n(o.quantity_sold),1)]),"item.revenue":s(({item:o})=>[r("span",ta,n(b(o.revenue)),1)]),"item.avg_price":s(({item:o})=>[r("span",aa,n(b(o.avg_price)),1)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1})):$("",!0)])):(u(),m("div",sa,[e(v,{icon:"mdi-chart-line-variant",size:"64",class:"text-medium-emphasis mb-4"}),t[33]||(t[33]=r("h3",{class:"text-h6 mb-2"},"Tidak ada data laporan",-1)),t[34]||(t[34]=r("p",{class:"text-body-2 text-medium-emphasis"}," Silakan pilih periode yang berbeda atau periksa kembali filter Anda ",-1))]))]))}});typeof ce=="function"&&ce(me);const Sa=$e(me,[["__scopeId","data-v-6c402fdb"]]);export{Sa as default};

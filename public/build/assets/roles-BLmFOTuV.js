import{D as Oe}from"./DeleteConfirmationDialog-Cszkv9Yv.js";import{d as re,g as L,f as t,b as s,aK as je,a1 as h,e as o,o as b,r as d,V as F,D as Ge,c as C,l as T,at as W,au as D,s as y,X as _,t as p,v as te,ax as Ee,F as Ke,i as qe,_ as He}from"./main-xnptf2TS.js";import{V as P,b as Y,c as ie}from"./VCard-OtdmNL9Q.js";import{V as ee,a as k}from"./VRow-CBzhIdKk.js";import{V as J}from"./VTextField-D1fuUSnH.js";import{V as Z}from"./VSelect-Df7PjOaS.js";import{V as $}from"./VCardText-BPTOC4_p.js";import{V as oe}from"./VDialog-CODkmJOV.js";import{V as G}from"./VAvatar-BWKse5Ys.js";import{V as E}from"./VSpacer-DtE4IAYh.js";import{V as K}from"./VDivider-_7qKKIdq.js";import{V as Ie}from"./VDataTable-XC7AE1m2.js";import{V as q}from"./VChip-CznLCnP6.js";import{V as Je}from"./VForm-BA_U2T8s.js";import{V as Xe}from"./VTextarea-LsTERqtx.js";import{V as Qe}from"./VSwitch-oM8lyryU.js";import{b as ne}from"./route-block-B_A1xBdJ.js";import"./VImg-DieUwUB1.js";/* empty css              */import"./forwardRefs-B931MWyl.js";import"./VList-CRGSE_kw.js";import"./VOverlay-VQpNIzTh.js";import"./VMenu-CVgzTi3w.js";import"./VCheckboxBtn-D7c9WeBv.js";import"./VTable-OXifF_nr.js";import"./filter-Hb6Yguvo.js";const We={class:"d-flex gap-2"},Ye=re({__name:"RoleSearchFilters",props:{searchValue:{},statusFilter:{},permissionFilter:{},sortBy:{},sortOrder:{}},emits:["update:search","update:status-filter","update:permission-filter","update:sort-by","update:sort-order","search","refresh"],setup(de){const S=[{title:"Semua Status",value:"all"},{title:"Aktif",value:"active"},{title:"Tidak Aktif",value:"inactive"}],A=[{title:"Semua Permission",value:"all"},{title:"Punya Permissions",value:"with_permissions"},{title:"Tanpa Permissions",value:"without_permissions"}],N=[{title:"Nama",value:"name"},{title:"Display Name",value:"display_name"},{title:"Jumlah Permissions",value:"permissions_count"},{title:"Jumlah Users",value:"users_count"},{title:"Tanggal Dibuat",value:"created_at"},{title:"Terakhir Diperbarui",value:"updated_at"}];return(m,r)=>(b(),L(P,{class:"mb-6"},{default:t(()=>[s($,{class:"pa-6"},{default:t(()=>[s(ee,null,{default:t(()=>[s(k,{cols:"12",md:"4"},{default:t(()=>[s(J,{"model-value":m.searchValue,label:"Cari role...",placeholder:"Nama role, display name, atau deskripsi",variant:"outlined","prepend-inner-icon":"tabler-search",clearable:"","onUpdate:modelValue":r[0]||(r[0]=u=>m.$emit("update:search",u)),onKeyup:r[1]||(r[1]=je(u=>m.$emit("search"),["enter"])),"onClick:clear":r[2]||(r[2]=u=>{m.$emit("update:search",""),m.$emit("search")})},null,8,["model-value"])]),_:1}),s(k,{cols:"12",md:"2"},{default:t(()=>[s(Z,{"model-value":m.statusFilter,label:"Status",variant:"outlined",items:S,"onUpdate:modelValue":r[3]||(r[3]=u=>m.$emit("update:status-filter",u))},null,8,["model-value"])]),_:1}),s(k,{cols:"12",md:"2"},{default:t(()=>[s(Z,{"model-value":m.permissionFilter,label:"Permissions",variant:"outlined",items:A,"onUpdate:modelValue":r[4]||(r[4]=u=>m.$emit("update:permission-filter",u))},null,8,["model-value"])]),_:1}),s(k,{cols:"12",md:"2"},{default:t(()=>[s(Z,{"model-value":m.sortBy,label:"Urutkan",variant:"outlined",items:N,"onUpdate:modelValue":r[5]||(r[5]=u=>m.$emit("update:sort-by",u))},null,8,["model-value"])]),_:1}),s(k,{cols:"12",md:"1"},{default:t(()=>[s(h,{icon:m.sortOrder==="asc"?"tabler-sort-ascending":"tabler-sort-descending",variant:"outlined",color:"primary",onClick:r[6]||(r[6]=u=>m.$emit("update:sort-order",m.sortOrder==="asc"?"desc":"asc"))},null,8,["icon"])]),_:1}),s(k,{cols:"12",md:"1"},{default:t(()=>[o("div",We,[s(h,{icon:"tabler-refresh",variant:"outlined",onClick:r[7]||(r[7]=u=>m.$emit("refresh"))})])]),_:1})]),_:1})]),_:1})]),_:1}))}}),Ze={class:"role-management"},es={class:"d-flex justify-space-between align-center mb-6"},ss={class:"d-flex align-center"},as={class:"text-h6 font-weight-medium"},ls={class:"d-flex align-center"},ts={class:"text-h6 font-weight-medium"},is={class:"d-flex align-center"},os={class:"text-h6 font-weight-medium"},ns={class:"d-flex align-center"},rs={class:"text-h6 font-weight-medium"},us={class:"d-flex align-center"},ds={class:"font-weight-medium"},cs={class:"text-caption text-medium-emphasis"},ms={class:"text-body-2"},vs={class:"d-flex align-center justify-center"},ps={class:"d-flex align-center justify-center"},fs={class:"text-body-2"},gs={class:"d-flex align-center justify-center"},_s={class:"text-center pa-6"},bs={class:"d-flex align-center"},ys={class:"permission-icon-wrapper me-3"},hs={class:"text-caption text-medium-emphasis"},ks={key:0,class:"text-center py-12"},xs={key:1},Vs={class:"mb-6"},ws={class:"d-flex align-center mb-4"},Cs={class:"permission-stats"},Ps={key:0,class:"permissions-grid"},Rs={class:"d-flex align-start"},Ds=["onClick"],$s=["onClick"],Us={class:"text-body-1 font-weight-medium mb-1"},zs={class:"text-caption text-medium-emphasis"},Fs={key:1,class:"text-center py-12"},Ss={class:"permission-empty-icon mb-4"},As={key:2,class:"text-center py-8"},Ts={class:"d-flex align-center w-100"},Ls={key:0,class:"permission-summary"},Ns={class:"text-caption text-medium-emphasis"},ue=re({__name:"roles",setup(de){const S=d(!1),A=d(!1),N=d(!1),m=d(!1),r=d([]),u=d([]),se=d([]),c=d([]),B=d(""),v=d({search:"",status:"all",permission_filter:"all",sort_by:"created_at",sort_order:"desc"}),M=d(!1),O=d(!1),H=d(!1),ce=d(!1),R=d(!1),f=d(null),X=d(!1),j=d(!1),x=d(""),U=d(""),w=d(""),V=d({name:"",display_name:"",description:"",is_active:!0,permissions:[]}),me=[a=>!!a||"Nama role wajib diisi",a=>a.length>=3||"Nama role minimal 3 karakter"],ve=[a=>!!a||"Display name wajib diisi"],pe=F(()=>r.value.filter(a=>a.is_active).length);F(()=>r.value.filter(a=>!a.is_active).length);const fe=F(()=>r.value.reduce((a,e)=>a+(e.permissions_count||0),0)),ge=F(()=>r.value.filter(a=>{var e;return(e=a.display_name||a.name)==null?void 0:e.toLowerCase().includes("admin")}).length),_e=F(()=>{let a=[...r.value];if(v.value.search){const e=v.value.search.toLowerCase();a=a.filter(i=>{var n,l,g;return((n=i.name)==null?void 0:n.toLowerCase().includes(e))||((l=i.display_name)==null?void 0:l.toLowerCase().includes(e))||((g=i.description)==null?void 0:g.toLowerCase().includes(e))})}if(v.value.status!=="all"){const e=v.value.status==="active";a=a.filter(i=>i.is_active===e)}return v.value.permission_filter==="with_permissions"?a=a.filter(e=>(e.permissions_count||0)>0):v.value.permission_filter==="without_permissions"&&(a=a.filter(e=>(e.permissions_count||0)===0)),a.sort((e,i)=>{const n=e[v.value.sort_by]||0,l=i[v.value.sort_by]||0;return v.value.sort_order==="asc"?n>l?1:-1:n<l?1:-1}),a}),I=F(()=>{if(!B.value)return u.value;const a=B.value.toLowerCase();return u.value.filter(e=>{var i,n,l;return((i=e.name)==null?void 0:i.toLowerCase().includes(a))||((n=e.display_name)==null?void 0:n.toLowerCase().includes(a))||((l=e.description)==null?void 0:l.toLowerCase().includes(a))})});F(()=>{const a={};return I.value.forEach(e=>{var n;const i=((n=e.name)==null?void 0:n.split(".")[0])||"other";a[i]||(a[i]=[]),a[i].push(e)}),Object.entries(a).map(([e,i])=>({category:e.charAt(0).toUpperCase()+e.slice(1),permissions:i,icon:be(e)}))});const be=a=>({users:"tabler-users",roles:"tabler-users-group",products:"tabler-box",categories:"tabler-category",transactions:"tabler-cash",reports:"tabler-chart-bar",settings:"tabler-settings",logs:"tabler-history",inventory:"tabler-package",suppliers:"tabler-truck-delivery",customers:"tabler-users",other:"tabler-dots"})[a]||"tabler-shield",z=async()=>{var a,e;S.value=!0,x.value="";try{console.log("Fetching roles with axios...");const i=await D.get("/api/roles");if(console.log("Roles response:",i.data),i.data.success)r.value=i.data.data||[],r.value.length===0&&console.log("No roles found in database");else throw new Error(i.data.message||"API returned unsuccessful response")}catch(i){console.error("Failed to fetch roles:",i),x.value=((e=(a=i.response)==null?void 0:a.data)==null?void 0:e.message)||i.message||"Gagal memuat data roles",r.value=[]}finally{S.value=!1}},ye=async()=>{var a,e;try{console.log("Fetching permissions...");const i=await D.get("/api/permissions");console.log("Permissions response:",i.data),i.data.success?(u.value=i.data.data||[],console.log("Permissions loaded:",u.value.length)):(u.value=[],console.warn("Permissions API returned unsuccessful response"))}catch(i){console.error("Failed to fetch permissions:",i),u.value=[],x.value=((e=(a=i.response)==null?void 0:a.data)==null?void 0:e.message)||"Gagal memuat permissions"}},he=async a=>{var e,i;X.value=!0;try{console.log("Fetching permissions for role:",a);const n=await D.get(`/api/roles/${a}/permissions`);console.log("Role permissions response:",n.data),n.data.success&&(se.value=n.data.data,c.value=n.data.data.map(l=>l.id_permission||l.id),console.log("Assigned permissions for this role:",c.value),console.log("Total available permissions:",u.value.length))}catch(n){console.error("Failed to fetch role permissions:",n),x.value=((i=(e=n.response)==null?void 0:e.data)==null?void 0:i.message)||"Gagal memuat permissions role",c.value=[]}finally{X.value=!1}},ke=async()=>{var a,e;if(f.value){j.value=!0;try{const i=await D.post(`/api/roles/${f.value.id}/permissions/sync`,{permissions:c.value});if(i.data.success)U.value="Permissions berhasil diperbarui",await z(),Q();else throw new Error(i.data.message||"Failed to sync permissions")}catch(i){console.error("Failed to sync permissions:",i),x.value=((e=(a=i.response)==null?void 0:a.data)==null?void 0:e.message)||"Gagal menyimpan permissions"}finally{j.value=!1}}},xe=async()=>{var a,e,i,n;A.value=!0,w.value="";try{const l={...V.value};let g;R.value&&f.value?g=await D.put(`/api/roles/${f.value.id}`,l):g=await D.post("/api/roles",l),g.data.success?(U.value=R.value?"Role berhasil diperbarui":"Role berhasil ditambahkan",await z(),ae()):w.value=g.data.message||"Gagal menyimpan role"}catch(l){console.error("Failed to save role:",l),(e=(a=l.response)==null?void 0:a.data)!=null&&e.errors?w.value=Object.values(l.response.data.errors).flat().join(", "):w.value=((n=(i=l.response)==null?void 0:i.data)==null?void 0:n.message)||"Gagal menyimpan role"}finally{A.value=!1}},Ve=async()=>{var a,e;if(f.value){N.value=!0;try{const i=await D.delete(`/api/roles/${f.value.id}`);i.data.success?(U.value="Role berhasil dihapus",await z()):x.value=i.data.message||"Gagal menghapus role",O.value=!1,f.value=null}catch(i){x.value=((e=(a=i.response)==null?void 0:a.data)==null?void 0:e.message)||"Gagal menghapus role",console.error("Failed to delete role:",i)}finally{N.value=!1}}},we=async a=>{var e,i;m.value=!0;try{const n=await D.post(`/api/roles/${a.id}/toggle-active`);n.data.success?(U.value=n.data.message||`Role ${n.data.data.is_active?"diaktifkan":"dinonaktifkan"}`,await z()):x.value=n.data.message||"Gagal mengubah status role"}catch(n){x.value=((i=(e=n.response)==null?void 0:e.data)==null?void 0:i.message)||"Gagal mengubah status role",console.error("Failed to toggle role status:",n)}finally{m.value=!1}},Ce=()=>{R.value=!1,f.value=null,V.value={name:"",display_name:"",description:"",is_active:!0,permissions:[]},w.value="",M.value=!0},Pe=a=>{R.value=!0,f.value=a,V.value={name:a.name,display_name:a.display_name||"",description:a.description||"",is_active:a.is_active,permissions:[]},w.value="",M.value=!0},Re=a=>{f.value=a,O.value=!0},De=async a=>{console.log("Opening permissions dialog for role:",a),f.value=a,c.value=[],H.value=!0,await he(a.id)},$e=a=>{f.value=a,ce.value=!0},ae=()=>{M.value=!1,R.value=!1,f.value=null,w.value=""},Q=()=>{console.log("Closing permissions dialog"),H.value=!1,f.value=null,c.value=[],se.value=[],B.value=""},le=a=>{console.log("Toggling permission:",a);const e=c.value.indexOf(a);e>-1?c.value.splice(e,1):c.value.push(a),console.log("Selected permissions:",c.value)},Ue=()=>{c.value=I.value.map(a=>a.id_permission||a.id)},ze=()=>{c.value=[]},Fe=a=>{v.value.search=a},Se=a=>{v.value.status=a},Ae=a=>{v.value.permission_filter=a},Te=a=>{v.value.sort_by=a},Le=a=>{v.value.sort_order=a},Ne=()=>{},Be=()=>{w.value=""},Me=a=>a?new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"}):"-";return Ge(async()=>{await ye(),await z()}),(a,e)=>{var i,n;return b(),C("div",Ze,[o("div",es,[e[12]||(e[12]=o("div",null,[o("h1",{class:"text-h4 font-weight-bold coffee-title"},"Role Management"),o("p",{class:"text-body-1 text-medium-emphasis coffee-subtitle"},"Kelola role pengguna dan izin akses sistem")],-1)),s(h,{color:"primary","prepend-icon":"tabler-plus",class:"coffee-btn",onClick:Ce},{default:t(()=>e[11]||(e[11]=[y(" Tambah Role Baru ")])),_:1,__:[11]})]),s(Ye,{"search-value":v.value.search,"status-filter":v.value.status,"permission-filter":v.value.permission_filter,"sort-by":v.value.sort_by,"sort-order":v.value.sort_order,"onUpdate:search":Fe,"onUpdate:statusFilter":Se,"onUpdate:permissionFilter":Ae,"onUpdate:sortBy":Te,"onUpdate:sortOrder":Le,onSearch:Ne,onRefresh:z},null,8,["search-value","status-filter","permission-filter","sort-by","sort-order"]),x.value?(b(),L(W,{key:0,type:"error",variant:"outlined",class:"mb-4",text:x.value,closable:"","onClick:close":e[0]||(e[0]=l=>x.value="")},null,8,["text"])):T("",!0),U.value?(b(),L(W,{key:1,type:"success",variant:"outlined",class:"mb-4",text:U.value,closable:"","onClick:close":e[1]||(e[1]=l=>U.value="")},null,8,["text"])):T("",!0),s(ee,{class:"mb-6"},{default:t(()=>[s(k,{cols:"12",sm:"6",md:"3"},{default:t(()=>[s(P,null,{default:t(()=>[s($,null,{default:t(()=>[o("div",ss,[s(G,{color:"primary",variant:"tonal",class:"me-4"},{default:t(()=>[s(_,{icon:"tabler-users"})]),_:1}),o("div",null,[e[13]||(e[13]=o("span",{class:"text-sm"},"Total Roles",-1)),o("div",as,p(r.value.length),1)])])]),_:1})]),_:1})]),_:1}),s(k,{cols:"12",sm:"6",md:"3"},{default:t(()=>[s(P,null,{default:t(()=>[s($,null,{default:t(()=>[o("div",ls,[s(G,{color:"success",variant:"tonal",class:"me-4"},{default:t(()=>[s(_,{icon:"tabler-check"})]),_:1}),o("div",null,[e[14]||(e[14]=o("span",{class:"text-sm"},"Active Roles",-1)),o("div",ts,p(pe.value),1)])])]),_:1})]),_:1})]),_:1}),s(k,{cols:"12",sm:"6",md:"3"},{default:t(()=>[s(P,null,{default:t(()=>[s($,null,{default:t(()=>[o("div",is,[s(G,{color:"warning",variant:"tonal",class:"me-4"},{default:t(()=>[s(_,{icon:"tabler-shield"})]),_:1}),o("div",null,[e[15]||(e[15]=o("span",{class:"text-sm"},"Total Permissions",-1)),o("div",os,p(fe.value),1)])])]),_:1})]),_:1})]),_:1}),s(k,{cols:"12",sm:"6",md:"3"},{default:t(()=>[s(P,null,{default:t(()=>[s($,null,{default:t(()=>[o("div",ns,[s(G,{color:"info",variant:"tonal",class:"me-4"},{default:t(()=>[s(_,{icon:"tabler-crown"})]),_:1}),o("div",null,[e[16]||(e[16]=o("span",{class:"text-sm"},"Admin Roles",-1)),o("div",rs,p(ge.value),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),s(P,null,{default:t(()=>[s(Y,{class:"d-flex align-center pa-4"},{default:t(()=>[s(_,{icon:"tabler-users",class:"me-2"}),e[17]||(e[17]=y(" Roles ")),s(E),s(h,{icon:"tabler-refresh",variant:"text",size:"small",onClick:z,loading:S.value},null,8,["loading"])]),_:1,__:[17]}),s(K),s(Ie,{headers:[{title:"Role",key:"display_name",sortable:!0},{title:"Description",key:"description"},{title:"Permissions",key:"permissions_count",align:"center"},{title:"Users",key:"users_count",align:"center"},{title:"Status",key:"is_active",align:"center"},{title:"Created",key:"created_at"},{title:"Actions",key:"actions",sortable:!1,align:"center"}],items:_e.value,loading:S.value,class:"elevation-0","item-key":"id"},{"item.display_name":t(({item:l})=>[o("div",us,[s(G,{color:"primary",variant:"tonal",size:"32",class:"me-3"},{default:t(()=>[s(_,{icon:"tabler-user",size:"18"})]),_:1}),o("div",null,[o("div",ds,p(l.display_name||l.name),1),o("div",cs,p(l.name),1)])])]),"item.description":t(({item:l})=>[o("span",ms,p(l.description||"-"),1)]),"item.permissions_count":t(({item:l})=>[o("div",vs,[s(q,{size:"small",color:"primary",variant:"tonal",onClick:g=>De(l),class:"cursor-pointer"},{default:t(()=>[y(p(l.permissions_count||0),1)]),_:2},1032,["onClick"])])]),"item.users_count":t(({item:l})=>[o("div",ps,[s(q,{size:"small",color:(l.users_count||0)>0?"info":"default",variant:"tonal",onClick:g=>(l.users_count||0)>0?$e(l):null,class:te((l.users_count||0)>0?"cursor-pointer":"")},{default:t(()=>[y(p(l.users_count||0),1)]),_:2},1032,["color","onClick","class"])])]),"item.is_active":t(({item:l})=>[s(q,{color:l.is_active?"success":"error",size:"small",variant:"tonal"},{default:t(()=>[y(p(l.is_active?"Aktif":"Nonaktif"),1)]),_:2},1032,["color"])]),"item.created_at":t(({item:l})=>[o("span",fs,p(Me(l.created_at)),1)]),"item.actions":t(({item:l})=>[o("div",gs,[s(h,{icon:"tabler-edit",variant:"text",size:"small",color:"primary",onClick:g=>Pe(l)},null,8,["onClick"]),s(h,{icon:l.is_active?"tabler-eye-off":"tabler-eye",variant:"text",size:"small",color:l.is_active?"warning":"success",onClick:g=>we(l),loading:m.value},null,8,["icon","color","onClick","loading"]),s(h,{icon:"tabler-trash",variant:"text",size:"small",color:"error",onClick:g=>Re(l),disabled:(l.users_count||0)>0},null,8,["onClick","disabled"])])]),"no-data":t(()=>[o("div",_s,[s(_,{icon:"tabler-users",size:"48",color:"disabled",class:"mb-4"}),e[18]||(e[18]=o("div",{class:"text-h6 text-medium-emphasis mb-2"},"Tidak ada role",-1)),e[19]||(e[19]=o("div",{class:"text-body-2 text-medium-emphasis"},"Mulai dengan menambahkan role pertama Anda",-1))])]),_:1},8,["items","loading"])]),_:1}),s(oe,{modelValue:M.value,"onUpdate:modelValue":e[6]||(e[6]=l=>M.value=l),"max-width":"600",persistent:""},{default:t(()=>[s(P,null,{default:t(()=>[s(Y,{class:"d-flex align-center"},{default:t(()=>[s(_,{icon:R.value?"tabler-edit":"tabler-plus",class:"me-2"},null,8,["icon"]),y(" "+p(R.value?"Edit Role":"Tambah Role Baru"),1)]),_:1}),s(K),s($,null,{default:t(()=>[w.value?(b(),L(W,{key:0,type:"error",variant:"outlined",class:"mb-4",text:w.value,closable:"","onClick:close":Be},null,8,["text"])):T("",!0),s(Je,null,{default:t(()=>[s(ee,null,{default:t(()=>[s(k,{cols:"12"},{default:t(()=>[s(J,{modelValue:V.value.name,"onUpdate:modelValue":e[2]||(e[2]=l=>V.value.name=l),label:"Nama Role",placeholder:"e.g., admin, manager",rules:me,variant:"outlined",required:""},null,8,["modelValue"])]),_:1}),s(k,{cols:"12"},{default:t(()=>[s(J,{modelValue:V.value.display_name,"onUpdate:modelValue":e[3]||(e[3]=l=>V.value.display_name=l),label:"Display Name",placeholder:"e.g., Administrator, Manager",rules:ve,variant:"outlined",required:""},null,8,["modelValue"])]),_:1}),s(k,{cols:"12"},{default:t(()=>[s(Xe,{modelValue:V.value.description,"onUpdate:modelValue":e[4]||(e[4]=l=>V.value.description=l),label:"Deskripsi",placeholder:"Jelaskan fungsi dan tanggung jawab role ini",variant:"outlined",rows:"3"},null,8,["modelValue"])]),_:1}),s(k,{cols:"12"},{default:t(()=>[s(Qe,{modelValue:V.value.is_active,"onUpdate:modelValue":e[5]||(e[5]=l=>V.value.is_active=l),label:"Role Aktif",color:"primary"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),s(K),s(ie,null,{default:t(()=>[s(E),s(h,{color:"grey",variant:"text",onClick:ae,disabled:A.value},{default:t(()=>e[20]||(e[20]=[y(" Batal ")])),_:1,__:[20]},8,["disabled"]),s(h,{color:"primary",variant:"flat",onClick:xe,loading:A.value},{default:t(()=>[y(p(R.value?"Update":"Simpan"),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(Oe,{modelValue:O.value,"onUpdate:modelValue":e[7]||(e[7]=l=>O.value=l),title:"Konfirmasi Hapus Role","item-name":((i=f.value)==null?void 0:i.display_name)||((n=f.value)==null?void 0:n.name),loading:N.value,"confirm-text":"Hapus Role",onConfirm:Ve,onCancel:e[8]||(e[8]=l=>O.value=!1)},null,8,["modelValue","item-name","loading"]),s(oe,{modelValue:H.value,"onUpdate:modelValue":e[10]||(e[10]=l=>H.value=l),"max-width":"900",persistent:""},{default:t(()=>[s(P,{class:"permission-dialog"},{default:t(()=>[s(Y,{class:"pa-6 pb-4"},{default:t(()=>{var l,g;return[o("div",bs,[o("div",ys,[s(_,{icon:"tabler-shield-check",size:"20"})]),o("div",null,[e[21]||(e[21]=o("div",{class:"text-h6 font-weight-bold mb-1"}," Kelola Permissions ",-1)),o("div",hs,p(((l=f.value)==null?void 0:l.display_name)||((g=f.value)==null?void 0:g.name)),1)]),s(E),s(h,{icon:"tabler-x",variant:"text",size:"small",onClick:Q,disabled:j.value},null,8,["disabled"])])]}),_:1}),s(K),s($,{class:"pa-6"},{default:t(()=>[X.value?(b(),C("div",ks,[s(Ee,{indeterminate:"",color:"primary",size:"40"}),e[22]||(e[22]=o("div",{class:"text-body-2 mt-4 text-medium-emphasis"},"Memuat permissions...",-1))])):(b(),C("div",xs,[o("div",Vs,[o("div",ws,[o("div",Cs,[s(q,{color:"primary",variant:"tonal",size:"small",class:"me-2"},{default:t(()=>[s(_,{icon:"tabler-check",size:"16",class:"me-1"}),y(" "+p(c.value.length)+" dipilih ",1)]),_:1}),s(q,{color:"info",variant:"tonal",size:"small"},{default:t(()=>[s(_,{icon:"tabler-shield",size:"16",class:"me-1"}),y(" "+p(u.value.length)+" total ",1)]),_:1})]),s(E),c.value.length<u.value.length?(b(),L(h,{key:0,size:"small",variant:"text",color:"primary",onClick:Ue},{default:t(()=>e[23]||(e[23]=[y(" Pilih Semua ")])),_:1,__:[23]})):T("",!0),c.value.length>0?(b(),L(h,{key:1,size:"small",variant:"text",color:"error",onClick:ze,class:"ms-2"},{default:t(()=>e[24]||(e[24]=[y(" Hapus Semua ")])),_:1,__:[24]})):T("",!0)]),s(J,{modelValue:B.value,"onUpdate:modelValue":e[9]||(e[9]=l=>B.value=l),label:"Cari permission...","prepend-inner-icon":"tabler-search",variant:"outlined",density:"compact",clearable:"","hide-details":""},null,8,["modelValue"])]),I.value.length>0?(b(),C("div",Ps,[(b(!0),C(Ke,null,qe(I.value,l=>(b(),C("div",{key:l.id,class:"permission-item"},[s(P,{variant:"outlined",class:te({"permission-selected":c.value.includes(l.id_permission||l.id)})},{default:t(()=>[s($,{class:"pa-4"},{default:t(()=>[o("div",Rs,[o("div",{class:"permission-checkbox me-3",onClick:g=>le(l.id_permission||l.id)},[s(_,{icon:c.value.includes(l.id_permission||l.id)?"tabler-checkbox":"tabler-square",color:c.value.includes(l.id_permission||l.id)?"primary":"default",size:"20"},null,8,["icon","color"])],8,Ds),o("div",{class:"flex-grow-1",onClick:g=>le(l.id_permission||l.id)},[o("div",Us,p(l.display_name||l.name),1),o("div",zs,p(l.description||"Tidak ada deskripsi"),1)],8,$s)])]),_:2},1024)]),_:2},1032,["class"])]))),128))])):u.value.length===0?(b(),C("div",Fs,[o("div",Ss,[s(_,{icon:"tabler-shield-off",size:"48",color:"disabled"})]),e[25]||(e[25]=o("div",{class:"text-h6 text-medium-emphasis mb-2"},"Tidak ada permission",-1)),e[26]||(e[26]=o("div",{class:"text-body-2 text-medium-emphasis"},"Permissions belum dikonfigurasi di database",-1))])):(b(),C("div",As,[s(_,{icon:"tabler-search-off",size:"32",color:"disabled",class:"mb-3"}),e[27]||(e[27]=o("div",{class:"text-body-1 text-medium-emphasis mb-1"},"Tidak ditemukan",-1)),e[28]||(e[28]=o("div",{class:"text-caption text-medium-emphasis"},"Coba gunakan kata kunci lain",-1))]))]))]),_:1}),s(K),s(ie,{class:"pa-6 pt-4"},{default:t(()=>[o("div",Ts,[c.value.length>0?(b(),C("div",Ls,[s(_,{icon:"tabler-info-circle",size:"16",class:"me-1 text-info"}),o("span",Ns,p(c.value.length)+" permission akan disimpan ",1)])):T("",!0),s(E),s(h,{color:"grey-darken-1",variant:"text",onClick:Q,disabled:j.value,class:"me-3"},{default:t(()=>e[29]||(e[29]=[y(" Batal ")])),_:1,__:[29]},8,["disabled"]),s(h,{color:"primary",variant:"flat",onClick:ke,loading:j.value},{default:t(()=>[s(_,{icon:"tabler-device-floppy",class:"me-2"}),e[30]||(e[30]=y(" Simpan "))]),_:1,__:[30]},8,["loading"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});typeof ne=="function"&&ne(ue);const da=He(ue,[["__scopeId","data-v-08a094f4"]]);export{da as default};

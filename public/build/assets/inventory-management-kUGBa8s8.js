import{aA as oe,d as Ze,r as p,V as se,w as tt,g as $,f as a,b as e,s as v,X as T,t as c,l as E,c as de,e as l,aw as Qe,a0 as M,o as x,ax as We,aW as at,D as st,m as t,a5 as be,F as ot,i as lt,p as Ue,$ as je}from"./main-Cr2auo7G.js";import{V as xe}from"./VDialog-DT_7k2kd.js";import{b as ce,c as Ie,V as q}from"./VCard-C1facabu.js";import{V as W}from"./VDivider-Fl8ti_vJ.js";import{V as B}from"./VCardText-CYBZPMOK.js";import{V as ae}from"./VAlert-DPzbQ2h6.js";import{V as Ye}from"./VDataTable-Ceua6GEq.js";import{V as Z}from"./VChip-DEgLQiSF.js";import{V as he}from"./VSpacer-DRX_Br-7.js";import{_ as et}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{I as rt}from"./ItemsApi-C-7Dd98U.js";import{V as ee,a as V}from"./VRow-BGu3nXnw.js";import{V as X}from"./VTextField-BKzD94zh.js";import{V as Te}from"./VSelect-BG_hJ9fN.js";import{V as Ee}from"./VTooltip-B4PSEoxF.js";import{V as Re}from"./VForm-BF9yBDUt.js";import{V as Fe}from"./VTextarea-ylCQ9vK3.js";import{V as nt}from"./VAvatar-DT68VUZ3.js";import"./VOverlay-BEahg1Vj.js";import"./forwardRefs-B931MWyl.js";import"./VImg-uxiU2n7V.js";import"./VCheckboxBtn-BbiTmFJq.js";import"./VTable-DNvYkHf6.js";import"./filter-DU7K1YXt.js";/* empty css              */import"./VList-CTkvoCdA.js";import"./VMenu-CCoSKT1-.js";const te="/api/inventory";class G{static async getAll(i){var u;try{return(await oe.get(te,{params:i})).data}catch(m){throw((u=m.response)==null?void 0:u.data)||this.handleError(m)}}static async getById(i){var u;try{return(await oe.get(`${te}/${i}`)).data}catch(m){throw((u=m.response)==null?void 0:u.data)||this.handleError(m)}}static async getStats(){var i;try{return(await oe.get(`${te}/stats`)).data}catch(u){throw((i=u.response)==null?void 0:i.data)||this.handleError(u)}}static async getLowStockAlerts(){var i;try{return(await oe.get(`${te}/low-stock-alerts`)).data}catch(u){throw((i=u.response)==null?void 0:i.data)||this.handleError(u)}}static async updateStock(i,u){var m;try{return(await oe.post(`${te}/${i}/update-stock`,u)).data}catch(k){throw((m=k.response)==null?void 0:m.data)||this.handleError(k)}}static async bulkUpdateStock(i){var u;try{return(await oe.post(`${te}/bulk-update-stock`,i)).data}catch(m){throw((u=m.response)==null?void 0:u.data)||this.handleError(m)}}static async setReorderLevel(i,u){var m;try{return(await oe.post(`${te}/${i}/reorder-level`,u)).data}catch(k){throw((m=k.response)==null?void 0:m.data)||this.handleError(k)}}static async getMovements(i){var u;try{const m=i!=null&&i.id_inventory?`${te}/${i.id_inventory}/movements`:`${te}/movements`;return(await oe.get(m,{params:i})).data}catch(m){throw((u=m.response)==null?void 0:u.data)||this.handleError(m)}}static handleError(i){var u,m;return i.response?{message:((u=i.response.data)==null?void 0:u.message)||"Terjadi kesalahan pada server",success:!1,errors:(m=i.response.data)==null?void 0:m.errors}:i.request?{message:"Tidak dapat terhubung ke server",success:!1}:{message:i.message||"Terjadi kesalahan yang tidak diketahui",success:!1}}static formatError(i){return i.errors?Object.values(i.errors).flat().join(", "):i.message||"Terjadi kesalahan yang tidak diketahui"}static isValidationError(i){return i.errors&&typeof i.errors=="object"}static getFieldError(i,u){return i.errors&&i.errors[u]?Array.isArray(i.errors[u])?i.errors[u][0]:i.errors[u]:null}static getMovementTypes(){return[{value:"stock_in",label:"Stock Masuk",color:"success"},{value:"stock_out",label:"Stock Keluar",color:"warning"},{value:"adjustment",label:"Penyesuaian",color:"info"},{value:"transfer",label:"Transfer",color:"primary"},{value:"return",label:"Retur",color:"success"},{value:"damaged",label:"Rusak",color:"error"},{value:"expired",label:"Kadaluarsa",color:"error"}]}static getStockStatusOptions(){return[{value:"all",label:"Semua Status"},{value:"in_stock",label:"Tersedia"},{value:"low_stock",label:"Stok Menipis"},{value:"out_of_stock",label:"Habis"},{value:"overstock",label:"Stok Berlebih"}]}}const it={key:1,class:"text-center py-8"},ut={class:"font-weight-medium"},ct={class:"text-medium-emphasis"},dt={class:"text-center"},mt={class:"text-center font-weight-medium"},pt={class:"text-center font-weight-bold text-primary"},vt={class:"text-end"},_t={class:"text-end font-weight-medium text-success"},ft={class:"max-width-200"},kt={class:"font-weight-medium"},gt={key:0,class:"text-medium-emphasis"},yt={key:1,class:"d-block text-caption"},bt={key:2,class:"text-info d-block"},xt={class:"text-center py-8"},ht=Ze({__name:"InventoryMovementsDialog",props:{modelValue:{type:Boolean},inventoryId:{},inventoryName:{}},emits:["update:modelValue"],setup(K,{emit:i}){const u=K,m=i,k=p([]),R=p(!1),A=p(""),U=se({get:()=>u.modelValue,set:g=>m("update:modelValue",g)}),z=async()=>{var g,_,n,L;if(u.inventoryId)try{R.value=!0,A.value="";const b=await G.getMovements({id_inventory:parseInt(u.inventoryId),page:1,per_page:50});b.data&&Array.isArray(b.data)?k.value=b.data:b.data&&((g=b==null?void 0:b.data)!=null&&g.data)&&Array.isArray((_=b==null?void 0:b.data)==null?void 0:_.data)?k.value=b.data.data:k.value=[]}catch(b){console.error("Error fetching movements:",b),A.value=((L=(n=b.response)==null?void 0:n.data)==null?void 0:L.message)||"Gagal memuat riwayat pergerakan"}finally{R.value=!1}},F=g=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(g),O=g=>({in:"success",out:"error",stock_in:"success",stock_out:"error",adjustment:"warning",transfer:"info",return:"secondary"})[g]||"primary",I=g=>({in:"Stock Masuk",out:"Stock Keluar",stock_in:"Stock Masuk",stock_out:"Stock Keluar",adjustment:"Penyesuaian",transfer:"Transfer",return:"Retur"})[g]||g,f=g=>({in:"tabler-plus",out:"tabler-minus",stock_in:"tabler-plus",stock_out:"tabler-minus",adjustment:"tabler-edit",transfer:"tabler-arrows-exchange",return:"tabler-arrow-back"})[g]||"tabler-package";return tt(U,g=>{g&&u.inventoryId?z():(k.value=[],A.value="")}),(g,_)=>(x(),$(xe,{modelValue:U.value,"onUpdate:modelValue":_[1]||(_[1]=n=>U.value=n),"max-width":"900px",scrollable:""},{default:a(()=>[e(q,null,{default:a(()=>[e(ce,{class:"d-flex align-center"},{default:a(()=>[e(T,{icon:"tabler-history",class:"me-2"}),v(" Riwayat Pergerakan - "+c(g.inventoryName),1)]),_:1}),e(W),e(B,{class:"pa-0"},{default:a(()=>[A.value?(x(),$(ae,{key:0,type:"error",variant:"tonal",class:"ma-4"},{default:a(()=>[v(c(A.value),1)]),_:1})):E("",!0),R.value?(x(),de("div",it,[e(Qe,{indeterminate:"",color:"primary",size:"40"}),_[2]||(_[2]=l("div",{class:"mt-4 text-medium-emphasis"}," Memuat riwayat pergerakan... ",-1))])):(x(),$(Ye,{key:2,headers:[{title:"Tanggal",key:"created_at",sortable:!1},{title:"Jenis",key:"movement_type",sortable:!1},{title:"Kuantitas",key:"quantity",sortable:!1},{title:"Stok Sebelum",key:"stock_before",sortable:!1},{title:"Stok Sesudah",key:"stock_after",sortable:!1},{title:"Harga/Unit",key:"unit_cost",sortable:!1},{title:"Total Nilai",key:"total_cost",sortable:!1},{title:"Catatan",key:"notes",sortable:!1}],items:k.value,loading:R.value,class:"text-no-wrap","items-per-page":"15",height:"500","fixed-header":""},{"item.created_at":a(({item:n})=>[l("div",null,[l("div",ut,c(new Date(n.created_at).toLocaleDateString("id-ID")),1),l("small",ct,c(new Date(n.created_at).toLocaleTimeString("id-ID")),1)])]),"item.movement_type":a(({item:n})=>[e(Z,{color:O(n.movement_type),variant:"tonal",size:"small","prepend-icon":f(n.movement_type)},{default:a(()=>[v(c(I(n.movement_type)),1)]),_:2},1032,["color","prepend-icon"])]),"item.quantity":a(({item:n})=>[l("div",dt,[e(Z,{color:n.movement_type==="in"||n.movement_type==="stock_in"?"success":"error",variant:"outlined",size:"small"},{default:a(()=>[v(c(n.movement_type==="in"||n.movement_type==="stock_in"?"+":"-")+c(Math.abs(n.quantity)),1)]),_:2},1032,["color"])])]),"item.stock_before":a(({item:n})=>[l("div",mt,c(n.stock_before),1)]),"item.stock_after":a(({item:n})=>[l("div",pt,c(n.stock_after),1)]),"item.unit_cost":a(({item:n})=>[l("div",vt,c(n.unit_cost?F(n.unit_cost):"-"),1)]),"item.total_cost":a(({item:n})=>[l("div",_t,c(n.total_cost?F(n.total_cost):"-"),1)]),"item.notes":a(({item:n})=>[l("div",ft,[l("div",kt,c(n.notes||"-"),1),n.reference_type&&n.reference_id?(x(),de("small",gt," Ref: "+c(n.reference_type)+"-"+c(n.reference_id),1)):E("",!0),n.batch_number?(x(),de("small",yt," Batch: "+c(n.batch_number),1)):E("",!0),n.user?(x(),de("small",bt," oleh: "+c(n.user.name),1)):E("",!0)])]),"no-data":a(()=>[l("div",xt,[e(T,{icon:"tabler-history-off",size:"48",class:"text-medium-emphasis mb-4"}),_[3]||(_[3]=l("div",{class:"text-h6 text-medium-emphasis mb-2"}," Belum ada riwayat pergerakan ",-1)),_[4]||(_[4]=l("div",{class:"text-body-2 text-medium-emphasis"}," Riwayat akan muncul setelah ada pergerakan stok ",-1))])]),_:1},8,["items","loading"]))]),_:1}),e(W),e(Ie,{class:"pa-4"},{default:a(()=>[e(he),e(M,{variant:"outlined",onClick:_[0]||(_[0]=n=>U.value=!1)},{default:a(()=>_[5]||(_[5]=[v(" Tutup ")])),_:1,__:[5]}),e(M,{color:"primary","prepend-icon":"tabler-refresh",onClick:z},{default:a(()=>_[6]||(_[6]=[v(" Refresh ")])),_:1,__:[6]})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),St=et(ht,[["__scopeId","data-v-ca0277a4"]]),wt=()=>{const K=p([]),i=p(!1),u=p(!1),m=p({total_items:0,low_stock_items:0,out_of_stock_items:0,overstock_items:0,total_stock_value:0,total_stock_quantity:0,total_reserved_stock:0,items_need_restock:0}),k=p([]),R=p(!1),A=p([]),U=p(!1),z=p(!1),F=p(!1),O=p(!1),I=p(!1),f=p(null),g=p([]),_=p(1),n=p(0),L=p(15),b=p({search:"",stock_status:"all",category_id:void 0,supplier_id:void 0,sort_by:"current_stock",sort_order:"asc"}),J=p(""),P=p(""),j=p(""),le=p({movement_type:"stock_in",quantity:0,reason:"",reference_number:"",cost_per_unit:void 0,notes:""}),N=p({reorder_level:0,max_stock_level:0}),fe=se(()=>g.value.length>0),me=se(()=>m.value.total_stock_value),re=se(()=>m.value.low_stock_items),ne=se(()=>m.value.out_of_stock_items),ie=[r=>r>0||"Kuantitas harus lebih dari 0",r=>Number.isInteger(r)||"Kuantitas harus berupa bilangan bulat"],ke=[r=>!!r||"Alasan wajib diisi",r=>r&&r.length>=3||"Alasan minimal 3 karakter"],pe=[r=>!r||r>=0||"Harga harus lebih dari atau sama dengan 0"],Se=[{title:"Stock Masuk",value:"stock_in",color:"success"},{title:"Stock Keluar",value:"stock_out",color:"warning"},{title:"Penyesuaian",value:"adjustment",color:"info"},{title:"Transfer",value:"transfer",color:"primary"},{title:"Retur",value:"return",color:"success"}],we=[{title:"Semua Status",value:"all"},{title:"Tersedia",value:"in_stock"},{title:"Stok Menipis",value:"low_stock"},{title:"Habis",value:"out_of_stock"},{title:"Stok Berlebih",value:"overstock"}],Q=async()=>{i.value=!0,J.value="";try{const r={...b.value,page:_.value,per_page:L.value};Object.keys(r).forEach(De=>{const _e=r[De];(_e===""||_e===void 0||_e===null||_e==="all")&&delete r[De]});const S=await G.getAll(r);if(S.success)K.value=S.data.data,n.value=S.data.total,_.value=S.data.current_page,console.log("Inventory data loaded:",{total:S.data.total,itemsLength:S.data.data.length,currentPage:S.data.current_page,perPage:S.data.per_page,lastPage:S.data.last_page,from:S.data.from,to:S.data.to,requestedPerPage:L.value});else throw new Error(S.message||"Gagal mengambil data inventory")}catch(r){console.error("Error fetching inventory:",r),J.value=G.formatError(r)||"Gagal mengambil data inventory",K.value=[],n.value=0}finally{i.value=!1}},d=async()=>{try{const r=await G.getStats();r.success&&(m.value=r.data)}catch(r){console.error("Error fetching inventory stats:",r)}},C=async()=>{U.value=!0;try{const r=await G.getLowStockAlerts();r.success&&(A.value=r.data.data||[])}catch(r){console.error("Error fetching low stock alerts:",r),A.value=[]}finally{U.value=!1}},h=async r=>{R.value=!0;try{const S=await G.getMovements({id_inventory:r,page:1,per_page:20});S.success&&(k.value=S.data)}catch(S){console.error("Error fetching movements:",S)}finally{R.value=!1}},$e=async()=>{if(f.value){u.value=!0,j.value="";try{const r=await G.updateStock(f.value.id_inventory,le.value);if(r.success)P.value="Stock berhasil diperbarui",Ve(),await Q(),await d(),await C();else throw new Error(r.message||"Gagal memperbarui stock")}catch(r){console.error("Error updating stock:",r),j.value=G.formatError(r)||"Gagal memperbarui stock"}finally{u.value=!1}}},Ae=async()=>{if(f.value){u.value=!0,j.value="";try{const r=await G.setReorderLevel(f.value.id_inventory,N.value);if(r.success)P.value="Reorder level berhasil diperbarui",ve(),await Q();else throw new Error(r.message||"Gagal memperbarui reorder level")}catch(r){console.error("Error setting reorder level:",r),j.value=G.formatError(r)||"Gagal memperbarui reorder level"}finally{u.value=!1}}},ue=r=>{f.value=r,le.value={movement_type:"stock_in",quantity:0,reason:"",reference_number:"",cost_per_unit:r.average_cost||void 0,notes:""},j.value="",z.value=!0},ge=r=>{f.value=r,N.value={reorder_level:r.reorder_level||0,max_stock_level:r.max_stock_level||0},j.value="",I.value=!0},Le=r=>{f.value=r,h(r.id_inventory),O.value=!0},Ve=()=>{z.value=!1,setTimeout(()=>{f.value=null,j.value=""},300)},ve=()=>{I.value=!1,setTimeout(()=>{f.value=null,j.value=""},300)};return{inventoryList:K,loading:i,saveLoading:u,stats:m,movementsList:k,movementsLoading:R,lowStockItems:A,alertsLoading:U,stockUpdateDialog:z,bulkUpdateDialog:F,movementsDialog:O,reorderDialog:I,selectedInventory:f,selectedItems:g,currentPage:_,totalItems:n,itemsPerPage:L,filters:b,errorMessage:J,successMessage:P,modalErrorMessage:j,stockUpdateForm:le,reorderForm:N,hasSelectedItems:fe,totalStockValue:me,lowStockCount:re,outOfStockCount:ne,quantityRules:ie,reasonRules:ke,costRules:pe,movementTypeOptions:Se,stockStatusOptions:we,fetchInventoryList:Q,fetchStats:d,fetchLowStockAlerts:C,fetchMovements:h,updateStock:$e,setReorderLevel:Ae,openStockUpdateDialog:ue,openReorderDialog:ge,openMovementsDialog:Le,closeStockUpdateDialog:Ve,closeReorderDialog:ve,closeMovementsDialog:()=>{O.value=!1,setTimeout(()=>{f.value=null,k.value=[]},300)},clearModalError:()=>{j.value=""},onPageChange:r=>{_.value=r,Q()},onItemsPerPageChange:r=>{L.value=r,_.value=1,Q()},handleFiltersUpdate:r=>{b.value={...b.value,...r},_.value=1,Q()},formatCurrency:r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),getStockStatusColor:r=>r.current_stock===0?"error":r.is_low_stock?"warning":"success",getStockStatusText:r=>r.current_stock===0?"Habis":r.reorder_level>0&&r.current_stock<=r.reorder_level?"Menipis":r.max_stock_level&&r.current_stock>r.max_stock_level?"Berlebih":"Tersedia",getMovementTypeColor:r=>({stock_in:"success",stock_out:"warning",adjustment:"info",transfer:"primary",return:"success",damaged:"error",expired:"error"})[r]||"grey"}};function Vt(){const K=p([]),i=p([]),u=p(!1),m=p(!1),k=p({total_items:0,total_value:0,low_stock_items:0,out_of_stock_items:0,movements_today:0,movements_this_month:0,top_consumed_items:[],recent_movements:[]}),R=p(1),A=p(0),U=p(10),z=We({search:"",stock_status:"all",movement_type:"",date_from:"",date_to:"",item_id:void 0}),F=p(!1),O=p(!1),I=p(null),f=We({item_id:0,type:"in",quantity:0,notes:"",cost_per_unit:0}),g=p(""),_=p(""),n=p(""),L=se(()=>!0),b=[{title:"Semua Status",value:"all"},{title:"Tersedia",value:"in_stock"},{title:"Stok Rendah",value:"low_stock"},{title:"Habis",value:"out_of_stock"}],J=[{title:"Masuk",value:"in",color:"success",icon:"tabler-plus"},{title:"Keluar",value:"out",color:"error",icon:"tabler-minus"},{title:"Penyesuaian",value:"adjustment",color:"warning",icon:"tabler-adjustments"}],P=[{title:"Pembelian",value:"purchase"},{title:"Penjualan",value:"sale"},{title:"Produksi",value:"production"},{title:"Penyesuaian",value:"adjustment"},{title:"Kerusakan",value:"waste"}],j=d=>d.current_stock<=0?{status:"out_of_stock",color:"error",text:"Habis",icon:"tabler-x"}:d.current_stock<=d.minimum_stock?{status:"low_stock",color:"warning",text:"Rendah",icon:"tabler-alert-triangle"}:{status:"in_stock",color:"success",text:"Tersedia",icon:"tabler-check"},le=d=>!d.maximum_stock||d.maximum_stock<=0?100:Math.round(d.current_stock/d.maximum_stock*100),N=async()=>{u.value=!0;try{await new Promise(d=>setTimeout(d,1e3)),K.value=await rt.getAll(),A.value=K.value.length,_.value=""}catch{g.value="Gagal memuat data items"}finally{u.value=!1}},fe=async d=>{u.value=!0;try{const C=await G.getMovements({id_inventory:d,page:R.value,per_page:U.value});i.value=C.data.map(h=>({id:h.id_movement,item_id:h.id_inventory,type:h.movement_type,quantity:h.quantity,unit:"pcs",reference_id:h.reference_number?parseInt(h.reference_number):void 0,reference_type:h.reason,notes:h.notes,cost_per_unit:h.cost_per_unit,total_cost:h.total_cost,created_by:h.created_by,created_at:h.created_at,creator:h.user})),A.value=C.total}catch(C){console.error("Failed to fetch stock movements:",C),i.value=[]}finally{u.value=!1}},me=async()=>{try{await N();const d=K.value;k.value={total_items:d.length,total_value:d.reduce((C,h)=>C+h.current_stock*h.cost_per_unit,0),low_stock_items:d.filter(C=>C.current_stock<=C.minimum_stock&&C.current_stock>0).length,out_of_stock_items:d.filter(C=>C.current_stock<=0).length,movements_today:0,movements_this_month:0,top_consumed_items:[],recent_movements:[]}}catch(d){console.error("Failed to fetch stats:",d)}},re=async()=>{m.value=!0,n.value="";try{const d=await fetch("/api/inventory/movement",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({item_id:f.item_id,movement_type:f.type,quantity:f.quantity,notes:f.notes,cost_per_unit:f.cost_per_unit})});if(!d.ok){const C=await d.json();throw new Error(C.message||"Gagal mencatat pergerakan stok")}_.value=`Stock ${f.type==="in"?"masuk":f.type==="out"?"keluar":"disesuaikan"} berhasil dicatat`,pe(),await N(),await me()}catch(d){n.value=d.message||"Gagal mencatat pergerakan stok"}finally{m.value=!1}},ne=d=>{I.value=d,Object.assign(f,{item_id:d.id_item,type:"in",quantity:0,notes:"",cost_per_unit:d.cost_per_unit}),F.value=!0},ie=d=>{I.value=d,Object.assign(f,{item_id:d.id_item,type:"out",quantity:0,notes:"",cost_per_unit:d.cost_per_unit}),F.value=!0},ke=d=>{I.value=d,Object.assign(f,{item_id:d.id_item,type:"adjustment",quantity:d.current_stock,notes:"",cost_per_unit:d.cost_per_unit}),O.value=!0},pe=()=>{F.value=!1,O.value=!1,n.value="",I.value=null};return{itemsList:K,stockMovements:i,loading:u,saveLoading:m,stats:k,currentPage:R,totalItems:A,itemsPerPage:U,filters:z,movementDialog:F,adjustmentDialog:O,selectedItem:I,movementFormData:f,errorMessage:g,successMessage:_,modalErrorMessage:n,canManageStock:L,stockStatusOptions:b,movementTypeOptions:J,referenceTypeOptions:P,getStockStatus:j,getStockPercentage:le,fetchItems:N,fetchStockMovements:fe,fetchStats:me,recordStockMovement:re,openStockInDialog:ne,openStockOutDialog:ie,openAdjustmentDialog:ke,closeMovementDialog:pe,clearModalError:()=>{n.value=""},onPageChange:d=>{R.value=d,N()},handleFiltersUpdate:d=>{Object.assign(z,d),R.value=1,N()}}}const Mt={class:"inventory-management"},Ct={class:"d-flex justify-space-between align-center mb-6"},Pt={class:"d-flex gap-3 align-center"},Dt={class:"d-flex align-center justify-space-between"},Ut={class:"text-h4 font-weight-bold text-primary"},jt={class:"d-flex align-center justify-space-between"},Tt={class:"text-h4 font-weight-bold text-warning"},Et={class:"d-flex align-center justify-space-between"},Rt={class:"text-h4 font-weight-bold text-error"},It={class:"d-flex align-center justify-space-between"},$t={class:"text-h4 font-weight-bold text-success"},At={class:"d-flex align-center justify-space-between"},Lt={class:"d-flex align-center gap-3"},qt={class:"d-flex gap-2"},zt={class:"d-flex flex-wrap gap-2"},Ft={class:"d-flex align-center"},Ot={class:"font-weight-medium"},Bt={class:"text-medium-emphasis"},Kt={class:"text-center"},Nt={class:"text-h6 font-weight-bold"},Ht={key:0,class:"text-warning"},Gt={class:"text-center"},Jt={class:"text-center"},Xt={class:"text-end"},Wt={class:"text-end font-weight-medium text-success"},Zt={class:"d-flex align-center gap-1"},Qt={class:"text-center py-12"},Yt={class:"d-flex justify-center gap-3"},ea={class:"text-center py-8"},ta={class:"d-flex align-center gap-2"},aa={class:"d-flex align-center gap-3"},sa={class:"font-weight-bold"},oa={class:"text-caption"},la={class:"text-caption"},ra={class:"d-flex gap-3 justify-end"},na={class:"d-flex align-center gap-2"},ia={class:"text-white"},ua={class:"d-flex align-center gap-3"},ca={class:"font-weight-bold"},da={class:"text-caption"},ma=Ze({__name:"inventory-management",setup(K){const{xs:i}=at(),u=()=>{re(),ne(),ie()},{inventoryList:m,loading:k,saveLoading:R,stats:A,lowStockItems:U,stockUpdateDialog:z,reorderDialog:F,movementsDialog:O,selectedInventory:I,currentPage:f,totalItems:g,itemsPerPage:_,filters:n,errorMessage:L,successMessage:b,modalErrorMessage:J,stockUpdateForm:P,reorderForm:j,totalStockValue:le,lowStockCount:N,outOfStockCount:fe,stockStatusOptions:me,fetchInventoryList:re,fetchStats:ne,fetchLowStockAlerts:ie,updateStock:ke,setReorderLevel:pe,openStockUpdateDialog:Se,openReorderDialog:we,openMovementsDialog:Q,closeStockUpdateDialog:d,closeReorderDialog:C,clearModalError:h,onPageChange:$e,onItemsPerPageChange:Ae,handleFiltersUpdate:ue,formatCurrency:ge,getStockStatusColor:Le,getStockStatusText:Ve}=wt(),{recordStockMovement:ve,openAdjustmentDialog:Oe,movementDialog:Me,adjustmentDialog:Ce,selectedItem:H,movementFormData:D,saveLoading:qe,closeMovementDialog:ye,successMessage:Pe,modalErrorMessage:ze,clearModalError:r}=Vt(),S=w=>w.item?{id_item:w.item.id_item,item_code:w.item.item_code,name:w.item.name,description:w.item.description||"",unit:w.item.unit,cost_per_unit:parseFloat(w.item.cost_per_unit),current_stock:w.current_stock,minimum_stock:w.reorder_level||0,active:!0,storage_location:w.item.storage_location||"",expiry_date:w.item.expiry_date||null,properties:w.item.properties||null,created_by:w.item.created_by||null,updated_by:w.item.updated_by||null,created_at:w.item.created_at,updated_at:w.item.updated_at,deleted_at:w.item.deleted_at||null}:null,De=w=>{const s=S(w);s&&Oe(s)},_e=se(()=>A.value);return se(()=>m.value),se(()=>k.value),st(()=>{re(),ne(),ie()}),(w,s)=>{var Be,Ke,Ne,He;return x(),de("div",Mt,[l("div",Ct,[s[32]||(s[32]=l("div",null,[l("h1",{class:"text-h4 font-weight-bold inventory-title"}," Kelola Inventory "),l("p",{class:"text-body-1 text-medium-emphasis inventory-subtitle"}," Kelola stok barang dan pergerakan inventory ")],-1)),l("div",Pt,[e(M,{color:"primary","prepend-icon":"tabler-refresh",variant:"outlined",onClick:u},{default:a(()=>s[31]||(s[31]=[v(" Refresh Data ")])),_:1,__:[31]})])]),t(L)?(x(),$(ae,{key:0,type:"error",variant:"outlined",class:"mb-4",text:t(L),closable:"","onClick:close":s[0]||(s[0]=o=>L.value="")},null,8,["text"])):E("",!0),t(b)?(x(),$(ae,{key:1,type:"success",variant:"outlined",class:"mb-4",text:t(b),closable:"","onClick:close":s[1]||(s[1]=o=>b.value="")},null,8,["text"])):E("",!0),t(Pe)?(x(),$(ae,{key:2,type:"success",variant:"outlined",class:"mb-4",text:t(Pe),closable:"","onClick:close":s[2]||(s[2]=o=>Pe.value="")},null,8,["text"])):E("",!0),e(ee,{class:"mb-6"},{default:a(()=>[e(V,{cols:"12",md:"3"},{default:a(()=>[e(q,{class:"stats-card"},{default:a(()=>[e(B,null,{default:a(()=>[l("div",Dt,[l("div",null,[l("div",Ut,c(_e.value.total_items||0),1),s[33]||(s[33]=l("div",{class:"text-caption text-medium-emphasis"}," Total Produk ",-1))]),e(T,{icon:"tabler-package",size:"48",class:"text-primary opacity-50"})])]),_:1})]),_:1})]),_:1}),e(V,{cols:"12",md:"3"},{default:a(()=>[e(q,{class:"stats-card"},{default:a(()=>[e(B,null,{default:a(()=>[l("div",jt,[l("div",null,[l("div",Tt,c(t(N)||0),1),s[34]||(s[34]=l("div",{class:"text-caption text-medium-emphasis"}," Stok Menipis ",-1))]),e(T,{icon:"tabler-alert-triangle",size:"48",class:"text-warning opacity-50"})])]),_:1})]),_:1})]),_:1}),e(V,{cols:"12",md:"3"},{default:a(()=>[e(q,{class:"stats-card"},{default:a(()=>[e(B,null,{default:a(()=>[l("div",Et,[l("div",null,[l("div",Rt,c(t(fe)||0),1),s[35]||(s[35]=l("div",{class:"text-caption text-medium-emphasis"}," Stok Habis ",-1))]),e(T,{icon:"tabler-x-circle",size:"48",class:"text-error opacity-50"})])]),_:1})]),_:1})]),_:1}),e(V,{cols:"12",md:"3"},{default:a(()=>[e(q,{class:"stats-card"},{default:a(()=>[e(B,null,{default:a(()=>[l("div",It,[l("div",null,[l("div",$t,c(t(ge)(t(le)||0)),1),s[36]||(s[36]=l("div",{class:"text-caption text-medium-emphasis"}," Nilai Stok ",-1))]),e(T,{icon:"tabler-currency-dollar",size:"48",class:"text-success opacity-50"})])]),_:1})]),_:1})]),_:1})]),_:1}),e(q,{class:"mb-6 info-card",color:"info",variant:"tonal"},{default:a(()=>[e(B,null,{default:a(()=>[l("div",At,[l("div",Lt,[e(T,{icon:"tabler-info-circle",size:"32",class:"text-info"}),s[37]||(s[37]=l("div",null,[l("div",{class:"text-subtitle-1 font-weight-medium text-info"}," Sistem Stock Movement Otomatis "),l("div",{class:"text-body-2 text-medium-emphasis"},[v(" Stok akan bertambah otomatis saat purchasing dan berkurang saat penjualan POS. Gunakan tombol "),l("strong",null,"Penyesuaian"),v(" untuk koreksi manual jika diperlukan. ")])],-1))]),l("div",qt,[e(Z,{color:"success",variant:"tonal",size:"small"},{default:a(()=>[e(T,{icon:"tabler-shopping-cart",class:"me-1"}),s[38]||(s[38]=v(" Purchase → Stok + "))]),_:1,__:[38]}),e(Z,{color:"error",variant:"tonal",size:"small"},{default:a(()=>[e(T,{icon:"tabler-cash",class:"me-1"}),s[39]||(s[39]=v(" POS Sale → Stok - "))]),_:1,__:[39]})])])]),_:1})]),_:1}),t(U).length>0?(x(),$(q,{key:3,class:"mb-6 low-stock-alert"},{default:a(()=>[e(ce,{class:"d-flex align-center"},{default:a(()=>[e(T,{icon:"tabler-alert-triangle",class:"text-warning me-2"}),v(" Peringatan Stok Menipis ("+c(t(U).length)+" produk) ",1)]),_:1}),e(B,null,{default:a(()=>[l("div",zt,[(x(!0),de(ot,null,lt(t(U).slice(0,10),o=>(x(),$(Z,{key:o.id_inventory,color:"warning",variant:"outlined",size:"small"},{default:a(()=>{var y;return[v(c((y=o.product)==null?void 0:y.name)+" ("+c(o.current_stock)+"/"+c(o.reorder_level)+") ",1)]}),_:2},1024))),128)),t(U).length>10?(x(),$(Z,{key:0,color:"warning",variant:"tonal",size:"small"},{default:a(()=>[v(" +"+c(t(U).length-10)+" lainnya ",1)]),_:1})):E("",!0)])]),_:1})]),_:1})):E("",!0),!t(k)&&t(m).length===0&&!t(L)?(x(),$(q,{key:4,class:"mb-6"},{default:a(()=>[e(B,{class:"text-center py-6"},{default:a(()=>[e(T,{icon:"tabler-info-circle",size:"48",class:"text-info mb-3"}),s[40]||(s[40]=l("div",{class:"text-h6 mb-2"}," Sistem Inventory Management Siap Digunakan ",-1)),s[41]||(s[41]=l("div",{class:"text-body-2 text-medium-emphasis"}," Buat produk dan variant terlebih dahulu untuk mulai melacak inventory. ",-1))]),_:1,__:[40,41]})]),_:1})):E("",!0),t(k)||t(m).length>0?(x(),$(q,{key:5,class:"mb-6"},{default:a(()=>[e(B,null,{default:a(()=>[e(ee,null,{default:a(()=>[e(V,{cols:"12",md:"4"},{default:a(()=>[e(X,{modelValue:t(n).search,"onUpdate:modelValue":[s[3]||(s[3]=o=>t(n).search=o),s[4]||(s[4]=o=>t(ue)({search:o}))],label:"Cari inventory produk...",placeholder:"Nama produk, SKU, atau variant","prepend-inner-icon":"tabler-search",clearable:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",md:"3"},{default:a(()=>[e(Te,{modelValue:t(n).stock_status,"onUpdate:modelValue":[s[5]||(s[5]=o=>t(n).stock_status=o),s[6]||(s[6]=o=>t(ue)({stock_status:o}))],label:"Status Stok",items:t(me),clearable:"",variant:"outlined"},null,8,["modelValue","items"])]),_:1}),e(V,{cols:"12",md:"2"},{default:a(()=>[e(Te,{modelValue:t(n).sort_by,"onUpdate:modelValue":[s[7]||(s[7]=o=>t(n).sort_by=o),s[8]||(s[8]=o=>t(ue)({sort_by:o}))],label:"Urutkan",items:[{title:"Stok Tersedia",value:"current_stock"},{title:"Nama Produk",value:"product_name"},{title:"Terakhir Diperbarui",value:"updated_at"}],variant:"outlined"},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",md:"2"},{default:a(()=>[e(Te,{modelValue:t(n).sort_order,"onUpdate:modelValue":[s[9]||(s[9]=o=>t(n).sort_order=o),s[10]||(s[10]=o=>t(ue)({sort_order:o}))],label:"Urutan",items:[{title:"A-Z / 0-9",value:"asc"},{title:"Z-A / 9-0",value:"desc"}],variant:"outlined"},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",md:"1"},{default:a(()=>[e(M,{variant:"outlined",color:"secondary",block:"",onClick:s[11]||(s[11]=o=>t(ue)({search:"",stock_status:"all",sort_by:"current_stock",sort_order:"asc"}))},{default:a(()=>s[42]||(s[42]=[v(" Reset ")])),_:1,__:[42]})]),_:1})]),_:1})]),_:1})]),_:1})):E("",!0),e(q,{class:"products-inventory-table"},{default:a(()=>[e(ce,{class:"d-flex align-center gap-2 coffee-header"},{default:a(()=>[e(T,{icon:"tabler-package",class:"text-white"}),s[43]||(s[43]=l("span",{class:"text-white"},"Inventory Produk",-1)),e(he),e(Z,{color:"white",size:"small",variant:"tonal"},{default:a(()=>[v(c(t(g))+" Produk ",1)]),_:1})]),_:1,__:[43]}),e(W),e(Ye,{headers:[{title:"Produk/Variant",key:"item_name",sortable:!1},{title:"SKU",key:"sku",sortable:!1},{title:"Stok Saat Ini",key:"current_stock",sortable:!1},{title:"Stok Tersedia",key:"available_stock",sortable:!1},{title:"Status",key:"status",sortable:!1},{title:"Reorder Level",key:"reorder_level",sortable:!1},{title:"Harga Rata-rata",key:"average_cost",sortable:!1},{title:"Nilai Stok",key:"stock_value",sortable:!1},{title:"Aksi",key:"actions",sortable:!1}],items:t(m),loading:t(k),"items-per-page":t(_),"items-per-page-options":[10,15,25,50,100],page:t(f),"server-items-length":t(g),class:"text-no-wrap","onUpdate:page":t($e),"onUpdate:itemsPerPage":t(Ae)},{"item.item_name":a(({item:o})=>{var y,Y,Ge,Je,Xe;return[l("div",Ft,[l("div",null,[l("div",Ot,c(((y=o.item)==null?void 0:y.name)||((Y=o.product)==null?void 0:Y.name)||"Unknown Item"),1),l("small",Bt,c(((Ge=o.item)==null?void 0:Ge.description)||((Xe=(Je=o.product)==null?void 0:Je.category)==null?void 0:Xe.name)||"-"),1)])])]}),"item.sku":a(({item:o})=>[e(Z,{variant:"outlined",size:"small",color:"primary"},{default:a(()=>{var y,Y;return[v(c(((y=o.item)==null?void 0:y.item_code)||((Y=o.product)==null?void 0:Y.sku)||"N/A"),1)]}),_:2},1024)]),"item.current_stock":a(({item:o})=>[l("div",Kt,[l("div",Nt,c(o.current_stock),1),o.reserved_stock>0?(x(),de("small",Ht," ("+c(o.reserved_stock)+" reserved) ",1)):E("",!0)])]),"item.available_stock":a(({item:o})=>[l("div",Gt,[e(Z,{color:o.available_stock>0?"success":"error",variant:"tonal",size:"small"},{default:a(()=>[v(c(o.available_stock),1)]),_:2},1032,["color"])])]),"item.status":a(({item:o})=>[e(Z,{color:t(Le)(o),variant:"tonal",size:"small"},{default:a(()=>[v(c(t(Ve)(o)),1)]),_:2},1032,["color"])]),"item.reorder_level":a(({item:o})=>[l("div",Jt,c(o.reorder_level||"-"),1)]),"item.average_cost":a(({item:o})=>[l("div",Xt,c(t(ge)(o.average_cost)),1)]),"item.stock_value":a(({item:o})=>[l("div",Wt,c(t(ge)(o.current_stock*o.average_cost)),1)]),"item.actions":a(({item:o})=>[l("div",Zt,[e(Ee,{text:"Penyesuaian Stok"},{activator:a(({props:y})=>[e(M,Ue(y,{icon:"tabler-adjustments",color:"warning",variant:"text",size:"small",disabled:!o.item,onClick:Y=>De(o)}),null,16,["disabled","onClick"])]),_:2},1024),e(Ee,{text:"Update Stok"},{activator:a(({props:y})=>[e(M,Ue(y,{icon:"tabler-edit",color:"primary",variant:"text",size:"small",onClick:Y=>t(Se)(o)}),null,16,["onClick"])]),_:2},1024),e(Ee,{text:"Set Reorder Level"},{activator:a(({props:y})=>[e(M,Ue(y,{icon:"tabler-settings",color:"info",variant:"text",size:"small",onClick:Y=>t(we)(o)}),null,16,["onClick"])]),_:2},1024),e(Ee,{text:"Lihat Riwayat"},{activator:a(({props:y})=>[e(M,Ue(y,{icon:"tabler-history",color:"secondary",variant:"text",size:"small",onClick:Y=>t(Q)(o)}),null,16,["onClick"])]),_:2},1024)])]),"no-data":a(()=>[l("div",Qt,[e(T,{icon:"tabler-package-off",size:"64",class:"text-medium-emphasis mb-4"}),s[46]||(s[46]=l("div",{class:"text-h5 text-medium-emphasis mb-2"}," Belum Ada Data Inventory ",-1)),s[47]||(s[47]=l("div",{class:"text-body-1 text-medium-emphasis mb-4"},[v(" Data inventory akan muncul setelah produk dan variant dibuat."),l("br"),v(" Silakan buat produk terlebih dahulu di menu "),l("strong",null,"Kelola Produk"),v(". ")],-1)),l("div",Yt,[e(M,{color:"primary","prepend-icon":"tabler-plus",to:"/products-management"},{default:a(()=>s[44]||(s[44]=[v(" Buat Produk Baru ")])),_:1,__:[44]}),e(M,{variant:"outlined","prepend-icon":"tabler-refresh",onClick:s[12]||(s[12]=o=>{t(re)(),t(ne)(),t(ie)()})},{default:a(()=>s[45]||(s[45]=[v(" Refresh Data ")])),_:1,__:[45]})])])]),loading:a(()=>[l("div",ea,[e(Qe,{indeterminate:"",color:"primary",size:"40"}),s[48]||(s[48]=l("div",{class:"mt-4 text-medium-emphasis"}," Memuat data inventory... ",-1))])]),_:1},8,["items","loading","items-per-page","page","server-items-length","onUpdate:page","onUpdate:itemsPerPage"])]),_:1}),e(xe,{modelValue:t(z),"onUpdate:modelValue":s[19]||(s[19]=o=>be(z)?z.value=o:null),"max-width":"800px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:a(()=>[e(q,null,{default:a(()=>[e(ce,null,{default:a(()=>{var o,y;return[v(" Update Stok - "+c((y=(o=t(I))==null?void 0:o.product)==null?void 0:y.name),1)]}),_:1}),e(W),e(Re,{onSubmit:je(t(ke),["prevent"])},{default:a(()=>[e(B,null,{default:a(()=>[t(J)?(x(),$(ae,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4","onClick:close":t(h)},{default:a(()=>[v(c(t(J)),1)]),_:1},8,["onClick:close"])):E("",!0),e(ee,null,{default:a(()=>[e(V,{cols:"12",md:"6"},{default:a(()=>[e(Te,{modelValue:t(P).movement_type,"onUpdate:modelValue":s[13]||(s[13]=o=>t(P).movement_type=o),label:"Jenis Pergerakan *",items:[{title:"Stock Masuk",value:"stock_in"},{title:"Stock Keluar",value:"stock_out"},{title:"Penyesuaian",value:"adjustment"},{title:"Transfer",value:"transfer"},{title:"Retur",value:"return"}],variant:"outlined"},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",md:"6"},{default:a(()=>[e(X,{modelValue:t(P).quantity,"onUpdate:modelValue":s[14]||(s[14]=o=>t(P).quantity=o),modelModifiers:{number:!0},label:"Kuantitas *",type:"number",min:"1",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(ee,null,{default:a(()=>[e(V,{cols:"12"},{default:a(()=>[e(X,{modelValue:t(P).reason,"onUpdate:modelValue":s[15]||(s[15]=o=>t(P).reason=o),label:"Alasan *",placeholder:"Contoh: Pembelian dari supplier, Penjualan, dll",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(ee,null,{default:a(()=>[e(V,{cols:"12",md:"6"},{default:a(()=>[e(X,{modelValue:t(P).reference_number,"onUpdate:modelValue":s[16]||(s[16]=o=>t(P).reference_number=o),label:"Nomor Referensi",placeholder:"PO-001, SO-001, dll",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(V,{cols:"12",md:"6"},{default:a(()=>[e(X,{modelValue:t(P).cost_per_unit,"onUpdate:modelValue":s[17]||(s[17]=o=>t(P).cost_per_unit=o),modelModifiers:{number:!0},label:"Harga per Unit",type:"number",min:"0",step:"0.01",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(ee,null,{default:a(()=>[e(V,{cols:"12"},{default:a(()=>[e(Fe,{modelValue:t(P).notes,"onUpdate:modelValue":s[18]||(s[18]=o=>t(P).notes=o),label:"Catatan",rows:"2",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(W),e(Ie,{class:"pa-4"},{default:a(()=>[e(he),e(M,{variant:"outlined",onClick:t(d)},{default:a(()=>s[49]||(s[49]=[v(" Batal ")])),_:1,__:[49]},8,["onClick"]),e(M,{type:"submit",color:"primary",loading:t(R)},{default:a(()=>s[50]||(s[50]=[v(" Update Stok ")])),_:1,__:[50]},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","fullscreen"]),e(xe,{modelValue:t(F),"onUpdate:modelValue":s[22]||(s[22]=o=>be(F)?F.value=o:null),"max-width":"600px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:a(()=>[e(q,null,{default:a(()=>[e(ce,null,{default:a(()=>{var o,y;return[v(" Set Reorder Level - "+c((y=(o=t(I))==null?void 0:o.product)==null?void 0:y.name),1)]}),_:1}),e(W),e(Re,{onSubmit:je(t(pe),["prevent"])},{default:a(()=>[e(B,null,{default:a(()=>[t(J)?(x(),$(ae,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4","onClick:close":t(h)},{default:a(()=>[v(c(t(J)),1)]),_:1},8,["onClick:close"])):E("",!0),e(ee,null,{default:a(()=>[e(V,{cols:"12"},{default:a(()=>[e(X,{modelValue:t(j).reorder_level,"onUpdate:modelValue":s[20]||(s[20]=o=>t(j).reorder_level=o),modelModifiers:{number:!0},label:"Reorder Level *",type:"number",min:"0",hint:"Stok minimum sebelum perlu restock","persistent-hint":"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),e(ee,null,{default:a(()=>[e(V,{cols:"12"},{default:a(()=>[e(X,{modelValue:t(j).max_stock_level,"onUpdate:modelValue":s[21]||(s[21]=o=>t(j).max_stock_level=o),modelModifiers:{number:!0},label:"Max Stock Level",type:"number",min:"0",hint:"Stok maksimum yang diizinkan","persistent-hint":"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(W),e(Ie,{class:"pa-4"},{default:a(()=>[e(he),e(M,{variant:"outlined",onClick:t(C)},{default:a(()=>s[51]||(s[51]=[v(" Batal ")])),_:1,__:[51]},8,["onClick"]),e(M,{type:"submit",color:"primary",loading:t(R)},{default:a(()=>s[52]||(s[52]=[v(" Simpan ")])),_:1,__:[52]},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","fullscreen"]),e(St,{modelValue:t(O),"onUpdate:modelValue":s[23]||(s[23]=o=>be(O)?O.value=o:null),"inventory-id":(Ke=(Be=t(I))==null?void 0:Be.id_inventory)==null?void 0:Ke.toString(),"inventory-name":(He=(Ne=t(I))==null?void 0:Ne.item)==null?void 0:He.name},null,8,["modelValue","inventory-id","inventory-name"]),e(xe,{modelValue:t(Ce),"onUpdate:modelValue":s[26]||(s[26]=o=>be(Ce)?Ce.value=o:null),"max-width":"600px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:a(()=>[e(q,{class:"stock-movement-dialog coffee-dialog"},{default:a(()=>[e(ce,{class:"d-flex align-center justify-space-between coffee-header"},{default:a(()=>[l("div",ta,[e(T,{icon:"tabler-adjustments",class:"text-white"}),s[53]||(s[53]=l("span",{class:"text-white"}," Penyesuaian Stok ",-1))]),e(M,{icon:"tabler-x",variant:"text",color:"white",onClick:t(ye)},null,8,["onClick"])]),_:1}),e(W),e(B,{class:"pa-6"},{default:a(()=>[e(Re,{onSubmit:je(t(ve),["prevent"])},{default:a(()=>{var o;return[t(H)?(x(),$(ae,{key:0,color:"info",variant:"tonal",class:"mb-4"},{default:a(()=>[l("div",aa,[e(T,{icon:"tabler-package"}),l("div",null,[l("div",sa,c(t(H).name),1),l("div",oa,c(t(H).item_code),1),l("div",la,"Stok Saat Ini: "+c(t(H).current_stock)+" "+c(t(H).unit),1)])])]),_:1})):E("",!0),t(ze)?(x(),$(ae,{key:1,type:"error",variant:"outlined",class:"mb-4",text:t(ze),closable:"","onClick:close":t(r)},null,8,["text","onClick:close"])):E("",!0),e(X,{modelValue:t(D).quantity,"onUpdate:modelValue":s[24]||(s[24]=y=>t(D).quantity=y),modelModifiers:{number:!0},label:"Stok Baru",type:"number",min:"0",step:"0.001",variant:"outlined",suffix:(o=t(H))==null?void 0:o.unit,class:"mb-4",required:""},null,8,["modelValue","suffix"]),e(Fe,{modelValue:t(D).notes,"onUpdate:modelValue":s[25]||(s[25]=y=>t(D).notes=y),label:"Catatan (opsional)",variant:"outlined",rows:"3",class:"mb-4"},null,8,["modelValue"]),l("div",ra,[e(M,{variant:"outlined",onClick:t(ye)},{default:a(()=>s[54]||(s[54]=[v(" Batal ")])),_:1,__:[54]},8,["onClick"]),e(M,{type:"submit",color:"primary",class:"coffee-primary",loading:t(qe)},{default:a(()=>s[55]||(s[55]=[v(" Simpan Penyesuaian ")])),_:1,__:[55]},8,["loading"])])]}),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"]),e(xe,{modelValue:t(Me),"onUpdate:modelValue":s[30]||(s[30]=o=>be(Me)?Me.value=o:null),"max-width":"800px",fullscreen:t(i),persistent:"",class:"stock-dialog"},{default:a(()=>[e(q,{class:"stock-movement-dialog coffee-dialog"},{default:a(()=>[e(ce,{class:"d-flex align-center justify-space-between coffee-header"},{default:a(()=>[l("div",na,[e(T,{icon:t(D).type==="in"?"tabler-plus":"tabler-minus",class:"text-white"},null,8,["icon"]),l("span",ia,c(t(D).type==="in"?"Stok Masuk":t(D).type==="out"?"Stok Keluar":"Penyesuaian Stok"),1)]),e(M,{icon:"tabler-x",variant:"text",color:"white",onClick:t(ye)},null,8,["onClick"])]),_:1}),e(W),e(B,{class:"pa-6"},{default:a(()=>[e(Re,{onSubmit:je(t(ve),["prevent"])},{default:a(()=>[t(H)?(x(),$(ae,{key:0,color:"info",variant:"tonal",class:"mb-4"},{default:a(()=>[l("div",ua,[e(nt,{color:"primary",size:"40",variant:"tonal"},{default:a(()=>[e(T,{icon:"tabler-package"})]),_:1}),l("div",null,[l("div",ca,c(t(H).name),1),l("div",da," Stok saat ini: "+c(t(H).current_stock)+" "+c(t(H).unit),1)])])]),_:1})):E("",!0),e(ee,null,{default:a(()=>[e(V,{cols:"12",md:"6"},{default:a(()=>[e(X,{modelValue:t(D).quantity,"onUpdate:modelValue":s[27]||(s[27]=o=>t(D).quantity=o),modelModifiers:{number:!0},label:`Jumlah ${t(D).type==="in"?"Masuk":t(D).type==="out"?"Keluar":"Akhir"}`,type:"number",variant:"outlined",required:"",min:t(D).type==="adjustment"?0:1,rules:[o=>o>0||"Jumlah harus lebih dari 0"]},null,8,["modelValue","label","min","rules"])]),_:1}),e(V,{cols:"12",md:"6"},{default:a(()=>[e(X,{modelValue:t(D).cost_per_unit,"onUpdate:modelValue":s[28]||(s[28]=o=>t(D).cost_per_unit=o),modelModifiers:{number:!0},label:"Harga per Unit",type:"number",variant:"outlined",prefix:"Rp",readonly:t(D).type!=="in"},null,8,["modelValue","readonly"])]),_:1}),e(V,{cols:"12"},{default:a(()=>[e(Fe,{modelValue:t(D).notes,"onUpdate:modelValue":s[29]||(s[29]=o=>t(D).notes=o),label:"Catatan",placeholder:"Masukkan catatan untuk pergerakan stok...",rows:"3",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),e(W),e(Ie,{class:"pa-6"},{default:a(()=>[e(he),e(M,{variant:"outlined",class:"coffee-secondary",onClick:t(ye)},{default:a(()=>s[56]||(s[56]=[v(" Batal ")])),_:1,__:[56]},8,["onClick"]),e(M,{color:"primary",class:"coffee-primary",loading:t(qe),onClick:t(ve)},{default:a(()=>s[57]||(s[57]=[v(" Simpan ")])),_:1,__:[57]},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"])])}}}),za=et(ma,[["__scopeId","data-v-03d9d92f"]]);export{za as default};

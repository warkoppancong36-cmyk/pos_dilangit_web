import{d as st,r as k,D as ot,c as p,e as r,b as t,m as lt,a1 as ce,f as s,ax as rt,g as H,l as W,X as y,au as B,av as nt,j as it,o as m,s as f,t as d,F as J,i as U,as as me,a5 as dt,_ as ut}from"./main-BxYzs2sN.js";import{C as ct}from"./auto-Cz6uSJnr.js";import{V as g,b as C}from"./VCard-D_ep5DNx.js";import{V as I,a as v}from"./VRow-DcVfzwLq.js";import{V as b}from"./VCardText-BmJKPnXT.js";import{V as Se}from"./VSelect-D9OSLmfL.js";import{V as ae}from"./VTextField-BMWdc0AJ.js";import{V as X}from"./VChip-DvwBgxiG.js";import{V as mt}from"./VDivider-sVjrkTkD.js";import{V as _e}from"./VDataTable-BSi07LQ1.js";import{b as Pe}from"./route-block-B_A1xBdJ.js";import"./VAvatar-WNYjmfA5.js";import"./VImg-DNtJEmyN.js";/* empty css              */import"./forwardRefs-B931MWyl.js";import"./VList-DD9QQAYO.js";import"./VOverlay-BovOjquU.js";import"./VMenu-9etSRRFQ.js";import"./VCheckboxBtn-BUC2--VR.js";import"./VTable-BJ4vsYlL.js";import"./filter-bA1wy3jd.js";const _t={class:"sales-report-page"},pt={class:"d-flex flex-column flex-md-row justify-space-between align-start align-md-center mb-6 ga-4"},vt={class:"d-flex align-center mb-2"},yt={key:0,class:"text-center py-8"},ht={key:1},ft={class:"text-h5 font-weight-bold text-purple"},gt={class:"text-caption text-medium-emphasis mt-1"},bt={class:"text-h5 font-weight-bold text-indigo"},xt={class:"text-caption text-medium-emphasis mt-1"},wt={key:0},kt={class:"d-flex align-center"},Tt={class:"text-body-2"},At={class:"text-end"},St={class:"text-body-2 font-weight-bold"},Pt={class:"text-caption text-medium-emphasis"},Dt={key:1,class:"text-center py-4"},Rt={key:0},Ct={class:"d-flex align-center"},It={class:"text-body-2 text-capitalize"},Ot={class:"text-end"},Nt={class:"text-body-2 font-weight-bold"},Et={class:"text-caption text-medium-emphasis"},Vt={key:1,class:"text-center py-4"},Mt={class:"text-h5 font-weight-bold text-success"},Ft={key:0,class:"mt-1"},$t={class:"text-h5 font-weight-bold text-primary"},jt={class:"text-caption text-medium-emphasis mt-1"},Ht={class:"text-h5 font-weight-bold text-info"},Lt={class:"text-caption text-medium-emphasis mt-1"},zt={class:"text-h5 font-weight-bold text-warning"},Bt={class:"text-caption text-medium-emphasis mt-1"},Jt={key:0},Ut={key:1,class:"text-center py-8"},Kt={class:"top-products-container"},qt={class:"d-flex justify-space-between align-center"},Gt={class:"d-flex align-center"},Yt={class:"font-weight-medium"},Qt={class:"text-caption text-medium-emphasis"},Wt={class:"text-end"},Xt={class:"font-weight-bold text-success"},Zt={class:"font-weight-bold text-success"},ea={class:"font-weight-bold text-success"},ta={key:0},aa={class:"d-flex justify-space-between align-center"},sa={class:"d-flex align-center gap-2"},oa={class:"font-weight-medium"},la={class:"text-end"},ra={class:"text-body-2 font-weight-bold"},na={class:"text-caption text-success"},ia={key:1,class:"text-center py-4"},da={key:0},ua={class:"d-flex justify-space-between align-center mb-1"},ca={class:"d-flex align-center gap-2"},ma={class:"font-weight-medium"},_a={class:"text-end"},pa={class:"d-flex justify-space-between align-center"},va={class:"text-body-2"},ya={class:"text-body-2 font-weight-bold text-success"},ha={key:1,class:"text-center py-4"},fa={class:"text-center"},ga={class:"text-h6 font-weight-bold text-primary"},ba={class:"text-caption text-medium-emphasis mb-1"},xa={class:"text-body-2 font-weight-medium text-success"},wa={class:"d-flex align-center gap-2"},ka={class:"font-weight-medium"},Ta={class:"font-weight-bold"},Aa={class:"font-weight-bold text-success"},Sa={class:"text-body-2"},Pa={key:2,class:"text-center py-12"},De=st({__name:"sales",setup(Da){const Re=it(),V=k(!1),se=k(!1),a=k(null),L=k({total_sales:0,total_orders:0,avg_order_value:0}),K=k([]),q=k([]),x=k("month"),T=k(""),D=k(""),R=k(""),N=k(""),E=k(""),oe=k();let le=null;const Ce=[{title:"Filter per Bulan",value:"month"},{title:"Custom Range",value:"custom"}],A=new Date().getFullYear(),Ie=[{title:"Januari",value:`${A}-01`},{title:"Februari",value:`${A}-02`},{title:"Maret",value:`${A}-03`},{title:"April",value:`${A}-04`},{title:"Mei",value:`${A}-05`},{title:"Juni",value:`${A}-06`},{title:"Juli",value:`${A}-07`},{title:"Agustus",value:`${A}-08`},{title:"September",value:`${A}-09`},{title:"Oktober",value:`${A}-10`},{title:"November",value:`${A}-11`},{title:"Desember",value:`${A}-12`}],Oe=[{title:"Customer",key:"name",align:"start"},{title:"Total Order",key:"orders",align:"center"},{title:"Total Belanja",key:"revenue",align:"end"},{title:"AOV",key:"avg_order",align:"end"}],Ne=[{title:"Tanggal",key:"date",align:"start"},{title:"Pendapatan",key:"total",align:"end"}],Ee=[{title:"Kategori",key:"category",align:"start"},{title:"Order",key:"orders_count",align:"center"},{title:"Qty Terjual",key:"quantity_sold",align:"center"},{title:"Revenue",key:"revenue",align:"end"},{title:"Harga Rata2",key:"avg_price",align:"end"}],w=l=>typeof l=="string"?l.startsWith("Rp")?l:`Rp ${l}`:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(l),Z=l=>new Date(l).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}),Ve=l=>["warning","success","info","secondary","primary"][l]||"primary",pe=l=>l.sort((e,o)=>o.order_count-e.order_count).slice(0,5),Me=(l,e)=>{const o=Math.max(...e.map(u=>u.order_count));return o>0?l/o*100:0},Fe=(l,e)=>{const o=Math.max(...e.map(u=>u.order_count));return o>0?l/o*100:0},$e=l=>l>=6&&l<12?"mdi-weather-sunny":l>=12&&l<18?"mdi-weather-partly-cloudy":(l>=18&&l<22,"mdi-weather-night"),ve=l=>{switch(l==null?void 0:l.toLowerCase()){case"cash":case"tunai":return"mdi-cash";case"card":case"kartu":return"mdi-credit-card";case"digital":case"e-wallet":return"mdi-cellphone";case"transfer":return"mdi-bank-transfer";default:return"mdi-credit-card-outline"}},ee=l=>{switch(l==null?void 0:l.toLowerCase()){case"cash":return"Tunai";case"card":return"Kartu";case"digital":return"Digital";case"transfer":return"Transfer";default:return l||"Lainnya"}},je=l=>{const e=["#1976D2","#388E3C","#F57C00","#7B1FA2","#D32F2F","#303F9F","#00796B","#F57F17","#5D4037","#616161"];return e[l%e.length]},He=l=>{const e=["#2E7D32","#1565C0","#E65100","#6A1B9A","#C62828","#283593","#00695C","#F9A825","#4E342E","#424242"];return e[l%e.length]},Le=()=>{var o,u,F;if(((u=(o=a.value)==null?void 0:o.summary)==null?void 0:u.daily_average_sales)!==void 0)return a.value.summary.daily_average_sales;if(!((F=a.value)!=null&&F.daily_sales)||!Array.isArray(a.value.daily_sales))return 0;const l=a.value.daily_sales.filter(z=>parseFloat(z.revenue)>0);return l.length===0?0:l.reduce((z,te)=>z+(parseFloat(te.revenue)||0),0)/l.length},ze=()=>{var l,e,o;return((e=(l=a.value)==null?void 0:l.summary)==null?void 0:e.active_days_count)!==void 0?a.value.summary.active_days_count:!((o=a.value)!=null&&o.daily_sales)||!Array.isArray(a.value.daily_sales)?0:a.value.daily_sales.filter(u=>parseFloat(u.revenue)>0).length},Be=()=>{if(x.value==="custom"&&D.value&&R.value)return`${Z(D.value)} - ${Z(R.value)}`;if(x.value==="month"&&T.value){const[l,e]=T.value.split("-");return`${["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][parseInt(e)-1]} ${l}`}return x.value},Je=()=>{if(x.value==="month"){const l=new Date().toISOString().slice(0,7);T.value=l}M()},ye=()=>{(N.value&&E.value||!N.value&&!E.value)&&M()},re=()=>{let l={};return x.value==="custom"?D.value&&R.value&&(l.start_date=D.value,l.end_date=R.value):T.value&&(l.month=T.value),N.value&&E.value&&(l.hour_start=N.value,l.hour_end=E.value),l},M=async()=>{if(!V.value){V.value=!0;try{const l=re();if(x.value==="custom"&&(!D.value||!R.value)){V.value=!1;return}if(x.value==="month"&&!T.value){V.value=!1;return}const e=await B.get("/api/reports/sales",{params:l});if(e.data.success){a.value=e.data.data;const o=re();a.value&&a.value.summary&&(L.value={total_sales:a.value.summary.total_revenue||0,total_orders:a.value.summary.total_orders||0,avg_order_value:a.value.summary.average_order||0}),await Ue(o);const u=re();await Ke(u),await qe(u),await nt(),setTimeout(()=>{Ge()},100)}}catch(l){console.error("Error loading sales report:",l)}finally{V.value=!1}}},Ue=async(l={})=>{try{if(l&&Object.keys(l).length>0){const o=await B.get("/api/reports/sales",{params:l});if(o.data.success){const u=o.data.data.summary||{};L.value={total_sales:u.total_revenue||0,total_orders:u.total_orders||0,avg_order_value:u.average_order||0};return}}const e=await B.get("/api/reports/today-sales");e.data.success&&(L.value=e.data.data)}catch(e){console.error("Error loading today sales:",e),L.value={total_sales:0,total_orders:0,avg_order_value:0}}},Ke=async(l={})=>{try{const e=await B.get("/api/reports/payment-methods",{params:l});console.log("Payment Methods Response:",e.data),e.data.success?K.value=e.data.data.data||[]:K.value=[]}catch(e){console.error("Error loading payment method analytics:",e),K.value=[]}},qe=async(l={})=>{try{const e=await B.get("/api/reports/order-types",{params:l});console.log("Order Types Response:",e.data),e.data.success?q.value=e.data.data.data||[]:q.value=[]}catch(e){console.error("Error loading order type analytics:",e),q.value=[]}},Ge=()=>{if(!oe.value||!a.value)return;le&&le.destroy();const l=oe.value.getContext("2d");if(!l)return;const e=a.value.daily_sales.map(u=>Z(u.date)),o=a.value.daily_sales.map(u=>{if(typeof u.total=="string"&&u.total.includes("Rp")){const F=u.total.replace(/\D/g,"");return parseInt(F,10)||0}return typeof u.total=="number"?u.total:0});le=new ct(l,{type:"line",data:{labels:e,datasets:[{label:"Pendapatan Harian",data:o,borderColor:"rgb(76, 175, 80)",backgroundColor:"rgba(76, 175, 80, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(u){return w(u)}}}}}})},Ye=async()=>{var e,o,u,F,z,te,he,fe;if(!a.value){console.warn("No data to export");return}se.value=!0;const l=c=>{if(!c&&c!==0)return"Rp 0";let h=0;try{if(typeof c=="string"&&c.includes("Rp")){const ne=c.replace(/\D/g,"");h=parseInt(ne,10)}else typeof c=="string"?h=parseFloat(c.replace(/[^\d]/g,"")):typeof c=="number"&&(h=c);return(isNaN(h)||!isFinite(h)||h<0)&&(h=0),`Rp ${h.toLocaleString("id-ID").replace(/,/g,".")}`}catch{return"Rp 0"}};try{const c=await dt(()=>import("./xlsx-CfQreh1U.js"),[]);let h=[];try{let n={};x.value==="custom"?D.value&&R.value&&(n.start_date=D.value,n.end_date=R.value):T.value&&(n.month=T.value),N.value&&E.value&&(n.hour_start=N.value,n.hour_end=E.value),n.per_page=500,console.log("ðŸš€ Fetching transaction history (FAST MODE) with params:",n);const _=performance.now(),i=await B.get("/api/pos/orders/history/export",{params:n,timeout:15e3}),$=Math.round(performance.now()-_);console.log(`âš¡ Transaction data loaded in ${$}ms`),console.log("Transaction response:",i.data),i.data&&i.data.data&&(h=Array.isArray(i.data.data)?i.data.data:[]),console.log(`âœ… Fetched ${h.length} transactions for export`)}catch(n){console.error("âŒ Failed to fetch transaction history:",n),n.code==="ECONNABORTED"&&console.warn("â±ï¸ Request timeout"),h=[]}const S=x.value==="custom"?`${D.value} s/d ${R.value}`:`Bulan ${T.value}`,ne=[["LAPORAN PENJUALAN ENHANCED"],["Periode:",S],["Tanggal Export:",new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})],[],["RINGKASAN PENJUALAN"],["Total Order:",a.value.summary.total_orders],["Total Pendapatan:",l(a.value.summary.total_revenue)],["Rata-rata Order (AOV):",l(a.value.summary.average_order)],["Total Item Terjual:",a.value.summary.total_items],["Order Selesai:",a.value.summary.completed_orders],["Order Dibatalkan:",a.value.summary.cancelled_orders],a.value.summary.growth_percentage!==void 0?["Growth vs Periode Sebelumnya:",`${a.value.summary.growth_percentage}%`]:[],[],["ANALISIS CUSTOMER"],["Customer Baru:",((e=a.value.customer_behavior)==null?void 0:e.new_customers)||0],["Returning Customer:",((o=a.value.customer_behavior)==null?void 0:o.returning_customers)||0],["One-time Customer:",((u=a.value.customer_behavior)==null?void 0:u.one_time_customers)||0],["Retention Rate:",`${((F=a.value.customer_behavior)==null?void 0:F.retention_rate)||0}%`],[]],P=c.utils.book_new(),ge=c.utils.aoa_to_sheet(ne);if(ge["!cols"]=[{wch:20},{wch:25}],c.utils.book_append_sheet(P,ge,"Ringkasan"),a.value.daily_sales&&a.value.daily_sales.length>0){const n=[["PENJUALAN HARIAN"],["Periode:",S],[],["Tanggal","Total Penjualan"],...a.value.daily_sales.map(i=>[new Date(i.date).toLocaleDateString("id-ID"),l(i.total)])],_=c.utils.aoa_to_sheet(n);_["!cols"]=[{wch:15},{wch:20}],c.utils.book_append_sheet(P,_,"Penjualan Harian")}if(a.value.top_products&&a.value.top_products.length>0){const n=[["PRODUK TERLARIS"],["Periode:",S],[],["No","Nama Produk","Jumlah Terjual","Total Pendapatan"],...a.value.top_products.map((i,$)=>[$+1,i.name,i.quantity,l(i.revenue)])],_=c.utils.aoa_to_sheet(n);_["!cols"]=[{wch:5},{wch:30},{wch:15},{wch:20}],c.utils.book_append_sheet(P,_,"Produk Terlaris")}if(a.value.top_customers&&a.value.top_customers.length>0){const n=[["CUSTOMER TERBAIK - ANALISIS LENGKAP"],["Periode:",S],[],["No","Nama Customer","Jumlah Order","Total Belanja","AOV","Customer Lifetime (hari)"],...a.value.top_customers.map((i,$)=>[$+1,i.name,i.orders,l(i.revenue),l(i.avg_order),i.customer_lifetime||0])],_=c.utils.aoa_to_sheet(n);_["!cols"]=[{wch:5},{wch:25},{wch:15},{wch:20},{wch:15},{wch:20}],c.utils.book_append_sheet(P,_,"Customer Analytics")}if(a.value.peak_hours&&a.value.peak_hours.length>0){const n=[["ANALISIS JAM RAMAI"],["Periode:",S],[],["Jam","Jumlah Order","Total Revenue","AOV"],...a.value.peak_hours.map(i=>[i.hour_display,i.order_count,l(i.revenue),l(i.avg_order)])],_=c.utils.aoa_to_sheet(n);_["!cols"]=[{wch:10},{wch:15},{wch:20},{wch:15}],c.utils.book_append_sheet(P,_,"Peak Hours")}if(a.value.sales_by_day&&a.value.sales_by_day.length>0){const n=[["ANALISIS PENJUALAN PER HARI"],["Periode:",S],[],["Hari","Jumlah Order","Total Revenue","AOV"],...a.value.sales_by_day.map(i=>[i.day_name,i.order_count,l(i.revenue),l(i.avg_order)])],_=c.utils.aoa_to_sheet(n);_["!cols"]=[{wch:15},{wch:15},{wch:20},{wch:15}],c.utils.book_append_sheet(P,_,"Sales by Day")}if(a.value.payment_methods&&a.value.payment_methods.length>0){const n=[["ANALISIS METODE PEMBAYARAN"],["Periode:",S],[],["Metode","Jumlah Order","Total Revenue","AOV","Persentase"],...a.value.payment_methods.map(i=>[ee(i.method),i.order_count,l(i.revenue),l(i.avg_order),`${i.percentage}%`])],_=c.utils.aoa_to_sheet(n);_["!cols"]=[{wch:15},{wch:15},{wch:20},{wch:15},{wch:12}],c.utils.book_append_sheet(P,_,"Payment Methods")}if(a.value.category_performance&&a.value.category_performance.length>0){const n=[["PERFORMA KATEGORI PRODUK"],["Periode:",S],[],["Kategori","Order dengan Kategori","Qty Terjual","Total Revenue","Harga Rata-rata"],...a.value.category_performance.map(i=>[i.category,i.orders_count,i.quantity_sold,l(i.revenue),l(i.avg_price)])],_=c.utils.aoa_to_sheet(n);_["!cols"]=[{wch:20},{wch:18},{wch:15},{wch:20},{wch:18}],c.utils.book_append_sheet(P,_,"Category Performance")}console.log("ðŸ“Š Creating Transaction History Sheet with",h.length,"transactions");const Qe=["No","Order ID","Tanggal","Jam","Customer","Table","Tipe Order","Total","Pembayaran","Status"];let G=0;h&&h.length>0&&h.forEach(n=>{var i;const _=((i=n.items)==null?void 0:i.length)||0;_>G&&(G=_)});const be=[];for(let n=1;n<=G;n++)be.push(`Item ${n}`);const We=[...Qe,...be],ie=[["RIWAYAT TRANSAKSI"],["Periode:",S],[],We];h&&h.length>0?h.forEach((n,_)=>{try{const i=new Date(n.created_at),$=i.toLocaleDateString("id-ID"),Ze=i.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),et=n.customer_name||"Guest",tt=n.table_number||"-";let de="Dine In";n.order_type==="takeaway"?de="Takeaway":n.order_type==="delivery"&&(de="Delivery");let Y="Cash";if(n.payment_methods){const j=n.payment_methods.split(",")[0];j==="qris"?Y="QRIS":j==="debit"?Y="Debit Card":j==="credit"?Y="Credit Card":j==="transfer"&&(Y="Transfer Bank")}let O=n.status||"pending";O==="completed"?O="Selesai":O==="cancelled"?O="Dibatalkan":O==="pending"?O="Pending":O==="processing"&&(O="Diproses");const ue=[_+1,n.order_number||n.id_order||n.id,$,Ze,et,tt,de,l(n.total_amount||n.total),Y,O],Ae=n.items||[];for(let Q=0;Q<G;Q++)if(Q<Ae.length){const j=Ae[Q],at=`${j.name} (${j.quantity}x)`;ue.push(at)}else ue.push("");ie.push(ue)}catch(i){console.error("Error processing order:",n,i)}}):ie.push(["","Tidak ada data transaksi untuk periode ini"]);const xe=c.utils.aoa_to_sheet(ie),we=[{wch:5},{wch:12},{wch:12},{wch:8},{wch:20},{wch:10},{wch:12},{wch:18},{wch:15},{wch:12}];for(let n=0;n<G;n++)we.push({wch:30});xe["!cols"]=we,c.utils.book_append_sheet(P,xe,"Riwayat Transaksi"),console.log("âœ… Transaction History Sheet added to workbook");const Xe=[["BUSINESS INSIGHTS & RECOMMENDATIONS"],["Periode:",S],[],["RINGKASAN PERFORMA"],["Growth Rate:",a.value.summary.growth_percentage!==void 0?`${a.value.summary.growth_percentage}%`:"N/A"],["Customer Retention:",`${((z=a.value.customer_behavior)==null?void 0:z.retention_rate)||0}%`],[],["TOP PERFORMERS"],["Jam Tersibuk:",a.value.peak_hours&&a.value.peak_hours.length>0?(te=pe(a.value.peak_hours)[0])==null?void 0:te.hour_display:"N/A"],["Hari Terbaik:",a.value.sales_by_day&&a.value.sales_by_day.length>0?(he=a.value.sales_by_day.sort((n,_)=>_.order_count-n.order_count)[0])==null?void 0:he.day_name:"N/A"],["Metode Bayar Favorit:",a.value.payment_methods&&a.value.payment_methods.length>0?ee((fe=a.value.payment_methods[0])==null?void 0:fe.method):"N/A"],[],["REKOMENDASI BISNIS"],["1. Optimasi Operasional:","Focus staff scheduling pada jam dan hari ramai"],["2. Customer Retention:","Implementasi loyalty program untuk meningkatkan retention"],["3. Product Strategy:","Push produk top-selling dan evaluasi slow-moving items"],["4. Payment Strategy:","Optimalkan metode pembayaran yang paling disukai customer"],["5. Marketing Time:","Jalankan promosi saat jam dan hari dengan traffic rendah"]],ke=c.utils.aoa_to_sheet(Xe);ke["!cols"]=[{wch:25},{wch:50}],c.utils.book_append_sheet(P,ke,"Business Insights");const Te=`laporan-penjualan-enhanced-analytics-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.xlsx`;c.writeFile(P,Te),console.log("âœ… Enhanced Sales Analytics report exported successfully:",Te)}catch(c){console.error("Error exporting sales report:",c)}finally{se.value=!1}};return ot(()=>{const l=new Date,e=`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}`;T.value=e,M()}),(l,e)=>(m(),p("div",_t,[r("div",pt,[r("div",null,[r("div",vt,[t(ce,{icon:"mdi-arrow-left",variant:"text",size:"small",onClick:e[0]||(e[0]=o=>lt(Re).back()),class:"me-2"}),e[7]||(e[7]=r("h1",{class:"text-h4 font-weight-bold"},"Laporan Penjualan",-1))]),e[8]||(e[8]=r("p",{class:"text-body-1 text-medium-emphasis"}," Analisis lengkap penjualan dan performa produk ",-1))]),t(ce,{color:"success","prepend-icon":"mdi-file-excel",onClick:Ye,loading:se.value},{default:s(()=>e[9]||(e[9]=[f(" Export Excel ")])),_:1,__:[9]},8,["loading"])]),t(g,{class:"mb-6"},{default:s(()=>[t(b,null,{default:s(()=>[t(I,null,{default:s(()=>[t(v,{cols:"12",md:"4"},{default:s(()=>[t(Se,{modelValue:x.value,"onUpdate:modelValue":[e[1]||(e[1]=o=>x.value=o),Je],items:Ce,label:"Pilih Periode",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),x.value==="custom"?(m(),H(v,{key:0,cols:"12",md:"3"},{default:s(()=>[t(ae,{modelValue:D.value,"onUpdate:modelValue":[e[2]||(e[2]=o=>D.value=o),M],type:"date",label:"Tanggal Mulai",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})):W("",!0),x.value==="custom"?(m(),H(v,{key:1,cols:"12",md:"3"},{default:s(()=>[t(ae,{modelValue:R.value,"onUpdate:modelValue":[e[3]||(e[3]=o=>R.value=o),M],type:"date",label:"Tanggal Akhir",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})):(m(),H(v,{key:2,cols:"12",md:"3"},{default:s(()=>[t(Se,{modelValue:T.value,"onUpdate:modelValue":[e[4]||(e[4]=o=>T.value=o),M],items:Ie,label:"Pilih Bulan",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})),t(v,{cols:"12",md:"2"},{default:s(()=>[t(ae,{modelValue:N.value,"onUpdate:modelValue":[e[5]||(e[5]=o=>N.value=o),ye],type:"time",label:"Jam Mulai",variant:"outlined",density:"compact",clearable:""},{"prepend-inner":s(()=>[t(y,{icon:"mdi-clock-outline",size:"20"})]),_:1},8,["modelValue"])]),_:1}),t(v,{cols:"12",md:"2"},{default:s(()=>[t(ae,{modelValue:E.value,"onUpdate:modelValue":[e[6]||(e[6]=o=>E.value=o),ye],type:"time",label:"Jam Akhir",variant:"outlined",density:"compact",clearable:""},{"prepend-inner":s(()=>[t(y,{icon:"mdi-clock-outline",size:"20"})]),_:1},8,["modelValue"])]),_:1}),t(v,{cols:"12",md:"2"},{default:s(()=>[t(ce,{color:"primary",block:"",onClick:M,loading:V.value},{default:s(()=>e[10]||(e[10]=[f(" Refresh ")])),_:1,__:[10]},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1}),V.value?(m(),p("div",yt,[t(rt,{indeterminate:"",color:"primary",size:"64"}),e[11]||(e[11]=r("p",{class:"text-body-1 mt-4"},"Memuat data laporan...",-1))])):a.value?(m(),p("div",ht,[t(I,{class:"mb-6"},{default:s(()=>[t(v,{cols:"12",md:"6"},{default:s(()=>[t(g,null,{default:s(()=>[t(b,{class:"text-center"},{default:s(()=>[t(y,{icon:"mdi-calendar-today",size:"32",class:"text-purple mb-2"}),r("div",ft,d(w(L.value.total_sales)),1),e[12]||(e[12]=r("div",{class:"text-body-2 text-medium-emphasis"},"Penjualan Hari Ini",-1)),r("div",gt,d(L.value.total_orders)+" order | "+d(Be()),1)]),_:1,__:[12]})]),_:1})]),_:1}),t(v,{cols:"12",md:"6"},{default:s(()=>[t(g,null,{default:s(()=>[t(b,{class:"text-center"},{default:s(()=>[t(y,{icon:"mdi-chart-bar",size:"32",class:"text-indigo mb-2"}),r("div",bt,d(w(Le())),1),e[13]||(e[13]=r("div",{class:"text-body-2 text-medium-emphasis"},"Rata-rata Penjualan Harian",-1)),r("div",xt," Per "+d(ze())+" hari aktif ",1)]),_:1,__:[13]})]),_:1})]),_:1})]),_:1}),t(I,{class:"mb-6"},{default:s(()=>[t(v,{cols:"12",md:"6"},{default:s(()=>[t(g,null,{default:s(()=>[t(C,{class:"pb-2"},{default:s(()=>[t(y,{icon:"mdi-credit-card",class:"me-2"}),e[14]||(e[14]=f(" Metode Pembayaran "))]),_:1,__:[14]}),t(b,null,{default:s(()=>[K.value.length>0?(m(),p("div",wt,[(m(!0),p(J,null,U(K.value,(o,u)=>(m(),p("div",{key:u,class:"d-flex justify-space-between align-center mb-3"},[r("div",kt,[t(y,{icon:ve(o.payment_method),color:je(u),class:"me-2"},null,8,["icon","color"]),r("span",Tt,d(ee(o.payment_method)),1)]),r("div",At,[r("div",St,d(o.total_amount_formatted),1),r("div",Pt,d(o.order_count)+" order",1)])]))),128))])):(m(),p("div",Dt,[t(y,{icon:"mdi-cash-off",size:"48",class:"text-grey-lighten-1 mb-2"}),e[15]||(e[15]=r("div",{class:"text-body-2 text-medium-emphasis"},"Tidak ada pembayaran hari ini",-1)),e[16]||(e[16]=r("div",{class:"text-h6 font-weight-bold text-grey"},"Rp 0",-1))]))]),_:1})]),_:1})]),_:1}),t(v,{cols:"12",md:"6"},{default:s(()=>[t(g,null,{default:s(()=>[t(C,{class:"pb-2"},{default:s(()=>[t(y,{icon:"mdi-food",class:"me-2"}),e[17]||(e[17]=f(" Tipe Order "))]),_:1,__:[17]}),t(b,null,{default:s(()=>[q.value.length>0?(m(),p("div",Rt,[(m(!0),p(J,null,U(q.value,(o,u)=>(m(),p("div",{key:u,class:"d-flex justify-space-between align-center mb-3"},[r("div",Ct,[t(y,{icon:"mdi-food",color:He(u),class:"me-2"},null,8,["color"]),r("span",It,d(o.order_type),1)]),r("div",Ot,[r("div",Nt,d(o.total_amount_formatted),1),r("div",Et,d(o.order_count)+" order",1)])]))),128))])):(m(),p("div",Vt,[t(y,{icon:"mdi-food-off",size:"48",class:"text-grey-lighten-1 mb-2"}),e[18]||(e[18]=r("div",{class:"text-body-2 text-medium-emphasis"},"Tidak ada pesanan hari ini",-1)),e[19]||(e[19]=r("div",{class:"text-h6 font-weight-bold text-grey"},"Rp 0",-1))]))]),_:1})]),_:1})]),_:1})]),_:1}),t(I,{class:"mb-6"},{default:s(()=>[t(v,{cols:"6",md:"3"},{default:s(()=>[t(g,null,{default:s(()=>[t(b,{class:"text-center"},{default:s(()=>[t(y,{icon:"mdi-currency-usd",size:"32",class:"text-success mb-2"}),r("div",Mt,d(w(a.value.summary.total_revenue)),1),e[20]||(e[20]=r("div",{class:"text-body-2 text-medium-emphasis"},"Total Pendapatan",-1)),a.value.summary.growth_percentage!==void 0?(m(),p("div",Ft,[t(X,{color:a.value.summary.growth_percentage>=0?"success":"error",size:"x-small",variant:"tonal"},{default:s(()=>[f(d(a.value.summary.growth_percentage>=0?"+":"")+d(a.value.summary.growth_percentage)+"% ",1)]),_:1},8,["color"])])):W("",!0)]),_:1,__:[20]})]),_:1})]),_:1}),t(v,{cols:"6",md:"3"},{default:s(()=>[t(g,null,{default:s(()=>[t(b,{class:"text-center"},{default:s(()=>[t(y,{icon:"mdi-cart",size:"32",class:"text-primary mb-2"}),r("div",$t,d(a.value.summary.total_orders),1),e[21]||(e[21]=r("div",{class:"text-body-2 text-medium-emphasis"},"Total Order",-1)),r("div",jt," AOV: "+d(w(a.value.summary.average_order)),1)]),_:1,__:[21]})]),_:1})]),_:1}),t(v,{cols:"6",md:"3"},{default:s(()=>[t(g,null,{default:s(()=>[t(b,{class:"text-center"},{default:s(()=>[t(y,{icon:"mdi-package",size:"32",class:"text-info mb-2"}),r("div",Ht,d(a.value.summary.total_items),1),e[22]||(e[22]=r("div",{class:"text-body-2 text-medium-emphasis"},"Total Item",-1)),r("div",Lt,d(a.value.summary.completed_orders)+" selesai ",1)]),_:1,__:[22]})]),_:1})]),_:1}),t(v,{cols:"6",md:"3"},{default:s(()=>[t(g,null,{default:s(()=>[t(b,{class:"text-center"},{default:s(()=>{var o,u;return[t(y,{icon:"mdi-account-group",size:"32",class:"text-warning mb-2"}),r("div",zt,d(((o=a.value.customer_behavior)==null?void 0:o.new_customers)||0),1),e[23]||(e[23]=r("div",{class:"text-body-2 text-medium-emphasis"},"Customer Baru",-1)),r("div",Bt," Retention: "+d(((u=a.value.customer_behavior)==null?void 0:u.retention_rate)||0)+"% ",1)]}),_:1,__:[23]})]),_:1})]),_:1})]),_:1}),t(I,{class:"mb-6"},{default:s(()=>[t(v,{cols:"12"},{default:s(()=>[t(g,null,{default:s(()=>[t(C,null,{default:s(()=>e[24]||(e[24]=[f("Trend Penjualan Harian")])),_:1,__:[24]}),t(b,null,{default:s(()=>[a.value&&a.value.daily_sales&&a.value.daily_sales.length>0?(m(),p("div",Jt,[r("canvas",{ref_key:"dailySalesChart",ref:oe,class:"w-100",style:{"max-height":"300px"}},null,512)])):(m(),p("div",Ut,[t(y,{icon:"mdi-chart-line",size:"48",class:"text-medium-emphasis mb-2"}),e[25]||(e[25]=r("p",{class:"text-body-2 text-medium-emphasis"},"Tidak ada data penjualan harian",-1))]))]),_:1})]),_:1})]),_:1})]),_:1}),t(I,{class:"mb-6"},{default:s(()=>[t(v,{cols:"12",md:"4"},{default:s(()=>[t(g,null,{default:s(()=>[t(C,null,{default:s(()=>e[26]||(e[26]=[f("Top 5 Produk")])),_:1,__:[26]}),t(b,null,{default:s(()=>[r("div",Kt,[(m(!0),p(J,null,U(a.value.top_products,(o,u)=>(m(),p("div",{key:o.id,class:"mb-3"},[r("div",qt,[r("div",Gt,[t(X,{color:Ve(u),size:"small",class:"me-2"},{default:s(()=>[f(d(u+1),1)]),_:2},1032,["color"]),r("div",null,[r("div",Yt,d(o.name),1),r("div",Qt,d(o.quantity)+" terjual ",1)])]),r("div",Wt,[r("div",Xt,d(w(o.revenue)),1)])]),u<a.value.top_products.length-1?(m(),H(mt,{key:0,class:"mt-3"})):W("",!0)]))),128))])]),_:1})]),_:1})]),_:1}),t(v,{cols:"12",md:"4"},{default:s(()=>[t(g,null,{default:s(()=>[t(C,null,{default:s(()=>e[27]||(e[27]=[f("Top Customer")])),_:1,__:[27]}),t(b,null,{default:s(()=>[t(_e,{headers:Oe,items:a.value.top_customers,"items-per-page":5,class:"elevation-0","no-data-text":"Tidak ada data customer"},{"item.orders":s(({item:o})=>[t(X,{size:"small",color:"primary",variant:"tonal"},{default:s(()=>[f(d(o.orders),1)]),_:2},1024)]),"item.revenue":s(({item:o})=>[r("span",Zt,d(w(o.revenue)),1)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1}),t(v,{cols:"12",md:"4"},{default:s(()=>[t(g,null,{default:s(()=>[t(C,null,{default:s(()=>e[28]||(e[28]=[f("Penjualan per Hari")])),_:1,__:[28]}),t(b,null,{default:s(()=>[t(_e,{headers:Ne,items:a.value.daily_sales,"items-per-page":7,class:"elevation-0","no-data-text":"Tidak ada data penjualan"},{"item.date":s(({item:o})=>[f(d(Z(o.date)),1)]),"item.total":s(({item:o})=>[r("span",ea,d(w(o.total)),1)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1}),t(I,{class:"mb-6"},{default:s(()=>[t(v,{cols:"12",md:"6"},{default:s(()=>[t(g,null,{default:s(()=>[t(C,{class:"d-flex align-center gap-2"},{default:s(()=>[t(y,{icon:"mdi-clock-outline"}),e[29]||(e[29]=f(" Jam Ramai (Peak Hours) "))]),_:1,__:[29]}),t(b,null,{default:s(()=>[a.value.peak_hours&&a.value.peak_hours.length>0?(m(),p("div",ta,[(m(!0),p(J,null,U(pe(a.value.peak_hours),o=>(m(),p("div",{key:o.hour,class:"mb-2"},[r("div",aa,[r("div",sa,[t(y,{icon:$e(o.hour),size:"16"},null,8,["icon"]),r("span",oa,d(o.hour_display),1)]),r("div",la,[r("div",ra,d(o.order_count)+" order",1),r("div",na,d(w(o.revenue)),1)])]),t(me,{"model-value":Me(o.order_count,a.value.peak_hours),color:"primary",height:"4",class:"mt-1"},null,8,["model-value"])]))),128))])):(m(),p("div",ia,e[30]||(e[30]=[r("p",{class:"text-body-2 text-medium-emphasis"},"Tidak ada data jam ramai",-1)])))]),_:1})]),_:1})]),_:1}),t(v,{cols:"12",md:"6"},{default:s(()=>[t(g,null,{default:s(()=>[t(C,{class:"d-flex align-center gap-2"},{default:s(()=>[t(y,{icon:"mdi-credit-card-outline"}),e[31]||(e[31]=f(" Metode Pembayaran "))]),_:1,__:[31]}),t(b,null,{default:s(()=>[a.value.payment_methods&&a.value.payment_methods.length>0?(m(),p("div",da,[(m(!0),p(J,null,U(a.value.payment_methods,o=>(m(),p("div",{key:o.method,class:"mb-3"},[r("div",ua,[r("div",ca,[t(y,{icon:ve(o.method),size:"16"},null,8,["icon"]),r("span",ma,d(ee(o.method)),1)]),r("div",_a,[t(X,{size:"small",color:"primary",variant:"tonal"},{default:s(()=>[f(d(o.percentage)+"% ",1)]),_:2},1024)])]),r("div",pa,[r("span",va,d(o.order_count)+" transaksi",1),r("span",ya,d(w(o.revenue)),1)]),t(me,{"model-value":o.percentage,color:"success",height:"4",class:"mt-1"},null,8,["model-value"])]))),128))])):(m(),p("div",ha,e[32]||(e[32]=[r("p",{class:"text-body-2 text-medium-emphasis"},"Tidak ada data metode pembayaran",-1)])))]),_:1})]),_:1})]),_:1})]),_:1}),a.value.sales_by_day&&a.value.sales_by_day.length>0?(m(),H(I,{key:0,class:"mb-6"},{default:s(()=>[t(v,{cols:"12"},{default:s(()=>[t(g,null,{default:s(()=>[t(C,{class:"d-flex align-center gap-2"},{default:s(()=>[t(y,{icon:"mdi-calendar-week"}),e[33]||(e[33]=f(" Performa Penjualan per Hari "))]),_:1,__:[33]}),t(b,null,{default:s(()=>[t(I,null,{default:s(()=>[(m(!0),p(J,null,U(a.value.sales_by_day,o=>(m(),H(v,{key:o.day_name,cols:"6",md:"1.7"},{default:s(()=>[r("div",fa,[r("div",ga,d(o.order_count),1),r("div",ba,d(o.day_name),1),r("div",xa,d(w(o.revenue)),1),t(me,{"model-value":Fe(o.order_count,a.value.sales_by_day),color:"primary",height:"3",class:"mt-1"},null,8,["model-value"])])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):W("",!0),a.value.category_performance&&a.value.category_performance.length>0?(m(),H(I,{key:1,class:"mb-6"},{default:s(()=>[t(v,{cols:"12"},{default:s(()=>[t(g,null,{default:s(()=>[t(C,{class:"d-flex align-center gap-2"},{default:s(()=>[t(y,{icon:"mdi-shape-outline"}),e[34]||(e[34]=f(" Performa Kategori Produk "))]),_:1,__:[34]}),t(b,null,{default:s(()=>[t(_e,{headers:Ee,items:a.value.category_performance,"items-per-page":10,class:"elevation-0","no-data-text":"Tidak ada data kategori"},{"item.category":s(({item:o})=>[r("div",wa,[t(y,{icon:"mdi-tag",size:"16",color:"primary"}),r("span",ka,d(o.category),1)])]),"item.orders_count":s(({item:o})=>[t(X,{size:"small",color:"info",variant:"tonal"},{default:s(()=>[f(d(o.orders_count),1)]),_:2},1024)]),"item.quantity_sold":s(({item:o})=>[r("span",Ta,d(o.quantity_sold),1)]),"item.revenue":s(({item:o})=>[r("span",Aa,d(w(o.revenue)),1)]),"item.avg_price":s(({item:o})=>[r("span",Sa,d(w(o.avg_price)),1)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1})):W("",!0)])):(m(),p("div",Pa,[t(y,{icon:"mdi-chart-line-variant",size:"64",class:"text-medium-emphasis mb-4"}),e[35]||(e[35]=r("h3",{class:"text-h6 mb-2"},"Tidak ada data laporan",-1)),e[36]||(e[36]=r("p",{class:"text-body-2 text-medium-emphasis"}," Silakan pilih periode yang berbeda atau periksa kembali filter Anda ",-1))]))]))}});typeof Pe=="function"&&Pe(De);const Wa=ut(De,[["__scopeId","data-v-3b84700b"]]);export{Wa as default};

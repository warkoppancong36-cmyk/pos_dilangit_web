import{au as fe,d as Mt,r as v,V as ae,w as Ye,g as S,f as s,b as t,s as i,X as C,t as u,l as x,c as X,at as se,e as n,ax as ut,a1 as w,o as g,_ as Dt,az as St,aN as It,D as Ut,m as a,a3 as Le,F as At,i as $t,p as Ge,a0 as Je,a5 as jt,aA as Rt}from"./main-_2tFfzfr.js";import{V as Se}from"./VDialog-DGPFMRuN.js";import{b as pe,c as De,V as O}from"./VCard-DHDBmGSj.js";import{V as J}from"./VDivider-BKcoNKS0.js";import{V as N}from"./VCardText-DzOO1zEw.js";import{V as Tt,a as zt}from"./VDataTable-CSyyY8MO.js";import{V as E}from"./VChip-39d0Hz5V.js";import{V as Ve}from"./VSpacer-DXwvkNfn.js";import{I as Lt}from"./ItemsApi-BlprOgWp.js";import{u as Bt}from"./useApi-NxNVpWZQ.js";import{V as ge,a as z}from"./VRow-B76Mg6xC.js";import{V as de}from"./VTextField-CLT684q_.js";import{V as rt}from"./VSelect-BvIC7svV.js";import{V as Ot}from"./VDataTableServer-B2_IISGj.js";import{V as Xe}from"./VTooltip-UG8QooFZ.js";import{V as We}from"./VForm-DLCohPmX.js";import{V as it}from"./VTextarea-DKSmuK13.js";import{V as Vt}from"./VAvatar-BMimOfwj.js";import"./VOverlay-C16zLSgP.js";import"./forwardRefs-B931MWyl.js";import"./VImg-B6p767eL.js";import"./VCheckboxBtn-IMI6bdAg.js";import"./VTable-ssGyoBdU.js";import"./filter-BPuHWlRI.js";/* empty css              */import"./VList-BwVebSwv.js";import"./VMenu-C07thKIM.js";const me="/api/inventory";class oe{static async getAll(d){var p;try{return(await fe.get(me,{params:d})).data}catch(_){throw((p=_.response)==null?void 0:p.data)||this.handleError(_)}}static async getById(d){var p;try{return(await fe.get(`${me}/${d}`)).data}catch(_){throw((p=_.response)==null?void 0:p.data)||this.handleError(_)}}static async getStats(){var d;try{return(await fe.get(`${me}/stats`)).data}catch(p){throw((d=p.response)==null?void 0:d.data)||this.handleError(p)}}static async getLowStockAlerts(){var d;try{return(await fe.get(`${me}/low-stock-alerts`)).data}catch(p){throw((d=p.response)==null?void 0:d.data)||this.handleError(p)}}static async updateStock(d,p){var _;try{return(await fe.post(`${me}/${d}/update-stock`,p)).data}catch(V){throw((_=V.response)==null?void 0:_.data)||this.handleError(V)}}static async bulkUpdateStock(d){var p;try{return(await fe.post(`${me}/bulk-update-stock`,d)).data}catch(_){throw((p=_.response)==null?void 0:p.data)||this.handleError(_)}}static async setReorderLevel(d,p){var _;try{return(await fe.post(`${me}/${d}/reorder-level`,p)).data}catch(V){throw((_=V.response)==null?void 0:_.data)||this.handleError(V)}}static async getMovements(d){var p;try{const _=d!=null&&d.id_inventory?`${me}/${d.id_inventory}/movements`:`${me}/movements`;return(await fe.get(_,{params:d})).data}catch(_){throw((p=_.response)==null?void 0:p.data)||this.handleError(_)}}static async recordMovement(d){var p;try{return(await fe.post(`${me}/movement`,d)).data}catch(_){throw((p=_.response)==null?void 0:p.data)||this.handleError(_)}}static handleError(d){var p,_;return d.response?{message:((p=d.response.data)==null?void 0:p.message)||"Terjadi kesalahan pada server",success:!1,errors:(_=d.response.data)==null?void 0:_.errors}:d.request?{message:"Tidak dapat terhubung ke server",success:!1}:{message:d.message||"Terjadi kesalahan yang tidak diketahui",success:!1}}static formatError(d){return d.errors?Object.values(d.errors).flat().join(", "):d.message||"Terjadi kesalahan yang tidak diketahui"}static isValidationError(d){return d.errors&&typeof d.errors=="object"}static getFieldError(d,p){return d.errors&&d.errors[p]?Array.isArray(d.errors[p])?d.errors[p][0]:d.errors[p]:null}static getMovementTypes(){return[{value:"stock_in",label:"Stock Masuk",color:"success"},{value:"stock_out",label:"Stock Keluar",color:"warning"},{value:"adjustment",label:"Penyesuaian",color:"info"},{value:"transfer",label:"Transfer",color:"primary"},{value:"return",label:"Retur",color:"success"},{value:"damaged",label:"Rusak",color:"error"},{value:"expired",label:"Kadaluarsa",color:"error"}]}static getStockStatusOptions(){return[{value:"all",label:"Semua Status"},{value:"in_stock",label:"Tersedia"},{value:"low_stock",label:"Stok Menipis"},{value:"out_of_stock",label:"Habis"},{value:"overstock",label:"Stok Berlebih"}]}}const Ft={key:1,class:"text-center py-8"},qt={class:"font-weight-medium"},Kt={class:"text-medium-emphasis"},Nt={class:"text-center"},Ht={class:"text-center font-weight-medium"},Gt={class:"text-center font-weight-bold text-primary"},Jt={class:"text-end"},Xt={class:"text-end font-weight-medium text-success"},Wt={class:"max-width-200"},Yt={class:"font-weight-medium"},Qt={key:0,class:"text-medium-emphasis"},Zt={key:1,class:"d-block text-caption"},ea={key:2,class:"text-info d-block"},ta={class:"text-center py-8"},aa=Mt({__name:"InventoryMovementsDialog",props:{modelValue:{type:Boolean},inventoryId:{},inventoryName:{}},emits:["update:modelValue"],setup(ne,{emit:d}){const p=ne,_=d,V=v([]),Q=v(!1),H=v(""),L=ae({get:()=>p.modelValue,set:y=>_("update:modelValue",y)}),ee=async()=>{var y,b,l,P;if(p.inventoryId)try{Q.value=!0,H.value="";const M=await oe.getMovements({id_inventory:parseInt(p.inventoryId),page:1,per_page:50});M.data&&Array.isArray(M.data)?V.value=M.data:M.data&&((y=M==null?void 0:M.data)!=null&&y.data)&&Array.isArray((b=M==null?void 0:M.data)==null?void 0:b.data)?V.value=M.data.data:V.value=[]}catch(M){console.error("Error fetching movements:",M),H.value=((P=(l=M.response)==null?void 0:l.data)==null?void 0:P.message)||"Gagal memuat riwayat pergerakan"}finally{Q.value=!1}},le=y=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(y),Z=y=>({in:"success",out:"error",stock_in:"success",stock_out:"error",adjustment:"warning",transfer:"info",return:"secondary"})[y]||"primary",G=y=>({in:"Stock Masuk",out:"Stock Keluar",stock_in:"Stock Masuk",stock_out:"Stock Keluar",adjustment:"Penyesuaian",transfer:"Transfer",return:"Retur"})[y]||y,I=y=>({in:"tabler-plus",out:"tabler-minus",stock_in:"tabler-plus",stock_out:"tabler-minus",adjustment:"tabler-edit",transfer:"tabler-arrows-exchange",return:"tabler-arrow-back"})[y]||"tabler-package";return Ye(L,y=>{y&&p.inventoryId?ee():(V.value=[],H.value="")}),(y,b)=>(g(),S(Se,{modelValue:L.value,"onUpdate:modelValue":b[1]||(b[1]=l=>L.value=l),"max-width":"900px",scrollable:""},{default:s(()=>[t(O,null,{default:s(()=>[t(pe,{class:"d-flex align-center"},{default:s(()=>[t(C,{icon:"tabler-history",class:"me-2"}),i(" Riwayat Pergerakan - "+u(y.inventoryName),1)]),_:1}),t(J),t(N,{class:"pa-0"},{default:s(()=>[H.value?(g(),S(se,{key:0,type:"error",variant:"tonal",class:"ma-4"},{default:s(()=>[i(u(H.value),1)]),_:1})):x("",!0),Q.value?(g(),X("div",Ft,[t(ut,{indeterminate:"",color:"primary",size:"40"}),b[2]||(b[2]=n("div",{class:"mt-4 text-medium-emphasis"}," Memuat riwayat pergerakan... ",-1))])):(g(),S(Tt,{key:2,headers:[{title:"Tanggal",key:"created_at",sortable:!1},{title:"Jenis",key:"movement_type",sortable:!1},{title:"Kuantitas",key:"quantity",sortable:!1},{title:"Stok Sebelum",key:"stock_before",sortable:!1},{title:"Stok Sesudah",key:"stock_after",sortable:!1},{title:"Harga/Unit",key:"unit_cost",sortable:!1},{title:"Total Nilai",key:"total_cost",sortable:!1},{title:"Catatan",key:"notes",sortable:!1}],items:V.value,loading:Q.value,class:"text-no-wrap","items-per-page":"15",height:"500","fixed-header":""},{"item.created_at":s(({item:l})=>[n("div",null,[n("div",qt,u(new Date(l.created_at).toLocaleDateString("id-ID")),1),n("small",Kt,u(new Date(l.created_at).toLocaleTimeString("id-ID")),1)])]),"item.movement_type":s(({item:l})=>[t(E,{color:Z(l.movement_type),variant:"tonal",size:"small","prepend-icon":I(l.movement_type)},{default:s(()=>[i(u(G(l.movement_type)),1)]),_:2},1032,["color","prepend-icon"])]),"item.quantity":s(({item:l})=>[n("div",Nt,[t(E,{color:l.movement_type==="in"||l.movement_type==="stock_in"?"success":"error",variant:"outlined",size:"small"},{default:s(()=>[i(u(l.movement_type==="in"||l.movement_type==="stock_in"?"+":"-")+u(Math.abs(l.quantity)),1)]),_:2},1032,["color"])])]),"item.stock_before":s(({item:l})=>[n("div",Ht,u(l.stock_before),1)]),"item.stock_after":s(({item:l})=>[n("div",Gt,u(l.stock_after),1)]),"item.unit_cost":s(({item:l})=>[n("div",Jt,u(l.unit_cost?le(l.unit_cost):"-"),1)]),"item.total_cost":s(({item:l})=>[n("div",Xt,u(l.total_cost?le(l.total_cost):"-"),1)]),"item.notes":s(({item:l})=>[n("div",Wt,[n("div",Yt,u(l.notes||"-"),1),l.reference_type&&l.reference_id?(g(),X("small",Qt," Ref: "+u(l.reference_type)+"-"+u(l.reference_id),1)):x("",!0),l.batch_number?(g(),X("small",Zt," Batch: "+u(l.batch_number),1)):x("",!0),l.user?(g(),X("small",ea," oleh: "+u(l.user.name),1)):x("",!0)])]),"no-data":s(()=>[n("div",ta,[t(C,{icon:"tabler-history-off",size:"48",class:"text-medium-emphasis mb-4"}),b[3]||(b[3]=n("div",{class:"text-h6 text-medium-emphasis mb-2"}," Belum ada riwayat pergerakan ",-1)),b[4]||(b[4]=n("div",{class:"text-body-2 text-medium-emphasis"}," Riwayat akan muncul setelah ada pergerakan stok ",-1))])]),_:1},8,["items","loading"]))]),_:1}),t(J),t(De,{class:"pa-4"},{default:s(()=>[t(Ve),t(w,{variant:"outlined",onClick:b[0]||(b[0]=l=>L.value=!1)},{default:s(()=>b[5]||(b[5]=[i(" Tutup ")])),_:1,__:[5]}),t(w,{color:"primary","prepend-icon":"tabler-refresh",onClick:ee},{default:s(()=>b[6]||(b[6]=[i(" Refresh ")])),_:1,__:[6]})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),sa=Dt(aa,[["__scopeId","data-v-ca0277a4"]]),oa=()=>{const ne=v([]),d=v(!1),p=v(!1),_=v({total_items:0,low_stock_items:0,out_of_stock_items:0,overstock_items:0,total_stock_value:0,total_stock_quantity:0,total_reserved_stock:0,items_need_restock:0}),V=v([]),Q=v(!1),H=v([]),L=v(!1),ee=v(!1),le=v(!1),Z=v(!1),G=v(!1),I=v(null),y=v([]),b=v(1),l=v(0),P=v(15),M=v({search:"",stock_status:"all",category_id:void 0,supplier_id:void 0,station:"all",sort_by:"current_stock",sort_order:"asc"}),re=v(""),U=v(""),F=v(""),ye=v({movement_type:"stock_in",quantity:0,reason:"",reference_number:"",cost_per_unit:void 0,notes:""}),be=v({reorder_level:0,max_stock_level:0}),ie=ae(()=>y.value.length>0),Te=ae(()=>_.value.total_stock_value),_e=ae(()=>_.value.low_stock_items),he=ae(()=>_.value.out_of_stock_items),ue=ae(()=>Math.ceil(l.value/P.value)),Ce=ae(()=>b.value<ue.value),Ee=ae(()=>b.value>1),Pe=ae(()=>({currentPage:b.value,totalPages:ue.value,totalItems:l.value,itemsPerPage:P.value,hasNext:Ce.value,hasPrev:Ee.value})),Be=[r=>r>0||"Kuantitas harus lebih dari 0",r=>Number.isInteger(r)||"Kuantitas harus berupa bilangan bulat"],Oe=[r=>!!r||"Alasan wajib diisi",r=>r&&r.length>=3||"Alasan minimal 3 karakter"],Fe=[r=>!r||r>=0||"Harga harus lebih dari atau sama dengan 0"],f=[{title:"Stock Masuk",value:"stock_in",color:"success"},{title:"Stock Keluar",value:"stock_out",color:"warning"},{title:"Penyesuaian",value:"adjustment",color:"info"},{title:"Transfer",value:"transfer",color:"primary"},{title:"Retur",value:"return",color:"success"}],q=[{title:"Semua Status",value:"all"},{title:"Tersedia",value:"in_stock"},{title:"Stok Menipis",value:"low_stock"},{title:"Habis",value:"out_of_stock"},{title:"Stok Berlebih",value:"overstock"}],T=async()=>{d.value=!0,re.value="";try{const r={...M.value,page:b.value,per_page:P.value};Object.keys(r).forEach(ve=>{const Ue=r[ve];(Ue===""||Ue===void 0||Ue===null||Ue==="all")&&delete r[ve]});const R=await oe.getAll(r);if(R.success)ne.value=R.data.data||[],l.value=R.data.total||0,R.data.current_page&&(b.value=R.data.current_page);else throw new Error(R.message||"Gagal mengambil data inventory")}catch(r){console.error("Error fetching inventory:",r),re.value=oe.formatError(r)||"Gagal mengambil data inventory",ne.value=[],l.value=0}finally{d.value=!1}},qe=async()=>{try{const r=await oe.getStats();r.success&&(_.value=r.data)}catch(r){console.error("Error fetching inventory stats:",r)}},xe=async()=>{L.value=!0;try{const r=await oe.getLowStockAlerts();r.success&&(H.value=r.data.data||[])}catch(r){console.error("Error fetching low stock alerts:",r),H.value=[]}finally{L.value=!1}},Me=async r=>{Q.value=!0;try{const R=await oe.getMovements({id_inventory:r,page:1,per_page:20});R.success&&(V.value=R.data)}catch(R){console.error("Error fetching movements:",R)}finally{Q.value=!1}},Qe=async()=>{if(I.value){p.value=!0,F.value="";try{const r=await oe.updateStock(I.value.id_inventory,ye.value);if(r.success)U.value="Stock berhasil diperbarui",Ie(),await T(),await qe(),await xe();else throw new Error(r.message||"Gagal memperbarui stock")}catch(r){console.error("Error updating stock:",r),F.value=oe.formatError(r)||"Gagal memperbarui stock"}finally{p.value=!1}}},Ae=async()=>{if(I.value){p.value=!0,F.value="";try{const r=await oe.setReorderLevel(I.value.id_inventory,be.value);if(r.success)U.value="Reorder level berhasil diperbarui",te(),await T();else throw new Error(r.message||"Gagal memperbarui reorder level")}catch(r){console.error("Error setting reorder level:",r),F.value=oe.formatError(r)||"Gagal memperbarui reorder level"}finally{p.value=!1}}},$e=r=>{I.value=r,ye.value={movement_type:"stock_in",quantity:0,reason:"",reference_number:"",cost_per_unit:r.average_cost||void 0,notes:""},F.value="",ee.value=!0},Ze=r=>{I.value=r,be.value={reorder_level:r.reorder_level||0,max_stock_level:r.max_stock_level||0},F.value="",G.value=!0},je=r=>{I.value=r,Me(r.id_inventory),Z.value=!0},Ie=()=>{ee.value=!1,setTimeout(()=>{I.value=null,F.value=""},300)},te=()=>{G.value=!1,setTimeout(()=>{I.value=null,F.value=""},300)};return{inventoryList:ne,loading:d,saveLoading:p,stats:_,movementsList:V,movementsLoading:Q,lowStockItems:H,alertsLoading:L,stockUpdateDialog:ee,bulkUpdateDialog:le,movementsDialog:Z,reorderDialog:G,selectedInventory:I,selectedItems:y,currentPage:b,totalItems:l,itemsPerPage:P,filters:M,errorMessage:re,successMessage:U,modalErrorMessage:F,stockUpdateForm:ye,reorderForm:be,hasSelectedItems:ie,totalStockValue:Te,lowStockCount:_e,outOfStockCount:he,quantityRules:Be,reasonRules:Oe,costRules:Fe,movementTypeOptions:f,stockStatusOptions:q,fetchInventoryList:T,fetchStats:qe,fetchLowStockAlerts:xe,fetchMovements:Me,updateStock:Qe,setReorderLevel:Ae,openStockUpdateDialog:$e,openReorderDialog:Ze,openMovementsDialog:je,closeStockUpdateDialog:Ie,closeReorderDialog:te,closeMovementsDialog:()=>{Z.value=!1,setTimeout(()=>{I.value=null,V.value=[]},300)},clearModalError:()=>{F.value=""},onPageChange:r=>{r!==b.value&&(b.value=r,T())},onItemsPerPageChange:r=>{r!==P.value&&(P.value=r,b.value=1,T())},handleFiltersUpdate:r=>{M.value={...M.value,...r},b.value=1,T()},formatCurrency:r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(r),getStockStatusColor:r=>r.current_stock===0?"error":r.is_low_stock?"warning":"success",getStockStatusText:r=>r.current_stock===0?"Habis":r.reorder_level>0&&r.current_stock<=r.reorder_level?"Menipis":r.max_stock_level&&r.current_stock>r.max_stock_level?"Berlebih":"Tersedia",getMovementTypeColor:r=>({stock_in:"success",stock_out:"warning",adjustment:"info",transfer:"primary",return:"success",damaged:"error",expired:"error"})[r]||"grey",totalPages:ue,hasNextPage:Ce,hasPrevPage:Ee,paginationInfo:Pe}};function la(ne){const d=v([]),p=v([]),_=v(!1),V=v(!1),Q=v({total_items:0,total_value:0,low_stock_items:0,out_of_stock_items:0,movements_today:0,movements_this_month:0,top_consumed_items:[],recent_movements:[]}),H=v(1),L=v(0),ee=v(10),le=St({search:"",stock_status:"all",movement_type:"",date_from:"",date_to:"",item_id:void 0}),Z=v(!1),G=v(!1),I=v(null),y=St({item_id:0,type:"in",quantity:0,notes:"",cost_per_unit:0}),b=v(""),l=v(""),P=v(""),M=ae(()=>!0),re=[{title:"Semua Status",value:"all"},{title:"Tersedia",value:"in_stock"},{title:"Stok Rendah",value:"low_stock"},{title:"Habis",value:"out_of_stock"}],U=[{title:"Masuk",value:"in",color:"success",icon:"tabler-plus"},{title:"Keluar",value:"out",color:"error",icon:"tabler-minus"},{title:"Penyesuaian",value:"adjustment",color:"warning",icon:"tabler-adjustments"}],F=[{title:"Pembelian",value:"purchase"},{title:"Penjualan",value:"sale"},{title:"Produksi",value:"production"},{title:"Penyesuaian",value:"adjustment"},{title:"Kerusakan",value:"waste"}],ye=f=>f.current_stock<=0?{status:"out_of_stock",color:"error",text:"Habis",icon:"tabler-x"}:f.current_stock<=f.minimum_stock?{status:"low_stock",color:"warning",text:"Rendah",icon:"tabler-alert-triangle"}:{status:"in_stock",color:"success",text:"Tersedia",icon:"tabler-check"},be=f=>!f.maximum_stock||f.maximum_stock<=0?100:Math.round(f.current_stock/f.maximum_stock*100),ie=async()=>{_.value=!0;try{await new Promise(f=>setTimeout(f,1e3)),d.value=await Lt.getAll(),L.value=d.value.length,l.value=""}catch{b.value="Gagal memuat data items"}finally{_.value=!1}},Te=async f=>{_.value=!0;try{const q=await oe.getMovements({id_inventory:f,page:H.value,per_page:ee.value});p.value=q.data.map(T=>({id:T.id_movement,item_id:T.id_inventory,type:T.movement_type,quantity:T.quantity,unit:"pcs",reference_id:T.reference_number?parseInt(T.reference_number):void 0,reference_type:T.reason,notes:T.notes,cost_per_unit:T.cost_per_unit,total_cost:T.total_cost,created_by:T.created_by,created_at:T.created_at,creator:T.user})),L.value=q.total}catch(q){console.error("Failed to fetch stock movements:",q),p.value=[]}finally{_.value=!1}},_e=async()=>{try{await ie();const f=d.value;Q.value={total_items:f.length,total_value:f.reduce((q,T)=>q+T.current_stock*T.cost_per_unit,0),low_stock_items:f.filter(q=>q.current_stock<=q.minimum_stock&&q.current_stock>0).length,out_of_stock_items:f.filter(q=>q.current_stock<=0).length,movements_today:0,movements_this_month:0,top_consumed_items:[],recent_movements:[]}}catch(f){console.error("Failed to fetch stats:",f)}},he=async()=>{V.value=!0,P.value="";try{const f=await oe.recordMovement({item_id:y.item_id,movement_type:y.type,quantity:y.quantity,notes:y.notes,cost_per_unit:y.cost_per_unit});if(f.success)l.value=`Stock ${y.type==="in"?"masuk":y.type==="out"?"keluar":"disesuaikan"} berhasil dicatat`,Pe(),await ie(),await _e(),ne&&ne();else throw new Error(f.message||"Gagal mencatat pergerakan stok")}catch(f){P.value=f.message||"Gagal mencatat pergerakan stok"}finally{V.value=!1}},ue=f=>{I.value=f,Object.assign(y,{item_id:f.id_item,type:"in",quantity:0,notes:"",cost_per_unit:f.cost_per_unit}),Z.value=!0},Ce=f=>{I.value=f,Object.assign(y,{item_id:f.id_item,type:"out",quantity:0,notes:"",cost_per_unit:f.cost_per_unit}),Z.value=!0},Ee=f=>{I.value=f,Object.assign(y,{item_id:f.id_item,type:"adjustment",quantity:f.current_stock,notes:"",cost_per_unit:f.cost_per_unit}),G.value=!0},Pe=()=>{Z.value=!1,G.value=!1,P.value="",I.value=null};return{itemsList:d,stockMovements:p,loading:_,saveLoading:V,stats:Q,currentPage:H,totalItems:L,itemsPerPage:ee,filters:le,movementDialog:Z,adjustmentDialog:G,selectedItem:I,movementFormData:y,errorMessage:b,successMessage:l,modalErrorMessage:P,canManageStock:M,stockStatusOptions:re,movementTypeOptions:U,referenceTypeOptions:F,getStockStatus:ye,getStockPercentage:be,fetchItems:ie,fetchStockMovements:Te,fetchStats:_e,recordStockMovement:he,openStockInDialog:ue,openStockOutDialog:Ce,openAdjustmentDialog:Ee,closeMovementDialog:Pe,clearModalError:()=>{P.value=""},onPageChange:f=>{H.value=f,ie()},handleFiltersUpdate:f=>{Object.assign(le,f),H.value=1,ie()}}}const na={class:"inventory-management"},ra={class:"d-flex justify-space-between align-center mb-6"},ia={class:"d-flex gap-3 align-center"},ua={class:"d-flex align-center justify-space-between"},ca={class:"text-h4 font-weight-bold text-primary"},da={class:"d-flex align-center justify-space-between"},ma={class:"text-h4 font-weight-bold text-warning"},pa={class:"d-flex align-center justify-space-between"},_a={class:"text-h4 font-weight-bold text-error"},va={class:"d-flex align-center justify-space-between"},ka={class:"text-h4 font-weight-bold text-success"},fa={class:"d-flex align-center justify-space-between"},ga={class:"d-flex align-center gap-3"},ya={class:"d-flex gap-2"},ba={class:"d-flex flex-wrap gap-2"},ha={class:"d-flex align-center gap-2"},xa={class:"text-caption"},wa={class:"table-container"},Sa={class:"d-flex align-center"},Va={class:"font-weight-medium"},Ma={class:"d-flex flex-column"},Da={class:"text-primary font-weight-medium"},Ta={class:"text-medium-emphasis"},Ca={class:"text-center"},Ea={class:"text-h6 font-weight-bold"},Pa={key:0,class:"text-warning"},Ia={class:"text-center"},Ua={class:"d-flex flex-column gap-1"},Aa={key:2,class:"text-caption text-medium-emphasis"},$a={class:"text-center"},ja={class:"text-end"},Ra={class:"text-end font-weight-medium text-success"},za={class:"d-flex align-center gap-1"},La={class:"text-center py-12"},Ba={class:"text-h5 text-medium-emphasis mb-2"},Oa={class:"text-body-1 text-medium-emphasis mb-4"},Fa={key:0},qa={key:0},Ka={key:1},Na={key:2},Ha={key:1},Ga={class:"d-flex justify-center gap-3"},Ja={class:"text-center py-8"},Xa={class:"d-flex align-center gap-2"},Wa={class:"d-flex align-center gap-3"},Ya={class:"font-weight-bold"},Qa={class:"text-caption"},Za={class:"text-caption"},es={class:"d-flex gap-3 justify-end"},ts={class:"d-flex align-center gap-2"},as={class:"font-weight-bold"},ss={class:"d-flex align-center gap-3"},os={class:"font-weight-bold"},ls={class:"text-caption"},ns={class:"d-flex align-center gap-2"},rs={key:0,class:"text-center py-8"},is={key:1},us={class:"text-body-2"},cs={class:"d-flex align-center gap-2"},ds={class:"text-body-2 font-weight-medium"},ms={class:"text-caption text-medium-emphasis"},ps={class:"text-end font-weight-medium text-success"},_s={class:"text-center py-8"},vs={key:0,class:"d-flex justify-center mt-4"},ks={class:"mb-4"},fs={class:"d-flex flex-column gap-2"},gs={class:"mb-4"},ys={class:"d-flex flex-column gap-2"},bs=Mt({__name:"inventory-management",setup(ne){const{xs:d}=It(),p=()=>{_e(),he(),ue()},{inventoryList:_,loading:V,saveLoading:Q,stats:H,lowStockItems:L,stockUpdateDialog:ee,reorderDialog:le,movementsDialog:Z,selectedInventory:G,currentPage:I,totalItems:y,itemsPerPage:b,filters:l,errorMessage:P,successMessage:M,modalErrorMessage:re,stockUpdateForm:U,reorderForm:F,totalStockValue:ye,lowStockCount:be,outOfStockCount:ie,stockStatusOptions:Te,fetchInventoryList:_e,fetchStats:he,fetchLowStockAlerts:ue,updateStock:Ce,setReorderLevel:Ee,openStockUpdateDialog:Pe,openReorderDialog:Be,openMovementsDialog:Oe,closeStockUpdateDialog:Fe,closeReorderDialog:f,clearModalError:q,onPageChange:T,onItemsPerPageChange:qe,handleFiltersUpdate:xe,formatCurrency:Me,getStockStatusColor:Qe,getStockStatusText:Ae}=oa(),{recordStockMovement:$e,openAdjustmentDialog:Ze,movementDialog:je,adjustmentDialog:Ie,selectedItem:te,movementFormData:A,saveLoading:et,closeMovementDialog:Re,successMessage:Ke,modalErrorMessage:tt,clearModalError:ct}=la(p),dt=m=>m.item?{id_item:m.item.id_item,item_code:m.item.item_code,name:m.item.name,description:m.item.description||"",unit:m.item.unit,cost_per_unit:parseFloat(m.item.cost_per_unit),current_stock:m.current_stock,minimum_stock:m.reorder_level||0,active:!0,storage_location:m.item.storage_location||"",expiry_date:m.item.expiry_date||null,properties:m.item.properties||null,created_by:m.item.created_by||null,updated_by:m.item.updated_by||null,created_at:m.item.created_at,updated_at:m.item.updated_at,deleted_at:m.item.deleted_at||null}:null,mt=m=>{const e=dt(m);e&&Ze(e)};Ye(()=>U.cost_per_unit,m=>{m&&typeof m=="number"&&(U.cost_per_unit=Math.round(m))},{immediate:!0}),Ye(()=>A.cost_per_unit,m=>{m&&typeof m=="number"&&(A.cost_per_unit=Math.round(m))},{immediate:!0});const pt=ae(()=>H.value);ae(()=>_.value),ae(()=>V.value);const r=()=>{switch(l.value.station){case"kitchen":return"Menampilkan item yang hanya tersedia di Kitchen";case"bar":return"Menampilkan item yang hanya tersedia di Bar";case"both":return"Menampilkan item yang tersedia di Kitchen & Bar";case"all":default:return"Menampilkan item dari semua station"}};Ut(()=>{_e(),he(),ue()});const R=v(!1),ve=v(!1),Ue=()=>{ve.value=!0},Ne=()=>{ve.value=!1},at=()=>{try{const m=Rt("accessToken").value;return m||localStorage.getItem("token")||localStorage.getItem("auth_token")||localStorage.getItem("accessToken")||null}catch{return localStorage.getItem("token")||localStorage.getItem("auth_token")||localStorage.getItem("accessToken")||null}},Ct=async()=>{var m,e,j,B;try{console.log("ðŸš€ Starting fetchAllInventoryForExport...");const W=new URLSearchParams({per_page:"999999",page:"1",search:l.value.search||"",stock_status:l.value.stock_status||"all",station:l.value.station||"all"});console.log("ðŸ“ Request params:",W.toString());try{console.log("ðŸ”„ Attempting to fetch with useApi composable...");const{data:K}=await Bt(`/inventory?${W}`).get().json();if(K.value&&K.value.success){console.log("âœ… Successfully fetched with useApi:",((m=K.value.data.data)==null?void 0:m.length)||0,"items");const k=(K.value.data.data||[]).filter((c,D,$)=>D===$.findIndex(Y=>Y.id_inventory===c.id_inventory));return console.log("ðŸ” After deduplication:",k.length,"unique items"),k}else throw console.log("âŒ useApi response not successful:",K.value),new Error(((e=K.value)==null?void 0:e.message)||"useApi failed")}catch(K){console.warn("âŒ useApi failed, trying manual fetch:",K);const o=at();console.log("ðŸ” Token for manual fetch:",o?`Token available (${o.substring(0,20)}...)`:"No token");const k={"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest",...o&&{Authorization:`Bearer ${o}`}};console.log("ðŸ“‹ Request headers:",{...k,Authorization:k.Authorization?k.Authorization.substring(0,30)+"...":"Not set"});const c=await fetch(`/api/inventory?${W}`,{method:"GET",headers:k});if(console.log("ðŸ“Š Response status:",c.status,c.statusText),console.log("ðŸ“‹ Response headers:",Object.fromEntries(c.headers.entries())),!c.ok){const $=await c.text();console.error("âŒ Manual fetch API Error Response:",$),console.error("ðŸ“Š Error details - Status:",c.status,"StatusText:",c.statusText);try{const Y=JSON.parse($);console.error("ðŸ“‹ Parsed error JSON:",Y)}catch{console.error("ðŸ“‹ Error response is not JSON:",$)}throw new Error(`HTTP ${c.status}: ${c.statusText}`)}const D=await c.json();if(console.log("âœ… Manual fetch successful response:",{success:D.success,dataLength:((B=(j=D.data)==null?void 0:j.data)==null?void 0:B.length)||0,message:D.message}),D.success){const $=D.data.data||[],Y=$.filter((we,ce,h)=>ce===h.findIndex(ke=>ke.id_inventory===we.id_inventory));return console.log("âœ… Successfully fetched with manual fetch:",$.length,"items"),console.log("ðŸ” After deduplication:",Y.length,"unique items"),Y}else throw console.error("âŒ Manual fetch response not successful:",D),new Error(D.message||"Failed to fetch inventory data")}}catch(W){throw console.error("ðŸ’¥ Fetch all inventory error:",W),new Error("Gagal mengambil data inventory lengkap: "+(W instanceof Error?W.message:"Unknown error"))}},st=v(!1),ot=v([]),lt=v(!1),ze=v(1),He=v(10),nt=v(0),_t=async()=>{try{R.value=!0;const m=await Ct();console.log("ðŸ“Š Exporting",m.length,"inventory items to Excel");const e=await jt(()=>import("./xlsx-CfQreh1U.js"),[]),j=m.length,B=m.filter(h=>h.current_stock<=h.reorder_level).length,W=m.filter(h=>h.current_stock===0).length,K=m.reduce((h,ke)=>h+(ke.current_stock||0)*(ke.average_cost||0),0),o=m.map((h,ke)=>{var ft,gt,yt,bt,ht,xt,wt;return{No:ke+1,"Produk/Variant":((ft=h.item)==null?void 0:ft.name)||((gt=h.product)==null?void 0:gt.name)||"Unknown Item",SKU:((yt=h.item)==null?void 0:yt.item_code)||((bt=h.product)==null?void 0:bt.sku)||"-",Unit:((ht=h.item)==null?void 0:ht.unit)||"pcs","Stok Saat Ini":h.current_stock||0,"Stok Tersedia":h.available_stock||0,"Stok Minimum":h.reorder_level||0,Status:Ae(h),Kitchen:(xt=h.item)!=null&&xt.available_in_kitchen?"Ya":"Tidak",Bar:(wt=h.item)!=null&&wt.available_in_bar?"Ya":"Tidak","Harga Rata-rata":h.average_cost||0,"Nilai Stok":(h.current_stock||0)*(h.average_cost||0),Dibuat:h.created_at?new Date(h.created_at).toLocaleDateString("id-ID"):"-",Diperbarui:h.updated_at?new Date(h.updated_at).toLocaleDateString("id-ID"):"-"}}),k=e.utils.book_new(),c=[];if(l.value.search&&c.push(`Pencarian: "${l.value.search}"`),l.value.stock_status&&l.value.stock_status!=="all"&&c.push(`Status: ${l.value.stock_status}`),l.value.station&&l.value.station!=="all"){const h={kitchen:"Kitchen Only",bar:"Bar Only",both:"Kitchen & Bar"};c.push(`Station: ${h[l.value.station]||l.value.station}`)}const D=[["LAPORAN INVENTORY MANAGEMENT"],["Tanggal Export:",new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})],["Total Items:",j],["Total Nilai Stok:",`Rp ${K.toLocaleString("id-ID")}`],["Items Low Stock:",B],["Items Out of Stock:",W],["Filter Diterapkan:",c.length>0?c.join(", "):"Semua Data"],[]],$=e.utils.aoa_to_sheet(D);e.utils.sheet_add_json($,o,{origin:"A9"});const Y=[{wch:5},{wch:35},{wch:15},{wch:8},{wch:12},{wch:12},{wch:12},{wch:15},{wch:8},{wch:8},{wch:15},{wch:15},{wch:12},{wch:12}];$["!cols"]=Y,e.utils.book_append_sheet(k,$,"Inventory Report");const ce=`inventory-report-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.xlsx`;e.writeFile(k,ce),console.log("âœ… Excel file generated successfully:",ce);try{await Et(m,{total_items:j,total_stock_value:K,low_stock_count:B,out_of_stock_count:W}),M.value=`Laporan berhasil di-export ke Excel dengan ${j} item lengkap dan data berhasil diupload ke server!`}catch(h){console.error("Upload error:",h),M.value=`Laporan berhasil di-export ke Excel dengan ${j} item lengkap, tetapi gagal upload data ke server: `+(h instanceof Error?h.message:"Unknown error")}}catch(m){console.error("Export error:",m),P.value="Gagal mengexport laporan: "+(m instanceof Error?m.message:"Unknown error")}finally{R.value=!1}},Et=async(m,e)=>{try{const j=m||_.value,B=e||{total_items:y.value,total_stock_value:ye.value||0,low_stock_count:be.value,out_of_stock_count:ie.value},W={inventory_data:j.map(c=>{var D,$,Y,we,ce,h,ke;return{id_inventory:c.id_inventory,id_product:c.id_product,id_item:c.id_item,current_stock:c.current_stock||0,available_stock:c.available_stock||0,reserved_stock:c.reserved_stock||0,reorder_level:c.reorder_level||0,max_stock_level:c.max_stock_level||null,average_cost:c.average_cost||0,product_name:((D=c.product)==null?void 0:D.name)||(($=c.item)==null?void 0:$.name)||"Unknown",product_sku:((Y=c.product)==null?void 0:Y.sku)||((we=c.item)==null?void 0:we.item_code)||null,unit:((ce=c.item)==null?void 0:ce.unit)||"pcs",category:((ke=(h=c.product)==null?void 0:h.category)==null?void 0:ke.name)||null,status:Ae(c),stock_value:(c.current_stock||0)*(c.average_cost||0),created_at:c.created_at,updated_at:c.updated_at}}),summary:{total_items:B.total_items,total_stock_value:B.total_stock_value,low_stock_count:B.low_stock_count,out_of_stock_count:B.out_of_stock_count,export_timestamp:new Date().toISOString(),filters_applied:{search:l.value.search||null,stock_status:l.value.stock_status!=="all"?l.value.stock_status:null}}},K=at(),o=await fetch("/api/inventory/upload-data",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest",...K&&{Authorization:`Bearer ${K}`}},body:JSON.stringify(W)});if(!o.ok){const c=await o.json();throw new Error(c.message||`HTTP ${o.status}: ${o.statusText}`)}const k=await o.json();return console.log("Upload result:",k),k}catch(j){throw console.error("Upload inventory data error:",j),j}},vt=async()=>{var m;try{lt.value=!0;const e=at(),j=await fetch(`/api/inventory/upload-history?page=${ze.value}&per_page=${He.value}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest",...e&&{Authorization:`Bearer ${e}`}}});if(!j.ok)throw new Error(`HTTP ${j.status}: ${j.statusText}`);const B=await j.json();if(B.success)ot.value=B.data||[],nt.value=((m=B.pagination)==null?void 0:m.total)||0;else throw new Error(B.message||"Failed to fetch upload history")}catch(e){console.error("Fetch upload history error:",e),P.value="Gagal mengambil riwayat upload: "+(e instanceof Error?e.message:"Unknown error")}finally{lt.value=!1}},Pt=m=>{ze.value=m,vt()},kt=()=>{st.value=!1,ot.value=[],ze.value=1};return Ye(y,(m,e)=>{},{immediate:!0}),(m,e)=>{var j,B,W,K;return g(),X("div",na,[n("div",ra,[e[38]||(e[38]=n("div",null,[n("h1",{class:"text-h4 font-weight-bold inventory-title"}," Kelola Inventory "),n("p",{class:"text-body-1 text-medium-emphasis inventory-subtitle"}," Kelola stok barang dan pergerakan inventory ")],-1)),n("div",ia,[t(w,{color:"primary","prepend-icon":"tabler-refresh",variant:"outlined",onClick:p},{default:s(()=>e[37]||(e[37]=[i(" Refresh Data ")])),_:1,__:[37]})])]),a(P)?(g(),S(se,{key:0,type:"error",variant:"outlined",class:"mb-4",text:a(P),closable:"","onClick:close":e[0]||(e[0]=o=>P.value="")},null,8,["text"])):x("",!0),a(M)?(g(),S(se,{key:1,type:"success",variant:"outlined",class:"mb-4",text:a(M),closable:"","onClick:close":e[1]||(e[1]=o=>M.value="")},null,8,["text"])):x("",!0),a(Ke)?(g(),S(se,{key:2,type:"success",variant:"outlined",class:"mb-4",text:a(Ke),closable:"","onClick:close":e[2]||(e[2]=o=>Ke.value="")},null,8,["text"])):x("",!0),t(ge,{class:"mb-6"},{default:s(()=>[t(z,{cols:"12",md:"3"},{default:s(()=>[t(O,{class:"stats-card"},{default:s(()=>[t(N,null,{default:s(()=>[n("div",ua,[n("div",null,[n("div",ca,u(pt.value.total_items||0),1),e[39]||(e[39]=n("div",{class:"text-caption text-medium-emphasis"}," Total Produk ",-1))]),t(C,{icon:"tabler-package",size:"48",class:"text-primary opacity-50"})])]),_:1})]),_:1})]),_:1}),t(z,{cols:"12",md:"3"},{default:s(()=>[t(O,{class:"stats-card"},{default:s(()=>[t(N,null,{default:s(()=>[n("div",da,[n("div",null,[n("div",ma,u(a(be)||0),1),e[40]||(e[40]=n("div",{class:"text-caption text-medium-emphasis"}," Stok Menipis ",-1))]),t(C,{icon:"tabler-alert-triangle",size:"48",class:"text-warning opacity-50"})])]),_:1})]),_:1})]),_:1}),t(z,{cols:"12",md:"3"},{default:s(()=>[t(O,{class:"stats-card"},{default:s(()=>[t(N,null,{default:s(()=>[n("div",pa,[n("div",null,[n("div",_a,u(a(ie)||0),1),e[41]||(e[41]=n("div",{class:"text-caption text-medium-emphasis"}," Stok Habis ",-1))]),t(C,{icon:"tabler-x-circle",size:"48",class:"text-error opacity-50"})])]),_:1})]),_:1})]),_:1}),t(z,{cols:"12",md:"3"},{default:s(()=>[t(O,{class:"stats-card"},{default:s(()=>[t(N,null,{default:s(()=>[n("div",va,[n("div",null,[n("div",ka,u(a(Me)(a(ye)||0)),1),e[42]||(e[42]=n("div",{class:"text-caption text-medium-emphasis"}," Nilai Stok ",-1))]),t(C,{icon:"tabler-currency-dollar",size:"48",class:"text-success opacity-50"})])]),_:1})]),_:1})]),_:1})]),_:1}),t(O,{class:"mb-6 info-card",color:"info",variant:"tonal"},{default:s(()=>[t(N,null,{default:s(()=>[n("div",fa,[n("div",ga,[t(C,{icon:"tabler-info-circle",size:"32",class:"text-info"}),e[43]||(e[43]=n("div",null,[n("div",{class:"text-subtitle-1 font-weight-medium text-info"}," Sistem Stock Movement Otomatis "),n("div",{class:"text-body-2 text-medium-emphasis"},[i(" Stok akan bertambah otomatis saat purchasing dan berkurang saat penjualan POS. Gunakan tombol "),n("strong",null,"Penyesuaian"),i(" untuk koreksi manual jika diperlukan. ")])],-1))]),n("div",ya,[t(E,{color:"success",variant:"tonal",size:"small"},{default:s(()=>[t(C,{icon:"tabler-shopping-cart",class:"me-1"}),e[44]||(e[44]=i(" Purchase â†’ Stok + "))]),_:1,__:[44]}),t(E,{color:"error",variant:"tonal",size:"small"},{default:s(()=>[t(C,{icon:"tabler-cash",class:"me-1"}),e[45]||(e[45]=i(" POS Sale â†’ Stok - "))]),_:1,__:[45]})])])]),_:1})]),_:1}),a(L).length>0?(g(),S(O,{key:3,class:"mb-6 low-stock-alert"},{default:s(()=>[t(pe,{class:"d-flex align-center"},{default:s(()=>[t(C,{icon:"tabler-alert-triangle",class:"text-warning me-2"}),i(" Peringatan Stok Menipis ("+u(a(L).length)+" produk) ",1)]),_:1}),t(N,null,{default:s(()=>[n("div",ba,[(g(!0),X(At,null,$t(a(L).slice(0,10),o=>(g(),S(E,{key:o.id_inventory,color:"warning",variant:"outlined",size:"small"},{default:s(()=>{var k;return[i(u((k=o.product)==null?void 0:k.name)+" ("+u(o.current_stock)+"/"+u(o.reorder_level)+") ",1)]}),_:2},1024))),128)),a(L).length>10?(g(),S(E,{key:0,color:"warning",variant:"tonal",size:"small"},{default:s(()=>[i(" +"+u(a(L).length-10)+" lainnya ",1)]),_:1})):x("",!0)])]),_:1})]),_:1})):x("",!0),!a(V)&&a(_).length===0&&!a(P)&&!a(l).search&&a(l).stock_status==="all"?(g(),S(O,{key:4,class:"mb-6"},{default:s(()=>[t(N,{class:"text-center py-6"},{default:s(()=>[t(C,{icon:"tabler-info-circle",size:"48",class:"text-info mb-3"}),e[46]||(e[46]=n("div",{class:"text-h6 mb-2"}," Sistem Inventory Management Siap Digunakan ",-1)),e[47]||(e[47]=n("div",{class:"text-body-2 text-medium-emphasis"}," Buat produk dan variant terlebih dahulu untuk mulai melacak inventory. ",-1))]),_:1,__:[46,47]})]),_:1})):x("",!0),t(O,{class:"mb-6"},{default:s(()=>[t(N,null,{default:s(()=>[a(l).station!=="all"?(g(),S(se,{key:0,type:"info",variant:"tonal",class:"mb-4",density:"compact"},{text:s(()=>[n("div",ha,[t(C,{icon:"tabler-info-circle",size:"16"}),n("span",xa,u(r()),1)])]),_:1})):x("",!0),t(ge,null,{default:s(()=>[t(z,{cols:"12",md:"3"},{default:s(()=>[t(de,{modelValue:a(l).search,"onUpdate:modelValue":[e[3]||(e[3]=o=>a(l).search=o),e[4]||(e[4]=o=>a(xe)({search:o}))],label:"Cari inventory produk...",placeholder:"Nama produk, SKU, atau variant","prepend-inner-icon":"tabler-search",clearable:"",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(z,{cols:"12",md:"3"},{default:s(()=>[t(rt,{modelValue:a(l).stock_status,"onUpdate:modelValue":[e[5]||(e[5]=o=>a(l).stock_status=o),e[6]||(e[6]=o=>a(xe)({stock_status:o||"all"}))],items:a(Te),label:"Status Stok",variant:"outlined",clearable:""},null,8,["modelValue","items"])]),_:1}),t(z,{cols:"12",md:"3"},{default:s(()=>[t(rt,{modelValue:a(l).station,"onUpdate:modelValue":[e[7]||(e[7]=o=>a(l).station=o),e[8]||(e[8]=o=>a(xe)({station:o}))],items:[{title:"Semua station",value:"all"},{title:"Kitchen Only",value:"kitchen"},{title:"Bar Only",value:"bar"},{title:"Kitchen & Bar",value:"both"}],label:"Station",variant:"outlined",density:"compact","prepend-inner-icon":"tabler-building-store","hide-details":""},null,8,["modelValue"])]),_:1}),t(z,{cols:"12",md:"3",class:"d-flex align-center gap-2"},{default:s(()=>[t(w,{variant:"outlined","prepend-icon":"tabler-refresh",onClick:e[9]||(e[9]=o=>{a(_e)(),a(he)(),a(ue)()})},{default:s(()=>e[48]||(e[48]=[i(" Refresh ")])),_:1,__:[48]}),a(l).search||a(l).stock_status!=="all"||a(l).station!=="all"?(g(),S(w,{key:0,variant:"outlined",color:"warning","prepend-icon":"tabler-filter-off",onClick:e[10]||(e[10]=o=>a(xe)({search:"",stock_status:"all",station:"all"}))},{default:s(()=>e[49]||(e[49]=[i(" Clear ")])),_:1,__:[49]})):x("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),!a(V)&&a(_).length===0&&!a(P)&&!a(l).search&&a(l).stock_status==="all"?(g(),S(O,{key:5,class:"mb-6"},{default:s(()=>[t(N,{class:"text-center py-6"},{default:s(()=>[t(C,{icon:"tabler-package-off",size:"48",class:"text-disabled mb-3"}),e[50]||(e[50]=n("div",{class:"text-h6 mb-2"}," Sistem Inventory Management Siap Digunakan ",-1)),e[51]||(e[51]=n("div",{class:"text-body-2 text-medium-emphasis"}," Buat produk dan variant terlebih dahulu untuk mulai melacak inventory. ",-1))]),_:1,__:[50,51]})]),_:1})):x("",!0),t(O,{class:"products-inventory-table"},{default:s(()=>[t(pe,{class:"d-flex align-center gap-2"},{default:s(()=>[t(C,{icon:"tabler-package",color:"primary"}),e[53]||(e[53]=n("span",{class:"font-weight-bold"},"Inventory Produk",-1)),t(Ve),t(w,{color:"success",variant:"elevated","prepend-icon":"tabler-file-spreadsheet",loading:R.value,onClick:Ue},{default:s(()=>e[52]||(e[52]=[i(" Export Excel ")])),_:1,__:[52]},8,["loading"]),t(E,{color:"black",size:"small",variant:"tonal"},{default:s(()=>[i(u(a(y))+" Produk ",1)]),_:1})]),_:1,__:[53]}),t(J),n("div",wa,[t(Ot,{headers:[{title:"Produk/Variant",key:"item_name",sortable:!1,width:"280px"},{title:"Stok Saat Ini",key:"current_stock",sortable:!1,width:"120px"},{title:"Stok Tersedia",key:"available_stock",sortable:!1,width:"120px"},{title:"Status",key:"status",sortable:!1,width:"120px"},{title:"Station",key:"station_availability",sortable:!1,width:"150px"},{title:"Reorder Level",key:"reorder_level",sortable:!1,width:"120px"},{title:"Harga Rata-rata",key:"average_cost",sortable:!1,width:"150px"},{title:"Nilai Stok",key:"stock_value",sortable:!1,width:"150px"},{title:"Aksi",key:"actions",sortable:!1,width:"200px",fixed:!0}],items:a(_),loading:a(V),"items-length":a(y),"items-per-page":a(b),page:a(I),"items-per-page-options":[10,15,25,50,100],"items-per-page-text":"Items per page:","page-text":"{0}-{1} of {2}","no-data-text":"Tidak ada data inventory",class:"text-no-wrap fixed-actions-table",id:"inventory-table","fixed-header":"",height:"500px","onUpdate:page":a(T),"onUpdate:itemsPerPage":a(qe)},{"item.item_name":s(({item:o})=>{var k,c,D,$,Y,we,ce;return[n("div",Sa,[n("div",null,[n("div",Va,u(((k=o.item)==null?void 0:k.name)||((c=o.product)==null?void 0:c.name)||"Unknown Item"),1),n("div",Ma,[n("small",Da," SKU: "+u(((D=o.item)==null?void 0:D.item_code)||(($=o.product)==null?void 0:$.sku)||"-"),1),n("small",Ta,u(((Y=o.item)==null?void 0:Y.description)||((ce=(we=o.product)==null?void 0:we.category)==null?void 0:ce.name)||"-"),1)])])])]}),"item.sku":s(({item:o})=>[t(E,{variant:"outlined",size:"small",color:"primary"},{default:s(()=>{var k,c;return[i(u(((k=o.item)==null?void 0:k.item_code)||((c=o.product)==null?void 0:c.sku)||"N/A"),1)]}),_:2},1024)]),"item.current_stock":s(({item:o})=>[n("div",Ca,[n("div",Ea,u(o.current_stock),1),o.reserved_stock>0?(g(),X("small",Pa," ("+u(o.reserved_stock)+" reserved) ",1)):x("",!0)])]),"item.available_stock":s(({item:o})=>[n("div",Ia,[t(E,{color:o.available_stock>0?"success":"error",variant:"tonal",size:"small"},{default:s(()=>[i(u(o.available_stock),1)]),_:2},1032,["color"])])]),"item.status":s(({item:o})=>[t(E,{color:a(Qe)(o),variant:"tonal",size:"small"},{default:s(()=>[i(u(a(Ae)(o)),1)]),_:2},1032,["color"])]),"item.station_availability":s(({item:o})=>{var k,c,D,$;return[n("div",Ua,[(k=o.item)!=null&&k.available_in_kitchen?(g(),S(E,{key:0,color:"warning",variant:"tonal",size:"x-small","prepend-icon":"tabler-chef-hat"},{default:s(()=>e[54]||(e[54]=[i(" Kitchen ")])),_:1,__:[54]})):x("",!0),(c=o.item)!=null&&c.available_in_bar?(g(),S(E,{key:1,color:"info",variant:"tonal",size:"x-small","prepend-icon":"tabler-glass-cocktail"},{default:s(()=>e[55]||(e[55]=[i(" Bar ")])),_:1,__:[55]})):x("",!0),!((D=o.item)!=null&&D.available_in_kitchen)&&!(($=o.item)!=null&&$.available_in_bar)?(g(),X("span",Aa," Tidak tersedia ")):x("",!0)])]}),"item.reorder_level":s(({item:o})=>[n("div",$a,u(o.reorder_level||"-"),1)]),"item.average_cost":s(({item:o})=>[n("div",ja,u(a(Me)(o.average_cost)),1)]),"item.stock_value":s(({item:o})=>[n("div",Ra,u(a(Me)(o.current_stock*o.average_cost)),1)]),"item.actions":s(({item:o})=>[n("div",za,[t(Xe,{text:"Penyesuaian Stok"},{activator:s(({props:k})=>[t(w,Ge(k,{icon:"tabler-adjustments",color:"warning",variant:"text",size:"small",disabled:!o.item,onClick:c=>mt(o)}),null,16,["disabled","onClick"])]),_:2},1024),t(Xe,{text:"Update Stok"},{activator:s(({props:k})=>[t(w,Ge(k,{icon:"tabler-edit",color:"primary",variant:"text",size:"small",onClick:c=>a(Pe)(o)}),null,16,["onClick"])]),_:2},1024),t(Xe,{text:"Set Reorder Level"},{activator:s(({props:k})=>[t(w,Ge(k,{icon:"tabler-settings",color:"info",variant:"text",size:"small",onClick:c=>a(Be)(o)}),null,16,["onClick"])]),_:2},1024),t(Xe,{text:"Lihat Riwayat"},{activator:s(({props:k})=>[t(w,Ge(k,{icon:"tabler-history",color:"secondary",variant:"text",size:"small",onClick:c=>a(Oe)(o)}),null,16,["onClick"])]),_:2},1024)])]),"no-data":s(()=>{var o;return[n("div",La,[t(C,{icon:a(l).search||a(l).stock_status!=="all"?"tabler-search-off":"tabler-package-off",size:"64",class:"text-medium-emphasis mb-4"},null,8,["icon"]),n("div",Ba,u(a(l).search||a(l).stock_status!=="all"?"Tidak Ada Hasil Pencarian":"Belum Ada Data Inventory"),1),n("div",Oa,[a(l).search||a(l).stock_status!=="all"?(g(),X("span",Fa,[a(l).search?(g(),X("span",qa,[e[56]||(e[56]=i(' Tidak ditemukan inventory dengan kata kunci "')),n("strong",null,u(a(l).search),1),e[57]||(e[57]=i('" '))])):x("",!0),a(l).search&&a(l).stock_status!=="all"?(g(),X("span",Ka," dan ")):x("",!0),a(l).stock_status!=="all"?(g(),X("span",Na,[e[58]||(e[58]=i(' status stok "')),n("strong",null,u(((o=a(Te).find(k=>k.value===a(l).stock_status))==null?void 0:o.title)||a(l).stock_status),1),e[59]||(e[59]=i('" '))])):x("",!0),e[60]||(e[60]=n("br",null,null,-1)),e[61]||(e[61]=i("Coba kata kunci yang berbeda atau hapus filter. "))])):(g(),X("span",Ha,e[62]||(e[62]=[i(" Data inventory akan muncul setelah produk dan variant dibuat."),n("br",null,null,-1),i(" Silakan buat produk terlebih dahulu di menu "),n("strong",null,"Kelola Produk",-1),i(". ")])))]),n("div",Ga,[a(l).search||a(l).stock_status!=="all"?(g(),S(w,{key:0,color:"warning",variant:"outlined","prepend-icon":"tabler-filter-off",onClick:e[11]||(e[11]=k=>a(xe)({search:"",stock_status:"all"}))},{default:s(()=>e[63]||(e[63]=[i(" Hapus Filter ")])),_:1,__:[63]})):(g(),S(w,{key:1,color:"primary","prepend-icon":"tabler-plus",to:"/products-management"},{default:s(()=>e[64]||(e[64]=[i(" Buat Produk Baru ")])),_:1,__:[64]})),t(w,{variant:"outlined","prepend-icon":"tabler-refresh",onClick:e[12]||(e[12]=k=>{a(_e)(),a(he)(),a(ue)()})},{default:s(()=>e[65]||(e[65]=[i(" Refresh Data ")])),_:1,__:[65]})])])]}),loading:s(()=>[n("div",Ja,[t(ut,{indeterminate:"",color:"primary",size:"40"}),e[66]||(e[66]=n("div",{class:"mt-4 text-medium-emphasis"}," Memuat data inventory... ",-1))])]),_:1},8,["items","loading","items-length","items-per-page","page","onUpdate:page","onUpdate:itemsPerPage"])])]),_:1}),t(Se,{modelValue:a(ee),"onUpdate:modelValue":e[19]||(e[19]=o=>Le(ee)?ee.value=o:null),"max-width":"800px",fullscreen:a(d),persistent:"",class:"stock-dialog"},{default:s(()=>[t(O,null,{default:s(()=>[t(pe,null,{default:s(()=>{var o,k,c,D;return[i(" Update Stok - "+u(((k=(o=a(G))==null?void 0:o.item)==null?void 0:k.name)||((D=(c=a(G))==null?void 0:c.product)==null?void 0:D.name)||"Unknown Item"),1)]}),_:1}),t(J),t(We,{onSubmit:Je(a(Ce),["prevent"])},{default:s(()=>[t(N,null,{default:s(()=>[a(re)?(g(),S(se,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4","onClick:close":a(q)},{default:s(()=>[i(u(a(re)),1)]),_:1},8,["onClick:close"])):x("",!0),t(ge,null,{default:s(()=>[t(z,{cols:"12",md:"6"},{default:s(()=>[t(rt,{modelValue:a(U).movement_type,"onUpdate:modelValue":e[13]||(e[13]=o=>a(U).movement_type=o),label:"Jenis Pergerakan *",items:[{title:"Stock Masuk",value:"stock_in"},{title:"Stock Keluar",value:"stock_out"},{title:"Penyesuaian",value:"adjustment"},{title:"Transfer",value:"transfer"},{title:"Retur",value:"return"}],variant:"outlined"},null,8,["modelValue"])]),_:1}),t(z,{cols:"12",md:"6"},{default:s(()=>[t(de,{modelValue:a(U).quantity,"onUpdate:modelValue":e[14]||(e[14]=o=>a(U).quantity=o),modelModifiers:{number:!0},label:"Kuantitas *",type:"number",min:"1",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(ge,null,{default:s(()=>[t(z,{cols:"12"},{default:s(()=>[t(de,{modelValue:a(U).reason,"onUpdate:modelValue":e[15]||(e[15]=o=>a(U).reason=o),label:"Alasan *",placeholder:"Contoh: Pembelian dari supplier, Penjualan, dll",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(ge,null,{default:s(()=>[t(z,{cols:"12",md:"6"},{default:s(()=>[t(de,{modelValue:a(U).reference_number,"onUpdate:modelValue":e[16]||(e[16]=o=>a(U).reference_number=o),label:"Nomor Referensi",placeholder:"PO-001, SO-001, dll",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(z,{cols:"12",md:"6"},{default:s(()=>[t(de,{"model-value":a(U).cost_per_unit?Math.round(a(U).cost_per_unit):"",label:"Harga per Unit (Integer)",type:"number",min:"0",step:"1",variant:"outlined",placeholder:"50000","onUpdate:modelValue":e[17]||(e[17]=o=>{a(U).cost_per_unit=o?Math.round(parseInt(o)):void 0})},null,8,["model-value"])]),_:1})]),_:1}),t(ge,null,{default:s(()=>[t(z,{cols:"12"},{default:s(()=>[t(it,{modelValue:a(U).notes,"onUpdate:modelValue":e[18]||(e[18]=o=>a(U).notes=o),label:"Catatan",rows:"2",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(J),t(De,{class:"pa-4"},{default:s(()=>[t(Ve),t(w,{variant:"outlined",onClick:a(Fe)},{default:s(()=>e[67]||(e[67]=[i(" Batal ")])),_:1,__:[67]},8,["onClick"]),t(w,{type:"submit",color:"primary",loading:a(Q)},{default:s(()=>e[68]||(e[68]=[i(" Update Stok ")])),_:1,__:[68]},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","fullscreen"]),t(Se,{modelValue:a(le),"onUpdate:modelValue":e[22]||(e[22]=o=>Le(le)?le.value=o:null),"max-width":"600px",fullscreen:a(d),persistent:"",class:"stock-dialog"},{default:s(()=>[t(O,null,{default:s(()=>[t(pe,null,{default:s(()=>{var o,k,c,D;return[i(" Set Reorder Level - "+u(((k=(o=a(G))==null?void 0:o.item)==null?void 0:k.name)||((D=(c=a(G))==null?void 0:c.product)==null?void 0:D.name)||"Unknown Item"),1)]}),_:1}),t(J),t(We,{onSubmit:Je(a(Ee),["prevent"])},{default:s(()=>[t(N,null,{default:s(()=>[a(re)?(g(),S(se,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4","onClick:close":a(q)},{default:s(()=>[i(u(a(re)),1)]),_:1},8,["onClick:close"])):x("",!0),t(ge,null,{default:s(()=>[t(z,{cols:"12"},{default:s(()=>[t(de,{modelValue:a(F).reorder_level,"onUpdate:modelValue":e[20]||(e[20]=o=>a(F).reorder_level=o),modelModifiers:{number:!0},label:"Reorder Level *",type:"number",min:"0",hint:"Stok minimum sebelum perlu restock","persistent-hint":"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1}),t(ge,null,{default:s(()=>[t(z,{cols:"12"},{default:s(()=>[t(de,{modelValue:a(F).max_stock_level,"onUpdate:modelValue":e[21]||(e[21]=o=>a(F).max_stock_level=o),modelModifiers:{number:!0},label:"Max Stock Level",type:"number",min:"0",hint:"Stok maksimum yang diizinkan","persistent-hint":"",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(J),t(De,{class:"pa-4"},{default:s(()=>[t(Ve),t(w,{variant:"outlined",onClick:a(f)},{default:s(()=>e[69]||(e[69]=[i(" Batal ")])),_:1,__:[69]},8,["onClick"]),t(w,{type:"submit",color:"primary",loading:a(Q)},{default:s(()=>e[70]||(e[70]=[i(" Simpan ")])),_:1,__:[70]},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue","fullscreen"]),t(sa,{modelValue:a(Z),"onUpdate:modelValue":e[23]||(e[23]=o=>Le(Z)?Z.value=o:null),"inventory-id":(B=(j=a(G))==null?void 0:j.id_inventory)==null?void 0:B.toString(),"inventory-name":(K=(W=a(G))==null?void 0:W.item)==null?void 0:K.name},null,8,["modelValue","inventory-id","inventory-name"]),t(Se,{modelValue:a(Ie),"onUpdate:modelValue":e[26]||(e[26]=o=>Le(Ie)?Ie.value=o:null),"max-width":"600px",fullscreen:a(d),persistent:"",class:"stock-dialog"},{default:s(()=>[t(O,{class:"stock-movement-dialog"},{default:s(()=>[t(pe,{class:"d-flex align-center justify-space-between"},{default:s(()=>[n("div",Xa,[t(C,{icon:"tabler-adjustments",color:"primary"}),e[71]||(e[71]=n("span",{class:"font-weight-bold"}," Penyesuaian Stok ",-1))]),t(w,{icon:"tabler-x",variant:"text",color:"white",onClick:a(Re)},null,8,["onClick"])]),_:1}),t(J),t(N,{class:"pa-6"},{default:s(()=>[t(We,{onSubmit:Je(a($e),["prevent"])},{default:s(()=>{var o;return[a(te)?(g(),S(se,{key:0,color:"info",variant:"tonal",class:"mb-4"},{default:s(()=>[n("div",Wa,[t(C,{icon:"tabler-package"}),n("div",null,[n("div",Ya,u(a(te).name),1),n("div",Qa,u(a(te).item_code),1),n("div",Za,"Stok Saat Ini: "+u(a(te).current_stock)+" "+u(a(te).unit),1)])])]),_:1})):x("",!0),a(tt)?(g(),S(se,{key:1,type:"error",variant:"outlined",class:"mb-4",text:a(tt),closable:"","onClick:close":a(ct)},null,8,["text","onClick:close"])):x("",!0),t(de,{modelValue:a(A).quantity,"onUpdate:modelValue":e[24]||(e[24]=k=>a(A).quantity=k),modelModifiers:{number:!0},label:"Stok Baru",type:"number",min:"0",step:"0.001",variant:"outlined",suffix:(o=a(te))==null?void 0:o.unit,class:"mb-4",required:""},null,8,["modelValue","suffix"]),t(it,{modelValue:a(A).notes,"onUpdate:modelValue":e[25]||(e[25]=k=>a(A).notes=k),label:"Catatan (opsional)",variant:"outlined",rows:"3",class:"mb-4"},null,8,["modelValue"]),n("div",es,[t(w,{variant:"outlined",onClick:a(Re)},{default:s(()=>e[72]||(e[72]=[i(" Batal ")])),_:1,__:[72]},8,["onClick"]),t(w,{type:"submit",color:"primary",class:"coffee-primary",loading:a(et)},{default:s(()=>e[73]||(e[73]=[i(" Simpan Penyesuaian ")])),_:1,__:[73]},8,["loading"])])]}),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"]),t(Se,{modelValue:a(je),"onUpdate:modelValue":e[30]||(e[30]=o=>Le(je)?je.value=o:null),"max-width":"800px",fullscreen:a(d),persistent:"",class:"stock-dialog"},{default:s(()=>[t(O,{class:"stock-movement-dialog"},{default:s(()=>[t(pe,{class:"d-flex align-center justify-space-between"},{default:s(()=>[n("div",ts,[t(C,{icon:a(A).type==="in"?"tabler-plus":"tabler-minus",color:"primary"},null,8,["icon"]),n("span",as,u(a(A).type==="in"?"Stok Masuk":a(A).type==="out"?"Stok Keluar":"Penyesuaian Stok"),1)]),t(w,{icon:"tabler-x",variant:"text",onClick:a(Re)},null,8,["onClick"])]),_:1}),t(J),t(N,{class:"pa-6"},{default:s(()=>[t(We,{onSubmit:Je(a($e),["prevent"])},{default:s(()=>[a(te)?(g(),S(se,{key:0,color:"info",variant:"tonal",class:"mb-4"},{default:s(()=>[n("div",ss,[t(Vt,{color:"primary",size:"40",variant:"tonal"},{default:s(()=>[t(C,{icon:"tabler-package"})]),_:1}),n("div",null,[n("div",os,u(a(te).name),1),n("div",ls," Stok saat ini: "+u(a(te).current_stock)+" "+u(a(te).unit),1)])])]),_:1})):x("",!0),t(ge,null,{default:s(()=>[t(z,{cols:"12",md:"6"},{default:s(()=>[t(de,{modelValue:a(A).quantity,"onUpdate:modelValue":e[27]||(e[27]=o=>a(A).quantity=o),modelModifiers:{number:!0},label:`Jumlah ${a(A).type==="in"?"Masuk":a(A).type==="out"?"Keluar":"Akhir"}`,type:"number",variant:"outlined",required:"",min:a(A).type==="adjustment"?0:1,rules:[o=>o>0||"Jumlah harus lebih dari 0"]},null,8,["modelValue","label","min","rules"])]),_:1}),t(z,{cols:"12",md:"6"},{default:s(()=>[t(de,{"model-value":a(A).cost_per_unit?Math.round(a(A).cost_per_unit):"",label:"Harga per Unit (Integer)",type:"number",step:"1",min:"0",variant:"outlined",placeholder:"50000",readonly:a(A).type!=="in","onUpdate:modelValue":e[28]||(e[28]=o=>{a(A).cost_per_unit=o?Math.round(parseInt(o)):0})},null,8,["model-value","readonly"])]),_:1}),t(z,{cols:"12"},{default:s(()=>[t(it,{modelValue:a(A).notes,"onUpdate:modelValue":e[29]||(e[29]=o=>a(A).notes=o),label:"Catatan",placeholder:"Masukkan catatan untuk pergerakan stok...",rows:"3",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),t(J),t(De,{class:"pa-6"},{default:s(()=>[t(Ve),t(w,{variant:"outlined",class:"coffee-secondary",onClick:a(Re)},{default:s(()=>e[74]||(e[74]=[i(" Batal ")])),_:1,__:[74]},8,["onClick"]),t(w,{color:"primary",class:"coffee-primary",loading:a(et),onClick:a($e)},{default:s(()=>e[75]||(e[75]=[i(" Simpan ")])),_:1,__:[75]},8,["loading","onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"]),t(Se,{modelValue:st.value,"onUpdate:modelValue":e[32]||(e[32]=o=>st.value=o),"max-width":"1200px",fullscreen:a(d),persistent:"",class:"upload-history-dialog"},{default:s(()=>[t(O,null,{default:s(()=>[t(pe,{class:"d-flex align-center justify-space-between"},{default:s(()=>[n("div",ns,[t(C,{icon:"tabler-history",color:"primary"}),e[76]||(e[76]=n("span",{class:"font-weight-bold"},"Riwayat Upload Data Inventory",-1))]),t(w,{icon:"tabler-x",variant:"text",color:"white",onClick:kt})]),_:1}),t(J),t(N,{class:"pa-6"},{default:s(()=>[lt.value?(g(),X("div",rs,[t(ut,{indeterminate:"",color:"primary",size:"40"}),e[77]||(e[77]=n("div",{class:"mt-4 text-medium-emphasis"}," Memuat riwayat upload... ",-1))])):(g(),X("div",is,[t(Tt,{headers:[{title:"Tanggal Upload",key:"created_at",sortable:!1},{title:"User",key:"user_name",sortable:!1},{title:"Total Items",key:"total_items_processed",sortable:!1},{title:"Berhasil Update",key:"total_items_updated",sortable:!1},{title:"Dilewati",key:"total_items_skipped",sortable:!1},{title:"Total Nilai Stok",key:"total_stock_value",sortable:!1},{title:"Status",key:"upload_status",sortable:!1}],items:ot.value,"items-per-page":He.value,class:"elevation-1"},{"item.created_at":s(({item:o})=>[n("div",us,u(new Date(o.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)]),"item.user_name":s(({item:o})=>[n("div",cs,[t(Vt,{size:"32",color:"primary",variant:"tonal"},{default:s(()=>[t(C,{icon:"tabler-user"})]),_:1}),n("div",null,[n("div",ds,u(o.user_name||"Unknown User"),1),n("div",ms,u(o.user_email||"-"),1)])])]),"item.total_items_processed":s(({item:o})=>[t(E,{color:"info",variant:"tonal",size:"small"},{default:s(()=>[i(u(o.total_items_processed),1)]),_:2},1024)]),"item.total_items_updated":s(({item:o})=>[t(E,{color:"success",variant:"tonal",size:"small"},{default:s(()=>[i(u(o.total_items_updated),1)]),_:2},1024)]),"item.total_items_skipped":s(({item:o})=>[t(E,{color:o.total_items_skipped>0?"warning":"success",variant:"tonal",size:"small"},{default:s(()=>[i(u(o.total_items_skipped),1)]),_:2},1032,["color"])]),"item.total_stock_value":s(({item:o})=>[n("div",ps,u(a(Me)(o.total_stock_value||0)),1)]),"item.upload_status":s(({item:o})=>[t(E,{color:o.upload_status==="success"?"success":o.upload_status==="failed"?"error":"warning",variant:"tonal",size:"small"},{default:s(()=>[i(u(o.upload_status==="success"?"Berhasil":o.upload_status==="failed"?"Gagal":"Sebagian"),1)]),_:2},1032,["color"])]),"no-data":s(()=>[n("div",_s,[t(C,{icon:"tabler-database-off",size:"64",class:"text-medium-emphasis mb-4"}),e[78]||(e[78]=n("div",{class:"text-h6 text-medium-emphasis mb-2"}," Belum Ada Riwayat Upload ",-1)),e[79]||(e[79]=n("div",{class:"text-body-2 text-medium-emphasis"}," Riwayat upload akan muncul setelah Anda melakukan export data inventory. ",-1))])]),_:1},8,["items","items-per-page"]),nt.value>He.value?(g(),X("div",vs,[t(zt,{modelValue:ze.value,"onUpdate:modelValue":[e[31]||(e[31]=o=>ze.value=o),Pt],length:Math.ceil(nt.value/He.value),"total-visible":7},null,8,["modelValue","length"])])):x("",!0)]))]),_:1}),t(J),t(De,{class:"pa-4"},{default:s(()=>[t(Ve),t(w,{variant:"outlined",onClick:kt},{default:s(()=>e[80]||(e[80]=[i(" Tutup ")])),_:1,__:[80]}),t(w,{color:"primary","prepend-icon":"tabler-refresh",onClick:vt},{default:s(()=>e[81]||(e[81]=[i(" Refresh ")])),_:1,__:[81]})]),_:1})]),_:1})]),_:1},8,["modelValue","fullscreen"]),t(Se,{modelValue:ve.value,"onUpdate:modelValue":e[34]||(e[34]=o=>ve.value=o),"max-width":"500",persistent:""},{default:s(()=>[t(O,null,{default:s(()=>[t(pe,{class:"d-flex align-center gap-2"},{default:s(()=>[t(C,{icon:"tabler-file-spreadsheet",color:"success"}),e[82]||(e[82]=i(" Export Inventory ke Excel "))]),_:1,__:[82]}),t(J),t(N,null,{default:s(()=>[n("div",ks,[e[84]||(e[84]=n("h6",{class:"text-h6 mb-2"},"Filter yang akan diterapkan:",-1)),n("div",fs,[a(l).search?(g(),S(E,{key:0,color:"primary",variant:"tonal",size:"small","prepend-icon":"tabler-search"},{default:s(()=>[i(' Pencarian: "'+u(a(l).search)+'" ',1)]),_:1})):x("",!0),a(l).stock_status&&a(l).stock_status!=="all"?(g(),S(E,{key:1,color:"info",variant:"tonal",size:"small","prepend-icon":"tabler-package"},{default:s(()=>[i(" Status: "+u(a(l).stock_status),1)]),_:1})):x("",!0),a(l).station&&a(l).station!=="all"?(g(),S(E,{key:2,color:"primary",variant:"tonal",size:"small","prepend-icon":"tabler-building-store"},{default:s(()=>[i(" Station: "+u(a(l).station==="kitchen"?"Kitchen Only":a(l).station==="bar"?"Bar Only":"Kitchen & Bar"),1)]),_:1})):x("",!0),!a(l).search&&(!a(l).stock_status||a(l).stock_status==="all")&&(!a(l).station||a(l).station==="all")?(g(),S(E,{key:3,color:"success",variant:"tonal",size:"small","prepend-icon":"tabler-check"},{default:s(()=>e[83]||(e[83]=[i(" Semua Data (Tanpa Filter) ")])),_:1,__:[83]})):x("",!0)])]),t(se,{type:"info",variant:"tonal",class:"mb-4"},{default:s(()=>e[85]||(e[85]=[i(" Data yang akan di-export akan mengikuti filter yang sedang aktif. File Excel akan berisi kolom Station (Kitchen & Bar) untuk setiap item. ")])),_:1,__:[85]})]),_:1}),t(J),t(De,null,{default:s(()=>[t(Ve),t(w,{variant:"outlined",onClick:Ne,disabled:R.value},{default:s(()=>e[86]||(e[86]=[i(" Batal ")])),_:1,__:[86]},8,["disabled"]),t(w,{color:"success","prepend-icon":"tabler-file-spreadsheet",loading:R.value,onClick:e[33]||(e[33]=o=>{_t(),Ne()})},{default:s(()=>e[87]||(e[87]=[i(" Export ke Excel ")])),_:1,__:[87]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Se,{modelValue:ve.value,"onUpdate:modelValue":e[36]||(e[36]=o=>ve.value=o),"max-width":"500",persistent:""},{default:s(()=>[t(O,null,{default:s(()=>[t(pe,{class:"d-flex align-center gap-2"},{default:s(()=>[t(C,{icon:"tabler-file-spreadsheet",color:"success"}),e[88]||(e[88]=i(" Export Data ke Excel "))]),_:1,__:[88]}),t(J),t(N,null,{default:s(()=>[n("div",gs,[e[90]||(e[90]=n("h6",{class:"text-h6 mb-2"},"Filter yang akan diterapkan:",-1)),n("div",ys,[a(l).search?(g(),S(E,{key:0,color:"primary",variant:"tonal",size:"small","prepend-icon":"tabler-search"},{default:s(()=>[i(' Pencarian: "'+u(a(l).search)+'" ',1)]),_:1})):x("",!0),a(l).stock_status&&a(l).stock_status!=="all"?(g(),S(E,{key:1,color:"info",variant:"tonal",size:"small","prepend-icon":"tabler-package"},{default:s(()=>[i(" Status: "+u(a(l).stock_status),1)]),_:1})):x("",!0),a(l).station&&a(l).station!=="all"?(g(),S(E,{key:2,color:"primary",variant:"tonal",size:"small","prepend-icon":"tabler-building-store"},{default:s(()=>[i(" Station: "+u(a(l).station==="kitchen"?"Kitchen Only":a(l).station==="bar"?"Bar Only":"Kitchen & Bar"),1)]),_:1})):x("",!0),!a(l).search&&(!a(l).stock_status||a(l).stock_status==="all")&&(!a(l).station||a(l).station==="all")?(g(),S(E,{key:3,color:"success",variant:"tonal",size:"small","prepend-icon":"tabler-database"},{default:s(()=>e[89]||(e[89]=[i(" Semua Data ")])),_:1,__:[89]})):x("",!0)])]),t(se,{type:"info",variant:"tonal",class:"mb-4"},{default:s(()=>e[91]||(e[91]=[i(" Data yang akan di-export sesuai dengan filter yang aktif saat ini. File Excel akan mencakup kolom Station (Kitchen/Bar) untuk setiap item. ")])),_:1,__:[91]})]),_:1}),t(J),t(De,null,{default:s(()=>[t(Ve),t(w,{variant:"outlined",onClick:Ne},{default:s(()=>e[92]||(e[92]=[i(" Batal ")])),_:1,__:[92]}),t(w,{color:"success",variant:"elevated","prepend-icon":"tabler-download",loading:R.value,onClick:e[35]||(e[35]=o=>{_t(),Ne()})},{default:s(()=>e[93]||(e[93]=[i(" Export Excel ")])),_:1,__:[93]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),Js=Dt(bs,[["__scopeId","data-v-22cbd61e"]]);export{Js as default};

const A=/#/g,d=/&/g,L=/\//g,C=/=/g,h=/\+/g,P=/%5e/gi,O=/%60/gi,Q=/%7c/gi,T=/%20/gi;function b(t){return encodeURI(""+t).replace(Q,"|")}function i(t){return b(typeof t=="string"?t:JSON.stringify(t)).replace(h,"%2B").replace(T,"+").replace(A,"%23").replace(d,"%26").replace(O,"`").replace(P,"^").replace(L,"%2F")}function a(t){return i(t).replace(C,"%3D")}function E(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function w(t){return E(t.replace(h," "))}function S(t){return E(t.replace(h," "))}function I(t=""){const e=Object.create(null);t[0]==="?"&&(t=t.slice(1));for(const o of t.split("&")){const r=o.match(/([^=]+)=?(.*)/)||[];if(r.length<2)continue;const n=w(r[1]);if(n==="__proto__"||n==="constructor")continue;const c=S(r[2]||"");e[n]===void 0?e[n]=c:Array.isArray(e[n])?e[n].push(c):e[n]=[e[n],c]}return e}function N(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(o=>`${a(t)}=${i(o)}`).join("&"):`${a(t)}=${i(e)}`:a(t)}function U(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>N(e,t[e])).filter(Boolean).join("&")}const j=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,B=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,F=/^([/\\]\s*){2,}[^/\\]/,G=/^\.?\//;function _(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?j.test(t):B.test(t)||(e.acceptRelative?F.test(t):!1)}function H(t="",e){return t.endsWith("/")}function K(t="",e){return(H(t)?t.slice(0,-1):t)||"/"}function W(t="",e){return t.endsWith("/")?t:t+"/"}function X(t,e){if($(e)||_(t))return t;const o=K(e);return t.startsWith(o)?t:D(o,t)}function J(t,e){const o=M(t),r={...I(o.search),...e};return o.search=U(r),V(o)}function $(t){return!t||t==="/"}function v(t){return t&&t!=="/"}function D(t,...e){let o=t||"";for(const r of e.filter(n=>v(n)))if(o){const n=r.replace(G,"");o=W(o)+n}else o=r;return o}const p=Symbol.for("ufo:protocolRelative");function M(t="",e){const o=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(o){const[,u,l=""]=o;return{protocol:u.toLowerCase(),pathname:l,href:u+l,auth:"",host:"",search:"",hash:""}}if(!_(t,{acceptRelative:!0}))return R(t);const[,r="",n,c=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,f="",s=""]=c.match(/([^#/?]*)(.*)?/)||[];r==="file:"&&(s=s.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:y,search:m,hash:g}=R(s);return{protocol:r.toLowerCase(),auth:n?n.slice(0,Math.max(0,n.length-1)):"",host:f,pathname:y,search:m,hash:g,[p]:!r}}function R(t=""){const[e="",o="",r=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:o,hash:r}}function V(t){const e=t.pathname||"",o=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",r=t.hash||"",n=t.auth?t.auth+"@":"",c=t.host||"";return(t.protocol||t[p]?(t.protocol||"")+"//":"")+n+c+e+o+r}export{X as a,J as w};

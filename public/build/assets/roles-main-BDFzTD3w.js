import{u as ne,_ as Fe}from"./SimpleConfirmDialog.vue_vue_type_script_setup_true_lang-COWn3Ub6.js";import{$ as R}from"./api-V6Q1T5ol.js";import{r as _,au as he,V as C,d as re,w as Z,g as J,f as a,b as e,e as u,t as k,a0 as P,X as L,s as x,$ as Ce,o as z,D as Pe,l as Y,c as q,i as be,F as Ve,v as Ue,m as xe,ay as $e,at as ke,p as le}from"./main-C2v4uIoW.js";import{V as we}from"./VDialog-C6GOwWdt.js";import{b as ee,c as Se,V as I}from"./VCard-B1F88_EZ.js";import{V as ae}from"./VSpacer-B-b1m6g5.js";import{V as G}from"./VCardText-CsYXoujx.js";import{V as Ae}from"./VForm-DhHmcWRC.js";import{V as H,a as N}from"./VRow-BVhU9qUf.js";import{V as se}from"./VTextField-CVMJzrUB.js";import{V as ze}from"./VTextarea-CdfmeiAN.js";import{V as Ne}from"./VSwitch-8I7Znnef.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as De}from"./VContainer-BLuioaTT.js";import{V as Te}from"./VSelect-BtcE9StE.js";import{V as Oe,a as Me}from"./VExpansionPanels-fElnr0Kf.js";import{V as Ee}from"./VCheckbox-BbUHYN46.js";import{V as ie}from"./VChip-DSWK68Bq.js";import{V as je}from"./VSheet-CgQXNAtB.js";import{V as K}from"./VAvatar-CEGEgChg.js";import{a as Le}from"./VList-DXZewfkl.js";import{V as Ie}from"./VDivider-C7kfWYRU.js";import{V as Be}from"./VDataTable-DTGekW7B.js";import{V as oe}from"./VTooltip-rInHhU0L.js";import"./index-D-EbNoF1.js";import"./VOverlay-DO2fhCK7.js";import"./forwardRefs-B931MWyl.js";import"./VImg-DoogZNtY.js";/* empty css              */import"./VCheckboxBtn-BYPsK7ij.js";import"./VMenu-CMfuarEm.js";import"./VTable-BrNtMN9a.js";import"./filter-CooTSgJB.js";function Re(){const w=_([]),b=_(null),S=_([]),D=_([]),M=_([]),m=_(!1),d=_(null),V=he({current_page:1,last_page:1,per_page:20,total:0,from:0,to:0}),y=he({search:"",module:"",action:"",sort_by:"name",sort_order:"asc"}),p=C(()=>w.value.length>0),v=C(()=>!m.value&&!p.value),E=C(()=>V.last_page),O=C(()=>V.current_page<V.last_page),F=C(()=>V.current_page>1),U=C(()=>{const s={};return w.value.forEach(t=>{s[t.module]||(s[t.module]=[]),s[t.module].push(t)}),s}),$=C(()=>[...new Set(w.value.map(s=>s.module))].sort()),j=C(()=>[...new Set(w.value.map(s=>s.action))].sort()),r=async(s=1)=>{m.value=!0,d.value=null;try{const t=new URLSearchParams({page:s.toString(),per_page:V.per_page.toString(),...Object.fromEntries(Object.entries(y).filter(([A,B])=>B!==void 0&&B!==""&&B!==null))}),o=await R(`/api/permissions?${t}`);w.value=o.data,Object.assign(V,{current_page:o.current_page,last_page:o.last_page,per_page:o.per_page,total:o.total,from:o.from,to:o.to})}catch(t){d.value=t.message||"Failed to fetch permissions",w.value=[]}finally{m.value=!1}};return{permissions:w,permission:b,userPermissions:S,rolePermissions:D,effectivePermissions:M,loading:m,error:d,pagination:V,filters:y,hasPermissions:p,isEmpty:v,totalPages:E,hasNextPage:O,hasPrevPage:F,permissionsByModule:U,modules:$,actions:j,fetchPermissions:r,fetchPermission:async s=>{m.value=!0,d.value=null;try{const t=await R(`/api/permissions/${s}`);b.value=t.data}catch(t){d.value=t.message||"Failed to fetch permission",b.value=null}finally{m.value=!1}},createPermission:async s=>{m.value=!0,d.value=null;try{const t=await R("/api/permissions",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}});return w.value.push(t.data),t.data}catch(t){throw d.value=t.message||"Failed to create permission",t}finally{m.value=!1}},updatePermission:async(s,t)=>{m.value=!0,d.value=null;try{const o=await R(`/api/permissions/${s}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}),A=w.value.findIndex(B=>B.id===s);return A!==-1&&(w.value[A]=o.data),b.value&&b.value.id===s&&(b.value=o.data),o.data}catch(o){throw d.value=o.message||"Failed to update permission",o}finally{m.value=!1}},deletePermission:async s=>{m.value=!0,d.value=null;try{await R(`/api/permissions/${s}`,{method:"DELETE"}),w.value=w.value.filter(t=>t.id!==s),b.value&&b.value.id===s&&(b.value=null)}catch(t){throw d.value=t.message||"Failed to delete permission",t}finally{m.value=!1}},fetchUserPermissions:async s=>{m.value=!0,d.value=null;try{const t=await R(`/api/permissions/user/${s}`);S.value=t.data}catch(t){d.value=t.message||"Failed to fetch user permissions",S.value=[]}finally{m.value=!1}},fetchRolePermissions:async s=>{m.value=!0,d.value=null;try{const t=await R(`/api/permissions/role/${s}`);D.value=t.data}catch(t){d.value=t.message||"Failed to fetch role permissions",D.value=[]}finally{m.value=!1}},fetchEffectivePermissions:async s=>{m.value=!0,d.value=null;try{const t=await R(`/api/permissions/user/${s}/effective`);M.value=t.data}catch(t){d.value=t.message||"Failed to fetch effective permissions",M.value=[]}finally{m.value=!1}},assignToUser:async s=>{m.value=!0,d.value=null;try{return(await R("/api/permissions/assign-to-user",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}})).data}catch(t){throw d.value=t.message||"Failed to assign permissions to user",t}finally{m.value=!1}},assignToRole:async s=>{m.value=!0,d.value=null;try{return(await R("/api/permissions/assign-to-role",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}})).data}catch(t){throw d.value=t.message||"Failed to assign permissions to role",t}finally{m.value=!1}},revokeFromUser:async(s,t)=>{m.value=!0,d.value=null;try{return(await R("/api/permissions/revoke-from-user",{method:"POST",body:JSON.stringify({user_id:s,permission_ids:t}),headers:{"Content-Type":"application/json"}})).data}catch(o){throw d.value=o.message||"Failed to revoke permissions from user",o}finally{m.value=!1}},revokeFromRole:async(s,t)=>{m.value=!0,d.value=null;try{return(await R("/api/permissions/revoke-from-role",{method:"POST",body:JSON.stringify({role_id:s,permission_ids:t}),headers:{"Content-Type":"application/json"}})).data}catch(o){throw d.value=o.message||"Failed to revoke permissions from role",o}finally{m.value=!1}},bulkAssign:async s=>{m.value=!0,d.value=null;try{return(await R("/api/permissions/bulk-assign",{method:"POST",body:JSON.stringify({assignments:s}),headers:{"Content-Type":"application/json"}})).data}catch(t){throw d.value=t.message||"Failed to bulk assign permissions",t}finally{m.value=!1}},checkUserPermission:async(s,t,o)=>{try{return(await R("/api/permissions/check-user-permission",{method:"POST",body:JSON.stringify({user_id:s,module:t,action:o}),headers:{"Content-Type":"application/json"}})).data.has_permission}catch(A){return d.value=A.message||"Failed to check user permission",!1}},getModules:async()=>{try{return(await R("/api/permissions/modules")).data}catch(s){return d.value=s.message||"Failed to fetch modules",[]}},getActions:async()=>{try{return(await R("/api/permissions/actions")).data}catch(s){return d.value=s.message||"Failed to fetch actions",[]}},searchPermissions:async s=>{y.search=s,await r(1)},filterPermissions:async s=>{Object.assign(y,s),await r(1)},resetFilters:async()=>{Object.assign(y,{search:"",module:"",action:"",sort_by:"name",sort_order:"asc"}),await r(1)},nextPage:()=>{O.value&&r(V.current_page+1)},prevPage:()=>{F.value&&r(V.current_page-1)},goToPage:s=>{s>=1&&s<=V.last_page&&r(s)}}}const Je=re({__name:"RoleFormModal",props:{modelValue:{type:Boolean},role:{}},emits:["update:modelValue","saved"],setup(w,{emit:b}){const S=w,D=b,{createRole:M,updateRole:m}=ne(),d=_(),V=_(!1),y=_(!1),p=_({name:"",display_name:"",description:"",is_active:!0}),v=[r=>!!r||"Role name is required",r=>r&&r.length>=3||"Role name must be at least 3 characters",r=>/^[a-zA-Z0-9_-]+$/.test(r)||"Role name can only contain letters, numbers, underscores, and hyphens"],E=[r=>!!r||"Display name is required",r=>r&&r.length>=3||"Display name must be at least 3 characters"],O=C({get:()=>S.modelValue,set:r=>D("update:modelValue",r)}),F=C(()=>{var r;return!!((r=S.role)!=null&&r.id)}),U=()=>{p.value={name:"",display_name:"",description:"",is_active:!0},d.value&&d.value.resetValidation()},$=()=>{D("update:modelValue",!1)},j=async()=>{var r;if((r=d.value)!=null&&r.validate()){y.value=!0;try{F.value?await m(p.value.id,p.value):await M(p.value),D("saved"),$()}catch(f){console.error("Error saving role:",f)}finally{y.value=!1}}};return Z(()=>S.role,r=>{r?p.value={id:r.id,name:r.name||"",display_name:r.display_name||"",description:r.description||"",is_active:r.is_active!==void 0?r.is_active:!0}:U()},{immediate:!0}),Z(()=>S.modelValue,r=>{r||U()}),(r,f)=>(z(),J(we,{modelValue:O.value,"onUpdate:modelValue":f[5]||(f[5]=T=>O.value=T),"max-width":"600px",persistent:""},{default:a(()=>[e(I,null,{default:a(()=>[e(ee,{class:"text-h5 pa-4"},{default:a(()=>[u("span",null,k(F.value?"Edit Role":"Create New Role"),1),e(ae),e(P,{icon:"",variant:"text",onClick:$},{default:a(()=>[e(L,null,{default:a(()=>f[6]||(f[6]=[x("mdi-close")])),_:1,__:[6]})]),_:1})]),_:1}),e(G,{class:"pa-4"},{default:a(()=>[e(Ae,{ref_key:"formRef",ref:d,modelValue:V.value,"onUpdate:modelValue":f[4]||(f[4]=T=>V.value=T),onSubmit:Ce(j,["prevent"])},{default:a(()=>[e(H,null,{default:a(()=>[e(N,{cols:"12"},{default:a(()=>[e(se,{modelValue:p.value.name,"onUpdate:modelValue":f[0]||(f[0]=T=>p.value.name=T),label:"Role Name",rules:v,variant:"outlined",required:"","prepend-inner-icon":"mdi-shield-account"},null,8,["modelValue"])]),_:1}),e(N,{cols:"12"},{default:a(()=>[e(se,{modelValue:p.value.display_name,"onUpdate:modelValue":f[1]||(f[1]=T=>p.value.display_name=T),label:"Display Name",rules:E,variant:"outlined",required:"","prepend-inner-icon":"mdi-format-title"},null,8,["modelValue"])]),_:1}),e(N,{cols:"12"},{default:a(()=>[e(ze,{modelValue:p.value.description,"onUpdate:modelValue":f[2]||(f[2]=T=>p.value.description=T),label:"Description",variant:"outlined",rows:"3","prepend-inner-icon":"mdi-text-long"},null,8,["modelValue"])]),_:1}),e(N,{cols:"12"},{default:a(()=>[e(Ne,{modelValue:p.value.is_active,"onUpdate:modelValue":f[3]||(f[3]=T=>p.value.is_active=T),label:"Active",color:"primary",inset:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(Se,{class:"pa-4"},{default:a(()=>[e(ae),e(P,{variant:"text",onClick:$,disabled:y.value},{default:a(()=>f[7]||(f[7]=[x(" Cancel ")])),_:1,__:[7]},8,["disabled"]),e(P,{color:"primary",variant:"flat",onClick:j,loading:y.value,disabled:!V.value},{default:a(()=>[x(k(F.value?"Update":"Create")+" Role ",1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),qe=ue(Je,[["__scopeId","data-v-a47fbbef"]]),Ge={class:"d-flex align-center justify-space-between w-100"},He={class:"text-h6"},Ke={class:"d-flex align-center"},Qe={class:"ms-2"},We={class:"text-subtitle-2"},Xe={class:"text-caption text-medium-emphasis"},Ze={key:0,class:"text-caption text-disabled mt-1"},Ye=re({__name:"PermissionManagementModal",props:{modelValue:{type:Boolean},role:{}},emits:["update:modelValue","saved"],setup(w,{emit:b}){const S=w,D=b,{permissions:M,fetchPermissions:m}=Re(),{updateRolePermissions:d}=ne(),V=_(!1),y=_(""),p=_(""),v=_([]),E=_([]),O=C({get:()=>S.modelValue,set:c=>D("update:modelValue",c)}),F=C(()=>{let c=M.value;if(y.value){const l=y.value.toLowerCase();c=c.filter(n=>{var g;return n.name.toLowerCase().includes(l)||n.display_name.toLowerCase().includes(l)||((g=n.description)==null?void 0:g.toLowerCase().includes(l))})}return p.value&&(c=c.filter(l=>l.name.startsWith(p.value.toLowerCase()))),c}),U=C(()=>{const c={};return F.value.forEach(l=>{const n=l.name.split(".")[0],g=n.charAt(0).toUpperCase()+n.slice(1);c[g]||(c[g]=[]),c[g].push(l)}),Object.entries(c).map(([l,n])=>({name:l,permissions:n,selectedCount:n.filter(g=>v.value.includes(g.id)).length})).sort((l,n)=>l.name.localeCompare(n.name))}),$=C(()=>{const c=new Set;return M.value.forEach(l=>{const n=l.name.split(".")[0];c.add(n.charAt(0).toUpperCase()+n.slice(1))}),Array.from(c).sort()});Z(()=>S.role,c=>{c!=null&&c.permissions?v.value=c.permissions.map(l=>l.id):v.value=[]},{immediate:!0}),Z(()=>S.modelValue,c=>{c&&M.value.length===0&&m()});const j=()=>{D("update:modelValue",!1)},r=c=>{const l=v.value.indexOf(c);l>-1?v.value.splice(l,1):v.value.push(c)},f=()=>{v.value=F.value.map(c=>c.id)},T=()=>{v.value=[]},Q=()=>{const c=F.value.map(n=>n.id);if(c.every(n=>v.value.includes(n)))v.value=v.value.filter(n=>!c.includes(n));else{const n=c.filter(g=>!v.value.includes(g));v.value.push(...n)}},W=async()=>{var c;if((c=S.role)!=null&&c.id){V.value=!0;try{await d(S.role.id,v.value),D("saved"),j()}catch(l){console.error("Error saving permissions:",l)}finally{V.value=!1}}};return Pe(()=>{M.value.length===0&&m(),E.value=[0,1,2]}),(c,l)=>(z(),J(we,{modelValue:O.value,"onUpdate:modelValue":l[4]||(l[4]=n=>O.value=n),"max-width":"900px",persistent:"",scrollable:""},{default:a(()=>[e(I,{height:"80vh"},{default:a(()=>[e(ee,{class:"text-h5 pa-4"},{default:a(()=>{var n;return[u("span",null,"Manage Permissions - "+k((n=c.role)==null?void 0:n.display_name),1),e(ae),e(P,{icon:"",variant:"text",onClick:j},{default:a(()=>[e(L,null,{default:a(()=>l[5]||(l[5]=[x("mdi-close")])),_:1,__:[5]})]),_:1})]}),_:1}),e(G,{class:"pa-0"},{default:a(()=>[e(De,{class:"pa-4"},{default:a(()=>[e(H,{class:"mb-4"},{default:a(()=>[e(N,{cols:"12",md:"6"},{default:a(()=>[e(se,{modelValue:y.value,"onUpdate:modelValue":l[0]||(l[0]=n=>y.value=n),label:"Search permissions","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),e(N,{cols:"12",md:"6"},{default:a(()=>[e(Te,{modelValue:p.value,"onUpdate:modelValue":l[1]||(l[1]=n=>p.value=n),items:$.value,label:"Filter by group","prepend-inner-icon":"mdi-filter",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(H,{class:"mb-4"},{default:a(()=>[e(N,{cols:"12"},{default:a(()=>[e(P,{variant:"outlined",size:"small","prepend-icon":"mdi-checkbox-multiple-marked",onClick:f,class:"me-2"},{default:a(()=>l[6]||(l[6]=[x(" Select All ")])),_:1,__:[6]}),e(P,{variant:"outlined",size:"small","prepend-icon":"mdi-checkbox-multiple-blank-outline",onClick:T,class:"me-2"},{default:a(()=>l[7]||(l[7]=[x(" Select None ")])),_:1,__:[7]}),e(P,{variant:"outlined",size:"small","prepend-icon":"mdi-swap-horizontal",onClick:Q,class:"me-2"},{default:a(()=>l[8]||(l[8]=[x(" Toggle All ")])),_:1,__:[8]})]),_:1})]),_:1}),e(Oe,{modelValue:E.value,"onUpdate:modelValue":l[3]||(l[3]=n=>E.value=n),multiple:"",variant:"accordion"},{default:a(()=>[(z(!0),q(Ve,null,be(U.value,n=>(z(),J(Me,{key:n.name,title:n.name,text:`${n.selectedCount}/${n.permissions.length} selected`},{title:a(()=>[u("div",Ge,[u("span",He,k(n.name),1),e(ie,{color:n.selectedCount===n.permissions.length?"success":n.selectedCount>0?"warning":"default",size:"small",class:"me-4"},{default:a(()=>[x(k(n.selectedCount)+"/"+k(n.permissions.length),1)]),_:2},1032,["color"])])]),text:a(()=>[e(H,null,{default:a(()=>[(z(!0),q(Ve,null,be(n.permissions,g=>(z(),J(N,{key:g.id,cols:"12",md:"6",lg:"4"},{default:a(()=>[e(I,{variant:"outlined",class:Ue(["permission-card",{"permission-selected":v.value.includes(g.id)}]),onClick:X=>r(g.id)},{default:a(()=>[e(G,{class:"pa-3"},{default:a(()=>[u("div",Ke,[e(Ee,{"model-value":v.value.includes(g.id),onClick:l[2]||(l[2]=Ce(()=>{},["stop"])),"onUpdate:modelValue":X=>r(g.id),density:"compact","hide-details":""},null,8,["model-value","onUpdate:modelValue"]),u("div",Qe,[u("div",We,k(g.display_name),1),u("div",Xe,k(g.name),1),g.description?(z(),q("div",Ze,k(g.description),1)):Y("",!0)])])]),_:2},1024)]),_:2},1032,["class","onClick"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["title","text"]))),128))]),_:1},8,["modelValue"]),U.value.length===0?(z(),J(je,{key:0,class:"text-center pa-8",color:"surface-variant",rounded:""},{default:a(()=>[e(L,{size:"64",color:"disabled"},{default:a(()=>l[9]||(l[9]=[x("mdi-shield-search")])),_:1,__:[9]}),l[10]||(l[10]=u("div",{class:"text-h6 mt-4"},"No permissions found",-1)),l[11]||(l[11]=u("div",{class:"text-body-2 text-medium-emphasis"}," Try adjusting your search or filter criteria ",-1))]),_:1,__:[10,11]})):Y("",!0)]),_:1})]),_:1}),e(Se,{class:"pa-4"},{default:a(()=>[e(ie,{color:"primary",variant:"outlined"},{default:a(()=>[x(k(v.value.length)+" permission(s) selected ",1)]),_:1}),e(ae),e(P,{variant:"text",onClick:j,disabled:V.value},{default:a(()=>l[12]||(l[12]=[x(" Cancel ")])),_:1,__:[12]},8,["disabled"]),e(P,{color:"primary",variant:"flat",onClick:W,loading:V.value},{default:a(()=>l[13]||(l[13]=[x(" Save Permissions ")])),_:1,__:[13]},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),ea=ue(Ye,[["__scopeId","data-v-079d65cd"]]),aa={class:"text-h4 font-weight-bold mb-2"},sa={class:"d-flex gap-3"},ta={class:"text-h4 font-weight-bold"},la={class:"text-h4 font-weight-bold"},oa={class:"text-h4 font-weight-bold"},ia={key:0,class:"text-center pa-12"},na={key:1,class:"text-center pa-12"},ra={class:"text-body-1 text-medium-emphasis mb-6"},ua={key:2},da={class:"text-center pa-6"},ca={class:"pa-4"},ma={class:"d-flex align-center"},pa={class:"text-body-1 font-weight-medium"},va={class:"text-body-2 text-medium-emphasis"},fa={class:"pa-4"},_a={class:"d-flex align-center"},ya={class:"text-body-1"},ga={class:"pa-4"},ha={class:"d-flex align-center"},ba={class:"text-body-1"},Va={class:"pa-4"},xa={class:"pa-4"},ka={class:"text-body-2 text-medium-emphasis"},Ca={class:"pa-4"},Pa={class:"d-flex align-center justify-end"},wa=re({__name:"roles-main",setup(w){const{roles:b,loading:S,fetchRoles:D,deleteRole:M,updateRole:m}=ne(),{permissions:d,fetchPermissions:V}=Re(),y=_(""),p=_(""),v=_(!1),E=_(!1),O=_(!1),F=_(!1),U=_(null),$=_(null),j=[{title:"Role",key:"name",sortable:!0},{title:"Users",key:"users_count",sortable:!0},{title:"Permissions",key:"permissions_count",sortable:!0},{title:"Status",key:"is_active",sortable:!0},{title:"Created",key:"created_at",sortable:!0},{title:"Actions",key:"actions",sortable:!1}],r=C(()=>S.value),f=C(()=>Array.isArray(b.value)&&b.value.length>0),T=C(()=>!r.value&&!f.value),Q=C(()=>{if(!Array.isArray(b.value))return[];let h=b.value;if(y.value){const i=y.value.toLowerCase();h=h.filter(s=>{var t,o;return s.name.toLowerCase().includes(i)||((t=s.display_name)==null?void 0:t.toLowerCase().includes(i))||((o=s.description)==null?void 0:o.toLowerCase().includes(i))})}return p.value&&(p.value==="active"?h=h.filter(i=>i.is_active):p.value==="inactive"&&(h=h.filter(i=>!i.is_active))),h}),W=C(()=>Array.isArray(b.value)?b.value.filter(h=>h.is_active).length:0),c=C(()=>Array.isArray(d.value)?d.value.length:0),l=async()=>{await Promise.all([D(),V()])},n=$e(()=>{},300),g=()=>{},X=()=>{y.value="",p.value=""},de=h=>{U.value=h,E.value=!0},ce=h=>{U.value=h,O.value=!0},me=h=>{$.value=h,F.value=!0},pe=async()=>{$.value&&(await M($.value.id),F.value=!1,$.value=null)},ve=async h=>{await m(h.id,{is_active:!h.is_active})},fe=h=>{},te=()=>{v.value=!1,E.value=!1,U.value=null},_e=()=>{te(),l()},ye=()=>{O.value=!1,U.value=null,l()},ge=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return Pe(()=>{l()}),(h,i)=>{var s,t;return z(),q("div",null,[e(I,{class:"mb-6"},{default:a(()=>[e(ee,{class:"d-flex justify-space-between align-center pa-6"},{default:a(()=>[u("div",null,[u("h1",aa,[e(L,{icon:"tabler-users-group",class:"me-3 text-primary"}),i[6]||(i[6]=x(" Role Management "))]),i[7]||(i[7]=u("p",{class:"text-subtitle-1 text-medium-emphasis"}," Kelola role pengguna dan izin akses sistem ",-1))]),u("div",sa,[e(P,{color:"primary","prepend-icon":"tabler-plus",onClick:i[0]||(i[0]=o=>v.value=!0)},{default:a(()=>i[8]||(i[8]=[x(" Tambah Role ")])),_:1,__:[8]}),e(P,{variant:"outlined",color:"secondary","prepend-icon":"tabler-refresh",loading:r.value,onClick:l},{default:a(()=>i[9]||(i[9]=[x(" Refresh ")])),_:1,__:[9]},8,["loading"])])]),_:1})]),_:1}),e(H,{class:"mb-6"},{default:a(()=>[e(N,{cols:"12",md:"4"},{default:a(()=>[e(I,null,{default:a(()=>[e(G,{class:"text-center pa-6"},{default:a(()=>[e(K,{size:"56",color:"primary",class:"mb-4"},{default:a(()=>[e(L,{icon:"tabler-users-group",size:"28"})]),_:1}),u("div",ta,k(xe(b).length),1),i[10]||(i[10]=u("div",{class:"text-subtitle-2 text-medium-emphasis"},"Total Roles",-1))]),_:1,__:[10]})]),_:1})]),_:1}),e(N,{cols:"12",md:"4"},{default:a(()=>[e(I,null,{default:a(()=>[e(G,{class:"text-center pa-6"},{default:a(()=>[e(K,{size:"56",color:"success",class:"mb-4"},{default:a(()=>[e(L,{icon:"tabler-check-circle",size:"28"})]),_:1}),u("div",la,k(W.value),1),i[11]||(i[11]=u("div",{class:"text-subtitle-2 text-medium-emphasis"},"Active Roles",-1))]),_:1,__:[11]})]),_:1})]),_:1}),e(N,{cols:"12",md:"4"},{default:a(()=>[e(I,null,{default:a(()=>[e(G,{class:"text-center pa-6"},{default:a(()=>[e(K,{size:"56",color:"info",class:"mb-4"},{default:a(()=>[e(L,{icon:"tabler-shield-check",size:"28"})]),_:1}),u("div",oa,k(c.value),1),i[12]||(i[12]=u("div",{class:"text-subtitle-2 text-medium-emphasis"},"Total Permissions",-1))]),_:1,__:[12]})]),_:1})]),_:1})]),_:1}),e(I,{class:"mb-6"},{default:a(()=>[e(ee,{class:"pa-6 pb-4"},{default:a(()=>[e(L,{icon:"tabler-filter",class:"me-2"}),i[13]||(i[13]=x(" Filter & Pencarian "))]),_:1,__:[13]}),e(G,{class:"pa-6 pt-0"},{default:a(()=>[e(H,null,{default:a(()=>[e(N,{cols:"12",md:"6"},{default:a(()=>[e(se,{modelValue:y.value,"onUpdate:modelValue":i[1]||(i[1]=o=>y.value=o),label:"Cari role...","prepend-inner-icon":"tabler-search",variant:"outlined",density:"compact",clearable:"",onInput:xe(n)},null,8,["modelValue","onInput"])]),_:1}),e(N,{cols:"12",md:"4"},{default:a(()=>[e(Te,{modelValue:p.value,"onUpdate:modelValue":[i[2]||(i[2]=o=>p.value=o),g],label:"Status",items:[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}],variant:"outlined",density:"compact",clearable:""},{"prepend-item":a(()=>[e(Le,{title:"Semua Status",value:""}),e(Ie)]),_:1},8,["modelValue"])]),_:1}),e(N,{cols:"12",md:"2"},{default:a(()=>[e(P,{variant:"outlined",color:"secondary",onClick:X,block:""},{default:a(()=>i[14]||(i[14]=[x(" Clear ")])),_:1,__:[14]})]),_:1})]),_:1})]),_:1})]),_:1}),e(I,null,{default:a(()=>[r.value&&!f.value?(z(),q("div",ia,[e(ke,{indeterminate:"",color:"primary",size:"64"}),i[15]||(i[15]=u("div",{class:"text-h6 mt-4"},"Memuat roles...",-1))])):T.value?(z(),q("div",na,[e(K,{size:"120",color:"grey-lighten-3",class:"mb-6"},{default:a(()=>[e(L,{icon:"tabler-users-group",size:"60",color:"grey-darken-1"})]),_:1}),i[17]||(i[17]=u("h3",{class:"text-h5 font-weight-bold mb-4"},"Tidak ada roles ditemukan",-1)),u("p",ra,k(y.value?"Tidak ada roles yang sesuai dengan pencarian Anda":"Mulai dengan menambahkan role pertama"),1),y.value?Y("",!0):(z(),J(P,{key:0,color:"primary","prepend-icon":"tabler-plus",onClick:i[3]||(i[3]=o=>v.value=!0)},{default:a(()=>i[16]||(i[16]=[x(" Tambah Role Pertama ")])),_:1,__:[16]}))])):(z(),q("div",ua,[e(Be,{headers:j,items:Q.value,loading:r.value,"item-value":"id","<!--":"",Loading:"",State:"","--":""},{loading:a(()=>[u("div",da,[e(ke,{indeterminate:"",color:"primary",size:"40"}),i[18]||(i[18]=u("div",{class:"text-body-2 mt-2"},"Memuat roles...",-1))])]),item:a(({item:o})=>[u("tr",null,[u("td",ca,[u("div",ma,[e(K,{color:"primary",class:"me-3"},{default:a(()=>[e(L,{icon:"tabler-users-group"})]),_:1}),u("div",null,[u("div",pa,k(o.display_name||o.name),1),u("div",va,k(o.description),1)])])]),u("td",fa,[u("div",_a,[u("span",ya,k(o.users_count||0),1),(o.users_count??0)>0?(z(),J(P,{key:0,variant:"text",size:"small",color:"primary",class:"ms-2",onClick:A=>fe(o)},{default:a(()=>i[19]||(i[19]=[x(" Lihat ")])),_:2,__:[19]},1032,["onClick"])):Y("",!0)])]),u("td",ga,[u("div",ha,[u("span",ba,k(o.permissions_count||0),1),e(P,{variant:"text",size:"small",color:"primary",class:"ms-2",onClick:A=>ce(o)},{default:a(()=>i[20]||(i[20]=[x(" Kelola ")])),_:2,__:[20]},1032,["onClick"])])]),u("td",Va,[e(ie,{color:o.is_active?"success":"error",variant:"tonal",size:"small"},{default:a(()=>[x(k(o.is_active?"Aktif":"Nonaktif"),1)]),_:2},1032,["color"])]),u("td",xa,[u("span",ka,k(ge(o.created_at)),1)]),u("td",Ca,[u("div",Pa,[e(oe,{text:"Edit Role"},{activator:a(({props:A})=>[e(P,le(A,{icon:"tabler-edit",variant:"text",size:"small",color:"primary",onClick:B=>de(o)}),null,16,["onClick"])]),_:2},1024),e(oe,{text:o.is_active?"Nonaktifkan":"Aktifkan"},{activator:a(({props:A})=>[e(P,le(A,{icon:o.is_active?"tabler-x":"tabler-check",variant:"text",size:"small",color:o.is_active?"error":"success",onClick:B=>ve(o)}),null,16,["icon","color","onClick"])]),_:2},1032,["text"]),e(oe,{text:"Hapus Role"},{activator:a(({props:A})=>[e(P,le(A,{icon:"tabler-trash",variant:"text",size:"small",color:"error",disabled:(o.users_count??0)>0,onClick:B=>me(o)}),null,16,["disabled","onClick"])]),_:2},1024)])])])]),_:1},8,["items","loading"])]))]),_:1}),e(qe,{"model-value":v.value||E.value,role:U.value,mode:E.value?"edit":"create","onUpdate:modelValue":te,onSaved:_e},null,8,["model-value","role","mode"]),e(ea,{"model-value":O.value,role:U.value,"onUpdate:modelValue":i[4]||(i[4]=o=>O.value=o),onUpdated:ye},null,8,["model-value","role"]),e(Fe,{show:F.value,title:"Delete Role",message:`Are you sure you want to delete the role '${((s=$.value)==null?void 0:s.display_name)||((t=$.value)==null?void 0:t.name)}'? This action cannot be undone.`,"confirm-text":"Delete","confirm-class":"bg-red-600 hover:bg-red-700",onConfirm:pe,onCancel:i[5]||(i[5]=o=>F.value=!1)},null,8,["show","message"])])}}}),is=ue(wa,[["__scopeId","data-v-7892e638"]]);export{is as default};

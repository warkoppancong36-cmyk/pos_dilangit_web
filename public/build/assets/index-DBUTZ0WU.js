import{r as g,V as T,w as me,bi as ne,d as we,ab as Se,D as xe,c as k,e as i,b as r,f as p,t as v,a1 as S,aK as De,g as G,l as P,F as ie,i as pe,ax as Pe,X as V,m as z,o as u,s as _,v as ce,G as ze,a0 as Ie,_ as Te}from"./main-BbV-QHNu.js";import{P as B}from"./PosApi-CHsyXwlu.js";import Ae from"./CashDrawerDialog-W_RMUnJd.js";import qe from"./PaymentDialog-WZ-l0bGh.js";import Ee from"./TransactionHistoryDialog-BeTsHGoc.js";import{V as $e}from"./VAvatar-D4fNYJqq.js";import{V as Be}from"./VTextField-Bqh_1Ihc.js";import{V as ke}from"./VSelect-DM0I1Ks-.js";import{V as ue}from"./VChip-D0AJDft_.js";import{V as Ke}from"./VDialog-Cz2Tmn75.js";import{V as Fe}from"./VSnackbar-DsGmHe-q.js";import{V as Ue}from"./VImg-BXGMWPXF.js";import{V as je,b as He,c as Le}from"./VCard-Bai8mtM3.js";import{V as Me}from"./VCardText-BSDZr7T_.js";import{V as Re}from"./VSpacer-DmnDF-hX.js";import"./auth-CuuXRWj5.js";import"./VDivider-BIpjcLOZ.js";import"./VRow-jlL5ROeG.js";/* empty css              */import"./VForm-CGAz2q98.js";import"./forwardRefs-B931MWyl.js";import"./VTextarea-DEN_PGaT.js";import"./DiscountCodeInput-DN3Sj5hl.js";import"./PromotionSuggestions-PRV-UU0V.js";import"./VCheckboxBtn-I_MNMVy5.js";import"./EditOrderDialog-DMX0mwpL.js";import"./OrderDetailDialog-BPEt0LBR.js";import"./VTable-ILg0WXHP.js";import"./VDataTable-orTo-ryG.js";import"./filter-COMQ-_5E.js";import"./VList-BM_3KR1o.js";import"./VOverlay-DWfgh9sx.js";import"./VMenu-BkfQU2CK.js";const Ne=()=>{const b=g([]),H=g(null),y=g(0),h=g("amount"),J=g(0),X=g(!1),C=g(null),w=T(()=>b.value.reduce((s,o)=>{const d=o.item_type==="package"?o.package_price||o.unit_price||0:o.selling_price||o.unit_price||0;return s+d*o.quantity},0)),I=T(()=>y.value?h.value==="percentage"?w.value*y.value/100:y.value:0),q=T(()=>(w.value-I.value)*J.value/100),K=T(()=>Math.max(0,w.value-I.value+q.value)),W=T(()=>b.value.reduce((s,o)=>s+o.quantity,0)),L=T(()=>b.value.length===0),x=T(()=>({subtotal:w.value,discountAmount:I.value,discountType:h.value,taxAmount:q.value,totalAmount:K.value})),M=(s,o=1)=>{try{const d=s.item_type==="package"?s.id_package:s.id_product,m=b.value.find(l=>s.item_type==="package"?l.id_package===d&&l.item_type==="package":l.id_product===d&&l.item_type!=="package"),f=(s.item_type==="package",s.stock||0);if(m){const l=m.quantity+o;if(l<=f)m.quantity=l;else throw new Error(`Stok tidak mencukupi. Tersedia: ${f}`)}else if(o<=f)b.value.push({...s,quantity:o,stock:f});else throw new Error(`Stok tidak mencukupi. Tersedia: ${f}`);return C.value=null,!0}catch(d){return C.value=d instanceof Error?d.message:"Gagal menambahkan ke keranjang",!1}},F=(s,o=!1)=>{const d=b.value.findIndex(m=>o?m.id_package===s&&m.item_type==="package":m.id_product===s&&m.item_type!=="package");d>-1&&b.value.splice(d,1)},U=(s,o,d=!1)=>{var f;const m=b.value.find(l=>d?l.id_package===s&&l.item_type==="package":l.id_product===s&&l.item_type!=="package");if(m)if(o<=0)F(s,d);else{const l=m.item_type==="package"?((f=m.stock_info)==null?void 0:f.available_stock)||m.stock||0:m.stock||0;if(o<=l)m.quantity=o;else return C.value=`Stok tidak mencukupi. Tersedia: ${l}`,!1}return!0},D=()=>{b.value=[],H.value=null,y.value=0,h.value="amount",C.value=null},R=(s,o="amount")=>o==="percentage"&&s>100?(C.value="Diskon persentase tidak boleh lebih dari 100%",!1):o==="amount"&&s>w.value?(C.value="Diskon tidak boleh lebih dari subtotal",!1):(y.value=s,h.value=o,C.value=null,!0),Y=()=>{y.value=0,h.value="amount"},Z=s=>{H.value=s},j=async(s,o="takeaway")=>{try{if(X.value=!0,C.value=null,L.value)throw new Error("Keranjang kosong");const d={order_type:o,id_customer:H.value||void 0,guest_count:1,notes:s.notes},f=(await B.createOrder(d)).data;for(const l of b.value){const A={item_type:l.item_type||"product",quantity:l.quantity,notes:""};l.item_type==="package"?(A.id_package=l.id_package,A.unit_price=l.package_price||l.unit_price,A.total_price=(l.package_price||l.unit_price||0)*l.quantity):(A.id_product=l.id_product,A.id_variant=l.id_variant||void 0,A.unit_price=l.selling_price||l.unit_price,A.total_price=(l.selling_price||l.unit_price||0)*l.quantity),await B.addItem(f.id_order,A)}return I.value>0&&await B.applyDiscount(f.id_order,{discount_type:h.value==="percentage"?"percentage":"fixed",discount_value:h.value==="percentage"?y.value:I.value}),await B.processPayment(f.id_order,{payment_method:s.payment_method,amount:s.amount,reference_number:s.reference_number,notes:s.notes}),D(),f}catch(d){throw C.value=d instanceof Error?d.message:"Gagal membuat pesanan",d}finally{X.value=!1}},N=()=>{const s=[];return L.value&&s.push("Keranjang kosong"),b.value.forEach(o=>{o.quantity>o.stock&&s.push(`Stok ${o.name} tidak mencukupi`)}),I.value>w.value&&s.push("Diskon tidak boleh lebih dari subtotal"),{isValid:s.length===0,errors:s}},ae=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(s),E=s=>b.value.find(o=>o.id_product===s),te=s=>{const o=E(s);return o?o.quantity:0},oe=(s,o=1)=>te(s.id_product)+o<=s.stock;me([b,y,h],()=>{const s=N();!s.isValid&&s.errors.length>0?C.value=s.errors[0]:C.value=null},{deep:!0}),me([y,h,w],()=>{h.value==="percentage"&&y.value>100&&(y.value=100),I.value>w.value&&(h.value==="amount"?y.value=w.value:y.value=100)});const se=(s,o)=>o==="kitchen"?s.available_in_kitchen!==!1:o==="bar"?s.available_in_bar!==!1:!1,O=s=>s.available_in_kitchen!==!1&&s.available_in_bar!==!1,ee=s=>{const o=[];return s.available_in_kitchen!==!1&&o.push("kitchen"),s.available_in_bar!==!1&&o.push("bar"),o},le=(s,o)=>s.every(d=>se(d,o)),re=s=>{const o=[],d=[],m=[];return s.forEach(f=>{const l=ee(f);l.length===1?l[0]==="kitchen"?o.push(f):l[0]==="bar"&&d.push(f):l.length===2&&m.push(f)}),{kitchen:o,bar:d,both:m}};return{cartItems:ne(b),selectedCustomer:H,discountAmount:y,discountType:h,taxRate:J,loading:ne(X),error:ne(C),subtotal:w,discountValue:I,taxValue:q,totalAmount:K,cartCount:W,isEmpty:L,orderSummary:x,addToCart:M,removeFromCart:F,updateQuantity:U,clearCart:D,applyDiscount:R,removeDiscount:Y,setCustomer:Z,createOrder:j,validateCart:N,formatCurrency:ae,getCartItemById:E,getItemQuantity:te,canAddToCart:oe,isAvailableInStation:se,isAvailableInBothStations:O,getAvailableStations:ee,canProcessOrderInStation:le,getStationRequirements:re}},Oe={class:"pos-layout"},Qe={class:"pos-header"},Ge={class:"header-content"},Je={class:"header-left"},Xe={class:"logo-section"},We={class:"header-info"},Ye={class:"header-meta"},Ze={class:"header-actions"},ea={class:"pos-main"},aa={class:"product-panel"},ta={class:"filter-bar"},sa={class:"search-section"},ia={class:"filter-section"},oa={class:"view-mode-toggle"},la={class:"products-container"},ra={key:0,class:"products-grid"},na=["onClick"],ca={class:"product-image"},ua={class:"product-image-wrapper"},da={key:1,class:"product-image-placeholder"},_a={class:"placeholder-text"},ma={key:0,class:"package-badge",title:"Paket Bundle"},pa={key:0},ka={key:1},va={key:1,class:"station-badges"},ga={key:0,class:"station-badge kitchen-badge",title:"Tersedia di Kitchen"},ya={key:1,class:"station-badge bar-badge",title:"Tersedia di Bar"},fa={key:2,class:"status-indicator out-of-stock-indicator"},ba={key:3,class:"status-indicator no-price-indicator"},ha={key:4,class:"cart-indicator"},Ca={class:"product-info"},Va={class:"product-name"},wa={class:"product-sku"},Sa={class:"product-footer"},xa={key:1,class:"empty-state"},Da={key:2,class:"empty-state"},Pa={class:"empty-title"},za={class:"empty-text"},Ia={class:"cart-panel"},Ta={class:"cart-header"},Aa={class:"cart-title"},qa={class:"cart-content"},Ea={key:0,class:"cart-items"},$a={class:"item-info"},Ba={class:"item-name"},Ka={class:"item-price"},Fa={class:"item-controls"},Ua={class:"quantity-controls"},ja={class:"quantity"},Ha={class:"item-total"},La={key:1,class:"empty-cart"},Ma={key:0,class:"cart-summary"},Ra={class:"summary-row"},Na={class:"summary-value"},Oa={class:"summary-row"},Qa={class:"summary-value"},Ga={class:"summary-row"},Ja={class:"summary-value summary-total"},Xa=we({__name:"index",setup(b){const H=Se(),{cartItems:y,subtotal:h,cartCount:J,addToCart:X,removeFromCart:C,updateQuantity:w,clearCart:I}=Ne(),q=g(!1),K=g([]),W=g([]),L=g([]),x=g(""),M=g(""),F=g(null),U=g(null),D=g("products"),R=g(!1),Y=g(!1),Z=g(!1),j=g(!1),N=g(""),ae=g({}),E=g({show:!1,message:"",color:"success"});setInterval(()=>{N.value=new Date().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})},1e3);const te=T(()=>H.user);T(()=>new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}));const oe=T(()=>y.value.map(t=>({...t}))),se=[{title:"Kitchen",value:"kitchen"},{title:"Bar",value:"bar"}],O=T(()=>{let t=K.value;if(D.value==="products"?t=t.filter(e=>e.item_type!=="package"):t=t.filter(e=>e.item_type==="package"),M.value){const e=M.value.toLowerCase();t=t.filter(c=>{var a,n;return c.name.toLowerCase().includes(e)||((a=c.sku)==null?void 0:a.toLowerCase().includes(e))||((n=c.barcode)==null?void 0:n.toLowerCase().includes(e))})}return F.value&&(t=t.filter(e=>e.id_category===F.value)),U.value&&D.value==="products"&&(t=t.filter(e=>U.value==="kitchen"?e.available_in_kitchen!==!1:U.value==="bar"?e.available_in_bar!==!1:!0)),t}),ee=async()=>{try{q.value=!0;const[t,e]=await Promise.all([B.getProducts(),B.getPackages()]);console.log("ðŸ“¦ Products Response:",t),console.log("ðŸŽ Packages Response:",e);const c=((t==null?void 0:t.data)||[]).map(n=>{var $,de,_e;return{id_product:n.id_product,name:n.name,sku:n.sku,item_type:"product",image:n.image_url||n.image,id_category:($=n.category)==null?void 0:$.id_category,selling_price:parseFloat(n.price||n.selling_price||0),available_in_kitchen:n.available_in_kitchen??!0,available_in_bar:n.available_in_bar??!0,stock:((de=n.stock_info)==null?void 0:de.available_stock)||((_e=n.stock_info)==null?void 0:_e.current_stock)||n.stock||0,stock_info:n.stock_info}}),a=((e==null?void 0:e.data)||[]).map(n=>{var $;return{id_package:n.id_package||n.id,name:n.name,sku:n.sku,item_type:"package",image:n.image,id_category:($=n.category)==null?void 0:$.id_category,package_price:parseFloat(n.package_price||0),unit_price:n.unit_price,total_price:n.total_price,stock:n.stock||0,stock_info:n.stock_info,available_in_kitchen:!0,available_in_bar:!0}});K.value=[...c,...a],console.log("âœ… Total items:",K.value.length,{products:c.length,packages:a.length})}catch(t){console.error("âŒ Error loading products:",t);try{const e=await B.getProducts();K.value=((e==null?void 0:e.data)||[]).map(c=>{var a,n,$;return{id_product:c.id_product,id_package:c.id_package,name:c.name,sku:c.sku,item_type:c.item_type||"product",image:c.image_url||c.image,id_category:(a=c.category)==null?void 0:a.id_category,selling_price:c.item_type==="product"?parseFloat(c.price||c.selling_price||0):void 0,available_in_kitchen:c.available_in_kitchen??!0,available_in_bar:c.available_in_bar??!0,package_price:c.item_type==="package"?parseFloat(c.package_price||0):void 0,unit_price:c.unit_price,total_price:c.total_price,stock:((n=c.stock_info)==null?void 0:n.available_stock)||(($=c.stock_info)==null?void 0:$.current_stock)||c.stock||0,stock_info:c.stock_info}})}catch(e){console.error("âŒ Fallback also failed:",e)}}finally{q.value=!1}},le=async()=>{try{const t=await B.getCategories();t.success&&t.data&&(W.value=t.data)}catch(t){console.error("Error loading categories:",t),W.value=[{id_category:1,name:"Minuman"},{id_category:2,name:"Makanan"},{id_category:3,name:"Snack"}]}},re=async()=>{try{L.value=[{id_customer:1,name:"John Doe",phone:"0812345678",email:"john@example.com"},{id_customer:2,name:"Jane Smith",phone:"0812345679",email:"jane@example.com"},{id_customer:3,name:"Bob Johnson",phone:"0812345680",email:"bob@example.com"}]}catch(t){console.error("Error loading customers:",t)}},s=()=>{M.value=x.value},o=()=>{x.value="",M.value=""},d=t=>{if(console.log("addToCart called with:",{name:t.name,item_type:t.item_type,canAdd:m(t),stock:t.stock,price:t.package_price||t.selling_price,is_disabled:t.is_disabled}),!m(t)){(t.stock||0)<=0?console.warn("Stok tidak tersedia untuk produk:",t.name):t.selling_price||t.package_price||console.warn("Harga tidak tersedia untuk produk:",t.name);return}const e={...t,item_type:t.item_type||"product",id_product:t.id_product||0,id_package:t.id_package||0};console.log("Adding to cart:",e);const c=X(e);console.log("Add to cart result:",c)},m=t=>{if(t.is_disabled===!0)return!1;if(t.item_type==="package"){const e=(t.stock||0)>0,c=(t.package_price||t.unit_price||0)>0;return e&&c}return(t.stock||0)>0&&(t.selling_price||0)>0},f=t=>t<=0?"stock-low":t<10?"stock-medium":"stock-high",l=t=>{if(!t)return 0;const e=y.value.find(c=>c.id_product===t);return e?e.quantity:0},A=()=>{j.value=!0},ve=()=>{I(),j.value=!1},ge=t=>{console.error("ðŸ–¼ï¸ Image error for product ID:",t),ae.value[t]=!0},ye=t=>t.split(" ").slice(0,2).map(e=>e.charAt(0)).join("").toUpperCase(),fe=()=>{R.value=!0},be=t=>{E.value={show:!0,message:"Pembayaran berhasil diproses! ðŸŽ‰",color:"success"},R.value=!1,ee()},he=()=>{I()},Ce=()=>{Z.value=!0},Ve=()=>{Y.value=!0},Q=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(t);return xe(async()=>{N.value=new Date().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),await Promise.all([ee(),le(),re()])}),(t,e)=>{var c;return u(),k("div",Oe,[i("div",Qe,[i("div",Ge,[i("div",Je,[i("div",Xe,[r($e,{size:"40",color:"primary"},{default:p(()=>[r(V,{size:"20"},{default:p(()=>e[12]||(e[12]=[_("tabler-shopping-cart")])),_:1,__:[12]})]),_:1}),i("div",We,[e[14]||(e[14]=i("h3",{class:"pos-title"},"Point of Sale",-1)),i("div",Ye,[i("span",null,v(((c=te.value)==null?void 0:c.name)||"Administrator"),1),e[13]||(e[13]=i("span",null,"â€¢",-1)),i("span",null,v(N.value),1)])])])]),i("div",Ze,[r(S,{variant:"text",color:"primary","prepend-icon":"tabler-history",onClick:Ve},{default:p(()=>e[15]||(e[15]=[_(" Riwayat ")])),_:1,__:[15]}),r(S,{variant:"outlined",color:"success","prepend-icon":"tabler-receipt",onClick:Ce},{default:p(()=>e[16]||(e[16]=[_(" Cash Drawer ")])),_:1,__:[16]})])])]),i("div",ea,[i("div",aa,[i("div",ta,[i("div",sa,[r(Be,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=a=>x.value=a),placeholder:D.value==="packages"?"Cari paket, SKU...":"Cari produk, SKU, atau barcode...",density:"comfortable",variant:"solo","prepend-inner-icon":"tabler-search",clearable:"","hide-details":"",class:"search-input",onKeyup:De(s,["enter"]),"onClick:clear":o},null,8,["modelValue","placeholder"])]),i("div",ia,[i("div",oa,[r(S,{variant:D.value==="products"?"flat":"outlined",color:D.value==="products"?"primary":"default",size:"default",class:"toggle-btn",onClick:e[1]||(e[1]=a=>D.value="products")},{default:p(()=>[r(V,{icon:"tabler-package",start:"",size:"20"}),e[17]||(e[17]=_(" Produk "))]),_:1,__:[17]},8,["variant","color"]),r(S,{variant:D.value==="packages"?"flat":"outlined",color:D.value==="packages"?"success":"default",size:"default",class:"toggle-btn",onClick:e[2]||(e[2]=a=>D.value="packages")},{default:p(()=>[r(V,{icon:"tabler-gift",start:"",size:"20"}),e[18]||(e[18]=_(" Paket "))]),_:1,__:[18]},8,["variant","color"])]),r(ke,{modelValue:F.value,"onUpdate:modelValue":e[3]||(e[3]=a=>F.value=a),items:W.value,"item-title":"name","item-value":"id_category",placeholder:"Kategori",density:"comfortable",variant:"solo","prepend-inner-icon":"tabler-category",clearable:"","hide-details":"",style:{"min-inline-size":"180px"},class:"category-select"},null,8,["modelValue","items"]),r(ke,{modelValue:U.value,"onUpdate:modelValue":e[4]||(e[4]=a=>U.value=a),items:se,"item-title":"title","item-value":"value",placeholder:"Station",density:"comfortable",variant:"solo","prepend-inner-icon":"tabler-tools-kitchen-2",clearable:"","hide-details":"",style:{"min-inline-size":"150px"},class:"station-select"},null,8,["modelValue"]),O.value.length>0?(u(),G(ue,{key:0,color:"primary",variant:"tonal",size:"large"},{default:p(()=>[_(v(O.value.length)+" produk ",1)]),_:1})):P("",!0)])]),i("div",la,[!q.value&&O.value.length>0?(u(),k("div",ra,[(u(!0),k(ie,null,pe(O.value,a=>(u(),k("div",{key:a.id_product||a.id_package,class:ce(["product-item",{"out-of-stock":a.is_disabled===!0||(a.stock||0)<=0,"no-price":a.item_type==="package"?!(a.package_price||a.unit_price):!a.selling_price,disabled:!m(a),"package-item":a.item_type==="package"}]),onClick:n=>m(a)?d(a):null},[i("div",ca,[i("div",ua,[a.image&&!ae.value[a.id_product||a.id_package||0]?(u(),G(Ue,{key:0,src:a.image,class:"product-image-content",cover:"",onError:n=>ge(a.id_product||a.id_package||0)},null,8,["src","onError"])):(u(),k("div",da,[r(V,{size:"32",color:"grey-400",icon:a.item_type==="package"?"tabler-packages":"tabler-package"},null,8,["icon"]),i("span",_a,v(ye(a.name)),1)]))]),a.item_type==="package"?(u(),k("div",ma,[r(V,{icon:"tabler-gift",size:"12",class:"mr-1"}),e[19]||(e[19]=_(" PAKET "))])):P("",!0),i("div",{class:ce(["stock-badge",f(a.stock||0)]),style:ze(a.item_type==="package"?"top: 32px":"")},[r(V,{icon:(a.stock||0)>0?"tabler-package":"tabler-package-off",size:"12",class:"mr-1"},null,8,["icon"]),a.stock_status&&a.stock_status!=="available"?(u(),k("span",pa,v(a.stock_status),1)):(u(),k("span",ka," Stock: "+v(a.stock||0),1))],6),a.item_type!=="package"?(u(),k("div",va,[a.available_in_kitchen?(u(),k("div",ga,[r(V,{icon:"tabler-chef-hat",size:"10"}),e[20]||(e[20]=_(" Kitchen "))])):P("",!0),a.available_in_bar?(u(),k("div",ya,[r(V,{icon:"tabler-glass-cocktail",size:"10"}),e[21]||(e[21]=_(" Bar "))])):P("",!0)])):P("",!0),(a.stock||0)===0?(u(),k("div",fa,[r(V,{icon:"tabler-alert-circle",size:"14"}),e[22]||(e[22]=_(" Stok Habis "))])):(a.item_type==="package"?!a.package_price:!a.selling_price)?(u(),k("div",ba,[r(V,{icon:"tabler-alert-triangle",size:"14"}),e[23]||(e[23]=_(" Harga Kosong "))])):P("",!0),l(a.id_product)>0?(u(),k("div",ha,v(l(a.id_product))+" di keranjang ",1)):P("",!0)]),i("div",Ca,[i("h6",Va,v(a.name),1),i("p",wa,v(a.sku),1),i("div",Sa,[i("span",{class:ce(["product-price",{"price-missing":a.item_type==="package"?!a.package_price:!a.selling_price}])},[a.item_type==="package"?(u(),k(ie,{key:0},[_(v(a.package_price?Q(a.package_price||0):"Harga tidak tersedia"),1)],64)):(u(),k(ie,{key:1},[_(v(a.selling_price?Q(a.selling_price):"Harga tidak tersedia"),1)],64))],2),r(S,{size:"small",color:"primary",variant:"flat",icon:"tabler-plus",disabled:!m(a),onClick:Ie(n=>m(a)?d(a):null,["stop"])},null,8,["disabled","onClick"])])])],10,na))),128))])):q.value?(u(),k("div",xa,[r(Pe,{size:"48",color:"primary",indeterminate:""}),e[24]||(e[24]=i("p",{class:"empty-text"},"Memuat produk...",-1))])):(u(),k("div",Da,[r(V,{size:"64",color:"grey-400"},{default:p(()=>[_(v(x.value?"tabler-search-off":"tabler-package"),1)]),_:1}),i("h4",Pa,v(x.value?"Produk Tidak Ditemukan":"Tidak Ada Produk"),1),i("p",za,v(x.value?`Coba kata kunci lain untuk pencarian "${x.value}"`:"Belum ada produk yang tersedia"),1),x.value?(u(),G(S,{key:0,variant:"outlined",onClick:e[5]||(e[5]=a=>x.value="")},{default:p(()=>e[25]||(e[25]=[_(" Reset Pencarian ")])),_:1,__:[25]})):P("",!0)]))])]),i("div",Ia,[i("div",Ta,[i("div",Aa,[r(V,{size:"20",color:"success"},{default:p(()=>e[26]||(e[26]=[_("tabler-shopping-cart")])),_:1,__:[26]}),e[27]||(e[27]=i("span",null,"Keranjang",-1)),z(y).length>0?(u(),G(ue,{key:0,color:"success",variant:"tonal",size:"small"},{default:p(()=>[_(v(z(J)),1)]),_:1})):P("",!0)]),z(y).length>0?(u(),G(S,{key:0,variant:"text",color:"error",size:"small","prepend-icon":"tabler-trash",onClick:A},{default:p(()=>e[28]||(e[28]=[_(" Hapus Semua ")])),_:1,__:[28]})):P("",!0)]),i("div",qa,[z(y).length>0?(u(),k("div",Ea,[(u(!0),k(ie,null,pe(z(y),a=>(u(),k("div",{key:a.item_type==="package"?`pkg-${a.id_package}`:`prd-${a.id_product}`,class:"cart-item"},[i("div",$a,[i("h6",Ba,[_(v(a.name)+" ",1),a.item_type==="package"?(u(),G(ue,{key:0,size:"x-small",color:"success",variant:"tonal",class:"ml-1"},{default:p(()=>e[29]||(e[29]=[_(" Paket ")])),_:1,__:[29]})):P("",!0)]),i("p",Ka,v(Q(a.item_type==="package"?a.package_price||0:a.selling_price||0))+" / item ",1)]),i("div",Fa,[i("div",Ua,[r(S,{size:"x-small",variant:"text",color:"error",icon:"tabler-minus",disabled:a.quantity<=1,onClick:n=>z(w)(a.item_type==="package"?a.id_package:a.id_product,a.quantity-1,a.item_type==="package")},null,8,["disabled","onClick"]),i("span",ja,v(a.quantity),1),r(S,{size:"x-small",variant:"text",color:"success",icon:"tabler-plus",disabled:a.quantity>=a.stock,onClick:n=>z(w)(a.item_type==="package"?a.id_package:a.id_product,a.quantity+1,a.item_type==="package")},null,8,["disabled","onClick"])]),i("div",Ha,v(Q((a.item_type==="package"?a.package_price||0:a.selling_price||0)*a.quantity)),1),r(S,{size:"x-small",variant:"text",color:"error",icon:"tabler-x",onClick:n=>z(C)(a.item_type==="package"?a.id_package:a.id_product,a.item_type==="package")},null,8,["onClick"])])]))),128))])):(u(),k("div",La,[r(V,{size:"48",color:"grey-400"},{default:p(()=>e[30]||(e[30]=[_("tabler-shopping-cart")])),_:1,__:[30]}),e[31]||(e[31]=i("h4",null,"Keranjang Kosong",-1)),e[32]||(e[32]=i("p",null,"Pilih produk untuk mulai berbelanja",-1))]))]),z(y).length>0?(u(),k("div",Ma,[i("div",Ra,[e[33]||(e[33]=i("span",{class:"summary-label"},"Subtotal",-1)),i("span",Na,v(Q(z(h))),1)]),i("div",Oa,[e[34]||(e[34]=i("span",{class:"summary-label"},"Items",-1)),i("span",Qa,v(z(J)),1)]),i("div",Ga,[e[35]||(e[35]=i("span",{class:"summary-label summary-total"},"Total",-1)),i("span",Ja,v(Q(z(h))),1)]),r(S,{color:"success",size:"large",block:"",class:"checkout-btn",onClick:fe},{default:p(()=>[r(V,{start:""},{default:p(()=>e[36]||(e[36]=[_("tabler-credit-card")])),_:1,__:[36]}),e[37]||(e[37]=_(" Bayar Sekarang "))]),_:1,__:[37]})])):P("",!0)])]),r(qe,{modelValue:R.value,"onUpdate:modelValue":e[6]||(e[6]=a=>R.value=a),"cart-items":oe.value,customers:L.value,onPaymentSuccess:be,onClearCart:he},null,8,["modelValue","cart-items","customers"]),r(Ee,{modelValue:Y.value,"onUpdate:modelValue":e[7]||(e[7]=a=>Y.value=a)},null,8,["modelValue"]),r(Ae,{modelValue:Z.value,"onUpdate:modelValue":e[8]||(e[8]=a=>Z.value=a)},null,8,["modelValue"]),r(Ke,{modelValue:j.value,"onUpdate:modelValue":e[10]||(e[10]=a=>j.value=a),"max-width":"400",persistent:""},{default:p(()=>[r(je,null,{default:p(()=>[r(He,null,{default:p(()=>e[38]||(e[38]=[_("Hapus Semua Item?")])),_:1,__:[38]}),r(Me,null,{default:p(()=>e[39]||(e[39]=[_(" Apakah Anda yakin ingin menghapus semua item dari keranjang? ")])),_:1,__:[39]}),r(Le,null,{default:p(()=>[r(Re),r(S,{variant:"text",onClick:e[9]||(e[9]=a=>j.value=!1)},{default:p(()=>e[40]||(e[40]=[_("Batal")])),_:1,__:[40]}),r(S,{color:"error",variant:"text",onClick:ve},{default:p(()=>e[41]||(e[41]=[_("Hapus")])),_:1,__:[41]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(Fe,{modelValue:E.value.show,"onUpdate:modelValue":e[11]||(e[11]=a=>E.value.show=a),color:E.value.color,timeout:4e3,location:"top right"},{default:p(()=>[_(v(E.value.message),1)]),_:1},8,["modelValue","color"])])}}}),It=Te(Xa,[["__scopeId","data-v-32bc17ba"]]);export{It as default};

import{r as g,V as T,w as _e,bi as ne,d as he,ab as Ce,D as Ve,c as p,e as i,b as l,f as _,t as k,a1 as S,g as O,l as D,F as oe,i as pe,ax as we,X as V,m as P,o as u,s as m,v as ce,G as xe,a0 as Se,_ as De}from"./main-BAJfD1Xy.js";import{P as B}from"./PosApi-o8MFoohz.js";import Pe from"./CashDrawerDialog-BV4jJ1rz.js";import ze from"./PaymentDialog-CX7LhkGZ.js";import Ie from"./TransactionHistoryDialog-DN3AHvxc.js";import{V as Te}from"./VAvatar-B7aLi9Pp.js";import{V as Ae}from"./VTextField-Brez3qUW.js";import{V as ke}from"./VSelect-B5WVgjPO.js";import{V as ue}from"./VChip-BR-8xwPD.js";import{V as qe}from"./VDialog-DNru8fJc.js";import{V as Ee}from"./VSnackbar-CuQqb1x4.js";import{V as $e}from"./VImg-Cs-7Mbea.js";import{V as Be,b as Fe,c as Ke}from"./VCard-BeSmCFU5.js";import{V as Ue}from"./VCardText-DlYE5B4H.js";import{V as je}from"./VSpacer-ClfDea-e.js";import"./auth-CuuXRWj5.js";import"./VDivider-nqmo7HHl.js";import"./VRow-MjDIzeWw.js";/* empty css              */import"./VForm-DluGNRNc.js";import"./forwardRefs-B931MWyl.js";import"./VTextarea-BosNm-jJ.js";import"./DiscountCodeInput-BXMME65i.js";import"./PromotionSuggestions-DA5212pO.js";import"./VCheckboxBtn-Bt3U-YVF.js";import"./EditOrderDialog-Cj2nQ8jy.js";import"./OrderDetailDialog-CtD0rvfB.js";import"./VTable-BHcboHbD.js";import"./VDataTable-D5TUK6Ye.js";import"./filter-Wy9GTaQT.js";import"./VList-BhEffBXn.js";import"./VOverlay-BKz2ffRM.js";import"./VMenu-Cges_4aR.js";const He=()=>{const b=g([]),L=g(null),v=g(0),h=g("amount"),Q=g(0),G=g(!1),C=g(null),w=T(()=>b.value.reduce((t,o)=>{const d=o.item_type==="package"?o.package_price||o.unit_price||0:o.selling_price||o.unit_price||0;return t+d*o.quantity},0)),z=T(()=>v.value?h.value==="percentage"?w.value*v.value/100:v.value:0),q=T(()=>(w.value-z.value)*Q.value/100),F=T(()=>Math.max(0,w.value-z.value+q.value)),J=T(()=>b.value.reduce((t,o)=>t+o.quantity,0)),M=T(()=>b.value.length===0),x=T(()=>({subtotal:w.value,discountAmount:z.value,discountType:h.value,taxAmount:q.value,totalAmount:F.value})),R=(t,o=1)=>{try{const d=t.item_type==="package"?t.id_package:t.id_product,f=b.value.find(r=>t.item_type==="package"?r.id_package===d&&r.item_type==="package":r.id_product===d&&r.item_type!=="package"),y=(t.item_type==="package",t.stock||0);if(f){const r=f.quantity+o;if(r<=y)f.quantity=r;else throw new Error(`Stok tidak mencukupi. Tersedia: ${y}`)}else if(o<=y)b.value.push({...t,quantity:o,stock:y});else throw new Error(`Stok tidak mencukupi. Tersedia: ${y}`);return C.value=null,!0}catch(d){return C.value=d instanceof Error?d.message:"Gagal menambahkan ke keranjang",!1}},E=(t,o=!1)=>{const d=b.value.findIndex(f=>o?f.id_package===t&&f.item_type==="package":f.id_product===t&&f.item_type!=="package");d>-1&&b.value.splice(d,1)},I=(t,o,d=!1)=>{var y;const f=b.value.find(r=>d?r.id_package===t&&r.item_type==="package":r.id_product===t&&r.item_type!=="package");if(f)if(o<=0)E(t,d);else{const r=f.item_type==="package"?((y=f.stock_info)==null?void 0:y.available_stock)||f.stock||0:f.stock||0;if(o<=r)f.quantity=o;else return C.value=`Stok tidak mencukupi. Tersedia: ${r}`,!1}return!0},K=()=>{b.value=[],L.value=null,v.value=0,h.value="amount",C.value=null},X=(t,o="amount")=>o==="percentage"&&t>100?(C.value="Diskon persentase tidak boleh lebih dari 100%",!1):o==="amount"&&t>w.value?(C.value="Diskon tidak boleh lebih dari subtotal",!1):(v.value=t,h.value=o,C.value=null,!0),W=()=>{v.value=0,h.value="amount"},U=t=>{L.value=t},Y=async(t,o="takeaway")=>{try{if(G.value=!0,C.value=null,M.value)throw new Error("Keranjang kosong");const d={order_type:o,id_customer:L.value||void 0,guest_count:1,notes:t.notes},y=(await B.createOrder(d)).data;for(const r of b.value){const A={item_type:r.item_type||"product",quantity:r.quantity,notes:""};r.item_type==="package"?(A.id_package=r.id_package,A.unit_price=r.package_price||r.unit_price,A.total_price=(r.package_price||r.unit_price||0)*r.quantity):(A.id_product=r.id_product,A.id_variant=r.id_variant||void 0,A.unit_price=r.selling_price||r.unit_price,A.total_price=(r.selling_price||r.unit_price||0)*r.quantity),await B.addItem(y.id_order,A)}return z.value>0&&await B.applyDiscount(y.id_order,{discount_type:h.value==="percentage"?"percentage":"fixed",discount_value:h.value==="percentage"?v.value:z.value}),await B.processPayment(y.id_order,{payment_method:t.payment_method,amount:t.amount,reference_number:t.reference_number,notes:t.notes}),K(),y}catch(d){throw C.value=d instanceof Error?d.message:"Gagal membuat pesanan",d}finally{G.value=!1}},Z=()=>{const t=[];return M.value&&t.push("Keranjang kosong"),b.value.forEach(o=>{o.quantity>o.stock&&t.push(`Stok ${o.name} tidak mencukupi`)}),z.value>w.value&&t.push("Diskon tidak boleh lebih dari subtotal"),{isValid:t.length===0,errors:t}},j=t=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(t),ee=t=>b.value.find(o=>o.id_product===t),ae=t=>{const o=ee(t);return o?o.quantity:0},le=(t,o=1)=>ae(t.id_product)+o<=t.stock;_e([b,v,h],()=>{const t=Z();!t.isValid&&t.errors.length>0?C.value=t.errors[0]:C.value=null},{deep:!0}),_e([v,h,w],()=>{h.value==="percentage"&&v.value>100&&(v.value=100),z.value>w.value&&(h.value==="amount"?v.value=w.value:v.value=100)});const H=(t,o)=>o==="kitchen"?t.available_in_kitchen!==!1:o==="bar"?t.available_in_bar!==!1:!1,te=t=>t.available_in_kitchen!==!1&&t.available_in_bar!==!1,se=t=>{const o=[];return t.available_in_kitchen!==!1&&o.push("kitchen"),t.available_in_bar!==!1&&o.push("bar"),o},re=(t,o)=>t.every(d=>H(d,o)),ie=t=>{const o=[],d=[],f=[];return t.forEach(y=>{const r=se(y);r.length===1?r[0]==="kitchen"?o.push(y):r[0]==="bar"&&d.push(y):r.length===2&&f.push(y)}),{kitchen:o,bar:d,both:f}};return{cartItems:ne(b),selectedCustomer:L,discountAmount:v,discountType:h,taxRate:Q,loading:ne(G),error:ne(C),subtotal:w,discountValue:z,taxValue:q,totalAmount:F,cartCount:J,isEmpty:M,orderSummary:x,addToCart:R,removeFromCart:E,updateQuantity:I,clearCart:K,applyDiscount:X,removeDiscount:W,setCustomer:U,createOrder:Y,validateCart:Z,formatCurrency:j,getCartItemById:ee,getItemQuantity:ae,canAddToCart:le,isAvailableInStation:H,isAvailableInBothStations:te,getAvailableStations:se,canProcessOrderInStation:re,getStationRequirements:ie}},Le={class:"pos-layout"},Me={class:"pos-header"},Re={class:"header-content"},Ne={class:"header-left"},Oe={class:"logo-section"},Qe={class:"header-info"},Ge={class:"header-meta"},Je={class:"header-actions"},Xe={class:"pos-main"},We={class:"product-panel"},Ye={class:"filter-bar"},Ze={class:"search-section"},ea={class:"filter-section"},aa={class:"view-mode-toggle"},ta={class:"products-container"},sa={key:0,class:"products-grid"},ia=["onClick"],oa={class:"product-image"},la={class:"product-image-wrapper"},ra={key:1,class:"product-image-placeholder"},na={class:"placeholder-text"},ca={key:0,class:"package-badge",title:"Paket Bundle"},ua={key:0},da={key:1},ma={key:1,class:"station-badges"},_a={key:0,class:"station-badge kitchen-badge",title:"Tersedia di Kitchen"},pa={key:1,class:"station-badge bar-badge",title:"Tersedia di Bar"},ka={key:2,class:"status-indicator out-of-stock-indicator"},va={key:3,class:"status-indicator no-price-indicator"},ga={key:4,class:"cart-indicator"},fa={class:"product-info"},ya={class:"product-name"},ba={class:"product-sku"},ha={class:"product-footer"},Ca={key:1,class:"empty-state"},Va={key:2,class:"empty-state"},wa={class:"empty-title"},xa={class:"empty-text"},Sa={class:"cart-panel"},Da={class:"cart-header"},Pa={class:"cart-title"},za={class:"cart-content"},Ia={key:0,class:"cart-items"},Ta={class:"item-info"},Aa={class:"item-name"},qa={class:"item-price"},Ea={class:"item-controls"},$a={class:"quantity-controls"},Ba={class:"quantity"},Fa={class:"item-total"},Ka={key:1,class:"empty-cart"},Ua={key:0,class:"cart-summary"},ja={class:"summary-row"},Ha={class:"summary-value"},La={class:"summary-row"},Ma={class:"summary-value"},Ra={class:"summary-row"},Na={class:"summary-value summary-total"},Oa=he({__name:"index",setup(b){const L=Ce(),{cartItems:v,subtotal:h,cartCount:Q,addToCart:G,removeFromCart:C,updateQuantity:w,clearCart:z}=He(),q=g(!1),F=g([]),J=g([]),M=g([]),x=g(""),R=g(null),E=g(null),I=g("products"),K=g(!1),X=g(!1),W=g(!1),U=g(!1),Y=g(""),Z=g({}),j=g({show:!1,message:"",color:"success"});setInterval(()=>{Y.value=new Date().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})},1e3);const ee=T(()=>L.user);T(()=>new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"}));const ae=T(()=>v.value.map(s=>({...s}))),le=[{title:"Kitchen",value:"kitchen"},{title:"Bar",value:"bar"}],H=T(()=>{let s=F.value;if(I.value==="products"?s=s.filter(e=>e.item_type!=="package"):s=s.filter(e=>e.item_type==="package"),x.value){const e=x.value.toLowerCase();s=s.filter(c=>{var a,n;return c.name.toLowerCase().includes(e)||((a=c.sku)==null?void 0:a.toLowerCase().includes(e))||((n=c.barcode)==null?void 0:n.toLowerCase().includes(e))})}return R.value&&(s=s.filter(e=>e.id_category===R.value)),E.value&&I.value==="products"&&(s=s.filter(e=>E.value==="kitchen"?e.available_in_kitchen!==!1:E.value==="bar"?e.available_in_bar!==!1:!0)),s}),te=async()=>{try{q.value=!0;const[s,e]=await Promise.all([B.getProducts(),B.getPackages()]);console.log("ðŸ“¦ Products Response:",s),console.log("ðŸŽ Packages Response:",e);const c=((s==null?void 0:s.data)||[]).map(n=>{var $,de,me;return{id_product:n.id_product,name:n.name,sku:n.sku,item_type:"product",image:n.image_url||n.image,id_category:($=n.category)==null?void 0:$.id_category,selling_price:parseFloat(n.price||n.selling_price||0),available_in_kitchen:n.available_in_kitchen??!0,available_in_bar:n.available_in_bar??!0,stock:((de=n.stock_info)==null?void 0:de.available_stock)||((me=n.stock_info)==null?void 0:me.current_stock)||n.stock||0,stock_info:n.stock_info}}),a=((e==null?void 0:e.data)||[]).map(n=>{var $;return{id_package:n.id_package||n.id,name:n.name,sku:n.sku,item_type:"package",image:n.image,id_category:($=n.category)==null?void 0:$.id_category,package_price:parseFloat(n.package_price||0),unit_price:n.unit_price,total_price:n.total_price,stock:n.stock||0,stock_info:n.stock_info,available_in_kitchen:!0,available_in_bar:!0}});F.value=[...c,...a],console.log("âœ… Total items:",F.value.length,{products:c.length,packages:a.length})}catch(s){console.error("âŒ Error loading products:",s);try{const e=await B.getProducts();F.value=((e==null?void 0:e.data)||[]).map(c=>{var a,n,$;return{id_product:c.id_product,id_package:c.id_package,name:c.name,sku:c.sku,item_type:c.item_type||"product",image:c.image_url||c.image,id_category:(a=c.category)==null?void 0:a.id_category,selling_price:c.item_type==="product"?parseFloat(c.price||c.selling_price||0):void 0,available_in_kitchen:c.available_in_kitchen??!0,available_in_bar:c.available_in_bar??!0,package_price:c.item_type==="package"?parseFloat(c.package_price||0):void 0,unit_price:c.unit_price,total_price:c.total_price,stock:((n=c.stock_info)==null?void 0:n.available_stock)||(($=c.stock_info)==null?void 0:$.current_stock)||c.stock||0,stock_info:c.stock_info}})}catch(e){console.error("âŒ Fallback also failed:",e)}}finally{q.value=!1}},se=async()=>{try{const s=await B.getCategories();s.success&&s.data&&(J.value=s.data)}catch(s){console.error("Error loading categories:",s),J.value=[{id_category:1,name:"Minuman"},{id_category:2,name:"Makanan"},{id_category:3,name:"Snack"}]}},re=async()=>{try{M.value=[{id_customer:1,name:"John Doe",phone:"0812345678",email:"john@example.com"},{id_customer:2,name:"Jane Smith",phone:"0812345679",email:"jane@example.com"},{id_customer:3,name:"Bob Johnson",phone:"0812345680",email:"bob@example.com"}]}catch(s){console.error("Error loading customers:",s)}},ie=s=>{if(console.log("addToCart called with:",{name:s.name,item_type:s.item_type,canAdd:t(s),stock:s.stock,price:s.package_price||s.selling_price,is_disabled:s.is_disabled}),!t(s)){(s.stock||0)<=0?console.warn("Stok tidak tersedia untuk produk:",s.name):s.selling_price||s.package_price||console.warn("Harga tidak tersedia untuk produk:",s.name);return}const e={...s,item_type:s.item_type||"product",id_product:s.id_product||0,id_package:s.id_package||0};console.log("Adding to cart:",e);const c=G(e);console.log("Add to cart result:",c)},t=s=>{if(s.is_disabled===!0)return!1;if(s.item_type==="package"){const e=(s.stock||0)>0,c=(s.package_price||s.unit_price||0)>0;return e&&c}return(s.stock||0)>0&&(s.selling_price||0)>0},o=s=>s<=0?"stock-low":s<10?"stock-medium":"stock-high",d=s=>{if(!s)return 0;const e=v.value.find(c=>c.id_product===s);return e?e.quantity:0},f=()=>{U.value=!0},y=()=>{z(),U.value=!1},r=s=>{console.error("ðŸ–¼ï¸ Image error for product ID:",s),Z.value[s]=!0},A=s=>s.split(" ").slice(0,2).map(e=>e.charAt(0)).join("").toUpperCase(),ve=()=>{K.value=!0},ge=s=>{j.value={show:!0,message:"Pembayaran berhasil diproses! ðŸŽ‰",color:"success"},K.value=!1,te()},fe=()=>{z()},ye=()=>{W.value=!0},be=()=>{X.value=!0},N=s=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(s);return Ve(async()=>{Y.value=new Date().toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"}),await Promise.all([te(),se(),re()])}),(s,e)=>{var c;return u(),p("div",Le,[i("div",Me,[i("div",Re,[i("div",Ne,[i("div",Oe,[l(Te,{size:"40",color:"primary"},{default:_(()=>[l(V,{size:"20"},{default:_(()=>e[13]||(e[13]=[m("tabler-shopping-cart")])),_:1,__:[13]})]),_:1}),i("div",Qe,[e[15]||(e[15]=i("h3",{class:"pos-title"},"Point of Sale",-1)),i("div",Ge,[i("span",null,k(((c=ee.value)==null?void 0:c.name)||"Administrator"),1),e[14]||(e[14]=i("span",null,"â€¢",-1)),i("span",null,k(Y.value),1)])])])]),i("div",Je,[l(S,{variant:"text",color:"primary","prepend-icon":"tabler-history",onClick:be},{default:_(()=>e[16]||(e[16]=[m(" Riwayat ")])),_:1,__:[16]}),l(S,{variant:"outlined",color:"success","prepend-icon":"tabler-receipt",onClick:ye},{default:_(()=>e[17]||(e[17]=[m(" Cash Drawer ")])),_:1,__:[17]})])])]),i("div",Xe,[i("div",We,[i("div",Ye,[i("div",Ze,[l(Ae,{modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=a=>x.value=a),placeholder:I.value==="packages"?"Cari paket, SKU...":"Cari produk, SKU, atau barcode...",density:"comfortable",variant:"solo","prepend-inner-icon":"tabler-search",clearable:"","hide-details":"",class:"search-input","onClick:clear":e[1]||(e[1]=a=>x.value="")},null,8,["modelValue","placeholder"])]),i("div",ea,[i("div",aa,[l(S,{variant:I.value==="products"?"flat":"outlined",color:I.value==="products"?"primary":"default",size:"default",class:"toggle-btn",onClick:e[2]||(e[2]=a=>I.value="products")},{default:_(()=>[l(V,{icon:"tabler-package",start:"",size:"20"}),e[18]||(e[18]=m(" Produk "))]),_:1,__:[18]},8,["variant","color"]),l(S,{variant:I.value==="packages"?"flat":"outlined",color:I.value==="packages"?"success":"default",size:"default",class:"toggle-btn",onClick:e[3]||(e[3]=a=>I.value="packages")},{default:_(()=>[l(V,{icon:"tabler-gift",start:"",size:"20"}),e[19]||(e[19]=m(" Paket "))]),_:1,__:[19]},8,["variant","color"])]),l(ke,{modelValue:R.value,"onUpdate:modelValue":e[4]||(e[4]=a=>R.value=a),items:J.value,"item-title":"name","item-value":"id_category",placeholder:"Kategori",density:"comfortable",variant:"solo","prepend-inner-icon":"tabler-category",clearable:"","hide-details":"",style:{"min-inline-size":"180px"},class:"category-select"},null,8,["modelValue","items"]),l(ke,{modelValue:E.value,"onUpdate:modelValue":e[5]||(e[5]=a=>E.value=a),items:le,"item-title":"title","item-value":"value",placeholder:"Station",density:"comfortable",variant:"solo","prepend-inner-icon":"tabler-tools-kitchen-2",clearable:"","hide-details":"",style:{"min-inline-size":"150px"},class:"station-select"},null,8,["modelValue"]),H.value.length>0?(u(),O(ue,{key:0,color:"primary",variant:"tonal",size:"large"},{default:_(()=>[m(k(H.value.length)+" produk ",1)]),_:1})):D("",!0)])]),i("div",ta,[!q.value&&H.value.length>0?(u(),p("div",sa,[(u(!0),p(oe,null,pe(H.value,a=>(u(),p("div",{key:a.id_product||a.id_package,class:ce(["product-item",{"out-of-stock":a.is_disabled===!0||(a.stock||0)<=0,"no-price":a.item_type==="package"?!(a.package_price||a.unit_price):!a.selling_price,disabled:!t(a),"package-item":a.item_type==="package"}]),onClick:n=>t(a)?ie(a):null},[i("div",oa,[i("div",la,[a.image&&!Z.value[a.id_product||a.id_package||0]?(u(),O($e,{key:0,src:a.image,class:"product-image-content",cover:"",onError:n=>r(a.id_product||a.id_package||0)},null,8,["src","onError"])):(u(),p("div",ra,[l(V,{size:"32",color:"grey-400",icon:a.item_type==="package"?"tabler-packages":"tabler-package"},null,8,["icon"]),i("span",na,k(A(a.name)),1)]))]),a.item_type==="package"?(u(),p("div",ca,[l(V,{icon:"tabler-gift",size:"12",class:"mr-1"}),e[20]||(e[20]=m(" PAKET "))])):D("",!0),i("div",{class:ce(["stock-badge",o(a.stock||0)]),style:xe(a.item_type==="package"?"top: 32px":"")},[l(V,{icon:(a.stock||0)>0?"tabler-package":"tabler-package-off",size:"12",class:"mr-1"},null,8,["icon"]),a.stock_status&&a.stock_status!=="available"?(u(),p("span",ua,k(a.stock_status),1)):(u(),p("span",da," Stock: "+k(a.stock||0),1))],6),a.item_type!=="package"?(u(),p("div",ma,[a.available_in_kitchen?(u(),p("div",_a,[l(V,{icon:"tabler-chef-hat",size:"10"}),e[21]||(e[21]=m(" Kitchen "))])):D("",!0),a.available_in_bar?(u(),p("div",pa,[l(V,{icon:"tabler-glass-cocktail",size:"10"}),e[22]||(e[22]=m(" Bar "))])):D("",!0)])):D("",!0),(a.stock||0)===0?(u(),p("div",ka,[l(V,{icon:"tabler-alert-circle",size:"14"}),e[23]||(e[23]=m(" Stok Habis "))])):(a.item_type==="package"?!a.package_price:!a.selling_price)?(u(),p("div",va,[l(V,{icon:"tabler-alert-triangle",size:"14"}),e[24]||(e[24]=m(" Harga Kosong "))])):D("",!0),d(a.id_product)>0?(u(),p("div",ga,k(d(a.id_product))+" di keranjang ",1)):D("",!0)]),i("div",fa,[i("h6",ya,k(a.name),1),i("p",ba,k(a.sku),1),i("div",ha,[i("span",{class:ce(["product-price",{"price-missing":a.item_type==="package"?!a.package_price:!a.selling_price}])},[a.item_type==="package"?(u(),p(oe,{key:0},[m(k(a.package_price?N(a.package_price||0):"Harga tidak tersedia"),1)],64)):(u(),p(oe,{key:1},[m(k(a.selling_price?N(a.selling_price):"Harga tidak tersedia"),1)],64))],2),l(S,{size:"small",color:"primary",variant:"flat",icon:"tabler-plus",disabled:!t(a),onClick:Se(n=>t(a)?ie(a):null,["stop"])},null,8,["disabled","onClick"])])])],10,ia))),128))])):q.value?(u(),p("div",Ca,[l(we,{size:"48",color:"primary",indeterminate:""}),e[25]||(e[25]=i("p",{class:"empty-text"},"Memuat produk...",-1))])):(u(),p("div",Va,[l(V,{size:"64",color:"grey-400"},{default:_(()=>[m(k(x.value?"tabler-search-off":"tabler-package"),1)]),_:1}),i("h4",wa,k(x.value?"Produk Tidak Ditemukan":"Tidak Ada Produk"),1),i("p",xa,k(x.value?`Coba kata kunci lain untuk pencarian "${x.value}"`:"Belum ada produk yang tersedia"),1),x.value?(u(),O(S,{key:0,variant:"outlined",onClick:e[6]||(e[6]=a=>x.value="")},{default:_(()=>e[26]||(e[26]=[m(" Reset Pencarian ")])),_:1,__:[26]})):D("",!0)]))])]),i("div",Sa,[i("div",Da,[i("div",Pa,[l(V,{size:"20",color:"success"},{default:_(()=>e[27]||(e[27]=[m("tabler-shopping-cart")])),_:1,__:[27]}),e[28]||(e[28]=i("span",null,"Keranjang",-1)),P(v).length>0?(u(),O(ue,{key:0,color:"success",variant:"tonal",size:"small"},{default:_(()=>[m(k(P(Q)),1)]),_:1})):D("",!0)]),P(v).length>0?(u(),O(S,{key:0,variant:"text",color:"error",size:"small","prepend-icon":"tabler-trash",onClick:f},{default:_(()=>e[29]||(e[29]=[m(" Hapus Semua ")])),_:1,__:[29]})):D("",!0)]),i("div",za,[P(v).length>0?(u(),p("div",Ia,[(u(!0),p(oe,null,pe(P(v),a=>(u(),p("div",{key:a.item_type==="package"?`pkg-${a.id_package}`:`prd-${a.id_product}`,class:"cart-item"},[i("div",Ta,[i("h6",Aa,[m(k(a.name)+" ",1),a.item_type==="package"?(u(),O(ue,{key:0,size:"x-small",color:"success",variant:"tonal",class:"ml-1"},{default:_(()=>e[30]||(e[30]=[m(" Paket ")])),_:1,__:[30]})):D("",!0)]),i("p",qa,k(N(a.item_type==="package"?a.package_price||0:a.selling_price||0))+" / item ",1)]),i("div",Ea,[i("div",$a,[l(S,{size:"x-small",variant:"text",color:"error",icon:"tabler-minus",disabled:a.quantity<=1,onClick:n=>P(w)(a.item_type==="package"?a.id_package:a.id_product,a.quantity-1,a.item_type==="package")},null,8,["disabled","onClick"]),i("span",Ba,k(a.quantity),1),l(S,{size:"x-small",variant:"text",color:"success",icon:"tabler-plus",disabled:a.quantity>=a.stock,onClick:n=>P(w)(a.item_type==="package"?a.id_package:a.id_product,a.quantity+1,a.item_type==="package")},null,8,["disabled","onClick"])]),i("div",Fa,k(N((a.item_type==="package"?a.package_price||0:a.selling_price||0)*a.quantity)),1),l(S,{size:"x-small",variant:"text",color:"error",icon:"tabler-x",onClick:n=>P(C)(a.item_type==="package"?a.id_package:a.id_product,a.item_type==="package")},null,8,["onClick"])])]))),128))])):(u(),p("div",Ka,[l(V,{size:"48",color:"grey-400"},{default:_(()=>e[31]||(e[31]=[m("tabler-shopping-cart")])),_:1,__:[31]}),e[32]||(e[32]=i("h4",null,"Keranjang Kosong",-1)),e[33]||(e[33]=i("p",null,"Pilih produk untuk mulai berbelanja",-1))]))]),P(v).length>0?(u(),p("div",Ua,[i("div",ja,[e[34]||(e[34]=i("span",{class:"summary-label"},"Subtotal",-1)),i("span",Ha,k(N(P(h))),1)]),i("div",La,[e[35]||(e[35]=i("span",{class:"summary-label"},"Items",-1)),i("span",Ma,k(P(Q)),1)]),i("div",Ra,[e[36]||(e[36]=i("span",{class:"summary-label summary-total"},"Total",-1)),i("span",Na,k(N(P(h))),1)]),l(S,{color:"success",size:"large",block:"",class:"checkout-btn",onClick:ve},{default:_(()=>[l(V,{start:""},{default:_(()=>e[37]||(e[37]=[m("tabler-credit-card")])),_:1,__:[37]}),e[38]||(e[38]=m(" Bayar Sekarang "))]),_:1,__:[38]})])):D("",!0)])]),l(ze,{modelValue:K.value,"onUpdate:modelValue":e[7]||(e[7]=a=>K.value=a),"cart-items":ae.value,customers:M.value,onPaymentSuccess:ge,onClearCart:fe},null,8,["modelValue","cart-items","customers"]),l(Ie,{modelValue:X.value,"onUpdate:modelValue":e[8]||(e[8]=a=>X.value=a)},null,8,["modelValue"]),l(Pe,{modelValue:W.value,"onUpdate:modelValue":e[9]||(e[9]=a=>W.value=a)},null,8,["modelValue"]),l(qe,{modelValue:U.value,"onUpdate:modelValue":e[11]||(e[11]=a=>U.value=a),"max-width":"400",persistent:""},{default:_(()=>[l(Be,null,{default:_(()=>[l(Fe,null,{default:_(()=>e[39]||(e[39]=[m("Hapus Semua Item?")])),_:1,__:[39]}),l(Ue,null,{default:_(()=>e[40]||(e[40]=[m(" Apakah Anda yakin ingin menghapus semua item dari keranjang? ")])),_:1,__:[40]}),l(Ke,null,{default:_(()=>[l(je),l(S,{variant:"text",onClick:e[10]||(e[10]=a=>U.value=!1)},{default:_(()=>e[41]||(e[41]=[m("Batal")])),_:1,__:[41]}),l(S,{color:"error",variant:"text",onClick:y},{default:_(()=>e[42]||(e[42]=[m("Hapus")])),_:1,__:[42]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(Ee,{modelValue:j.value.show,"onUpdate:modelValue":e[12]||(e[12]=a=>j.value.show=a),color:j.value.color,timeout:4e3,location:"top right"},{default:_(()=>[m(k(j.value.message),1)]),_:1},8,["modelValue","color"])])}}}),St=De(Oa,[["__scopeId","data-v-8cfd0865"]]);export{St as default};

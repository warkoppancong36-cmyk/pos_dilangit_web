import{d as G,g as w,f as t,b as e,e as r,t as v,a1 as y,X as u,a0 as ke,l as C,at as ye,s as x,ao as be,ap as $e,o as p,c as D,i as De,F as Ve,p as P,_ as W,r as f,V as S,au as M}from"./main-BbV-QHNu.js";import{V as Ce}from"./VDialog-Cz2Tmn75.js";import{b as we,c as Y,V as z}from"./VCard-Bai8mtM3.js";import{V as j}from"./VCardText-BSDZr7T_.js";import{V as xe}from"./VForm-CGAz2q98.js";import{V as q,a as g}from"./VRow-jlL5ROeG.js";import{V as I}from"./VTextField-Bqh_1Ihc.js";import{V as H}from"./VSelect-DM0I1Ks-.js";import{a as Pe}from"./VList-BM_3KR1o.js";import{V as Te}from"./VTextarea-DEN_PGaT.js";import{V as Q}from"./VCheckbox-YMdVjSRv.js";import{V as E}from"./VAvatar-D4fNYJqq.js";import{V as N}from"./VChip-D0AJDft_.js";import{V as T}from"./VTooltip-gnM_Wc7w.js";import{V as ze}from"./VDataTable-orTo-ryG.js";import{V as Ae}from"./VSwitch-VU6pxSmf.js";const Be={class:"text-h5"},Fe={class:"d-flex align-center"},Le={class:"d-flex gap-4"},Ut=G({__name:"BluetoothDeviceDialog",props:{modelValue:{type:Boolean},editMode:{type:Boolean},formData:{},saveLoading:{type:Boolean},errorMessage:{}},emits:["update:model-value","save","close","clear-error"],setup(V){const h=[{title:"Printer",value:"printer",icon:"mdi-printer"},{title:"Scanner",value:"scanner",icon:"mdi-qrcode-scan"},{title:"Cash Drawer",value:"cash_drawer",icon:"mdi-cash-register"},{title:"Scale",value:"scale",icon:"mdi-scale-bathroom"},{title:"Other",value:"other",icon:"mdi-devices"}];return(i,o)=>(p(),w(Ce,{"model-value":i.modelValue,"max-width":"600px",persistent:"","onUpdate:modelValue":o[13]||(o[13]=a=>i.$emit("update:model-value",a))},{default:t(()=>[e(z,null,{default:t(()=>[e(we,{class:"d-flex align-center justify-space-between"},{default:t(()=>[r("span",Be,v(i.editMode?"Edit Perangkat Bluetooth":"Tambah Perangkat Bluetooth"),1),e(y,{icon:"",variant:"text",onClick:o[0]||(o[0]=a=>i.$emit("close"))},{default:t(()=>[e(u,{icon:"mdi-close"})]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(xe,{ref:"form",onSubmit:o[10]||(o[10]=ke(a=>i.$emit("save"),["prevent"]))},{default:t(()=>[i.errorMessage?(p(),w(ye,{key:0,type:"error",variant:"tonal",class:"mb-4",closable:"","onClick:close":o[1]||(o[1]=a=>i.$emit("clear-error"))},{default:t(()=>[x(v(i.errorMessage),1)]),_:1})):C("",!0),e(q,null,{default:t(()=>[e(g,{cols:"12"},{default:t(()=>[e(I,{modelValue:i.formData.device_name,"onUpdate:modelValue":o[2]||(o[2]=a=>i.formData.device_name=a),label:"Nama Perangkat *",placeholder:"contoh: Kitchen Printer",rules:[a=>!!a||"Nama perangkat wajib diisi"],required:""},null,8,["modelValue","rules"])]),_:1}),e(g,{cols:"12"},{default:t(()=>[e(I,{modelValue:i.formData.device_address,"onUpdate:modelValue":o[3]||(o[3]=a=>i.formData.device_address=a),label:"Alamat MAC *",placeholder:"contoh: 00:11:22:33:44:55",rules:[a=>!!a||"Alamat MAC wajib diisi",a=>/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/.test(a)||"Format alamat MAC tidak valid"],required:""},null,8,["modelValue","rules"])]),_:1}),e(g,{cols:"12"},{default:t(()=>[e(H,{modelValue:i.formData.device_type,"onUpdate:modelValue":o[4]||(o[4]=a=>i.formData.device_type=a),items:h,label:"Tipe Perangkat *",placeholder:"Pilih tipe perangkat",rules:[a=>!!a||"Tipe perangkat wajib dipilih"],required:""},{item:t(({props:a,item:d})=>[e(Pe,be($e(a)),{prepend:t(()=>[e(u,{icon:d.raw.icon,class:"me-2"},null,8,["icon"])]),_:2},1040)]),selection:t(({item:a})=>[r("div",Fe,[e(u,{icon:a.raw.icon,class:"me-2",size:"20"},null,8,["icon"]),x(" "+v(a.title),1)])]),_:1},8,["modelValue","rules"])]),_:1}),e(g,{cols:"12",md:"6"},{default:t(()=>[e(I,{modelValue:i.formData.manufacturer,"onUpdate:modelValue":o[5]||(o[5]=a=>i.formData.manufacturer=a),label:"Manufacturer",placeholder:"contoh: Epson, Canon"},null,8,["modelValue"])]),_:1}),e(g,{cols:"12",md:"6"},{default:t(()=>[e(I,{modelValue:i.formData.model,"onUpdate:modelValue":o[6]||(o[6]=a=>i.formData.model=a),label:"Model",placeholder:"contoh: TM-T82"},null,8,["modelValue"])]),_:1}),e(g,{cols:"12"},{default:t(()=>[e(Te,{modelValue:i.formData.notes,"onUpdate:modelValue":o[7]||(o[7]=a=>i.formData.notes=a),label:"Catatan",placeholder:"Catatan tambahan tentang perangkat ini",rows:"3"},null,8,["modelValue"])]),_:1}),e(g,{cols:"12"},{default:t(()=>[r("div",Le,[e(Q,{modelValue:i.formData.is_active,"onUpdate:modelValue":o[8]||(o[8]=a=>i.formData.is_active=a),label:"Aktif",color:"primary"},null,8,["modelValue"]),e(Q,{modelValue:i.formData.is_default,"onUpdate:modelValue":o[9]||(o[9]=a=>i.formData.is_default=a),label:"Jadikan Default",color:"primary"},null,8,["modelValue"])])]),_:1})]),_:1})]),_:1},512)]),_:1}),e(Y,{class:"d-flex justify-end gap-3 pa-4"},{default:t(()=>[e(y,{variant:"outlined",onClick:o[11]||(o[11]=a=>i.$emit("close"))},{default:t(()=>o[14]||(o[14]=[x(" Batal ")])),_:1,__:[14]}),e(y,{color:"primary",loading:i.saveLoading,onClick:o[12]||(o[12]=a=>i.$emit("save"))},{default:t(()=>[x(v(i.editMode?"Perbarui":"Simpan"),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),Se={class:"d-flex align-center justify-space-between mb-3"},Me={class:"d-flex align-center"},Ue={class:"text-h6 font-weight-semibold"},je={class:"text-caption text-medium-emphasis"},Ee={class:"mb-3"},Ie={class:"d-flex align-center mb-1"},Ne={class:"text-sm"},Ge={key:0,class:"d-flex align-center mb-1"},Oe={class:"text-sm"},qe={key:1,class:"d-flex align-center mb-1"},Re={class:"text-sm"},He={key:2,class:"d-flex align-center"},Ke={class:"text-sm"},Je={key:0,class:"mb-3"},Xe={key:1,class:"mb-3"},Qe={class:"text-sm text-medium-emphasis"},We={class:"d-flex gap-1"},Ye={class:"d-flex gap-1"},Ze=G({__name:"BluetoothDeviceGrid",props:{devices:{},toggleLoading:{},deleteLoading:{},testLoading:{}},emits:["edit","delete","toggle","test-connection","set-default","create"],setup(V){const h=a=>({printer:"mdi-printer",scanner:"mdi-qrcode-scan",cash_drawer:"mdi-cash-register",scale:"mdi-scale-bathroom",other:"mdi-devices"})[a]||"mdi-devices",i=a=>({printer:"primary",scanner:"info",cash_drawer:"success",scale:"warning",other:"secondary"})[a]||"secondary",o=a=>new Date(a).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(a,d)=>a.devices.length>0?(p(),w(q,{key:0},{default:t(()=>[(p(!0),D(Ve,null,De(a.devices,l=>(p(),w(g,{key:l.id_bluetooth_device,cols:"12",md:"6",lg:"4"},{default:t(()=>[e(z,{class:"h-100 device-card"},{default:t(()=>[e(j,null,{default:t(()=>[r("div",Se,[r("div",Me,[e(E,{size:"40",color:i(l.device_type),variant:"tonal",class:"me-3"},{default:t(()=>[e(u,{icon:h(l.device_type)},null,8,["icon"])]),_:2},1032,["color"]),r("div",null,[r("h6",Ue,v(l.device_name),1),r("span",je,v(l.device_type_label||l.device_type),1)])]),e(N,{color:l.is_active?"success":"error",variant:l.is_active?"tonal":"outlined",size:"small"},{default:t(()=>[x(v(l.is_active?"Aktif":"Tidak Aktif"),1)]),_:2},1032,["color","variant"])]),r("div",Ee,[r("div",Ie,[e(u,{icon:"mdi-wifi",size:"16",class:"me-2 text-medium-emphasis"}),r("span",Ne,v(l.device_address),1)]),l.manufacturer?(p(),D("div",Ge,[e(u,{icon:"mdi-factory",size:"16",class:"me-2 text-medium-emphasis"}),r("span",Oe,v(l.manufacturer),1)])):C("",!0),l.model?(p(),D("div",qe,[e(u,{icon:"mdi-tag-outline",size:"16",class:"me-2 text-medium-emphasis"}),r("span",Re,v(l.model),1)])):C("",!0),l.last_connected_at?(p(),D("div",He,[e(u,{icon:"mdi-clock-outline",size:"16",class:"me-2 text-medium-emphasis"}),r("span",Ke,v(o(l.last_connected_at)),1)])):C("",!0)]),l.is_default?(p(),D("div",Je,[e(N,{color:"primary",variant:"outlined",size:"small"},{default:t(()=>[e(u,{icon:"mdi-star",start:""}),d[1]||(d[1]=x(" Default "))]),_:1,__:[1]})])):C("",!0),l.notes?(p(),D("div",Xe,[r("p",Qe,v(l.notes),1)])):C("",!0)]),_:2},1024),e(Y,{class:"d-flex justify-space-between"},{default:t(()=>[r("div",We,[e(T,{text:"Edit Perangkat"},{activator:t(({props:c})=>[e(y,P({ref_for:!0},c,{icon:"",variant:"text",color:"primary",size:"small",onClick:s=>a.$emit("edit",l)}),{default:t(()=>[e(u,{icon:"mdi-pencil"})]),_:2},1040,["onClick"])]),_:2},1024),e(T,{text:"Test Koneksi"},{activator:t(({props:c})=>[e(y,P({ref_for:!0},c,{icon:"",variant:"text",color:"info",size:"small",loading:a.testLoading===l.id_bluetooth_device,onClick:s=>a.$emit("test-connection",l)}),{default:t(()=>[e(u,{icon:"mdi-lan-connect"})]),_:2},1040,["loading","onClick"])]),_:2},1024),l.is_default?C("",!0):(p(),w(T,{key:0,text:"Jadikan Default"},{activator:t(({props:c})=>[e(y,P({ref_for:!0},c,{icon:"",variant:"text",color:"warning",size:"small",onClick:s=>a.$emit("set-default",l)}),{default:t(()=>[e(u,{icon:"mdi-star-outline"})]),_:2},1040,["onClick"])]),_:2},1024))]),r("div",Ye,[e(T,{text:l.is_active?"Nonaktifkan":"Aktifkan"},{activator:t(({props:c})=>[e(y,P({ref_for:!0},c,{icon:"",variant:"text",color:l.is_active?"warning":"success",size:"small",loading:a.toggleLoading===l.id_bluetooth_device,onClick:s=>a.$emit("toggle",l)}),{default:t(()=>[e(u,{icon:l.is_active?"mdi-pause":"mdi-play"},null,8,["icon"])]),_:2},1040,["color","loading","onClick"])]),_:2},1032,["text"]),e(T,{text:"Hapus Perangkat"},{activator:t(({props:c})=>[e(y,P({ref_for:!0},c,{icon:"",variant:"text",color:"error",size:"small",loading:a.deleteLoading===l.id_bluetooth_device,onClick:s=>a.$emit("delete",l)}),{default:t(()=>[e(u,{icon:"mdi-delete"})]),_:2},1040,["loading","onClick"])]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(p(),w(z,{key:1,class:"text-center pa-12"},{default:t(()=>[e(u,{icon:"mdi-bluetooth-off",size:"64",class:"text-medium-emphasis mb-4"}),d[3]||(d[3]=r("h3",{class:"text-h5 mb-2"},"Belum Ada Perangkat",-1)),d[4]||(d[4]=r("p",{class:"text-body-1 text-medium-emphasis mb-4"},"Belum ada perangkat bluetooth yang terdaftar",-1)),e(y,{color:"primary","prepend-icon":"mdi-plus",onClick:d[0]||(d[0]=l=>a.$emit("create"))},{default:t(()=>d[2]||(d[2]=[x(" Tambah Perangkat Pertama ")])),_:1,__:[2]})]),_:1,__:[3,4]}))}}),jt=W(Ze,[["__scopeId","data-v-07b6547f"]]),et={class:"d-flex align-center"},tt={class:"font-weight-semibold"},at={class:"text-caption text-medium-emphasis"},lt={key:0,class:"font-weight-medium"},ot={key:1,class:"text-caption text-medium-emphasis"},st={key:2,class:"text-medium-emphasis"},it={class:"d-flex align-center gap-2"},nt={key:0,class:"text-sm"},rt={key:1,class:"text-medium-emphasis"},dt={key:0,class:"text-sm max-width-200"},ct={key:1,class:"text-medium-emphasis"},ut={class:"d-flex gap-1"},mt={class:"text-center pa-12"},pt=G({__name:"BluetoothDeviceList",props:{devices:{},loading:{type:Boolean},toggleLoading:{},deleteLoading:{},testLoading:{}},emits:["edit","delete","toggle","test-connection","set-default","create"],setup(V){const h=[{title:"Perangkat",key:"device_name",sortable:!0},{title:"Tipe",key:"device_type",sortable:!0},{title:"Manufacturer",key:"manufacturer",sortable:!0},{title:"Status",key:"is_active",sortable:!0},{title:"Terakhir Terhubung",key:"last_connected_at",sortable:!0},{title:"Catatan",key:"notes",sortable:!1},{title:"Aksi",key:"actions",sortable:!1,align:"end"}],i=l=>({printer:"mdi-printer",scanner:"mdi-qrcode-scan",cash_drawer:"mdi-cash-register",scale:"mdi-scale-bathroom",other:"mdi-devices"})[l]||"mdi-devices",o=l=>({printer:"primary",scanner:"info",cash_drawer:"success",scale:"warning",other:"secondary"})[l]||"secondary",a=l=>new Date(l).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),d=(l,c)=>l.length<=c?l:l.slice(0,c)+"...";return(l,c)=>(p(),w(z,null,{default:t(()=>[e(ze,{headers:h,items:l.devices,loading:l.loading,"item-value":"id_bluetooth_device",class:"text-no-wrap"},{"item.device_name":t(({item:s})=>[r("div",et,[e(E,{size:"32",color:o(s.device_type),variant:"tonal",class:"me-3"},{default:t(()=>[e(u,{icon:i(s.device_type),size:"16"},null,8,["icon"])]),_:2},1032,["color"]),r("div",null,[r("div",tt,v(s.device_name),1),r("div",at,v(s.device_address),1)])])]),"item.device_type":t(({item:s})=>[e(N,{color:o(s.device_type),variant:"tonal",size:"small"},{default:t(()=>[e(u,{icon:i(s.device_type),start:"",size:"16"},null,8,["icon"]),x(" "+v(s.device_type_label||s.device_type),1)]),_:2},1032,["color"])]),"item.manufacturer":t(({item:s})=>[r("div",null,[s.manufacturer?(p(),D("div",lt,v(s.manufacturer),1)):C("",!0),s.model?(p(),D("div",ot,v(s.model),1)):C("",!0),!s.manufacturer&&!s.model?(p(),D("span",st,"-")):C("",!0)])]),"item.is_active":t(({item:s})=>[r("div",it,[e(N,{color:s.is_active?"success":"error",variant:"tonal",size:"small"},{default:t(()=>[x(v(s.is_active?"Aktif":"Tidak Aktif"),1)]),_:2},1032,["color"]),s.is_default?(p(),w(N,{key:0,color:"primary",variant:"outlined",size:"small"},{default:t(()=>[e(u,{icon:"mdi-star",start:"",size:"14"}),c[1]||(c[1]=x(" Default "))]),_:1,__:[1]})):C("",!0)])]),"item.last_connected_at":t(({item:s})=>[s.last_connected_at?(p(),D("div",nt,v(a(s.last_connected_at)),1)):(p(),D("span",rt,"Belum pernah"))]),"item.notes":t(({item:s})=>[s.notes?(p(),D("div",dt,v(d(s.notes,50)),1)):(p(),D("span",ct,"-"))]),"item.actions":t(({item:s})=>[r("div",ut,[e(T,{text:"Edit Perangkat"},{activator:t(({props:k})=>[e(y,P(k,{icon:"",variant:"text",color:"primary",size:"small",onClick:$=>l.$emit("edit",s)}),{default:t(()=>[e(u,{icon:"mdi-pencil"})]),_:2},1040,["onClick"])]),_:2},1024),e(T,{text:"Test Koneksi"},{activator:t(({props:k})=>[e(y,P(k,{icon:"",variant:"text",color:"info",size:"small",loading:l.testLoading===s.id_bluetooth_device,onClick:$=>l.$emit("test-connection",s)}),{default:t(()=>[e(u,{icon:"mdi-lan-connect"})]),_:2},1040,["loading","onClick"])]),_:2},1024),s.is_default?C("",!0):(p(),w(T,{key:0,text:"Jadikan Default"},{activator:t(({props:k})=>[e(y,P(k,{icon:"",variant:"text",color:"warning",size:"small",onClick:$=>l.$emit("set-default",s)}),{default:t(()=>[e(u,{icon:"mdi-star-outline"})]),_:2},1040,["onClick"])]),_:2},1024)),e(T,{text:s.is_active?"Nonaktifkan":"Aktifkan"},{activator:t(({props:k})=>[e(y,P(k,{icon:"",variant:"text",color:s.is_active?"warning":"success",size:"small",loading:l.toggleLoading===s.id_bluetooth_device,onClick:$=>l.$emit("toggle",s)}),{default:t(()=>[e(u,{icon:s.is_active?"mdi-pause":"mdi-play"},null,8,["icon"])]),_:2},1040,["color","loading","onClick"])]),_:2},1032,["text"]),e(T,{text:"Hapus Perangkat"},{activator:t(({props:k})=>[e(y,P(k,{icon:"",variant:"text",color:"error",size:"small",loading:l.deleteLoading===s.id_bluetooth_device,onClick:$=>l.$emit("delete",s)}),{default:t(()=>[e(u,{icon:"mdi-delete"})]),_:2},1040,["loading","onClick"])]),_:2},1024)])]),"no-data":t(()=>[r("div",mt,[e(u,{icon:"mdi-bluetooth-off",size:"64",class:"text-medium-emphasis mb-4"}),c[3]||(c[3]=r("h3",{class:"text-h5 mb-2"},"Belum Ada Perangkat",-1)),c[4]||(c[4]=r("p",{class:"text-body-1 text-medium-emphasis mb-4"},"Belum ada perangkat bluetooth yang terdaftar",-1)),e(y,{color:"primary","prepend-icon":"mdi-plus",onClick:c[0]||(c[0]=s=>l.$emit("create"))},{default:t(()=>c[2]||(c[2]=[x(" Tambah Perangkat Pertama ")])),_:1,__:[2]})])]),_:1},8,["items","loading"])]),_:1}))}}),Et=W(pt,[["__scopeId","data-v-7a4a0406"]]),It=G({__name:"SearchFilters",props:{search:{},typeFilter:{},activeOnly:{type:Boolean},perPage:{}},emits:["update:search","update:type-filter","update:active-only","update:per-page","search"],setup(V){const h=[{title:"Printer",value:"printer"},{title:"Scanner",value:"scanner"},{title:"Cash Drawer",value:"cash_drawer"},{title:"Scale",value:"scale"},{title:"Other",value:"other"}],i=[{title:"10",value:10},{title:"25",value:25},{title:"50",value:50},{title:"100",value:100}];return(o,a)=>(p(),w(z,{class:"mb-6"},{default:t(()=>[e(j,null,{default:t(()=>[e(q,null,{default:t(()=>[e(g,{cols:"12",md:"4"},{default:t(()=>[e(I,{"model-value":o.search,placeholder:"Cari nama atau alamat perangkat...","prepend-inner-icon":"mdi-magnify",clearable:"","onUpdate:modelValue":a[0]||(a[0]=d=>o.$emit("update:search",d)),"onClick:clear":a[1]||(a[1]=d=>o.$emit("update:search",""))},null,8,["model-value"])]),_:1}),e(g,{cols:"12",md:"3"},{default:t(()=>[e(H,{"model-value":o.typeFilter,items:h,label:"Filter Tipe",placeholder:"Semua Tipe",clearable:"","onUpdate:modelValue":a[2]||(a[2]=d=>o.$emit("update:type-filter",d))},null,8,["model-value"])]),_:1}),e(g,{cols:"12",md:"2"},{default:t(()=>[e(Ae,{"model-value":o.activeOnly,label:"Hanya Aktif",color:"primary","onUpdate:modelValue":a[3]||(a[3]=d=>o.$emit("update:active-only",d))},null,8,["model-value"])]),_:1}),e(g,{cols:"12",md:"2"},{default:t(()=>[e(H,{"model-value":o.perPage,items:i,label:"Per Halaman","onUpdate:modelValue":a[4]||(a[4]=d=>o.$emit("update:per-page",d))},null,8,["model-value"])]),_:1}),e(g,{cols:"12",md:"1",class:"d-flex align-center"},{default:t(()=>[e(y,{icon:"",color:"primary",onClick:a[5]||(a[5]=d=>o.$emit("search"))},{default:t(()=>[e(u,{icon:"mdi-refresh"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),vt={class:"text-h5 font-weight-semibold"},ft={class:"text-h5 font-weight-semibold"},_t={class:"text-h5 font-weight-semibold"},gt={class:"text-h5 font-weight-semibold"},Nt=G({__name:"StatsCards",props:{totalDevices:{},activeDevices:{},inactiveDevices:{},printerDevices:{}},setup(V){return(h,i)=>(p(),w(q,{class:"mb-6"},{default:t(()=>[e(g,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(z,{class:"h-100"},{default:t(()=>[e(j,{class:"d-flex align-center"},{default:t(()=>[e(E,{size:"44",rounded:"",color:"primary",variant:"tonal",class:"me-3"},{default:t(()=>[e(u,{icon:"mdi-bluetooth"})]),_:1}),r("div",null,[r("h5",vt,v(h.totalDevices),1),i[0]||(i[0]=r("span",{class:"text-sm text-medium-emphasis"},"Total Perangkat",-1))])]),_:1})]),_:1})]),_:1}),e(g,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(z,{class:"h-100"},{default:t(()=>[e(j,{class:"d-flex align-center"},{default:t(()=>[e(E,{size:"44",rounded:"",color:"success",variant:"tonal",class:"me-3"},{default:t(()=>[e(u,{icon:"mdi-check-circle"})]),_:1}),r("div",null,[r("h5",ft,v(h.activeDevices),1),i[1]||(i[1]=r("span",{class:"text-sm text-medium-emphasis"},"Aktif",-1))])]),_:1})]),_:1})]),_:1}),e(g,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(z,{class:"h-100"},{default:t(()=>[e(j,{class:"d-flex align-center"},{default:t(()=>[e(E,{size:"44",rounded:"",color:"error",variant:"tonal",class:"me-3"},{default:t(()=>[e(u,{icon:"mdi-cancel"})]),_:1}),r("div",null,[r("h5",_t,v(h.inactiveDevices),1),i[2]||(i[2]=r("span",{class:"text-sm text-medium-emphasis"},"Tidak Aktif",-1))])]),_:1})]),_:1})]),_:1}),e(g,{cols:"12",sm:"6",md:"3"},{default:t(()=>[e(z,{class:"h-100"},{default:t(()=>[e(j,{class:"d-flex align-center"},{default:t(()=>[e(E,{size:"44",rounded:"",color:"info",variant:"tonal",class:"me-3"},{default:t(()=>[e(u,{icon:"mdi-printer"})]),_:1}),r("div",null,[r("h5",gt,v(h.printerDevices),1),i[3]||(i[3]=r("span",{class:"text-sm text-medium-emphasis"},"Printer",-1))])]),_:1})]),_:1})]),_:1})]),_:1}))}}),U="/api/bluetooth-devices",Gt=()=>{const V=f([]),h=f(!1),i=f(!1),o=f(null),a=f(null),d=f(null),l=f(!1),c=f(!1),s=f(!1),k=f(null),$=f({device_name:"",device_address:"",device_type:"",manufacturer:"",model:"",is_default:!1,is_active:!0,notes:""}),Z=f(""),R=f(""),K=f(!1),ee=f(10),te=f("grid"),O=f(1),J=f({current_page:1,last_page:1,per_page:10,total:0,from:0,to:0}),A=f(""),L=f(""),B=f(""),ae=S(()=>J.value.last_page),le=S(()=>V.value.length),oe=S(()=>V.value.filter(n=>n.is_active).length),se=S(()=>V.value.filter(n=>!n.is_active).length),ie=S(()=>V.value.filter(n=>n.device_type==="printer").length),ne=S(()=>V.value.filter(n=>n.device_type!=="printer").length),re=[{value:"printer",title:"Printer",icon:"mdi-printer"},{value:"scanner",title:"Scanner",icon:"mdi-qrcode-scan"},{value:"cash_drawer",title:"Cash Drawer",icon:"mdi-cash-register"},{value:"scale",title:"Scale",icon:"mdi-scale-bathroom"},{value:"other",title:"Other",icon:"mdi-devices"}],de=S(()=>!0),F=async()=>{var n,_;h.value=!0;try{const m={};R.value&&(m.device_type=R.value),K.value&&(m.active_only=!0);const b=await M.get(U,{params:m});V.value=b.data.data||[],A.value="",L.value=""}catch(m){console.error("Failed to fetch devices:",m),L.value=((_=(n=m.response)==null?void 0:n.data)==null?void 0:_.message)||"Gagal memuat data perangkat bluetooth"}finally{h.value=!1}},ce=async()=>{var n,_;if(he()){i.value=!0,B.value="";try{const m={...$.value};s.value&&k.value?(await M.put(`${U}/${k.value.id_bluetooth_device}`,m),A.value="Perangkat bluetooth berhasil diperbarui"):(await M.post(U,m),A.value="Perangkat bluetooth berhasil ditambahkan"),await F(),X()}catch(m){console.error("Failed to save device:",m),B.value=((_=(n=m.response)==null?void 0:n.data)==null?void 0:_.message)||"Gagal menyimpan perangkat bluetooth"}finally{i.value=!1}}},ue=async n=>{var _,m;o.value=n.id_bluetooth_device;try{await M.delete(`${U}/${n.id_bluetooth_device}`),A.value="Perangkat bluetooth berhasil dihapus",await F()}catch(b){console.error("Failed to delete device:",b),L.value=((m=(_=b.response)==null?void 0:_.data)==null?void 0:m.message)||"Gagal menghapus perangkat bluetooth"}finally{o.value=null,c.value=!1}},me=n=>{k.value=n,c.value=!0},pe=async n=>{var _,m;a.value=n.id_bluetooth_device;try{await M.put(`${U}/${n.id_bluetooth_device}`,{is_active:!n.is_active}),A.value=`Perangkat bluetooth berhasil ${n.is_active?"dinonaktifkan":"diaktifkan"}`,await F()}catch(b){console.error("Failed to toggle device status:",b),L.value=((m=(_=b.response)==null?void 0:_.data)==null?void 0:m.message)||"Gagal mengubah status perangkat bluetooth"}finally{a.value=null}},ve=async n=>{var _,m;try{await M.post(`${U}/${n.id_bluetooth_device}/set-default`),A.value="Perangkat berhasil dijadikan default",await F()}catch(b){console.error("Failed to set default device:",b),L.value=((m=(_=b.response)==null?void 0:_.data)==null?void 0:m.message)||"Gagal menjadikan perangkat default"}},fe=async n=>{var _,m;d.value=n.id_bluetooth_device;try{const b=await M.post(`${U}/${n.id_bluetooth_device}/test-connection`);A.value=b.data.message||"Koneksi berhasil ditest"}catch(b){console.error("Failed to test connection:",b),L.value=((m=(_=b.response)==null?void 0:_.data)==null?void 0:m.message)||"Gagal test koneksi perangkat"}finally{d.value=null}},_e=()=>{s.value=!1,k.value=null,$.value={device_name:"",device_address:"",device_type:"",manufacturer:"",model:"",is_default:!1,is_active:!0,notes:""},l.value=!0},ge=n=>{s.value=!0,k.value=n,$.value={device_name:n.device_name,device_address:n.device_address,device_type:n.device_type,manufacturer:n.manufacturer||"",model:n.model||"",is_default:n.is_default,is_active:n.is_active,notes:n.notes||""},l.value=!0},X=()=>{l.value=!1,B.value=""},he=()=>$.value.device_name.trim()?$.value.device_address.trim()?$.value.device_type?/^([0-9A-Fa-f]{2}[:-]){5}([0-9A-Fa-f]{2})$/.test($.value.device_address)?!0:(B.value="Format alamat MAC tidak valid (contoh: 00:11:22:33:44:55)",!1):(B.value="Tipe perangkat wajib dipilih",!1):(B.value="Alamat perangkat wajib diisi",!1):(B.value="Nama perangkat wajib diisi",!1);return{devices:V,loading:h,saveLoading:i,deleteLoading:o,toggleLoading:a,testLoading:d,dialog:l,deleteDialog:c,editMode:s,selectedDevice:k,formData:$,search:Z,typeFilter:R,activeOnly:K,perPage:ee,viewMode:te,currentPage:O,pagination:J,successMessage:A,errorMessage:L,modalErrorMessage:B,totalPages:ae,totalDevices:le,activeDevices:oe,inactiveDevices:se,printerDevices:ie,otherDevices:ne,deviceTypes:re,canCreateEdit:de,fetchDevices:F,saveDevice:ce,deleteDevice:ue,confirmDelete:me,toggleActiveStatus:pe,setAsDefault:ve,testConnection:fe,openCreateDialog:_e,openEditDialog:ge,closeDialog:X,onSearch:()=>{O.value=1,F()},onFilterChange:()=>{O.value=1,F()},onPageChange:n=>{O.value=n,F()}}};export{jt as B,Nt as _,It as a,Et as b,Ut as c,Gt as u};
